"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["packages_commits_shared_use-update-user-tree-preference_ts-packages_use-hide-footer_use-hide--80c91a"],{1946:(e,t,i)=>{i.d(t,{oj:()=>b,ZH:()=>x});var n=i(74848),a=i(21728),r=i(38621),l=i(96540),o=i(11196),c=i(57352),s=i(40480),d=i(25556),f=i(35311),m=i(78049),u=i(34535),h=i(81355),p=i(71315);let g={"file-tree-row":"DiffFileTree-module__file-tree-row--GJi_6"},y=(0,l.memo)(function(e){let t,i=(0,a.c)(2),{changeType:r}=e;return i[0]!==r?(t=(0,n.jsx)(m.E,{status:r}),i[0]=r,i[1]=t):t=i[1],t});y.displayName="FileStatusIconItem";let x=(0,l.memo)(function(e){let t,i,d,f,m,h,x,v,j,b,_=(0,a.c)(37),{file:w,depth:S,hash:C,onSelect:D}=e,N=(0,l.useRef)(null),I=(0,l.useRef)(null),P=`#diff-${w.diff.pathDigest}`;_[0]===Symbol.for("react.memo_cache_sentinel")?(t={focusRowRef:N,mouseRowRef:N},_[0]=t):t=_[0];let E=(0,u.Z)(t),T=w.diff.totalCommentsCount??0,O=w.diff.highestAnnotationLevel,R=null,k=w.fileName??"This file";switch(T>0&&(k+=` has ${T<10?T:"9+"} ${T>1?"comments":"comment"}`),O){case"WARNING":{let e;k+=`${T>0?" and":""} has warning annotations`,_[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"pl-1 fgColor-attention",children:(0,n.jsx)(r.AlertIcon,{})}),_[1]=e):e=_[1],R=e;break}case"NOTICE":{let e;k+=`${T>0?" and":""} has notice annotations`,_[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"pl-1 fgColor-default",children:(0,n.jsx)(r.InfoIcon,{})}),_[2]=e):e=_[2],R=e;break}case"FAILURE":{let e;k+=`${T>0?" and":""} has failure annotations`,_[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,n.jsx)("div",{className:"pl-1 fgColor-danger",children:(0,n.jsx)(r.XCircleFillIcon,{})}),_[3]=e):e=_[3],R=e}}_[4]!==w.diff.pathDigest||_[5]!==C?(i=()=>{if(N.current&&w.diff.pathDigest===C){let e=window.setTimeout(()=>{let e=p.XC?.getElementById("diff_file_tree")?.parentElement,t=N.current.offsetTop,i=p.cg?.innerHeight??0;e&&(e.scrollTop=t-i/2)},0);return()=>{window.clearTimeout(e)}}},d=[w.diff.pathDigest,C],_[4]=w.diff.pathDigest,_[5]=C,_[6]=i,_[7]=d):(i=_[6],d=_[7]),(0,l.useEffect)(i,d),_[8]!==P?(f=e=>{if(e.metaKey||e.ctrlKey||1===e.button){e.preventDefault(),window.open(P,"_blank");return}},_[8]=P,_[9]=f):f=_[9];let F=f;_[10]!==F||_[11]!==D?(m=e=>{if(e.nativeEvent instanceof KeyboardEvent){if(N?.current!==document.activeElement)return void e.preventDefault();if("Enter"===e.key||" "===e.key){e.preventDefault(),D?.(),I?.current?.click();return}}if(e.nativeEvent instanceof MouseEvent){if(e.metaKey||e.ctrlKey||1===e.button){e.preventDefault(),F(e);return}D?.(),I?.current?.click()}},_[10]=F,_[11]=D,_[12]=m):m=_[12];let $=m,G=w.fileName??"";_[13]!==P||_[14]!==G||_[15]!==F?(h=(0,n.jsx)(c.A,{href:P,muted:!0,ref:I,role:"presentation",className:"fgColor-default",tabIndex:-1,onClick:F,children:G}),_[13]=P,_[14]=G,_[15]=F,_[16]=h):h=_[16];let V=h,A=w.diff.pathDigest===C;return _[17]!==w.diff.changeType?(x=(0,n.jsx)(s.G.LeadingVisual,{children:(0,n.jsx)(y,{changeType:w.diff.changeType})}),_[17]=w.diff.changeType,_[18]=x):x=_[18],_[19]!==V||_[20]!==G||_[21]!==E?(v=E?(0,n.jsx)(o.m,{text:G,direction:"ne",children:V}):V,_[19]=V,_[20]=G,_[21]=E,_[22]=v):v=_[22],_[23]!==R||_[24]!==O||_[25]!==T?(j=(!!T||O)&&(0,n.jsx)(s.G.TrailingVisual,{children:(0,n.jsxs)("div",{className:"d-flex flex-items-center flex-row",children:[!!T&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.CommentIcon,{}),(0,n.jsx)("div",{className:"ml-1 text-bold fgColor-default f6",children:T<10?T:"9+"})]}),R]})}),_[23]=R,_[24]=O,_[25]=T,_[26]=j):j=_[26],_[27]!==S||_[28]!==w.diff.path||_[29]!==w.diff.pathDigest||_[30]!==$||_[31]!==k||_[32]!==j||_[33]!==A||_[34]!==x||_[35]!==v?(b=(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(s.G.Item,{defaultExpanded:!0,"aria-label":k,"aria-level":S,current:A,id:w.diff.path,onSelect:$,ref:N,className:g["file-tree-row"],children:[x,v,j]},w.diff.pathDigest)}),_[27]=S,_[28]=w.diff.path,_[29]=w.diff.pathDigest,_[30]=$,_[31]=k,_[32]=j,_[33]=A,_[34]=x,_[35]=v,_[36]=b):b=_[36],b});function v(e){let t,i,r,o,c,f,m,h,p,g,y,x,b=(0,a.c)(43);b[0]!==e?({directory:t,depth:o,leadingPath:c,sortByDiffOrder:r,...i}=e,b[0]=e,b[1]=t,b[2]=i,b[3]=r,b[4]=o,b[5]=c):(t=b[1],i=b[2],r=b[3],o=b[4],c=b[5]);let _=void 0===o?0:o,w=void 0===c?"":c,S=w?`${w}/`:"",C=l.useRef(null),D=l.useRef(null);b[6]===Symbol.for("react.memo_cache_sentinel")?(f={focusRowRef:D,mouseRowRef:C},b[6]=f):f=b[6];let N=(0,u.Z)(f);if(!t.files.length&&1===t.directories.length){let e,a;if(b[7]!==_||b[8]!==t.directories||b[9]!==t.name||b[10]!==i||b[11]!==S||b[12]!==r){let a;b[14]!==_||b[15]!==t.name||b[16]!==i||b[17]!==S||b[18]!==r?(a=e=>(0,n.jsx)(v,{depth:0===_?1:_,directory:e,leadingPath:`${S}${t.name}`,sortByDiffOrder:r,...i},e.path),b[14]=_,b[15]=t.name,b[16]=i,b[17]=S,b[18]=r,b[19]=a):a=b[19],e=t.directories.map(a),b[7]=_,b[8]=t.directories,b[9]=t.name,b[10]=i,b[11]=S,b[12]=r,b[13]=e}else e=b[13];return b[20]!==e?(a=(0,n.jsx)(n.Fragment,{children:e}),b[20]=e,b[21]=a):a=b[21],a}b[22]!==_||b[23]!==t||b[24]!==i||b[25]!==r?(m=function(){return(0,n.jsx)(j,{directory:t,depth:_,sortByDiffOrder:r,...i})},b[22]=_,b[23]=t,b[24]=i,b[25]=r,b[26]=m):m=b[26];let I=m;if(0===_){let e;return b[27]!==I?(e=I(),b[27]=I,b[28]=e):e=b[28],e}b[29]===Symbol.for("react.memo_cache_sentinel")?(h=(0,n.jsx)(s.G.LeadingVisual,{children:(0,n.jsx)(s.G.DirectoryIcon,{})}),b[29]=h):h=b[29];let P=`${S}${t.name}`;return b[30]!==P?(p=(0,n.jsx)("span",{ref:C,children:P}),b[30]=P,b[31]=p):p=b[31],b[32]!==t.name||b[33]!==S||b[34]!==N?(g=N&&(0,n.jsx)(d.m,{"data-testid":`${t.name}-directory-item-tooltip`,id:`${t.name}-directory-item-tooltip`,contentRef:D,"aria-label":`${S}${t.name}`,open:!0,direction:"ne"}),b[32]=t.name,b[33]=S,b[34]=N,b[35]=g):g=b[35],b[36]!==I?(y=(0,n.jsx)(s.G.SubTree,{children:I()}),b[36]=I,b[37]=y):y=b[37],b[38]!==t.path||b[39]!==p||b[40]!==g||b[41]!==y?(x=(0,n.jsxs)(s.G.Item,{ref:D,defaultExpanded:!0,id:t.path,children:[h,p,g,y]},t.path),b[38]=t.path,b[39]=p,b[40]=g,b[41]=y,b[42]=x):x=b[42],x}let j=(0,l.memo)(function(e){let t,i,r=(0,a.c)(4);if(r[0]!==e){let{directory:i,fileNodeRenderer:a,sortByDiffOrder:l,depth:o,...c}=e,s=void 0===o?0:o,d=i.files.map(_).concat(i.directories.map(w));l?d.sort(S):d.sort(C),t=d.map(e=>"file"!==e.pathType?(0,n.jsx)(v,{depth:s+1,directory:e.node,fileNodeRenderer:a,sortByDiffOrder:l,...c},e.path):a?a({...c,file:e.node,depth:s+1}):(0,n.jsx)(x,{depth:s+1,file:e.node,...c},e.path)),r[0]=e,r[1]=t}else t=r[1];return r[2]!==t?(i=(0,n.jsx)(n.Fragment,{children:t}),r[2]=t,r[3]=i):i=r[3],i}),b=(0,l.memo)(function(e){let t,i,r,l,o,c,d,m,u=(0,a.c)(17);u[0]!==e?({diffs:i,fileNodeRenderer:r,sortByDiffOrder:o,className:t,...l}=e,u[0]=e,u[1]=t,u[2]=i,u[3]=r,u[4]=l,u[5]=o):(t=u[1],i=u[2],r=u[3],l=u[4],o=u[5]),u[6]!==i?(c=(0,f.xY)(i),u[6]=i,u[7]=c):c=u[7];let p=c,{selectedPathDigest:g}=(0,h.U)();return u[8]!==r||u[9]!==l||u[10]!==p||u[11]!==g||u[12]!==o?(d=(0,n.jsx)(v,{directory:p,fileNodeRenderer:r,sortByDiffOrder:o,...l,hash:g}),u[8]=r,u[9]=l,u[10]=p,u[11]=g,u[12]=o,u[13]=d):d=u[13],u[14]!==t||u[15]!==d?(m=(0,n.jsx)(s.G,{"aria-label":"File Tree",className:t,children:d}),u[14]=t,u[15]=d,u[16]=m):m=u[16],m});try{x.displayName||(x.displayName="File")}catch{}try{v.displayName||(v.displayName="Directory")}catch{}try{j.displayName||(j.displayName="DirectoryRendering")}catch{}try{b.displayName||(b.displayName="DiffFileTree")}catch{}function _(e){return{path:e.filePath,pathType:"file",node:e,sortOrder:e.sortOrder}}function w(e){return{path:e.path,pathType:"directory",node:e,sortOrder:e.sortOrder}}function S(e,t){return e.sortOrder-t.sortOrder}function C(e,t){return(0,f.wH)(e.path,t.path)}},8624:(e,t,i)=>{i.d(t,{L:()=>c});var n=i(74848),a=i(21728),r=i(38621),l=i(26108),o=i(34164);let c=i(96540).forwardRef((e,t)=>{let i,c,s,d=(0,a.c)(17),{expanded:f,testid:m,ariaLabel:u,ariaControls:h,onToggleExpanded:p,alignment:g,dataHotkey:y,className:x,size:v,tooltipDirection:j,variant:b}=e,_=f?`collapse-${m}`:`expand-${m}`,w=f?"left"===g?r.SidebarExpandIcon:r.SidebarCollapseIcon:"left"===g?r.SidebarCollapseIcon:r.SidebarExpandIcon;d[0]!==p?(i=e=>{p(e)},d[0]=p,d[1]=i):i=d[1];let S=b??"invisible";return d[2]!==x?(c=(0,o.$)(x,"fgColor-muted"),d[2]=x,d[3]=c):c=d[3],d[4]!==h||d[5]!==u||d[6]!==y||d[7]!==f||d[8]!==t||d[9]!==v||d[10]!==_||d[11]!==w||d[12]!==i||d[13]!==S||d[14]!==c||d[15]!==j?(s=(0,n.jsx)(l.K,{"aria-label":u,tooltipDirection:j,ref:t,"data-testid":_,"aria-expanded":f,"aria-controls":h,icon:w,"data-hotkey":y,onClick:i,variant:S,size:v,className:c}),d[4]=h,d[5]=u,d[6]=y,d[7]=f,d[8]=t,d[9]=v,d[10]=_,d[11]=w,d[12]=i,d[13]=S,d[14]=c,d[15]=j,d[16]=s):s=d[16],s});c.displayName="ExpandButton"},27028:(e,t,i)=>{i.d(t,{G:()=>U,Q:()=>V});var n=i(74848),a=i(21728),r=i(38621),l=i(5524),o=i(94236),c=i(26108),s=i(21373),d=i(29295),f=i(96540),m=i(21067),u=i(25407),h=i(76648),p=i(96379);function g(e){return!e.dismissed}function y(e){let t,i=(0,a.c)(5),n=function(){let e,t,i=(0,a.c)(5),n=(0,h.B)();if(!n){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],i[0]=e):e=i[0],e}i[1]!==n.userNotices?(e=n.userNotices??[],i[1]=n.userNotices,i[2]=e):e=i[2];let r=e;return i[3]!==r?(t=r.filter(g),i[3]=r,i[4]=t):t=i[4],t}();if(i[0]!==n||i[1]!==e){let a;i[3]!==e?(a=t=>t.name===e,i[3]=e,i[4]=a):a=i[4],t=n.filter(a),i[0]=n,i[1]=e,i[2]=t}else t=i[2];return 0===t.length}var x=i(70719);let v={PopoverContainer:"DiffCompactLinesPopover-module__PopoverContainer--A4URR",PopoverContent:"DiffCompactLinesPopover-module__PopoverContent--HUydq",Heading:"DiffCompactLinesPopover-module__Heading--hFmwp"};var j=i(34164);let b="compact_diff_lines";function _(){let e,t,i,r,l,o,c,h,g,_,C=(0,a.c)(19),D=y(b),{dismissNotice:N}=function(e){let t,i,n=(0,a.c)(5),r=y(e);n[0]!==r||n[1]!==e?(t=()=>{(0,m.M3)()&&!r&&(0,p.DI)((0,u.VB1)({noticeName:e}),{method:"POST"})},n[0]=r,n[1]=e,n[2]=t):t=n[2];let l=t;return n[3]!==l?(i={dismissNotice:l},n[3]=l,n[4]=i):i=n[4],i}(b);C[0]===Symbol.for("react.memo_cache_sentinel")?(e={onSuccess:S,onError:w},C[0]=e):e=C[0];let{mutate:I}=(0,x.U)(e),[P,E]=(0,f.useState)(!0);C[1]!==N||C[2]!==I?(t=()=>{I({lineSpacing:"compact"}),E(!1),N()},C[1]=N,C[2]=I,C[3]=t):t=C[3];let T=t;C[4]!==N?(i=()=>{E(!1),N()},C[4]=N,C[5]=i):i=C[5];let O=i;return D?null:(C[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,j.$)("d-flex flex-column gap-2",v.PopoverContent),l=(0,n.jsx)("h2",{className:v.Heading,children:"Customizable line height"}),o=(0,n.jsx)("p",{children:"The default line height has been increased for improved accessibility. You can choose to enable a more compact line height from the view settings menu."}),C[6]=r,C[7]=l,C[8]=o):(r=C[6],l=C[7],o=C[8]),C[9]!==T?(c=(0,n.jsx)(s.Q,{onClick:T,children:"Enable compact line height"}),C[9]=T,C[10]=c):c=C[10],C[11]!==O?(h=(0,n.jsx)(s.Q,{onClick:O,variant:"invisible",children:"Dismiss"}),C[11]=O,C[12]=h):h=C[12],C[13]!==c||C[14]!==h?(g=(0,n.jsxs)(d.A.Content,{className:r,children:[l,o,(0,n.jsxs)("div",{className:"d-flex gap-2 flex-row w-full flex-wrap",children:[c,h]})]}),C[13]=c,C[14]=h,C[15]=g):g=C[15],C[16]!==P||C[17]!==g?(_=(0,n.jsx)(d.A,{open:P,caret:"top-right",className:v.PopoverContainer,children:g}),C[16]=P,C[17]=g,C[18]=_):_=C[18],_)}function w(){}function S(){}try{_.displayName||(_.displayName="DiffCompactLinesPopover")}catch{}var C=i(79472);function D(e){let t,i,r,o,c,s=(0,a.c)(16),{whitespacePreferenceAvailable:d,lineSpacingPreferenceAvailable:f,defaultHideWhitespace:m,onUpdateWhitespace:u,reloadOnChange:h}=e,p=void 0===d||d,g=void 0===f||f,{data:y}=(0,C.ID)(),v=(0,C.Qn)(void 0!==m&&m);s[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:I,onError:N},s[0]=t):t=s[0];let{mutate:j}=(0,x.U)(t);s[1]!==v||s[2]!==u||s[3]!==h?(i=()=>{(0,C.bJ)("w",v?"0":"1"),u?.(!v),void 0!==h&&h()},s[1]=v,s[2]=u,s[3]=h,s[4]=i):i=s[4];let b=i;return y&&(p||g)?(s[5]!==v||s[6]!==b||s[7]!==p?(r=p&&(0,n.jsx)(l.l.Item,{selected:v,onSelect:b,children:"Hide whitespace"}),s[5]=v,s[6]=b,s[7]=p,s[8]=r):r=s[8],s[9]!==y||s[10]!==g||s[11]!==j?(o=g&&(0,n.jsx)(l.l.Item,{selected:"compact"===y.lineSpacing,onSelect:()=>j({lineSpacing:"compact"===y.lineSpacing?"relaxed":"compact"}),children:"Compact line height"}),s[9]=y,s[10]=g,s[11]=j,s[12]=o):o=s[12],s[13]!==r||s[14]!==o?(c=(0,n.jsxs)(l.l.Group,{"aria-label":"Format",selectionVariant:"multiple",variant:"subtle",children:[r,o]}),s[13]=r,s[14]=o,s[15]=c):c=s[15],c):null}function N(){}function I(){}try{D.displayName||(D.displayName="DiffLinePresentationToggles")}catch{}function P(e){let t,i,r,o,c,s,d,f=(0,a.c)(17),{reloadOnChange:m}=e,u=void 0!==m&&m,{data:h}=(0,C.ID)(),p=h?.splitPreference;f[0]===Symbol.for("react.memo_cache_sentinel")?(t={onSuccess:T,onError:E},f[0]=t):t=f[0];let{mutate:g}=(0,x.U)(t);f[1]===Symbol.for("react.memo_cache_sentinel")?(i=(0,n.jsx)(l.l.GroupHeading,{children:"Layout"}),f[1]=i):i=f[1];let y="unified"===p;f[2]!==u||f[3]!==g?(r=()=>{g({splitPreference:"unified"}),(0,C.bJ)("diff","unified"),u&&window.location.reload()},f[2]=u,f[3]=g,f[4]=r):r=f[4],f[5]!==y||f[6]!==r?(o=(0,n.jsx)(l.l.Item,{selected:y,onSelect:r,children:"Unified"}),f[5]=y,f[6]=r,f[7]=o):o=f[7];let v="split"===p;return f[8]!==u||f[9]!==g?(c=()=>{g({splitPreference:"split"}),(0,C.bJ)("diff","split"),u&&window.location.reload()},f[8]=u,f[9]=g,f[10]=c):c=f[10],f[11]!==v||f[12]!==c?(s=(0,n.jsx)(l.l.Item,{selected:v,onSelect:c,children:"Split"}),f[11]=v,f[12]=c,f[13]=s):s=f[13],f[14]!==o||f[15]!==s?(d=(0,n.jsxs)(l.l.Group,{selectionVariant:"single",children:[i,o,s]}),f[14]=o,f[15]=s,f[16]=d):d=f[16],d}function E(){}function T(){}try{P.displayName||(P.displayName="DiffViewPreferenceToggle")}catch{}var O=i(18799);function R(){let e,t,i,r=(0,a.c)(7),{data:o}=(0,C.ID)();r[0]===Symbol.for("react.memo_cache_sentinel")?(e={onSuccess:F,onError:k},r[0]=e):e=r[0];let{mutate:c}=(0,x.U)(e);if(!o)return null;let s=o.commentsPreference===O.sI.Collapsed;return r[1]!==s||r[2]!==c?(t=()=>c({commentsPreference:s?O.sI.Visible:O.sI.Collapsed}),r[1]=s,r[2]=c,r[3]=t):t=r[3],r[4]!==s||r[5]!==t?(i=(0,n.jsx)(l.l.Group,{"aria-label":"Comments",selectionVariant:"single",children:(0,n.jsx)(l.l.Item,{role:"menuitemcheckbox",selected:s,onSelect:t,children:"Minimize comments"})}),r[4]=s,r[5]=t,r[6]=i):i=r[6],i}function k(){}function F(){}try{R.displayName||(R.displayName="DiffCommentsPreferenceToggle")}catch{}var $=i(30459);let G=["layout","comments","whitespace","line-spacing"];function V(e){let t,i,r,o,c,s,d,f,m,u=(0,a.c)(29),{additionalPreferences:h,defaultHideWhitespace:p,enabledDiffViewSettings:g,onUpdateWhitespace:y,reloadOnSplitPreferenceChange:x,reloadOnWhitespaceChange:v}=e,j=void 0===g?G:g,b=void 0!==x&&x,_=void 0!==v&&v;u[0]!==j?(t=j.includes("layout")&&j.includes("comments"),u[0]=j,u[1]=t):t=u[1];let w=t;u[2]!==j?(i=j.includes("line-spacing")||j.includes("whitespace"),u[2]=j,u[3]=i):i=u[3];let S=i;u[4]!==j||u[5]!==S?(r=S&&(j.includes("comments")||j.includes("layout")),u[4]=j,u[5]=S,u[6]=r):r=u[6];let C=r;return u[7]!==j||u[8]!==b?(o=j.includes("layout")&&(0,n.jsx)(P,{reloadOnChange:b}),u[7]=j,u[8]=b,u[9]=o):o=u[9],u[10]!==w?(c=w&&(0,n.jsx)(l.l.Divider,{}),u[10]=w,u[11]=c):c=u[11],u[12]!==j?(s=j.includes("comments")&&(0,n.jsx)(R,{}),u[12]=j,u[13]=s):s=u[13],u[14]!==C?(d=C&&(0,n.jsx)(l.l.Divider,{}),u[14]=C,u[15]=d):d=u[15],u[16]!==p||u[17]!==j||u[18]!==y||u[19]!==_||u[20]!==S?(f=S?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(D,{defaultHideWhitespace:p,lineSpacingPreferenceAvailable:j.includes("line-spacing"),whitespacePreferenceAvailable:j.includes("whitespace"),onUpdateWhitespace:y,reloadOnChange:_?A:void 0})}):null,u[16]=p,u[17]=j,u[18]=y,u[19]=_,u[20]=S,u[21]=f):f=u[21],u[22]!==h||u[23]!==d||u[24]!==f||u[25]!==o||u[26]!==c||u[27]!==s?(m=(0,n.jsxs)(n.Fragment,{children:[o,c,s,d,f,h]}),u[22]=h,u[23]=d,u[24]=f,u[25]=o,u[26]=c,u[27]=s,u[28]=m):m=u[28],m}function A(){return window.location.reload()}function U(e){let t,i,s,d,f,m,u=(0,a.c)(19),{additionalPreferences:h,invisible:p,defaultHideWhitespace:g,enabledDiffViewSettings:y,onUpdateWhitespace:x,reloadOnSplitPreferenceChange:v,reloadOnWhitespaceChange:j,small:b}=e,w=void 0===y?G:y,S=void 0!==v&&v,C=void 0!==j&&j,{sendAnalyticsEvent:D}=(0,$.s)();u[0]!==D?(t=()=>{D("diff_view.settings.open","DIFF_VIEW_SETTINGS_BUTTON")},u[0]=D,u[1]=t):t=u[1];let N=t,I=b?"small":"medium",P=void 0===p||p?"invisible":"default";return u[2]!==N||u[3]!==I||u[4]!==P?(i=(0,n.jsx)(o.W.Anchor,{children:(0,n.jsx)(c.K,{"aria-label":"Open diff view settings",icon:r.GearIcon,size:I,variant:P,onClick:N})}),u[2]=N,u[3]=I,u[4]=P,u[5]=i):i=u[5],u[6]!==h||u[7]!==g||u[8]!==w||u[9]!==x||u[10]!==S||u[11]!==C?(s=(0,n.jsx)(o.W.Overlay,{children:(0,n.jsx)(l.l,{children:(0,n.jsx)(V,{additionalPreferences:h,defaultHideWhitespace:g,enabledDiffViewSettings:w,onUpdateWhitespace:x,reloadOnSplitPreferenceChange:S,reloadOnWhitespaceChange:C})})}),u[6]=h,u[7]=g,u[8]=w,u[9]=x,u[10]=S,u[11]=C,u[12]=s):s=u[12],u[13]!==i||u[14]!==s?(d=(0,n.jsxs)(o.W,{children:[i,s]}),u[13]=i,u[14]=s,u[15]=d):d=u[15],u[16]===Symbol.for("react.memo_cache_sentinel")?(f=(0,n.jsx)(_,{}),u[16]=f):f=u[16],u[17]!==d?(m=(0,n.jsxs)(n.Fragment,{children:[d,f]}),u[17]=d,u[18]=m):m=u[18],m}try{V.displayName||(V.displayName="DiffViewSettingsMenuContent")}catch{}try{U.displayName||(U.displayName="DiffViewSettings")}catch{}},70719:(e,t,i)=>{i.d(t,{U:()=>s});var n=i(21728),a=i(96379),r=i(97665),l=i(94747),o=i(79472),c=i(21067);function s(e){let t,i,a,c,s=(0,n.c)(10),{onSuccess:f,onError:m}=e,u=(0,r.jE)();return s[0]!==u?(t=async e=>{u.setQueryData((0,o.w$)(),t=>({...t,...e}))},s[0]=u,s[1]=t):t=s[1],s[2]!==f?(i=()=>{f()},s[2]=f,s[3]=i):i=s[3],s[4]!==m?(a=e=>{m(e)},s[4]=m,s[5]=a):a=s[5],s[6]!==t||s[7]!==i||s[8]!==a?(c={mutationFn:d,onMutate:t,onSuccess:i,onError:a},s[6]=t,s[7]=i,s[8]=a,s[9]=c):c=s[9],(0,l.n)(c)}async function d(e){let{commentsPreference:t,lineSpacing:i,splitPreference:n}=e;if(!(0,c.M3)())return;let r={};t&&(r={...r,commentsPreference:t}),i&&(r={...r,lineSpacing:i}),n&&(r={...r,diff:n});let l=await (0,a.Sr)("/users/diffview",{method:"POST",headers:{Accept:"application/json"},body:r}),o=await l.json();if(l.ok)return o;throw Error(o.error||"Unknown error occurred",{cause:l.status})}},70843:(e,t,i)=>{i.d(t,{L:()=>a});var n=i(96540);function a(e){(0,n.useEffect)(()=>{if(!e)return;let t=document.querySelector(".footer");if(t)return t.hidden=!0,()=>{t.hidden=!1}},[e])}},71833:(e,t,i)=>{i.d(t,{B:()=>r});var n=i(25407),a=i(96379);async function r(e,t){if(!t)return;let i=new FormData;i.set("file_tree_visible",e?"true":"false"),(0,a.DI)((0,n.h6D)(t),{method:"PUT",body:i,headers:{Accept:"application/json"}})}},78252:(e,t,i)=>{i.d(t,{$:()=>o});var n=i(74848),a=i(38621),r=i(5524),l=i(34720);let o=e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.l.Divider,{}),(0,n.jsx)(l.t,{eventContext:{prx:!0},leadingVisual:(0,n.jsx)(a.CopilotIcon,{}),fileDiffReference:e.copilotChatReference})]});try{o.displayName||(o.displayName="CopilotDiffChatBlobActionsMenuItems")}catch{}},81355:(e,t,i)=>{i.d(t,{U:()=>o});var n=i(21728),a=i(96540),r=i(61583),l=i(71315);function o(){let e,t,i,o,c=(0,n.c)(6),[s,d]=(0,a.useState)("");c[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{d(((0,r.pd)(l.fV.hash??"")??"").replace("diff-",""))},c[0]=e):e=c[0];let f=e;c[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>(window.addEventListener("hashchange",f),f(),()=>{window.removeEventListener("hashchange",f)}),i=[f],c[1]=t,c[2]=i):(t=c[1],i=c[2]),(0,a.useEffect)(t,i);let m=s?`diff-${s}`:"";return c[3]!==s||c[4]!==m?(o={selectedPathDigest:s,selectedFullDiffHash:m,setSelectedHash:d},c[3]=s,c[4]=m,c[5]=o):o=c[5],o}}}]);
//# sourceMappingURL=packages_commits_shared_use-update-user-tree-preference_ts-packages_use-hide-footer_use-hide--80c91a-5ef7ee75a7c9.js.map