"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["copilot-immersive-v1","dashboard-lists","vendors-node_modules_github_catalyst_lib_index_js-node_modules_swc_helpers_esm__class_static_-5988f50","vendors-node_modules_github_catalyst_lib_index_js-node_modules_swc_helpers_esm__class_static_-5988f51","vendors-node_modules_gsap_ScrambleTextPlugin_js-node_modules_motion_dist_es_framer-motion_dis-c68318"],{11891:(e,t,a)=>{var s,n,r,i=a(27744),o=a(70103),l=a(40548),c=a(74848),u=a(21728);function d(e){let t,a=(0,u.c)(2);return a[0]!==e.children?(t=(0,c.jsx)(c.Fragment,{children:e.children}),a[0]=e.children,a[1]=t):t=a[1],t}try{d.displayName||(d.displayName="App")}catch{}var m=a(47865),h=a(37294),p=a(96540),_=a(2635),D=a(60460),g=a(47789),f=a(25641),x=a(42312),C=a(79634),y=a(30721),v=a(94195),b=a(18312),j=a(1747),S=a(78328),E=a(53419),N=a(84078),I=a(73077);let w={container:"ImmersiveDisabled-module__container--MY4uP",content:"ImmersiveDisabled-module__content--ZhI_r",footer:"ImmersiveDisabled-module__footer--PVto2",bannerContainer:"ImmersiveDisabled-module__bannerContainer--QHoXa"};function F(){let e,t,a=(0,u.c)(2);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("div",{className:w.content,children:(0,c.jsx)(S.A,{})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsxs)("div",{className:w.container,children:[e,(0,c.jsx)("div",{className:w.footer,children:(0,c.jsx)("div",{className:w.bannerContainer,children:(0,c.jsx)(N.l,{variant:"upsell",title:"Copilot is disabled",hideTitle:!0,description:"Copilot on GitHub is currently disabled by your organization.",primaryAction:(0,c.jsx)(I.z,{as:"a",href:"https://github.com/settings/copilot",onClick:A,children:"Settings"})})})})]}),a[1]=t):t=a[1],t}function A(){return(0,E.BI)("dotcom_chat.activate",{target:"NO_ACCESS_SETTING_DISABLED",mode:"immersive"})}try{F.displayName||(F.displayName="ImmersiveDisabled")}catch{}var T=a(87687),k=a(27359),R=a(38627),B=a(35247),O=a(23657),P=a(84646),L=a(27912),M=a(88934),U=a(62828),z=a(21502),$=a(38598),W=a(91095),V=a(79184),G=a(8939),H=a(33592),q=a(14521),K=a(79064),Q=a(68637),J=a(69599),Y=a(75202),X=a(72303),Z=a(17485),ee=a(7812);function et(){let e,t=(0,u.c)(2),a=(0,M.zy)().pathname;return t[0]!==a?(e=a.includes("/share/"),t[0]=a,t[1]=e):e=t[1],e}function ea(){let{threadID:e}=(0,M.g)();return e??null}function es(e,t){let a,s,n=(0,u.c)(17),r=(0,_.Pk)(),{currentReferences:i,context:o}=r,l=(0,H.b)(),{reloadQuota:c}=(0,V.xR)();n[0]!==r?(a=(0,X.W)(r),n[0]=r,n[1]=a):a=n[1];let d=a,{updateItem:m}=(0,j.xx)(),h=et(),p=ea(),{activeCopilotSpaceId:D}=(0,Z.C)();return n[2]!==o||n[3]!==i||n[4]!==e||n[5]!==D||n[6]!==h||n[7]!==l||n[8]!==t||n[9]!==c||n[10]!==r.customInstructions||n[11]!==r.model||n[12]!==r.skillOptions||n[13]!==d||n[14]!==p||n[15]!==m?(s=async(a,s,n,u)=>{let _=void 0!==n&&n;if(c("handle_message_submit"),""===a.trim())return;_&&l.clearAllReferences();let g=_?[]:i;for(let e of g){let a=(0,ee.oR)({ref:e,messageIndex:t});null!=a&&m({...a,isUserEdited:!1})}let f={thread:d,content:a,references:[...g,...s||[]],topic:e.current,context:o,customInstructions:r.customInstructions,model:u||r.model,customCopilotId:D,skillOptions:r.skillOptions};if(h){let e=await l.continueSharedThread(p);if(e){let{thread:t,messages:a}=e,s=a.at(-1)?.id;await l.sendChatMessage({...f,thread:t,parentMessageId:s})}}else await l.sendChatMessage(f)},n[2]=o,n[3]=i,n[4]=e,n[5]=D,n[6]=h,n[7]=l,n[8]=t,n[9]=c,n[10]=r.customInstructions,n[11]=r.model,n[12]=r.skillOptions,n[13]=d,n[14]=p,n[15]=m,n[16]=s):s=n[16],s}var en=a(70257),er=a(84802);function ei(){let e=(0,_.A3)("messagesLoading")?.missingOrgIds,t=(0,_.A3)("ssoOrganizations"),a=e?.map(e=>{let a=t?.find(t=>t.id===String(e));return a?.login})?.filter(e=>!!e);return{needsSsoAuthentication:!!(e&&e.length>0),ssoOrgNames:a||[]}}var eo=a(38621);let el={chatInputContainer:"Layout-module__chatInputContainer--ty1RG"};var ec=a(97315);let eu={notificationsSection:"NotificationsSection-module__notificationsSection--K0_2c",spaceBannerContainer:"NotificationsSection-module__spaceBannerContainer--G0_MH",banner:"NotificationsSection-module__banner--a4C8F"},ed={container:"FreeChatExceededBanner-module__container--iiSMU"};function em(){let e,t,a=(0,u.c)(3),{resetDate:s}=(0,V.xR)(),n=`You have reached your free plan limit. Limit resets on ${s}.`;a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(I.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:eh,children:"Upgrade"}),a[0]=e):e=a[0];let r=e;return a[1]!==n?(t=(0,c.jsx)("div",{className:ed.container,children:(0,c.jsx)(N.l,{variant:"upsell",title:"Limit reached",description:n,hideTitle:!0,primaryAction:r})}),a[1]=n,a[2]=t):t=a[2],t}function eh(){(0,E.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{em.displayName||(em.displayName="FreeChatExceededBanner")}catch{}var ep=a(51213);let e_={container:"QuotaExceededBanner-module__container--ETlPC"};function eD(){let e,t,a,s,n=(0,u.c)(12),{isLicensedLimited:r,chatQuotaRemaining:i,premiumChatQuotaRemaining:o,premiumInteractionsQuotaExceeded:l,overagesEnabled:c}=(0,V.xR)(),[d,m]=(0,p.useState)(eg);n[0]!==i||n[1]!==c||n[2]!==l?(e=()=>{if(B.W.premiumRequestQuotasEnabled&&void 0!==i){let e=K.Jt.getQuotaExceededBannerFlag();B.W.premiumRequestQuotasEnabled&&!c&&l?null===e?(K.Jt.setQuotaExceededBannerFlag(!0),m(!0)):m(e):(K.Jt.removeQuotaExceededBannerFlag(),m(!1))}},n[0]=i,n[1]=c,n[2]=l,n[3]=e):e=n[3],n[4]!==i||n[5]!==c||n[6]!==o||n[7]!==l?(t=[i,o,c,l],n[4]=i,n[5]=c,n[6]=o,n[7]=l,n[8]=t):t=n[8],(0,p.useEffect)(e,t),n[9]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{K.Jt.setQuotaExceededBannerFlag(!1),m(!1)},n[9]=a):a=n[9];let h=a,_=d&&!r&&void 0!==i&&B.W.premiumRequestQuotasEnabled;return n[10]!==_?(s={visible:_,onDismiss:h},n[10]=_,n[11]=s):s=n[11],s}function eg(){return K.Jt.getQuotaExceededBannerFlag()??!1}function ef(e){let t,a,s=(0,u.c)(9),{onDismiss:n}=e,{plan:r,canUpgradePlan:i,resetDate:o}=(0,V.xR)(),l=null,d=null;if(r===ep.UH.IndividualFree){let e;l=`You have used all requests available this month. Upgrade your plan to increase your limit. Limit resets on ${o}.`,s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(I.z,{as:"a",href:f.Zs,onClick:ey,children:"Upgrade"}),s[0]=e):e=s[0],d=e}else if(r===ep.UH.IndividualPro||r===ep.UH.IndividualProPlus)if(i){let e;l=`You have used all premium requests available this month. Upgrade your plan to increase your limit. Limit resets on ${o}.`,s[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(I.z,{as:"a",href:f.Zs,onClick:eC,children:"Upgrade"}),s[1]=e):e=s[1],d=e}else{let e;l=`You have used all premium requests available this month. Enable additional requests to get more. Limit resets on ${o}.`,s[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(I.z,{as:"a",href:f.pF,onClick:ex,children:"Enable additional requests"}),s[2]=e):e=s[2],d=e}else(r===ep.UH.Business||r===ep.UH.Enterprise)&&(l=`You have reached your monthly limit for premium requests. Ask your admin to increase your limit. Limit resets on ${o}.`);return s[3]!==n?(t=()=>{n(),(0,E.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_BANNER_DISMISS",mode:"immersive"})},s[3]=n,s[4]=t):t=s[4],s[5]!==l||s[6]!==d||s[7]!==t?(a=(0,c.jsx)("div",{className:e_.container,children:(0,c.jsx)(N.l,{variant:"upsell",title:"Limit reached",description:l,hideTitle:!0,primaryAction:d,onDismiss:t})}),s[5]=l,s[6]=d,s[7]=t,s[8]=a):a=s[8],a}function ex(){(0,E.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_OVERAGES",mode:"immersive"})}function eC(){(0,E.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function ey(){(0,E.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{ef.displayName||(ef.displayName="QuotaExceededBanner")}catch{}var ev=a(57352);let eb=B.W.premiumRequestQuotasEnabled?f.mF:10;function ej(){return K.Jt.getMeterBannerFlag()??!1}function eS(e){let t,a,s,n,r,i=(0,u.c)(18),{onDismiss:o,className:l}=e,{isLicensedLimited:d,canUpgradePlan:m,canPurchaseAdditionalQuota:h,premiumInteractionsQuotaExceeded:p,resetDate:_}=(0,V.xR)(),D=d?`You have used ${100-eb}% of your free requests this month.`:p?`You have used all premium requests available this month. You will be charged per additional premium request until the limit resets on ${_}.`:`You have used ${100-eb}% of your premium responses this month. ${m?"Upgrade to increase your limit.":"Enable additional requests to get more usage after the limit is reached."}`;i[0]!==h||i[1]!==m||i[2]!==p?(t=m&&!p?(0,c.jsx)(I.z,{as:"a",href:f.Zs,onClick:ew,children:"Upgrade"}):h&&!p?(0,c.jsx)(I.z,{as:"a",href:f.pF,onClick:eI,children:"Enable additional requests"}):h&&(0,c.jsx)(I.z,{as:"a",href:f.MB,onClick:eN,children:"Manage billing"}),i[0]=h,i[1]=m,i[2]=p,i[3]=t):t=i[3];let g=t;i[4]!==h||i[5]!==m||i[6]!==p?(a=m&&h&&!p?(0,c.jsx)(ev.A,{as:"a",href:f.Zs,onClick:eE,children:"Enable additional requests"}):null,i[4]=h,i[5]=m,i[6]=p,i[7]=a):a=i[7];let x=a;return i[8]!==o?(s=()=>{o(),(0,E.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_DISMISS",mode:"immersive"})},i[8]=o,i[9]=s):s=i[9],i[10]!==D||i[11]!==g||i[12]!==x||i[13]!==s?(n=(0,c.jsx)(N.l,{variant:"info",title:"Limit reached soon",description:D,hideTitle:!0,primaryAction:g,secondaryAction:x,onDismiss:s}),i[10]=D,i[11]=g,i[12]=x,i[13]=s,i[14]=n):n=i[14],i[15]!==l||i[16]!==n?(r=(0,c.jsx)("div",{className:l,children:n}),i[15]=l,i[16]=n,i[17]=r):r=i[17],r}function eE(){(0,E.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}function eN(){(0,E.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_MANAGE_BILLING",mode:"immersive"})}function eI(){(0,E.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_OVERAGES",mode:"immersive"})}function ew(){(0,E.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{eS.displayName||(eS.displayName="QuotaMeterBanner")}catch{}function eF(){let e,t=(0,u.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(N.l,{title:"Chat is disabled",variant:"warning",description:"Conversation unavailable. The linked space may have been deleted, or you might be signed out of your organization.",hideTitle:!0}),t[0]=e):e=t[0],e}function eA(e){let t,a=(0,u.c)(3),{customCopilot:s}=e,n=(0,M.Zp)();return a[0]!==s||a[1]!==n?(t=s&&(0,c.jsx)(N.l,{title:"Chat is disabled",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue chatting.",hideTitle:!0,primaryAction:(0,c.jsx)(I.z,{as:"a",href:(0,O.Cb)(s),onClick:e=>{e.preventDefault(),n((0,O.Cb)(s))},children:"Edit"})}),a[0]=s,a[1]=n,a[2]=t):t=a[2],t}function eT(){let e,t=(0,u.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(N.l,{title:"Reference size exceeded",variant:"critical",description:"You've exceeded the size limit for this space. Remove some references to continue.",hideTitle:!0,className:"mb-3"}),t[0]=e):e=t[0],e}function ek(e){let t,a,s=(0,u.c)(6),{errorMessages:n,onDismiss:r,className:i}=e,o=void 0===i?"":i;if(0===n.length)return null;if(s[0]!==n){let e=Array.from(new Set(n));t=1===e.length?e[0]:(0,c.jsxs)(c.Fragment,{children:["Errors during attachment upload:",(0,c.jsx)("ul",{style:{paddingLeft:"1.2em"},children:e.map(eR)})]}),s[0]=n,s[1]=t}else t=s[1];let l=t;return s[2]!==o||s[3]!==l||s[4]!==r?(a=(0,c.jsx)(N.l,{variant:"critical",description:l,title:"Error during attachment upload",hideTitle:!0,className:o,onDismiss:r}),s[2]=o,s[3]=l,s[4]=r,s[5]=a):a=s[5],a}function eR(e){return(0,c.jsx)("li",{children:e},e)}try{eF.displayName||(eF.displayName="SpaceDeletedBanner")}catch{}try{eA.displayName||(eA.displayName="SpaceSizeExceededBanner")}catch{}try{eT.displayName||(eT.displayName="ReferenceSizeExceededBanner")}catch{}try{(s=function(){let e,t=(0,u.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(N.l,{title:"Reference not found",variant:"critical",description:"We couldn't access that repository. Make sure it exists and that you have permission to use it.",hideTitle:!0,className:"mb-3"}),t[0]=e):e=t[0],e}).displayName||(s.displayName="AssociatedRepositoryReferenceNotFoundBanner")}catch{}try{ek.displayName||(ek.displayName="UploadErrorBanner")}catch{}let eB={spaceHomepage:"spaceHomepage",customCopilotDisabled:"customCopilotDisabled",customCopilotSizeExceeded:"customCopilotSizeExceeded"};function eO(e,t){let a,s,n=(0,u.c)(9),{isPending:r,data:i,error:o}=(0,P.Ao)(e),l=o instanceof P.i9,c=o instanceof P.OW;if(o&&!l&&!c)throw o;let d=r||l||c||!i?void 0:i;n[0]!==d||n[1]!==e||n[2]!==r||n[3]!==t?(a=function(e,t,a,s){if(e&&!s)return eB.spaceHomepage;if(a)return null;let n=!!t;return e&&!n?eB.customCopilotDisabled:(0,O.Hh)(t)?eB.customCopilotSizeExceeded:null}(e,d,r,t),n[0]=d,n[1]=e,n[2]=r,n[3]=t,n[4]=a):a=n[4];let m=a;return n[5]!==d||n[6]!==r||n[7]!==m?(s={variant:m,customCopilot:d,isLoading:r},n[5]=d,n[6]=r,n[7]=m,n[8]=s):s=n[8],s}try{(n=function(e){let t=(0,u.c)(4),{variant:a,customCopilot:s}=e;switch(a){case eB.customCopilotDisabled:{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(eF,{}),t[0]=e):e=t[0],e}case eB.customCopilotSizeExceeded:{let e;return t[1]!==s?(e=(0,c.jsx)(eA,{customCopilot:s}),t[1]=s,t[2]=e):e=t[2],e}case eB.spaceHomepage:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(c.Fragment,{}),t[3]=e):e=t[3],e}default:return null}}).displayName||(n.displayName="SpaceConversationBanner")}catch{}function eP(){let e,t,a=(0,u.c)(16),{ambientError:s,customCopilots:n,selectedThreadID:r}=(0,_.Pk)(),i=(0,q.G)();a[0]!==i||a[1]!==n?(e=(0,O.JB)(n,i),a[0]=i,a[1]=n,a[2]=e):e=a[2];let o=!!e,{chatQuotaExceeded:l,isLicensedLimited:d}=(0,V.xR)(),{variant:m,customCopilot:h}=eO(i,r),D=(!m||o)&&!(d&&l),g=function(){let e,t,a,s,n=(0,u.c)(10),{isLicensedLimited:r,chatQuotaRemaining:i,premiumChatQuotaRemaining:o,premiumInteractionsQuotaExceeded:l,overagesEnabled:c}=(0,V.xR)(),[d,m]=(0,p.useState)(ej);n[0]!==i||n[1]!==r||n[2]!==c||n[3]!==o||n[4]!==l?(e=()=>{if((r||B.W.premiumRequestQuotasEnabled)&&void 0!==i){let e=K.Jt.getMeterBannerFlag();i>0&&i<=eb||!r&&o>0&&o<=eb||!r&&l&&c?null===e?(K.Jt.setMeterBannerFlag(!0),m(!0)):m(e):(K.Jt.removeMeterBannerFlag(),m(!1))}},t=[r,i,o,c,l],n[0]=i,n[1]=r,n[2]=c,n[3]=o,n[4]=l,n[5]=e,n[6]=t):(e=n[5],t=n[6]),(0,p.useEffect)(e,t),n[7]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{K.Jt.setMeterBannerFlag(!1),m(!1)},n[7]=a):a=n[7];let h=a,_=d&&void 0!==i&&(r||B.W.premiumRequestQuotasEnabled);return n[8]!==_?(s={visible:_,onDismiss:h},n[8]=_,n[9]=s):s=n[9],s}(),f=eD(),x=m===eB.customCopilotDisabled,C=m===eB.customCopilotSizeExceeded,y=D&&s,v=D&&f.visible,b=D&&g.visible,j=!D,S=x||C,E=x||C||y||v||b||j;return a[3]!==s||a[4]!==h||a[5]!==f||a[6]!==g||a[7]!==y||a[8]!==j||a[9]!==v||a[10]!==b||a[11]!==E||a[12]!==x||a[13]!==S||a[14]!==C?(t=E&&(0,c.jsxs)("section",{"aria-label":"Notifications",className:eu.notificationsSection,children:[S&&(0,c.jsxs)("div",{className:eu.spaceBannerContainer,children:[x&&(0,c.jsx)(eF,{}),C&&(0,c.jsx)(eA,{customCopilot:h})]}),y&&(0,c.jsx)(ec.P,{ambientError:s,useLargerBorderRadius:!0}),!S&&(0,c.jsxs)(c.Fragment,{children:[v&&(0,c.jsx)(ef,{onDismiss:f.onDismiss}),b&&(0,c.jsx)(eS,{className:eu.banner,onDismiss:g.onDismiss}),j&&(0,c.jsx)(em,{})]})]}),a[3]=s,a[4]=h,a[5]=f,a[6]=g,a[7]=y,a[8]=j,a[9]=v,a[10]=b,a[11]=E,a[12]=x,a[13]=S,a[14]=C,a[15]=t):t=a[15],t}try{eP.displayName||(eP.displayName="NotificationsSection")}catch{}function eL(e){let t,a,s,n,r,i=(0,u.c)(24),{textAreaRef:o,handleUserSubmit:l,nextMessageIndex:d,chatInputRef:m,isNewConversation:h,onChatCommandChange:p,containerRef:D,slashCommandsEnabled:g}=e,f=(0,_.Pk)(),{chatQuotaExceeded:x,isLicensedLimited:y}=(0,V.xR)(),{needsSsoAuthentication:v}=ei(),b=(0,q.G)(),S=v&&b,E=(0,er.G)(),N=function(){let e,t=(0,u.c)(2),{figmaAuthUrl:a}=(0,C.X)();if(a){if(t[0]!==a){let s=new URL(a,location.origin);s.searchParams.set("return_url",location.pathname+location.search),e=s.toString(),t[0]=a,t[1]=e}else e=t[1];return e}}();i[0]!==d?(t={messageIndex:d},i[0]=d,i[1]=t):t=i[1];let I=(0,U.I)(t),{versionedItems:w,items:F}=(0,j.xx)();if(i[2]!==F){for(let[,e]of(a=new Set,F))"file"===e.type&&a.add(e.name);i[2]=F,i[3]=a}else a=i[3];let A=a,T=!(y&&x)&&!S;return i[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,c.jsx)(eP,{}),i[4]=s):s=i[4],i[5]!==T||i[6]!==m||i[7]!==D||i[8]!==A||i[9]!==N||i[10]!==l||i[11]!==h||i[12]!==E||i[13]!==d||i[14]!==p||i[15]!==I||i[16]!==b||i[17]!==g||i[18]!==f||i[19]!==o||i[20]!==w?(n=T&&(0,c.jsx)(en.V,{modes:[{name:"Chat",supportsMCP:!b,supportsAttachments:!0,supportsModelSwitching:!0,supportsSpaces:!0,supportsAutocompletion:!0,icon:(0,c.jsx)(eo.CommentIcon,{}),placeholder:f.usePlanningIntent&&!f.selectedThreadID?"What would you like to create?":"Ask anything"}],onNewThreadSelected:E,textAreaRef:o,chatInputRef:m,containerRef:D,onSubmit:l,isStreaming:!!f.streamingMessage,size:"large",showPlanningToggle:!f.selectedThreadID,onSelectReference:I,getReferenceVersion:e=>(0,ee.wt)(e,d,w),existingFileNames:A,figmaAuthUrl:N,isNewConversation:h,onChatCommandChange:p,disableSavedUserMessage:!0,slashCommandsEnabled:g}),i[5]=T,i[6]=m,i[7]=D,i[8]=A,i[9]=N,i[10]=l,i[11]=h,i[12]=E,i[13]=d,i[14]=p,i[15]=I,i[16]=b,i[17]=g,i[18]=f,i[19]=o,i[20]=w,i[21]=n):n=i[21],i[22]!==n?(r=(0,c.jsxs)("div",{className:el.chatInputContainer,children:[s,n]}),i[22]=n,i[23]=r):r=i[23],r}try{eL.displayName||(eL.displayName="ChatInputContainer")}catch{}let eM={root:"ConversationView-module__root--k4AIo",container:"ConversationView-module__container--XaY36",footer:"ConversationView-module__footer--xr6HB"};var eU=a(22116),ez=a(63262),e$=a(7104),eW=a(35673),eV=a(87419),eG=a(88392),eH=a(73952),eq=a(88431),eK=a(6551),eQ=a(26108),eJ=a(34164),eY=a(46665),eX=a(59524),eZ=a(88752),e0=a(32744),e1=a(82178),e2=a(94517),e3=a(73010),e4=a(11633),e6=a(31958),e7=a(42983),e5=a(95896),e8=a(82151),e9=a(45244),te=a(52940),tt=a(16946),ta=a(72206),ts=a(98755),tn=a(29731),tr=a(83494),ti=a(31223),to=a(55009);let tl={imageAttachment:"ChatImageAttachment-module__imageAttachment--Kt80m"},tc=e=>{let t,a,s,n,r=(0,u.c)(18),{messageId:i,src:o,alt:l,name:d,mode:m,squareView:h}=e,{openPreviewPane:_,openItem:D,updateItem:g}=(0,j.xx)(),f=`image:${o}`;r[0]!==f||r[1]!==D||r[2]!==_?(t=e=>{e.metaKey||e.ctrlKey||((0,E.BI)("dotcom_chat.activate",{target:"BROWSER_IMAGE_OPENED",mode:"immersive"}),D(f),_(),e.preventDefault())},r[0]=f,r[1]=D,r[2]=_,r[3]=t):t=r[3];let x=t;return r[4]!==l||r[5]!==f||r[6]!==i||r[7]!==d||r[8]!==o||r[9]!==g?(a=()=>{g({altText:l,id:f,messageId:i,name:d,type:"image",url:o})},s=[f,l,i,d,o,g],r[4]=l,r[5]=f,r[6]=i,r[7]=d,r[8]=o,r[9]=g,r[10]=a,r[11]=s):(a=r[10],s=r[11]),(0,p.useEffect)(a,s),r[12]!==l||r[13]!==m||r[14]!==x||r[15]!==h||r[16]!==o?(n=(0,c.jsx)("div",{className:tl.imageAttachment,children:(0,c.jsx)(to.o,{src:o,alt:l,onClick:x,mode:m,useOverlay:!0,squareView:h})}),r[12]=l,r[13]=m,r[14]=x,r[15]=h,r[16]=o,r[17]=n):n=r[17],n},tu=(0,p.memo)(tc);try{tc.displayName||(tc.displayName="ChatImageAttachmentUnmemoized")}catch{}try{tu.displayName||(tu.displayName="ChatImageAttachment")}catch{}let td={chatMessage:"ChatMessage-module__chatMessage--mrG0f",user:"ChatMessage-module__user--D7H_T",editing:"ChatMessage-module__editing--yOYer",content:"ChatMessage-module__content--sWQll",imageGrid:"ChatMessage-module__imageGrid--yEdjI",imageRow:"ChatMessage-module__imageRow--NNiyM",references:"ChatMessage-module__references--Pi5OH",messageArea:"ChatMessage-module__messageArea--gxJTG",userMessage:"ChatMessage-module__userMessage--K0oH6",messageSubthreadIndicator:"ChatMessage-module__messageSubthreadIndicator--fjOXe",actions:"ChatMessage-module__actions--CS2_w",ai:"ChatMessage-module__ai--l6YpD",latest:"ChatMessage-module__latest--AGxtS",actionsPlaceholder:"ChatMessage-module__actionsPlaceholder--gN7Zq",avatar:"ChatMessage-module__avatar--hKTWx",sharedThreadActions:"ChatMessage-module__sharedThreadActions--j7Y3f ChatMessage-module__actions--CS2_w",skillExecutionText:"ChatMessage-module__skillExecutionText--Jbpi1",errorFallback:"ChatMessage-module__errorFallback--h1kRS"};var tm=a(37673);let th={container:"ChatPagingComponent-module__container--HQpDa",disabledButton:"ChatPagingComponent-module__disabledButton--qwjg3",pageIndicator:"ChatPagingComponent-module__pageIndicator--hEqlR"};function tp(e){let t,a,s,n,r,i,o=(0,u.c)(23),{currentPage:l,totalPages:d,onPrev:m,onNext:h,isUserMessage:p}=e,D=(0,_.A3)("isWaitingOnCopilot");if(l<1)throw Error("currentPage must be greater than or equal to 1");if(d<1)throw Error("totalPages must be greater than or equal to 1");if(l>d)throw Error("currentPage must be less than or equal to totalPages");let g=1===l||D,f=l===d||D,x=g?th.disabledButton:"",C=f?th.disabledButton:"";o[0]!==l||o[1]!==p||o[2]!==m||o[3]!==g?(t=()=>{if(g)return;let e=p?"USER_MESSAGE_ACTION_PREVIOUS_RESPONSE":"RESPONSE_ACTION_PREVIOUS_RESPONSE";(0,E.BI)("dotcom_chat.activate",{target:e,mode:"immersive"}),m(l-1)},o[0]=l,o[1]=p,o[2]=m,o[3]=g,o[4]=t):t=o[4];let y=t;o[5]!==l||o[6]!==p||o[7]!==f||o[8]!==h?(a=()=>{if(f)return;let e=p?"USER_MESSAGE_ACTION_NEXT_RESPONSE":"RESPONSE_ACTION_NEXT_RESPONSE";(0,E.BI)("dotcom_chat.activate",{target:e,mode:"immersive"}),h(l+1)},o[5]=l,o[6]=p,o[7]=f,o[8]=h,o[9]=a):a=o[9];let v=a;return o[10]!==y||o[11]!==x?(s=(0,c.jsx)(eQ.K,{variant:"invisible","aria-label":"Previous response",onClick:y,icon:eo.ChevronLeftIcon,className:x}),o[10]=y,o[11]=x,o[12]=s):s=o[12],o[13]!==l||o[14]!==d?(n=(0,c.jsxs)("span",{className:th.pageIndicator,children:[l,"/",d]}),o[13]=l,o[14]=d,o[15]=n):n=o[15],o[16]!==v||o[17]!==C?(r=(0,c.jsx)(eQ.K,{variant:"invisible","aria-label":"Next response",onClick:v,icon:eo.ChevronRightIcon,className:C}),o[16]=v,o[17]=C,o[18]=r):r=o[18],o[19]!==s||o[20]!==n||o[21]!==r?(i=(0,c.jsxs)("div",{className:th.container,"data-testid":"chat-paging-component",children:[s,n,r]}),o[19]=s,o[20]=n,o[21]=r,o[22]=i):i=o[22],i}try{tp.displayName||(tp.displayName="ChatPagingComponent")}catch{}let t_={container:"ClientConfirmations-module__container--rZT37",text:"ClientConfirmations-module__text--KBSlX"};function tD(e){let t,a,s,n=(0,u.c)(5),{authorName:r,clientConfirmations:i}=e,o=i?.[0],l=o?.state;return r=o?.userLogin||r,n[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,eJ.$)("my-1",t_.container),n[0]=t):t=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(eo.CheckIcon,{}),n[1]=a):a=n[1],n[2]!==r||n[3]!==l?(s=(0,c.jsx)("div",{className:t,children:(0,c.jsxs)("span",{className:t_.text,children:[a," ",r," ",l," the action"]})}),n[2]=r,n[3]=l,n[4]=s):s=n[4],s}try{tD.displayName||(tD.displayName="ClientConfirmations")}catch{}var tg=a(80947),tf=a(38447);let tx={container:"UserMessageEdit-module__container--wVL0b",input:"UserMessageEdit-module__input--cgkv0",inputContainer:"UserMessageEdit-module__inputContainer--iXdUm",actions:"UserMessageEdit-module__actions--GxMb3"},tC=e=>{let t,a,s,n,r,i,o,l,d,m,h,D,g,f=(0,u.c)(25),{messageContent:x,onSubmit:C,onCancel:y}=e,v=(0,_.A3)("isWaitingOnCopilot"),[b,j]=(0,p.useState)(x),S=(0,p.useRef)(null),N=(0,p.useRef)(null);f[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{S.current&&(S.current.style.height="auto",S.current.style.height=`${S.current.scrollHeight}px`)},f[0]=t):t=f[0],f[1]!==b?(a=[b],f[1]=b,f[2]=a):a=f[2],(0,p.useEffect)(t,a),f[3]!==b||f[4]!==x||f[5]!==y||f[6]!==C?(n=()=>{if(document.activeElement===N.current)return void s();(0,E.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_SUBMIT",mode:"immersive"}),C(b)},s=()=>{y(),j(x),(0,E.BI)("dotcom_chat.activate",{target:"USER_MESSAGE_EDITING_CANCEL",mode:"immersive"})},f[3]=b,f[4]=x,f[5]=y,f[6]=C,f[7]=s,f[8]=n):(s=f[7],n=f[8]);let I=v?void 0:n;return f[9]!==s||f[10]!==I?(r={"copilot-chat:send-message":I,"github:cancel":s},f[9]=s,f[10]=I,f[11]=r):r=f[11],f[12]===Symbol.for("react.memo_cache_sentinel")?(i=(0,tn.G)("user-message-edit-box"),f[12]=i):i=f[12],f[13]===Symbol.for("react.memo_cache_sentinel")?(o=e=>j(e.target.value),f[13]=o):o=f[13],f[14]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{S.current&&(S.current.style.height="auto",S.current.style.height=`${S.current.scrollHeight}px`)},f[14]=l):l=f[14],f[15]!==b?(d=(0,c.jsx)("div",{className:tx.inputContainer,children:(0,c.jsx)("textarea",{ref:S,autoComplete:"off",autoCorrect:"off",spellCheck:"false","aria-multiline":"true",rows:1,placeholder:"Ask Copilot",value:b,onChange:o,className:tx.input,autoFocus:!0,onInput:l,onFocus:ty})}),f[15]=b,f[16]=d):d=f[16],f[17]===Symbol.for("react.memo_cache_sentinel")?(m=(0,c.jsx)(tr.cQ,{commandId:"github:cancel",ref:N,children:"Cancel"}),f[17]=m):m=f[17],f[18]===Symbol.for("react.memo_cache_sentinel")?(h=(0,tn.G)("user-message-edit-submit"),f[18]=h):h=f[18],f[19]!==v?(D=(0,c.jsxs)("div",{className:tx.actions,children:[m,(0,c.jsx)(tr.cQ,{commandId:"copilot-chat:send-message",showKeybindingHint:!0,variant:"primary",...h,disabled:v,children:"Send"})]}),f[19]=v,f[20]=D):D=f[20],f[21]!==D||f[22]!==r||f[23]!==d?(g=(0,c.jsxs)(tr.tL,{commands:r,className:tx.container,...i,children:[d,D]}),f[21]=D,f[22]=r,f[23]=d,f[24]=g):g=f[24],g};try{tC.displayName||(tC.displayName="UserMessageEdit")}catch{}function ty(e){return e.target.setSelectionRange(0,e.target.value.length)}let tv=({excludeFeedback:e,inputRef:t,isLatestMessage:a,isLatestUserMessage:s,isFirstReply:n,isStreaming:r,parentMessage:i,messageIndex:o,autoOpenPreviewPane:l,...u})=>{let{message:d}=(0,eY.V)(),m=(0,p.useMemo)(()=>(0,f.H2)(d.references??[]),[d.references]),h=(0,H.b)(),D=(0,_.bP)("customCopilots","editingMessage","mode","wrapCodeLines"),g=(0,ta.tD)(),{items:x,versionedItems:C,openItem:y,removeItems:v,getOpenItems:b,openItemsBeforeSubthreadChange:S,setOpenItemsBeforeSubthreadChange:N,enableLoadingState:I,disableLoadingState:w}=(0,j.xx)(),F=(0,U.I)({messageIndex:o,messageId:d.id,messageTimestamp:d.createdAt}),A=(0,p.useCallback)(()=>{let e=g(),t=[],a=d;for(;null!=a;)t.push(a.id),a=void 0!==a.selectedChildIndex?e.messages[a.selectedChildIndex]:void 0;let s=new Map;for(let[e,t]of x){let a=s.get(t.messageId)||[];a.push(e),s.set(t.messageId,a)}let n=[];for(let e of t){let t=s.get(e);if(t)for(let e of t)n.push(e)}for(let[e,t]of x)t.messageId===ep.Wp&&n.push(e);let r=b();N([...r]),n.some(e=>r.includes(e))&&I(),v(n)},[x,I,g,d,b,v,N]),{author:T,handleConfirmationAction:k,handleRetryErrorMessage:R,handleRetryCopilotResponse:B,handleEditUserMessage:P,hasClientConfirmations:L,isAgentError:M,isAI:z,isCopilot:$,isError:W,isInterrupted:V,isUser:G,myRef:K,rendererConfig:Q,renderFeedback:J,shouldShowMessageActions:Y,skillExecutionToUseForRespondingText:X,showRetryButton:Z}=(0,te.p)({excludeFeedback:e,inputRef:t,isLatestMessage:a,isStreaming:r,removeOutdatedContentPreviewItems:A}),ea=et(),es=D.editingMessage===d.id,en=r&&!W&&!d.confirmations&&!Y&&a&&(!e||z),ei=(i?.childMessageIndexes?.findIndex(e=>e===o)||0)+1||1,el=i?.childMessageIndexes?.length||1,ec=el>=tt.L9,eu=h.maxMessagesReached(),ed=el>1,em=(0,p.useMemo)(()=>d.mediaContent?.filter(e=>e.mediaType.startsWith("image/")),[d.mediaContent]),eh=(0,p.useMemo)(()=>!!em?.length,[em]),e_=Y&&ea&&($||ed),eD=(0,p.useRef)(null),eg=(0,ti.M)(e=>{let t=C.get((0,ee.oy)(e))?.at(-1);t&&y(t,!1)});(0,p.useEffect)(()=>{if(d.error?.type!=="publicCode")return;let e=[];for(let[t,a]of x)(a.messageId===d.id||a.messageId===eD.current)&&e.push(t);e.length>0&&v(e)},[d.error?.type,d.id,x,v]),(0,p.useEffect)(()=>{if(eD.current!==d.id&&a&&S.length>0){let e=setTimeout(()=>{for(let e of S)eg.current(e);w(),N([])});return()=>clearTimeout(e)}eD.current=d.id},[w,d.id,S,a,N,eg]);let ef=(0,p.useCallback)(()=>{let{messages:e}=g(),t=ei-1;h.setSelectedMessage(e[i.childMessageIndexes[t-1]]),A()},[ei,h,i,A,g]),ex=(0,p.useCallback)(()=>{let{messages:e}=g(),t=ei-1;h.setSelectedMessage(e[i.childMessageIndexes[t+1]]),A()},[ei,h,i,A,g]),eC=(0,er.G)(),{model:ey,availableModels:ev}=(0,_.bP)("model","availableModels"),eb=ey;d.model&&(eb=(ev??[eb]).find(e=>e.id===d.model)||eb);let ej=()=>h.startEditingMessage(d.id),eS=(0,q.G)(),eE=!!(0,O.JB)(D.customCopilots,eS),{selectedThreadID:eN}=(0,_.bP)("selectedThreadID"),{variant:eI}=eO(eS,eN),ew=eI===eB.customCopilotSizeExceeded,eF=ec||eu||!!eS&&!eE||ew,eA=$&&r&&a&&!d.content,eT=(0,p.useCallback)(e=>{h.setWrapCodeLines(e)},[h]),ek=r?tg.G:tg.o;return(0,c.jsxs)("div",{className:(0,eJ.$)("message-container",td.chatMessage,G&&td.user,z&&td.ai,es?td.editing:"",a&&td.latest),ref:K,...(0,tn.G)(`message-${W?"error":r?"streaming":d.id}`),children:[z?(0,c.jsx)(e1.W,{isLoading:r&&a,isLoadingSkills:(d.skillExecutions??[]).length>0&&r&&""===d.content&&a,isError:W&&d.error?.type!=="agentUnauthorized",className:td.avatar,mode:D.mode,isFirstMessage:n,message:d.content||"",createdAt:d.createdAt}):null,G&&eh&&(0,c.jsx)("div",{className:em?.length===4?td.imageGrid:td.imageRow,children:em?.map(e=>(0,c.jsx)(tu,{name:e?.name||"Uploaded image",messageId:d.id,src:e?.url||"",alt:`Uploaded image${e?.name?`: ${e.name}`:""}`,mode:D.mode,squareView:em?.length>=2},e?.url||""))}),G&&d.references&&d.references.length>0&&(0,c.jsx)(tm.K,{className:td.references,messageId:d.id,messageTimestamp:d.createdAt,messageIndex:o,references:d.references,size:"medium"}),!es&&(0,c.jsx)("div",{className:td.content,children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:(0,eJ.$)("js-snippet-clipboard-copy-unpositioned",td.messageArea),children:[L?(0,c.jsx)(tD,{authorName:T.name,clientConfirmations:d.clientConfirmations??[]}):G?(0,c.jsx)(e8.R,{accessibleHeader:(0,f.hV)("You",d.content??""),className:td.userMessage}):(0,c.jsxs)(c.Fragment,{children:[eA&&(0,c.jsx)(e9.b,{className:(0,eJ.$)(td.skillExecutionText,"mb-2"),children:`${(0,e4.WA)(X)}...`}),d.references&&d.references.length>0&&d.content&&(0,c.jsx)(eZ.s,{className:"mb-2",references:d.references,isImmersive:!0,onClick:(e,t)=>{("draft-issue"===e.type||"draft-update-issue"===e.type)&&F(e,t)}}),"assistant"===d.role&&(m.length?(0,c.jsx)(eX.Q,{mcpToolResults:m}):null),!L&&d.content&&(0,c.jsx)(tb,{children:(0,c.jsx)(ek,{autoOpenPreviewPane:l,markdown:d.content,messageId:d.id,messageIndex:o,messageTimestamp:d.createdAt,accessibleHeader:(0,f.hV)("Copilot",d.content??""),copilotAnnotations:d.copilotAnnotations,wrapCodeLines:D.wrapCodeLines,onWrapCodeLinesChange:eT,...Q})}),W?(0,c.jsx)(e2.K,{manager:h}):null,M&&d.agentErrors&&(0,c.jsx)(e2.h,{errors:d.agentErrors}),V?(0,c.jsx)(e6.h,{messageHasContent:!!d.content||!!d.skillExecutions?.length}):null,z&&!eA&&(0,f.Ye)(d.confirmations).map((e,t)=>"indexrepo"===e.confirmation.name?null:(0,c.jsx)(e0.m,{confirmation:e,handleConfirmation:k,isLatestMessage:a},t))]}),ed&&!a&&(0,c.jsxs)("div",{className:td.messageSubthreadIndicator,"data-testid":"chat-paging-indicator",children:[ei,"/",el]})]}),en&&(0,c.jsx)("div",{className:td.actionsPlaceholder}),!Y&&Z&&(0,c.jsx)(e7.$,{handleRetryMessage:R,disabled:eF}),Y&&!ea&&(0,c.jsxs)(e5.M,{"aria-label":"Message tools",className:td.actions,"data-testid":"nonshared-toolbar",children:[G&&(s?(0,c.jsx)(tr.N5,{commandId:"copilot-chat:edit-last-message",variant:"invisible","aria-label":"Edit message",onClick:ej,icon:eo.PencilIcon,disabled:eF,...(0,tn.G)("edit-message-button")}):(0,c.jsx)(eQ.K,{variant:"invisible","aria-label":"Edit message",onClick:ej,icon:eo.PencilIcon,disabled:eF,...(0,tn.G)("edit-message-button")})),$&&(0,c.jsxs)(c.Fragment,{children:[J&&(0,c.jsx)(e3.G,{iconSize:"medium"}),!!d.content&&!r&&(0,c.jsx)(ts.T,{textToCopy:d.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center",onCopy:()=>(0,E.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})]}),Z&&W?(0,c.jsx)(e7.$,{handleRetryMessage:R,disabled:eF}):z&&!W&&!d.clientSide&&(0,c.jsx)(e7.$,{handleRetryMessage:B,disabled:eF,showModelPicker:!!ev&&ev.length>1,model:eb,navigateToNewThread:eC}),ed&&(0,c.jsx)(tp,{currentPage:ei,totalPages:el,onPrev:ef,onNext:ex,isUserMessage:G})]}),e_&&(0,c.jsxs)(e5.M,{"aria-label":"Message tools",className:td.sharedThreadActions,"data-testid":"shared-toolbar",children:[$&&(0,c.jsx)(c.Fragment,{children:!!d.content&&!r&&(0,c.jsx)(ts.T,{textToCopy:d.content??"",ariaLabel:"Copy to clipboard",size:"medium",className:"d-flex flex-items-center actions",onCopy:()=>(0,E.BI)("dotcom_chat.activate",{target:"RESPONSE_ACTION_COPY",mode:"immersive"})})}),ed&&(0,c.jsx)(tp,{currentPage:ei,totalPages:el,onPrev:ef,onNext:ex,isUserMessage:G})]})]})}),es&&(0,c.jsx)(tC,{messageContent:d.content||"",onSubmit:P,onCancel:()=>h.cancelEditingMessage()})]})},tb=({children:e})=>(0,c.jsx)(Y.t,{fallback:(0,c.jsx)(N.l,{className:td.errorFallback,variant:"warning",title:"Message cannot be displayed",description:"An unknown error occurred while attempting to display this message."}),children:e}),tj=({message:e,messageIndex:t,isSharedMessage:a,isLatestMessage:s,...n})=>{let r=et();return(0,c.jsxs)(eY.$,{message:e,children:[!(0,tf.E)(e)&&(0,c.jsx)(tv,{...n,messageIndex:t,isSharedMessage:a,isLatestMessage:s,isViewingSharedThread:r}),(0,c.jsx)(tf.p,{message:e,messageIndex:t,isViewingSharedThread:r,isSharedMessage:a,isLatestMessage:s})]})},tS=(0,p.memo)(tj),tE=e=>{let{message:t}=e,a=(0,_.Pk)(),s=(0,eH.CX)(a.messages,t),n="user"===t.role&&a.messages.findLast(e=>"user"===e.role)?.id===t.id;return(0,c.jsx)(tS,{...e,parentMessage:s,isLatestUserMessage:n})},tN=e=>(0,c.jsx)(tb,{children:(0,c.jsx)(tE,{...e})});try{tv.displayName||(tv.displayName="InnerChatMessage")}catch{}try{tb.displayName||(tb.displayName="MessageErrorBoundary")}catch{}try{tj.displayName||(tj.displayName="ChatMessageUnmemoized")}catch{}try{tS.displayName||(tS.displayName="ChatMessageMemoized")}catch{}try{tE.displayName||(tE.displayName="ChatMessageWrapped")}catch{}try{tN.displayName||(tN.displayName="ChatMessage")}catch{}var tI=a(81945);let tw={ConversationLoader:"ConversationLoader-module__ConversationLoader--kdZTM",ConversationLoader__assistantGroup:"ConversationLoader-module__ConversationLoader__assistantGroup--sA3MD",ConversationLoader__userGroup:"ConversationLoader-module__ConversationLoader__userGroup--sBc4O",ConversationLoader__assistantAvatar:"ConversationLoader-module__ConversationLoader__assistantAvatar--Bt7IA",assistantAvatarSkeleton:"ConversationLoader-module__assistantAvatarSkeleton--f2f7n"};function tF(){let e,t,a=(0,u.c)(2);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("div",{className:tw.ConversationLoader__userGroup,children:(0,c.jsx)(tI.O,{variant:"rounded",height:"20px",width:"random"})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsxs)("div",{className:tw.ConversationLoader,"data-testid":"conversation-loader",children:[e,(0,c.jsxs)("div",{className:tw.ConversationLoader__assistantGroup,children:[(0,c.jsx)(tI.O,{className:(0,eJ.$)(tw.ConversationLoader__assistantAvatar,tw.assistantAvatarSkeleton),variant:"elliptical"}),Array.from({length:Math.floor(4*Math.random())+2}).map(tA)]})]}),a[1]=t):t=a[1],t}function tA(e,t){return(0,c.jsx)(tI.O,{variant:"rounded",height:"20px",width:"random"},t)}try{tF.displayName||(tF.displayName="ConversationLoader")}catch{}var tT=a(33544),tk=a(26382);let tR={container:"ErrorState-module__container--FoMc5",icon:"ErrorState-module__icon--ykhTC",description:"ErrorState-module__description--zsnez",sso:"ErrorState-module__sso--Q4Ig1"};function tB(e){let t,a,s,n,r,i,o=(0,u.c)(13),{title:l,description:d,ssoOrgs:m}=e;o[0]!==m?(t=m&&m.length>0&&!(0,J.G7)("global_sso_banner"),o[0]=m,o[1]=t):t=o[1];let h=t;return o[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),o[2]=a):a=o[2],o[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,c.jsx)(tk.E.Visual,{children:(0,c.jsx)(eo.AlertIcon,{size:"medium",className:tR.icon})}),o[3]=s):s=o[3],o[4]!==l?(n=(0,c.jsx)(tk.E.Heading,{as:"h2",children:l}),o[4]=l,o[5]=n):n=o[5],o[6]!==d||o[7]!==h||o[8]!==m?(r=(void 0!==d||h)&&(0,c.jsxs)("div",{className:tR.description,children:[(0,c.jsx)(tk.E.Description,{children:(0,c.jsx)("span",{children:d})}),(0,c.jsx)("div",{className:tR.sso,children:h&&(0,c.jsx)(tT.x,{protectedOrgs:m})})]}),o[6]=d,o[7]=h,o[8]=m,o[9]=r):r=o[9],o[10]!==n||o[11]!==r?(i=(0,c.jsxs)("div",{className:tR.container,children:[a,(0,c.jsxs)(tk.E,{border:!1,children:[s,n,r]})]}),o[10]=n,o[11]=r,o[12]=i):i=o[12],i}function tO(e){let t,a,s,n,r,i,o,l=(0,u.c)(9),{mode:d}=e,{helpUrl:m}=(0,C.X)();l[0]!==d?(t=()=>{d&&(0,E.BI)("dotcom_chat.activate.error",{target:"ERROR_SHARED_THREAD_NO_ACCESS",mode:d,message:"Shared thread no access"})},a=[d],l[0]=d,l[1]=t,l[2]=a):(t=l[1],a=l[2]),(0,p.useEffect)(t,a),l[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,c.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),l[3]=s):s=l[3],l[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsx)(tk.E.Visual,{children:(0,c.jsx)(eo.LockIcon,{size:"medium",className:tR.icon})}),r=(0,c.jsx)(tk.E.Heading,{as:"h2",children:"You don't have access to this shared conversation"}),l[4]=n,l[5]=r):(n=l[4],r=l[5]),l[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,c.jsx)(tk.E.Description,{children:(0,c.jsx)("span",{children:"To view this shared link, you must have permissions to all resources referenced in the conversation."})}),l[6]=i):i=l[6];let h=`${m}/copilot/using-github-copilot/copilot-chat/asking-github-copilot-questions-in-github#sharing-copilot-chat-conversations`;return l[7]!==h?(o=(0,c.jsxs)("div",{className:tR.container,children:[s,(0,c.jsxs)(tk.E,{border:!1,children:[n,r,(0,c.jsxs)("div",{className:tR.description,children:[i,(0,c.jsx)(ev.A,{inline:!0,href:h,children:"Learn more"})]})]})]}),l[7]=h,l[8]=o):o=l[8],o}try{tB.displayName||(tB.displayName="ErrorState")}catch{}try{tO.displayName||(tO.displayName="SharedThreadForbidden")}catch{}let tP={container:"ImmersiveChat-module__container--h_Pmt",emptyContent:"ImmersiveChat-module__emptyContent--a_vXm",messageContent:"ImmersiveChat-module__messageContent--JE3f_",scrollToBottomButton:"ImmersiveChat-module__scrollToBottomButton--FbWSF",hidden:"ImmersiveChat-module__hidden--b_DNj"},tL=e=>{let t,a,s,n,r,i,o,l,d,m,h,D=(0,u.c)(42),{inputRef:g,isMobile:x}=e,{scrollToBottom:C}=(0,e$.b)(),y=(0,_.Pk)(),{isWaitingOnCopilot:v,messagesLoading:b,streamingMessage:j,messages:S}=y,{reloadQuota:E,premiumChatQuotaRemaining:N,isLicensedLimited:I}=(0,V.xR)();D[0]!==y?(a=(0,X.W)(y),t=(0,f.CB)(a),D[0]=y,D[1]=t,D[2]=a):(t=D[1],a=D[2]);let w=t,F=a?.sharedMessageID,{messages:A,groupedMessages:T}=(0,eG.a)(y);D[3]!==A?(s=A.find(tV)?.id,D[3]=A,D[4]=s):s=D[4];let k=s;D[5]!==C?(n=()=>C("instant"),r=[C],D[5]=C,D[6]=n,D[7]=r):(n=D[6],r=D[7]),(0,eq.N)(n,r);let R=(0,eK.S)(y.streamingMessage);if(D[8]!==I||D[9]!==v||D[10]!==A.length||D[11]!==b.state||D[12]!==N||D[13]!==R||D[14]!==E||D[15]!==j?(i=()=>{A.length>0&&!I&&B.W.premiumRequestQuotasEnabled&&N<=f.aX&&!v&&"loaded"===b.state&&R&&!j&&E("quota_low_trigger")},o=[I,v,A.length,b.state,N,R,E,j],D[8]=I,D[9]=v,D[10]=A.length,D[11]=b.state,D[12]=N,D[13]=R,D[14]=E,D[15]=j,D[16]=i,D[17]=o):(i=D[16],o=D[17]),(0,p.useEffect)(i,o),D[18]===Symbol.for("react.memo_cache_sentinel")?(l=(0,c.jsx)("h1",{children:"Copilot Chat"}),D[18]=l):l=D[18],D[19]!==w?(d=(0,c.jsxs)("div",{className:"sr-only",children:[l,(0,c.jsx)("h2",{children:w})]}),D[19]=w,D[20]=d):d=D[20],D[21]!==S||D[22]!==k||D[23]!==T||D[24]!==g||D[25]!==x||D[26]!==v||D[27]!==F||D[28]!==j?.id){let e;D[30]!==S||D[31]!==k||D[32]!==T.length||D[33]!==g||D[34]!==x||D[35]!==v||D[36]!==F||D[37]!==j?.id?(e=(e,t)=>(0,c.jsx)(ez.i,{isLastGroup:t===T.length-1,children:e.map((a,s)=>{let n=-1===a.messageIndex?S.length:a.messageIndex,r=t===T.length-1&&s===e.length-1;return(0,c.jsx)(tN,{isLatestMessage:r,isSharedMessage:a.id===F,isFirstReply:a.id===k,message:a,messageIndex:n,inputRef:g,isStreaming:a.id===j?.id||r&&v,autoOpenPreviewPane:!x},s)})},t),D[30]=S,D[31]=k,D[32]=T.length,D[33]=g,D[34]=x,D[35]=v,D[36]=F,D[37]=j?.id,D[38]=e):e=D[38],m=T.map(e),D[21]=S,D[22]=k,D[23]=T,D[24]=g,D[25]=x,D[26]=v,D[27]=F,D[28]=j?.id,D[29]=m}else m=D[29];return D[39]!==d||D[40]!==m?(h=(0,c.jsxs)("div",{children:[d,m]}),D[39]=d,D[40]=m,D[41]=h):h=D[41],h},tM=()=>{let e,t,a,s=(0,u.c)(4),{mode:n}=(0,_.Pk)();return s[0]!==n?(e=()=>{(0,E.BI)("dotcom_chat.activate.error",{target:"ERROR_CONVERSATION_FAILED_TO_LOAD",mode:n,message:"Conversation failed to load"})},t=[n],s[0]=n,s[1]=e,s[2]=t):(e=s[1],t=s[2]),(0,p.useEffect)(e,t),s[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(tB,{title:"Conversation failed to load",description:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ev.A,{href:"",onClick:tG,inline:!0,children:"Reload the page"})," ","to try again."]})}),s[3]=a):a=s[3],a},tU=()=>{let e,t,a,s=(0,u.c)(4),{mode:n}=(0,_.Pk)();return s[0]!==n?(e=()=>{(0,E.BI)("dotcom_chat.activate.error",{target:"ERROR_ACCESS_DENIED",mode:n,message:"Access denied"})},t=[n],s[0]=n,s[1]=e,s[2]=t):(e=s[1],t=s[2]),(0,p.useEffect)(e,t),s[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(tB,{title:"Access denied",description:"You do not have permission to view this."}),s[3]=a):a=s[3],a},tz=e=>{let t,a,s,n=(0,u.c)(9),{isSharedThread:r}=e,{mode:i}=(0,_.Pk)(),{needsSsoAuthentication:o,ssoOrgNames:l}=ei(),d=(0,q.G)(),m=r?"Shared conversation not found":"Conversation not found",h=o?`This URL may be incorrect, you may be signed out of your organization or the ${d?"space":"conversation"} may have been deleted.`:"This URL may be incorrect or the conversation may have been deleted.";return n[0]!==r||n[1]!==i||n[2]!==m?(t=()=>{(0,E.BI)("dotcom_chat.activate.error",{target:r?"ERROR_SHARED_CONVERSATION_NOT_FOUND":"ERROR_CONVERSATION_NOT_FOUND",mode:i,message:m})},a=[i,r,m],n[0]=r,n[1]=i,n[2]=m,n[3]=t,n[4]=a):(t=n[3],a=n[4]),(0,p.useEffect)(t,a),n[5]!==h||n[6]!==l||n[7]!==m?(s=(0,c.jsx)(tB,{title:m,description:h,ssoOrgs:l}),n[5]=h,n[6]=l,n[7]=m,n[8]=s):s=n[8],s},t$=e=>{let t,a,s,n,r,i=(0,u.c)(20),{inputRef:o,isMobile:l}=e,d=(0,_.Pk)(),{messagesLoading:m,threadsLoading:h,messages:p,showTopicPicker:D,pendingFirstMessage:g}=d,f=(0,X.W)(d),{textAreaRef:C}=(0,eV.Y)(o),y=et(),v=null,b=null;if((0,eH.B)(p,g).length&&"loaded"===m.state){let e;i[0]!==l||i[1]!==C?(e=(0,c.jsx)(tL,{inputRef:C,isMobile:l}),i[0]=l,i[1]=C,i[2]=e):e=i[2],v=e}else if(("loading"===m.state||"pending"===m.state)&&d.selectedThreadID&&!D){let e;i[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(tF,{}),i[3]=e):e=i[3],v=e}else if("error"===m.state&&d.selectedThreadID&&(null===f&&"error"!==h.state||m.notFound))if(y&&d.fetchSharedThreads?.ok===!1&&(403===d.fetchSharedThreads.status||401===d.fetchSharedThreads.status)){let e;i[4]!==d.mode?(e=(0,c.jsx)(tO,{mode:d.mode}),i[4]=d.mode,i[5]=e):e=i[5],b=e}else{let e;i[6]!==y?(e=(0,c.jsx)(tz,{isSharedThread:y}),i[6]=y,i[7]=e):e=i[7],b=e}else if("error"===m.state||"error"===h.state){let e;i[8]!==h.status?(e=403===h.status?(0,c.jsx)(tU,{}):(0,c.jsx)(tM,{}),i[8]=h.status,i[9]=e):e=i[9],b=e}let j=(0,x.U)();return i[10]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(tW,{}),i[10]=t):t=i[10],i[11]!==b?(a=b&&(0,c.jsx)("div",{className:tP.emptyContent,children:b}),i[11]=b,i[12]=a):a=i[12],i[13]!==v?(s=v&&(0,c.jsxs)("div",{className:tP.messageContent,children:[v,(0,c.jsx)(eW.Cb,{})]}),i[13]=v,i[14]=s):s=i[14],i[15]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsx)(eW.zc,{}),i[15]=n):n=i[15],i[16]!==j||i[17]!==a||i[18]!==s?(r=(0,c.jsxs)(e$.$,{className:tP.container,containerRef:j,children:[t,a,s,n]}),i[16]=j,i[17]=a,i[18]=s,i[19]=r):r=i[19],r},tW=()=>{let e,t,a,s=(0,u.c)(7),{isScrolledUp:n,scrollToBottom:r}=(0,e$.b)(),i=!n&&tP.hidden;return s[0]!==i?(e=(0,eJ.$)(tP.scrollToBottomButton,i),s[0]=i,s[1]=e):e=s[1],s[2]!==r?(t=()=>r("smooth"),s[2]=r,s[3]=t):t=s[3],s[4]!==e||s[5]!==t?(a=(0,c.jsx)(eQ.K,{"aria-label":"Scroll to bottom",className:e,onClick:t,icon:eo.ArrowDownIcon,tooltipDirection:"n"}),s[4]=e,s[5]=t,s[6]=a):a=s[6],a};try{tL.displayName||(tL.displayName="Messages")}catch{}try{tM.displayName||(tM.displayName="FailedToLoadThreadError")}catch{}try{tU.displayName||(tU.displayName="AccessDeniedError")}catch{}try{tz.displayName||(tz.displayName="NotFoundError")}catch{}try{t$.displayName||(t$.displayName="ImmersiveChat")}catch{}try{tW.displayName||(tW.displayName="ScrollToBottomButton")}catch{}function tV(e){return"assistant"===e.role}function tG(e){e.preventDefault(),window.location.reload()}var tH=a(97189),tq=a(93412),tK=a(17593),tQ=a(56128),tJ=a(91747),tY=a(74807),tX=a(52870);function tZ(e){let t,a,s,n,r,i=(0,u.c)(12),{className:o}=e,[l,d]=(0,p.useState)(tY.L.Static),[m,h]=(0,p.useState)(!0),{safeSetTimeout:_}=(0,tX.A)();return i[0]!==_?(t=()=>{let e=_(()=>{K.Jt.getAnimationFlag()?(d(tY.L.Activate),h(!1)):(d(tY.L.Idle),h(!0))},1e3);return()=>clearTimeout(e)},a=[_],i[0]=_,i[1]=t,i[2]=a):(t=i[1],a=i[2]),(0,p.useEffect)(t,a),i[3]!==l?(s=()=>{l===tY.L.Activate&&(d(tY.L.Idle),h(!0),K.Jt.removeAnimationFlag())},i[3]=l,i[4]=s):s=i[4],i[5]!==l||i[6]!==m||i[7]!==s?(n=(0,c.jsx)(tY.N,{animationType:l,onAnimationEnd:s,loopAnimation:m,size:48}),i[5]=l,i[6]=m,i[7]=s,i[8]=n):n=i[8],i[9]!==o||i[10]!==n?(r=(0,c.jsx)("div",{className:o,children:n}),i[9]=o,i[10]=n,i[11]=r):r=i[11],r}try{tZ.displayName||(tZ.displayName="CopilotEmptyStateAnimation")}catch{}var t0=a(95772);let t1={scrollContainer:"NewConversation-module__scrollContainer--pS_a1",container:"NewConversation-module__container--fMmET",banner:"NewConversation-module__banner--binRv",main:"NewConversation-module__main--P10kO",withTaskList:"NewConversation-module__withTaskList--iIEmp",content:"NewConversation-module__content--cXGzS",innerContainer:"NewConversation-module__innerContainer--u29kY",inputAndStartersContainer:"NewConversation-module__inputAndStartersContainer--jSg3S",commandStartersContainer:"NewConversation-module__commandStartersContainer--noJst",footer:"NewConversation-module__footer--HIKDz",agentListContainer:"NewConversation-module__agentListContainer--uNTRm"},t2={banner:"ChatInputBanners-module__banner--itq1j"},t3={trial:{title:"Copilot Pro trial activated",description:"Your 30-day Copilot Pro trial is now active.",dismissTarget:"TRIAL_SUCCESS_BANNER_DISMISS",clearFlagsOnDismiss:[]},pro_plus:{title:"Copilot Pro+ activated",description:"Your Copilot Pro+ subscription is now active.",dismissTarget:"PRO_PLUS_SUCCESS_BANNER_DISMISS",clearFlagsOnDismiss:["trial"]}};function t4(e){let t,a,s,n=(0,u.c)(10),{skuType:r,onDismiss:i,className:o}=e,l=t3[r];return l?(n[0]!==l.dismissTarget||n[1]!==i?(t=()=>{i(),(0,E.BI)("dotcom_chat.activate",{target:l.dismissTarget,mode:"immersive"})},n[0]=l.dismissTarget,n[1]=i,n[2]=t):t=n[2],n[3]!==l.description||n[4]!==l.title||n[5]!==t?(a=(0,c.jsx)(N.l,{variant:"success",title:l.title,description:l.description,hideTitle:!0,onDismiss:t}),n[3]=l.description,n[4]=l.title,n[5]=t,n[6]=a):a=n[6],n[7]!==o||n[8]!==a?(s=(0,c.jsx)("div",{className:o,children:a}),n[7]=o,n[8]=a,n[9]=s):s=n[9],s):null}try{t4.displayName||(t4.displayName="SkuSuccessBanner")}catch{}let t6=["pro_plus","trial"],t7=()=>{let e=Object.create(null);for(let t of t6)e[t]=K.Jt.getSkuSuccessBannerFlag(t)??!1;return e};function t5(){let e,t,a,s=(0,u.c)(11),n=(0,V.xR)().licenseType,{activeSku:r,visibility:i}=function(){let e,t,a,s=(0,u.c)(7),[n,r]=(0,p.useState)(t7);s[0]!==n?(e=t6.find(e=>n[e])||null,s[0]=n,s[1]=e):e=s[1];let i=e;if(s[2]!==i){for(let e of(t={},t6)){let a=t3[e],s=new Set([e,...a?.clearFlagsOnDismiss??[]]);t[e]={visible:i===e,onDismiss:()=>{for(let e of s)K.Jt.removeSkuSuccessBannerFlag(e);r(e=>{let t={...e};for(let e of s)t[e]=!1;return t})}}}s[2]=i,s[3]=t}else t=s[3];return s[4]!==i||s[5]!==t?(a={activeSku:i,visibility:t},s[4]=i,s[5]=t,s[6]=a):a=s[6],a}(),o="trial"===r&&n===ep.mF.LicensedFull,l=r&&"trial"!==r;return s[0]!==r||s[1]!==o||s[2]!==i?(e=o&&i.trial&&(0,c.jsx)(t4,{skuType:r,className:t2.banner,onDismiss:i.trial.onDismiss}),s[0]=r,s[1]=o,s[2]=i,s[3]=e):e=s[3],s[4]!==r||s[5]!==l||s[6]!==i?(t=l&&i[r]&&(0,c.jsx)(t4,{skuType:r,className:t2.banner,onDismiss:i[r].onDismiss}),s[4]=r,s[5]=l,s[6]=i,s[7]=t):t=s[7],s[8]!==e||s[9]!==t?(a=(0,c.jsxs)(c.Fragment,{children:[e,t]}),s[8]=e,s[9]=t,s[10]=a):a=s[10],a}try{t5.displayName||(t5.displayName="NewConversationBanners")}catch{}let t8=e=>{switch(e){case"displayed":(0,E.BI)("view",{category:"universe_banner",action:"banner_view",label:"banner_universe_loggedIn"});break;case"clicked":(0,E.BI)("click",{category:"universe_banner",action:"banner_click_openModal",label:"banner_universe_loggedIn"});break;case"dismissed":(0,E.BI)("click",{category:"universe_banner",action:"banner_dismiss",label:"banner_universe_loggedIn"})}},t9=(e,t)=>{switch(e){case"opened":(0,E.BI)("view",{category:"universe_modal",action:"modal_view",label:"modal_universe_loggedIn"});break;case"closed":(0,E.BI)("click",{category:"universe_modal",action:"modal_nav_click",label:"modal_universe_loggedIn"});break;case"tab_clicked":(0,E.BI)("click",{category:"universe_modal",action:"modal_nav_click",label:"modal_universe_loggedIn",navItem:t?.tabName});break;case"main_cta_clicked":(0,E.BI)("click",{category:"universe_modal",action:"modal_primary_cta_left_click",label:"modal_universe_loggedIn"});break;case"see_all_clicked":(0,E.BI)("click",{category:"universe_modal",action:"modal_seeAllAnnouncements_left_click",label:"modal_universe_loggedIn"});break;case"tab_cta_1_clicked":(0,E.BI)("click",{category:"universe_modal",action:"modal_primary_cta_right_click",label:"modal_universe_loggedIn",navItem:t?.tabName,ctaType:"primary_right",ctaUrl:t?.url,userStatus:"logged_in",positionIndex:t?.tabIndex});break;case"tab_cta_2_clicked":(0,E.BI)("click",{category:"universe_modal",action:"modal_secondary_cta_right_click",label:"modal_universe_loggedIn",navItem:t?.tabName,ctaType:"secondary_right",ctaUrl:t?.url,userStatus:"logged_in",positionIndex:t?.tabIndex});break;case"tab_link_clicked":(0,E.BI)("click",{category:"universe_modal",action:"modal_link_right_click",label:"modal_universe_loggedIn",navItem:t?.tabName,ctaType:"learn_more_right",ctaUrl:t?.url,userStatus:"logged_in",positionIndex:t?.tabIndex});break;case"tab_description_link_clicked":(0,E.BI)("click",{category:"universe_modal",action:"modal_description_link_right_click",label:"modal_universe_loggedIn",navItem:t?.tabName,ctaType:"link",ctaUrl:t?.url,userStatus:"logged_in",positionIndex:t?.tabIndex})}};var ae=a(2702);function at(e){let t,a,s,n,r,i,o,l,d,m,h,D,g,f,x,C,y=(0,u.c)(39),{textAreaRef:v,handleUserSubmit:b,nextMessageIndex:j}=e,N=(0,H.b)(),I=(0,_.Pk)();y[0]!==I?(t=(0,X.W)(I),y[0]=I,y[1]=t):t=y[1];let w=t;y[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,J.G7)("copilot_chat_cca_request_cta"),y[2]=a):a=y[2];let F=a,A=(0,p.useRef)(null),[T,k]=(0,p.useState)(null),R=(0,p.useRef)(null);y[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,J.G7)("hyperspace_nudges_universe25")?"universe25":"",y[3]=s):s=y[3];let O=s,{plan:P}=(0,V.xR)();y[4]!==w||y[5]!==N||y[6]!==I?(n=e=>{let t=0===I.messages.length?w:(0,X.W)(I),a=I.currentUserLogin||"",s=e.message.replaceAll("$$USERNAME$$",a);N.sendChatMessage({thread:t,content:s,references:I.currentReferences,topic:I.currentTopic,context:I.context,customInstructions:I.customInstructions,model:I.model}),(0,E.BI)("dotcom_chat.activate",{target:"NEW_CONVERSATION_STARTER_MENU_ITEM",topic:I.currentTopic?.name,mode:"immersive",starterId:e.id})},y[4]=w,y[5]=N,y[6]=I,y[7]=n):n=y[7];let L=n,M=(0,tJ.u)("copilot_swe_agent_progress_commands")&&I.agentsEnabled,U=(0,tJ.u)("copilot_agent_task_list_v2");y[8]===Symbol.for("react.memo_cache_sentinel")?(r=(0,c.jsx)("div",{className:t1.banner,children:(0,c.jsx)(t5,{})}),y[8]=r):r=y[8];let z=M&&U;y[9]!==z?(i=(0,eJ.$)(t1.main,{[t1.withTaskList]:z}),y[9]=z,y[10]=i):i=y[10],y[11]===Symbol.for("react.memo_cache_sentinel")?(o=(0,c.jsx)("h1",{className:"sr-only",children:"Copilot Chat"}),y[11]=o):o=y[11];let $=(0,tJ.u)("copilot_pro_plus_animation")?(0,c.jsx)(tZ,{}):(0,c.jsx)(S.A,{hidden:!0});return y[12]!==b||y[13]!==j||y[14]!==v?(l=(0,c.jsx)(eL,{chatInputRef:R,textAreaRef:v,handleUserSubmit:b,nextMessageIndex:j,onChatCommandChange:k,isNewConversation:!0,containerRef:A,slashCommandsEnabled:!0}),y[12]=b,y[13]=j,y[14]=v,y[15]=l):l=y[15],y[16]!==T||y[17]!==L||y[18]!==v?(d=B.W.chatInputCommands?(0,c.jsx)("div",{className:t1.commandStartersContainer,children:(0,c.jsx)(t0.A,{chatCommand:T,chatInputRef:R,textAreaRef:v,containerRef:A})}):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(ae.X,{taskStarterEnabled:F,handleStarterEntrySelect:L,startersLocationId:"new_conversation"})}),y[16]=T,y[17]=L,y[18]=v,y[19]=d):d=y[19],y[20]!==l||y[21]!==d||y[22]!==$?(m=(0,c.jsxs)("div",{className:t1.inputAndStartersContainer,children:[$,l,d]}),y[20]=l,y[21]=d,y[22]=$,y[23]=m):m=y[23],y[24]!==P?(h=O&&(0,c.jsx)(tQ.A,{id:"copilot-immersive-v1",announcementId:O,shouldShowTabCtas:!!(P&&P!==ep.UH.IndividualFree),shouldShowMainCta:!!(!P||P===ep.UH.IndividualFree),useLocalStorage:!0,onBannerEvent:t8,onModalEvent:t9}),y[24]=P,y[25]=h):h=y[25],y[26]!==M||y[27]!==U?(D=M&&U&&(0,c.jsx)("div",{className:t1.agentListContainer,children:(0,c.jsx)(tH.Fn,{children:(0,c.jsx)(tK.f,{showViewAll:!0,title:"Recent agent sessions",initialResultCount:5})})}),y[26]=M,y[27]=U,y[28]=D):D=y[28],y[29]!==m||y[30]!==h||y[31]!==D?(g=(0,c.jsx)("div",{className:t1.content,children:(0,c.jsxs)("div",{className:t1.innerContainer,children:[o,m,h,D]})}),y[29]=m,y[30]=h,y[31]=D,y[32]=g):g=y[32],y[33]!==g||y[34]!==i?(f=(0,c.jsx)("div",{className:i,children:g}),y[33]=g,y[34]=i,y[35]=f):f=y[35],y[36]===Symbol.for("react.memo_cache_sentinel")?(x=(0,c.jsx)("div",{className:t1.footer,children:(0,c.jsx)(tq.h,{})}),y[36]=x):x=y[36],y[37]!==f?(C=(0,c.jsx)("div",{className:t1.scrollContainer,children:(0,c.jsxs)("div",{className:t1.container,children:[r,f,x]})}),y[37]=f,y[38]=C):C=y[38],C}try{at.displayName||(at.displayName="NewConversation")}catch{}let aa={container:"QuotaExceededEmptyState-module__container--WOGM3",main:"QuotaExceededEmptyState-module__main--kc9CL",copy:"QuotaExceededEmptyState-module__copy--S4GE7",heading:"QuotaExceededEmptyState-module__heading--mfW4i",description:"QuotaExceededEmptyState-module__description--JR0Bv",footer:"QuotaExceededEmptyState-module__footer--ckJFW"};function as(){let e,t,a,s,n,r,i,o,l,d,m,h,_=(0,u.c)(21),{resetDate:D,eligibleForTrial:g}=(0,V.xR)(),[f,x]=(0,p.useState)(!1),[C,y]=(0,p.useState)(!1);_[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{x(!0),y(!0)},_[0]=e):e=_[0];let v=e;_[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{x(!1)},_[1]=t):t=_[1];let b=t;_[2]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{y(!1)},_[2]=a):a=_[2];let j=a,S=f||C;_[3]!==f||_[4]!==S?(s=S?(0,c.jsx)(tY.N,{animationType:"jumpWiggle",loopAnimation:f,size:96,onAnimationEnd:j}):(0,c.jsx)(tY.N,{animationType:"static",loopAnimation:!1,size:96}),_[3]=f,_[4]=S,_[5]=s):s=_[5],_[6]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsx)("h2",{className:aa.heading,children:"You\u2019ve reached your free plan limit"}),_[6]=n):n=_[6],_[7]!==D?(r=(0,c.jsxs)("p",{className:aa.description,children:["Your limits will reset on ",D,"."]}),_[7]=D,_[8]=r):r=_[8];let E=g?"Try Copilot Pro free for 30 days":"Upgrade to Pro";return _[9]!==E?(i=(0,c.jsx)(I.z,{as:"a",variant:"primary",size:"large",href:"https://github.com/github-copilot/pro",onMouseEnter:v,onMouseLeave:b,onClick:an,children:E}),_[9]=E,_[10]=i):i=_[10],_[11]!==r||_[12]!==i?(o=(0,c.jsxs)("div",{className:aa.copy,children:[n,r,i]}),_[11]=r,_[12]=i,_[13]=o):o=_[13],_[14]!==s||_[15]!==o?(l=(0,c.jsxs)("div",{className:aa.main,children:[s,o]}),_[14]=s,_[15]=o,_[16]=l):l=_[16],_[17]===Symbol.for("react.memo_cache_sentinel")?(d=(0,c.jsx)("strong",{children:"Part of an organization?"}),_[17]=d):d=_[17],_[18]===Symbol.for("react.memo_cache_sentinel")?(m=(0,c.jsxs)("div",{className:aa.footer,children:[d,(0,c.jsxs)("span",{children:["Upgrade to"," ",(0,c.jsx)(ev.A,{href:"https://github.com/github-copilot/business_signup/choose_business_type?cft=copilot_li.features_copilot.cfb",inline:!0,children:"Copilot Business"})," ","to enable across teams."]})]}),_[18]=m):m=_[18],_[19]!==l?(h=(0,c.jsxs)("div",{className:aa.container,children:[l,m]}),_[19]=l,_[20]=h):h=_[20],h}function an(){(0,E.BI)("dotcom_chat.activate",{target:"QUOTA_EXCEEDED_EMPTY_STATE_LINK_UPGRADE",mode:"immersive"})}try{as.displayName||(as.displayName="QuotaExceededEmptyState")}catch{}function ar(e){let t,a,s,n,r,i,o,l=(0,u.c)(27),{isMobile:d,textAreaRef:m}=e,D=(0,_.Pk)(),g=(0,H.b)(),f=(0,h.Kf)(),{messages:x,messagesLoading:C,threadsLoading:y}=D,{chatQuotaExceeded:v}=(0,V.xR)(),b=(0,q.G)();l[0]!==b||l[1]!==D.customCopilots?(t=(0,O.JB)(D.customCopilots,b),l[0]=b,l[1]=D.customCopilots,l[2]=t):t=l[2];let j=!!t,{variant:S}=eO(b,D.selectedThreadID),E=S===eB.customCopilotSizeExceeded,N=(!S||j)&&!E,I=(0,p.useRef)(D.currentTopic),w=et(),F=!D.selectedThreadID&&K.Jt.getEntrypointMessage();e:{if(D.selectedThreadID||D.pendingFirstMessage||F||b||v||"error"===C.state||"error"===y.state){a=!1;break e}a=!0}let A=a,T=x.length,k=es(I,T);return l[3]!==D.currentTopic?(s=()=>{I.current=D.currentTopic},n=[D.currentTopic],l[3]=D.currentTopic,l[4]=s,l[5]=n):(s=l[4],n=l[5]),(0,p.useEffect)(s,n),l[6]!==v||l[7]!==k||l[8]!==g?(r=()=>{let e=K.Jt.getEntrypointMessage();if(e&&!v){K.Jt.setEntrypointMessage(null);let t=(0,J.G7)("copilot_chat_action_logs_redirect")&&e.message===(0,Q.oo)(void 0,!0);e.model&&g.selectModel(e.model),setTimeout(()=>{k(e.message,e.references,t,e.model)},100)}},l[6]=v,l[7]=k,l[8]=g,l[9]=r):r=l[9],l[10]!==v||l[11]!==k||l[12]!==g||l[13]!==D.currentReferences?(i=[k,v,D.currentReferences,g],l[10]=v,l[11]=k,l[12]=g,l[13]=D.currentReferences,l[14]=i):i=l[14],(0,p.useEffect)(r,i),l[15]!==v||l[16]!==k||l[17]!==d||l[18]!==w||l[19]!==T||l[20]!==A||l[21]!==N||l[22]!==D.selectedThreadID||l[23]!==D.sharedThreadChannel||l[24]!==m||l[25]!==f?(o=(0,c.jsx)("div",{className:eM.root,children:!D.selectedThreadID&&v?(0,c.jsx)(as,{}):f.traceInfo?.visible?(0,c.jsx)(G.k,{sharedThreadChannel:D.sharedThreadChannel,threadId:D.selectedThreadID}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:eM.container,children:A?(0,c.jsx)(at,{textAreaRef:m,handleUserSubmit:k,nextMessageIndex:T}):(0,c.jsx)(t$,{inputRef:m,isMobile:d})}),(!w||B.W.copilotDuplicateThread)&&!A&&(0,c.jsxs)("div",{className:eM.footer,children:[!N&&(0,c.jsx)(eP,{}),N&&(0,c.jsx)(eL,{textAreaRef:m,handleUserSubmit:k,nextMessageIndex:T,slashCommandsEnabled:!0})]})]})}),l[15]=v,l[16]=k,l[17]=d,l[18]=w,l[19]=T,l[20]=A,l[21]=N,l[22]=D.selectedThreadID,l[23]=D.sharedThreadChannel,l[24]=m,l[25]=f,l[26]=o):o=l[26],o}function ai(e){let t,a=(0,u.c)(2);return a[0]!==e?(t=(0,c.jsx)(ao,{children:(0,c.jsx)(ar,{...e})}),a[0]=e,a[1]=t):t=a[1],t}function ao(e){let t,a,s,n,r,i=(0,u.c)(8),{selectedThreadID:o}=(0,_.bP)("selectedThreadID"),[l,d]=(0,p.useState)(0),m=(0,p.useRef)(!1);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{m.current=!0},i[0]=t):t=i[0];let h=t;return i[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{B.W.stableConversationView&&m.current&&(d(al),m.current=!1)},i[1]=a):a=i[1],i[2]!==o?(s=[o],i[2]=o,i[3]=s):s=i[3],(0,p.useEffect)(a,s),i[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsx)(eU.x,{regionName:"This conversation"}),i[4]=n):n=i[4],i[5]!==l||i[6]!==e.children?(r=(0,c.jsx)(Y.t,{fallback:n,onError:h,children:e.children},l),i[5]=l,i[6]=e.children,i[7]=r):r=i[7],r}function al(e){return e+1}try{ar.displayName||(ar.displayName="ConversationViewInner")}catch{}try{ai.displayName||(ai.displayName="ConversationView")}catch{}try{ao.displayName||(ao.displayName="ConversationViewErrorBoundary")}catch{}var ac=a(40683),au=a(76143),ad=a(79684),am=a(94236),ah=a(5524),ap=a(26607),a_=a(21373),aD=a(40961),ag=a(93380);let af={container:"Header-module__container--x6PHc",leftControls:"Header-module__leftControls--LaO7p",rightControls:"Header-module__rightControls--yQ1vI",hideOnMobile:"Header-module__hideOnMobile--OHZqN"};var ax=a(49851);let aC={newChatButtonContainer:"NewChatButton-module__newChatButtonContainer--JlmNy"};function ay(){let e,t,a=(0,u.c)(4),s=(0,er.G)();a[0]!==s?(e=async()=>{await s({clearTopic:!0,includeThreads:!1})},a[0]=s,a[1]=e):e=a[1];let n=e;return a[2]!==n?(t=(0,c.jsx)("div",{className:aC.newChatButtonContainer,children:(0,c.jsx)(eQ.K,{icon:ax.KJ,onClick:n,"aria-label":"New chat"})}),a[2]=n,a[3]=t):t=a[3],t}try{ay.displayName||(ay.displayName="NewChatButton")}catch{}var av=a(61767);let ab=()=>{let e=(0,_.Pk)(),t=(0,q.G)(),a=(0,O.JB)(e.customCopilots,t),s=(0,O.mM)(),n=(0,O.FQ)(),r=s||a,i=!n&&a;return{updateGlobalNavigationBreadcrumbs:()=>{let e=[{label:"Copilot",href:"/copilot"}];r&&e.push({label:"Spaces",href:f.VR}),i&&a&&e.push({label:a.name,href:(0,O.Cb)(a)}),(0,av.FC)(e)}}};var aj=a(79575),aS=a(11083),aE=a(15220);let aN={container:"TraceButtons-module__container--QKBPy"};function aI(){let e,t,a,s,n,r,i,o,l,d,m,g,f,x=(0,u.c)(37),C=(0,D.y)(),{traceInfo:y}=(0,h.Kf)(),v=function(){let e,t=(0,u.c)(2),a=(0,_.bP)("selectedThreadID","threads");return t[0]!==a?(e=(0,X.W)(a),t[0]=a,t[1]=e):e=t[1],e}(),b=et(),[j,S]=(0,p.useState)(!1),[E,N]=(0,K.iI)("getTracingRequestedFlag","setTracingRequestedFlag"),I=B.W.requestTracing&&(0,aS.X)();x[0]!==b||x[1]!==v?.id||x[2]!==y?.traces?(e=()=>(0,aj.$1)(y?.traces,v?.id,b),x[0]=b,x[1]=v?.id,x[2]=y?.traces,x[3]=e):e=x[3],y?.traces,v?.id,x[4]!==e?(t=e(),x[4]=e,x[5]=t):t=x[5];let w=t,F=!!y?.visible;x[6]!==F||x[7]!==C?(a=()=>{C.showTraceDisplay(!F)},x[6]=F,x[7]=C,x[8]=a):a=x[8];let A=a;x[9]!==N||x[10]!==E?(s=()=>{E?N(!1):S(!0)},x[9]=N,x[10]=E,x[11]=s):s=x[11];let T=s;if(!I)return null;let k=E?"danger":void 0;x[12]!==k?(n=(0,c.jsx)(am.W.Button,{"aria-label":"Tracing",icon:eo.ToolsIcon,variant:k}),x[12]=k,x[13]=n):n=x[13];let R=E?"danger":void 0;x[14]!==E?(r=(0,c.jsx)(ah.l.LeadingVisual,{children:E?(0,c.jsx)(eo.SquareCircleIcon,{}):(0,c.jsx)(eo.ToolsIcon,{})}),x[14]=E,x[15]=r):r=x[15];let O=E?"Stop tracing":"Start tracing";x[16]!==T||x[17]!==R||x[18]!==r||x[19]!==O?(i=(0,c.jsxs)(ah.l.Item,{onSelect:T,variant:R,children:[r,O]}),x[16]=T,x[17]=R,x[18]=r,x[19]=O,x[20]=i):i=x[20];let P=!w;return x[21]===Symbol.for("react.memo_cache_sentinel")?(o=(0,c.jsx)(ah.l.LeadingVisual,{children:(0,c.jsx)(eo.LogIcon,{})}),x[21]=o):o=x[21],x[22]!==A||x[23]!==P?(l=(0,c.jsxs)(ah.l.Item,{onSelect:A,disabled:P,children:[o,"View trace"]}),x[22]=A,x[23]=P,x[24]=l):l=x[24],x[25]!==l||x[26]!==i?(d=(0,c.jsx)(am.W.Overlay,{children:(0,c.jsxs)(ah.l,{children:[i,l]})}),x[25]=l,x[26]=i,x[27]=d):d=x[27],x[28]!==d||x[29]!==n?(m=(0,c.jsxs)(am.W,{children:[n,d]}),x[28]=d,x[29]=n,x[30]=m):m=x[30],x[31]!==N||x[32]!==j?(g=j&&(0,c.jsx)(aE.l,{footerButtons:[{buttonType:"default",content:"Cancel",onClick:()=>S(!1)},{buttonType:"primary",content:"Enable tracing",onClick:()=>{N(!0),S(!1)}}],onClose:()=>S(!1),title:"Enable tracing",children:"Enabling tracing will capture additional diagnostic information to secure storage. This will include the entire contents of the conversation and references used in it."}),x[31]=N,x[32]=j,x[33]=g):g=x[33],x[34]!==m||x[35]!==g?(f=(0,c.jsxs)("div",{className:aN.container,children:[m,g]}),x[34]=m,x[35]=g,x[36]=f):f=x[36],f}try{aI.displayName||(aI.displayName="TraceButtons")}catch{}function aw(e){let t,a,s,n,r,i,o,l,d,m,h,D,g,x,y,v,b,j=(0,u.c)(54),{showPreviewPaneButton:S,conversationSpecificItems:E,customButtons:N,defaultName:I}=e,w=void 0===S||S,F=void 0===I?"":I,A=(0,_.Pk)(),{selectedThreadID:T,threads:R,messagesLoading:B,messages:L,usePlanningIntent:M}=A,U=(0,_.pn)(aF);j[0]!==U?(t=(0,f.CB)(U),j[0]=U,j[1]=t):t=j[1];let z=t,$=et(),W=ea(),V=(0,q.G)(),G=(0,O.JB)(A.customCopilots,V),H=(0,P.BV)(),K=(0,O.mM)(),Q=(0,k.v)(),[,J,Y]=(0,ag.B)(!1);j[2]!==T||j[3]!==R?(a=R.get(T),j[2]=T,j[3]=R,j[4]=a):a=j[4];let X=a,Z=T&&M,ee=!!($?W:X?.sharedID),{updateGlobalNavigationBreadcrumbs:es}=ab();j[5]!==es?(s=()=>{es()},j[5]=es,j[6]=s):s=j[6],j[7]!==V||j[8]!==es?(n=[es,V],j[7]=V,j[8]=es,j[9]=n):n=j[9],(0,p.useEffect)(s,n),j[10]!==$||j[11]!==W||j[12]!==T?(r=()=>T?$&&W?`/copilot/share/${W}`:`/copilot/c/${T}`:f.Jz,j[10]=$,j[11]=W,j[12]=T,j[13]=r):r=j[13];let en=r;Q?.id;let er=K&&!V||!T&&!Q?.id&&!K,ei=(0,p.useRef)(null),[el,ec]=(0,p.useState)(null),{canShareThread:eu}=(0,C.X)(),ed="loaded"===B.state,em=eu&&!$&&T&&!V&&ed;j[14]!==L?(i=(0,f.Q7)(L),j[14]=L,j[15]=i):i=j[15];let eh=i.length>0;j[16]!==L?(o=(0,f.UM)(L),j[16]=L,j[17]=o):o=j[17];let ep=o,e_=eh||ep;j[18]!==e_||j[19]!==ec?(l=()=>{e_||ec("share")},j[18]=e_,j[19]=ec,j[20]=l):l=j[20];let eD=l;G?U?(0,au.D)(`${z} \xb7 ${G.name} \xb7 GitHub Copilot Spaces`):(0,au.D)(`${G.name} \xb7 GitHub Copilot Spaces`):K?(0,au.D)("Spaces \xb7 GitHub Copilot"):$?(0,au.D)("Shared conversation \xb7 GitHub Copilot"):(0,au.D)(`${z} \xb7 GitHub Copilot`),j[21]===Symbol.for("react.memo_cache_sentinel")?(d=(0,c.jsx)(ay,{}),j[21]=d):d=j[21];let eg=!er&&(0,c.jsx)(ad.B,{children:H&&(G||F)?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ad.B.Item,{href:f.VR,children:"Spaces"}),T||!E?(0,c.jsx)(ad.B.Item,{href:G?(0,O.Cb)(G):f.VR,children:G?.name||F}):(0,c.jsx)(ad.B.ItemWithMenu,{menuOverlay:(0,c.jsx)(am.W.Overlay,{children:(0,c.jsx)(ah.l,{children:E})}),children:G?.name||F}),T&&(0,c.jsx)(ad.B.ItemWithMenu,{menuOverlay:(0,c.jsx)(am.W.Overlay,{children:(0,c.jsx)(ah.l,{children:(0,c.jsx)(ac.V,{onOpenDialog:ec,isShared:ee,showShare:!V,hideShareOnDesktop:!0})})}),children:z})]}):Q?(0,c.jsx)(ad.B.Item,{href:`/copilot/${Q.id}`,children:Q.displayName||"Plugin"}):T&&!$?(0,c.jsx)(ad.B.ItemWithMenu,{menuOverlay:(0,c.jsx)(am.W.Overlay,{children:(0,c.jsx)(ah.l,{children:(0,c.jsx)(ac.V,{onOpenDialog:ec,isShared:ee,showShare:!V,hideShareOnDesktop:!0})})}),children:z}):$?(0,c.jsx)(ad.B.Item,{href:en(),children:z}):null});return j[22]!==Z?(m=Z&&(0,c.jsx)(ap.A,{variant:"accent",children:"Brainstorm"}),j[22]=Z,j[23]=m):m=j[23],j[24]!==af.leftControls||j[25]!==d||j[26]!==eg||j[27]!==m?(h=(0,c.jsxs)("div",{className:af.leftControls,children:[d,eg,m]}),j[24]=af.leftControls,j[25]=d,j[26]=eg,j[27]=m,j[28]=h):h=j[28],j[29]!==ee||j[30]!==e_||j[31]!==eD||j[32]!==em?(D=em&&(0,c.jsx)("div",{className:af.hideOnMobile,children:(0,c.jsx)(a_.Q,{leadingVisual:ee?(0,c.jsx)(eo.UnlockIcon,{}):(0,c.jsx)(eo.LockIcon,{}),disabled:e_,onClick:eD,children:"Share"})}),j[29]=ee,j[30]=e_,j[31]=eD,j[32]=em,j[33]=D):D=j[33],j[34]===Symbol.for("react.memo_cache_sentinel")?(g=(0,c.jsx)(aI,{}),j[34]=g):g=j[34],j[35]!==T||j[36]!==w?(x=w&&T&&(0,c.jsx)(aA,{}),j[35]=T,j[36]=w,j[37]=x):x=j[37],j[38]!==N||j[39]!==D||j[40]!==x?(y=(0,c.jsxs)("div",{className:af.rightControls,children:[D,g,N,x]}),j[38]=N,j[39]=D,j[40]=x,j[41]=y):y=j[41],j[42]!==el||j[43]!==T||j[44]!==ec||j[45]!==J||j[46]!==Y||j[47]!==z?(v=T&&(0,c.jsx)(ac.p,{visibleDialog:el,onClose:()=>{(0,aD.flushSync)(()=>ec(null)),ei.current?.focus()},threadName:z,threadId:T,selectedThreadId:T,onStartLoading:J,onFinishLoading:Y,returnFocusRef:ei}),j[42]=el,j[43]=T,j[44]=ec,j[45]=J,j[46]=Y,j[47]=z,j[48]=v):v=j[48],j[49]!==af.container||j[50]!==h||j[51]!==y||j[52]!==v?(b=(0,c.jsxs)("div",{className:af.container,children:[h,y,v]}),j[49]=af.container,j[50]=h,j[51]=y,j[52]=v,j[53]=b):b=j[53],b}function aF(e){return(0,X.W)(e)}function aA(){let e,t=(0,u.c)(4),a=(0,j.tZ)(),{openPreviewPane:s}=(0,j.xx)(),n=(0,x.U)();return t[0]!==n||t[1]!==s||t[2]!==a?(e=!a&&(0,c.jsx)(eQ.K,{icon:eo.SidebarExpandIcon,"aria-label":"Open workbench",onClick:()=>{(0,E.BI)("dotcom_chat.activate",{target:"BROWSER_OPEN_BUTTON",mode:"immersive"}),s()},ref:n}),t[0]=n,t[1]=s,t[2]=a,t[3]=e):e=t[3],e}try{aw.displayName||(aw.displayName="Header")}catch{}try{aA.displayName||(aA.displayName="PreviewPaneButton")}catch{}var aT=a(56487),ak=a(60429),aR=a(73783);let aB={actions:"EditorDownload-module__actions--u7T1C",editorButton:"EditorDownload-module__editorButton--A8J3X",dropdownButton:"EditorDownload-module__dropdownButton--pOfML"};function aO(){let e,t,a,s=(0,u.c)(3),n=aP;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(I.z,{className:aB.editorButton,href:ak.A.vscode.url,leadingVisual:(0,c.jsx)("img",{src:ak.A.vscode.icon,alt:"",height:"20",width:"20"}),onClick:()=>{n("vscode","ide_menu_primary_button_click")},children:"Download"}),s[0]=e):e=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(am.W.Anchor,{children:(0,c.jsx)(eQ.K,{"aria-label":"More editors",icon:eo.TriangleDownIcon,className:aB.dropdownButton,unsafeDisableTooltip:!0,onClick:()=>{n("menu","ide_menu_open")}})}),s[1]=t):t=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsxs)(aR.A,{className:aB.actions,children:[e,(0,c.jsxs)(am.W,{children:[t,(0,c.jsx)(am.W.Overlay,{align:"end",children:(0,c.jsx)(ah.l,{children:(0,c.jsxs)(ah.l.Group,{variant:"subtle",children:[(0,c.jsx)(ah.l.GroupHeading,{children:"Download for"}),(0,c.jsx)(aT.t,{menuLocation:"editor_cta",mode:"immersive"})]})})})]})]}),s[2]=a):a=s[2],a}function aP(e,t){B.W.freeToPaidTelemetry?(0,aT.F)({eventName:e,menuLocation:"editor_cta",mode:"immersive",action:t}):(0,E.BI)("dotcom_chat.activate",{target:`EDITOR_UPSELL_BANNER_${e.toUpperCase()}`,mode:"immersive"})}try{aO.displayName||(aO.displayName="EditorDownload")}catch{}let aL={mobileActions:"NewConversationDownloadActions-module__mobileActions--MXDvY",desktopActions:"NewConversationDownloadActions-module__desktopActions--SOL35"},aM="https://github.com/features/copilot/cli";function aU(){let e,t,a=(0,u.c)(2);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("div",{className:aL.mobileActions,children:(0,c.jsx)(az,{})}),a[0]=e):e=a[0],a[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsxs)(c.Fragment,{children:[e,(0,c.jsxs)("div",{className:aL.desktopActions,children:[(0,c.jsx)(a_.Q,{as:"a",href:aM,leadingVisual:eo.TerminalIcon,children:"CLI"}),(0,c.jsx)(aO,{})]})]}),a[1]=t):t=a[1],t}function az(){let e,t,a,s,n,r=(0,u.c)(5);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(am.W.Anchor,{id:"custom-anchor-id",children:(0,c.jsx)(eQ.K,{icon:eo.KebabHorizontalIcon,"aria-label":"Open menu"})}),r[0]=e):e=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(ah.l.GroupHeading,{children:"Download for"}),a=(0,c.jsx)(aT.t,{menuLocation:"editor_cta",mode:"immersive"}),s=(0,c.jsx)(ah.l.Divider,{}),r[1]=t,r[2]=a,r[3]=s):(t=r[1],a=r[2],s=r[3]),r[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsxs)(am.W,{children:[e,(0,c.jsx)(am.W.Overlay,{children:(0,c.jsxs)(ah.l,{children:[t,a,s,(0,c.jsxs)(ah.l.LinkItem,{href:aM,children:[(0,c.jsx)(ah.l.LeadingVisual,{children:(0,c.jsx)(eo.TerminalIcon,{})}),"CLI"]})]})})]}),r[4]=n):n=r[4],n}try{aU.displayName||(aU.displayName="NewConversationDownloadActions")}catch{}try{az.displayName||(az.displayName="MobileMenu")}catch{}var a$=a(31078),aW=a(53552),aV=a(54030),aG=a(71363),aH=a(61180),aq=a(54114),aK=a(39176),aQ=a(78314),aJ=a(19579);let aY={resourcePanel:"ResourcePanel-module__resourcePanel--QFUYz",resourcePanelHeader:"ResourcePanel-module__resourcePanelHeader--xpYIo",resourcePanelHeaderRow:"ResourcePanel-module__resourcePanelHeaderRow--U3piY",resourcePanelContent:"ResourcePanel-module__resourcePanelContent--zjIvl",resourcePanelPlaceholder:"ResourcePanel-module__resourcePanelPlaceholder--Tzewz",resourcePanelRepoButton:"ResourcePanel-module__resourcePanelRepoButton--W2AOy",resourcePanelNavItem:"ResourcePanel-module__resourcePanelNavItem--Q9A53"};function aX(e){let t,a,s,n,r,i,o,l,d,m,h,_,D,g,f,x,C,y,v,b,S,E=(0,u.c)(45),{className:N}=e,{closeResourcePanel:I}=(0,j.xx)(),[w,F]=(0,p.useState)(!1),[A,T]=(0,aH.T)(),[k,R]=(0,p.useState)("files"),[B,O]=(0,p.useState)(""),P=(0,H.b)(),L=(0,p.useRef)(null),M=A?`${A.ownerLogin}/${A.name}`:"Select Repo";E[0]!==N?(t=(0,eJ.$)(aY.resourcePanel,N),E[0]=N,E[1]=t):t=E[1],E[2]===Symbol.for("react.memo_cache_sentinel")?(a=()=>F(!0),E[2]=a):a=E[2],E[3]!==M?(s=(0,c.jsx)(a_.Q,{ref:L,onClick:a,variant:"invisible",trailingVisual:eo.ChevronDownIcon,className:aY.resourcePanelRepoButton,children:M}),E[3]=M,E[4]=s):s=E[4],E[5]===Symbol.for("react.memo_cache_sentinel")?(n=new Set,E[5]=n):n=E[5],E[6]!==P||E[7]!==T?(r=async e=>{if(!e)return;let t=await P.service.fetchRepo(e);t.ok&&t.payload?T(t.payload):t.error&&O(t.error)},E[6]=P,E[7]=T,E[8]=r):r=E[8],E[9]!==w||E[10]!==r?(i=(0,c.jsx)(aG.X1,{selectionVariant:"instant",open:w,onOpenChange:F,selectedRepoIds:n,onSelectRepo:r,submitReturnFocusRef:L,cancelReturnFocusRef:L,anchorRef:L,includeForks:!0}),E[9]=w,E[10]=r,E[11]=i):i=E[11],E[12]!==I?(o=(0,c.jsx)("div",{className:"d-flex flex-justify-end",children:(0,c.jsx)(eQ.K,{size:"small",icon:eo.SidebarCollapseIcon,"aria-label":"Close resource panel",onClick:I,variant:"invisible"})}),E[12]=I,E[13]=o):o=E[13],E[14]!==s||E[15]!==i||E[16]!==o?(l=(0,c.jsxs)("div",{className:aY.resourcePanelHeaderRow,children:[s,i,o]}),E[14]=s,E[15]=i,E[16]=o,E[17]=l):l=E[17];let U="files"===k?"location":void 0;E[18]===Symbol.for("react.memo_cache_sentinel")?(d=e=>{R("files"),e.preventDefault()},E[18]=d):d=E[18],E[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,c.jsx)(eo.CodeIcon,{}),E[19]=m):m=E[19],E[20]!==U?(h=(0,c.jsx)(aJ.O.Item,{"aria-current":U,"aria-label":"Files",onSelect:d,className:aY.resourcePanelNavItem,children:m}),E[20]=U,E[21]=h):h=E[21];let z="pull-requests"===k?"location":void 0;E[22]===Symbol.for("react.memo_cache_sentinel")?(_=e=>{R("pull-requests"),e.preventDefault()},E[22]=_):_=E[22],E[23]===Symbol.for("react.memo_cache_sentinel")?(D=(0,c.jsx)(eo.GitPullRequestIcon,{}),E[23]=D):D=E[23],E[24]!==z?(g=(0,c.jsx)(aJ.O.Item,{"aria-current":z,"aria-label":"Pull requests",onSelect:_,className:aY.resourcePanelNavItem,children:D}),E[24]=z,E[25]=g):g=E[25];let $="issues"===k?"location":void 0;return E[26]===Symbol.for("react.memo_cache_sentinel")?(f=e=>{R("issues"),e.preventDefault()},E[26]=f):f=E[26],E[27]===Symbol.for("react.memo_cache_sentinel")?(x=(0,c.jsx)(eo.IssueOpenedIcon,{}),E[27]=x):x=E[27],E[28]!==$?(C=(0,c.jsx)(aJ.O.Item,{"aria-current":$,"aria-label":"Issues",onSelect:f,className:aY.resourcePanelNavItem,children:x}),E[28]=$,E[29]=C):C=E[29],E[30]!==h||E[31]!==g||E[32]!==C?(y=(0,c.jsxs)(aJ.O,{"aria-label":"Resource panel navigation",children:[h,g,C]}),E[30]=h,E[31]=g,E[32]=C,E[33]=y):y=E[33],E[34]!==y||E[35]!==l?(v=(0,c.jsxs)("div",{className:aY.resourcePanelHeader,children:[l,y]}),E[34]=y,E[35]=l,E[36]=v):v=E[36],E[37]!==B||E[38]!==A||E[39]!==k?(b=(0,c.jsx)("div",{className:aY.resourcePanelContent,children:"files"===k?A?(0,c.jsx)("div",{children:(0,c.jsx)(aQ.d,{repository:A,children:(0,c.jsx)(a$.Ck,{children:(0,c.jsx)(aW.qV,{refInfo:{name:A.refInfo.name,canEdit:!0,listCacheKey:"anything",currentOid:A.commitOID},path:"test",action:"tree",copilotAccessAllowed:!0,children:(0,c.jsx)(aZ,{currentRepo:A,fetchError:B})})})})}):(0,c.jsx)("div",{className:aY.resourcePanelPlaceholder,children:"Select a repository to view files"}):(0,c.jsx)("div",{className:aY.resourcePanelPlaceholder,children:"Coming soon..."})}),E[37]=B,E[38]=A,E[39]=k,E[40]=b):b=E[40],E[41]!==t||E[42]!==v||E[43]!==b?(S=(0,c.jsxs)("div",{className:t,"data-testid":"resource-panel",children:[v,b]}),E[41]=t,E[42]=v,E[43]=b,E[44]=S):S=E[44],S}function aZ(e){let t,a,s,n,r,i=(0,u.c)(21),{currentRepo:o,fetchError:l}=e,{openPreviewPane:d,openItem:m,updateItem:h}=(0,j.xx)(),_=(0,H.b)(),{list:D,directories:g,loading:f}=(0,aV.o)(o.commitOID,!0);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],i[0]=t):t=i[0];let[x,C]=(0,p.useState)(t),[y,v]=(0,p.useState)(a2);i[1]!==o.id||i[2]!==o.refInfo||i[3]!==_||i[4]!==m||i[5]!==d||i[6]!==h?(a=async e=>{if(0===e.size)return;let t=Array.from(e)[0],a=await _.service.fetchFileContents(o.id,o.refInfo.name,t);if(a.ok&&a.payload){let e={messageId:ep.Wp,id:`file:${t}#0`,timestamp:new Date,isUserEdited:!1,value:a.payload?.content,type:"file",name:t,isStreaming:!1,language:a.payload?.language??"plaintext"};h(e),m(e.id),d()}v(new Set([t]))},i[1]=o.id,i[2]=o.refInfo,i[3]=_,i[4]=m,i[5]=d,i[6]=h,i[7]=a):a=i[7];let b=a;i[8]!==g||i[9]!==D?(s=()=>{C((0,aK.k)({paths:D,directories:g}))},i[8]=g,i[9]=D,i[10]=s):s=i[10],i[11]!==o.commitOID||i[12]!==g||i[13]!==D?(n=[D,g,C,o.commitOID],i[11]=o.commitOID,i[12]=g,i[13]=D,i[14]=n):n=i[14],(0,p.useEffect)(s,n);let S=f||!1,E=!!l;return i[15]!==b||i[16]!==x||i[17]!==y||i[18]!==S||i[19]!==E?(r=(0,c.jsx)(aq.Rw,{rootItems:x,expandedPath:"",setRootItems:C,navigateOnClick:!1,directoryNavigateOnClick:!1,selectedItems:y,onSelectionChange:b,loading:S,fetchError:E,sortDirectoryItems:a0,singleSelect:!0}),i[15]=b,i[16]=x,i[17]=y,i[18]=S,i[19]=E,i[20]=r):r=i[20],r}function a0(e){return e.sort(a1)}function a1(e,t){return e.data.name.localeCompare(t.data.name)}function a2(){return new Set}try{aX.displayName||(aX.displayName="ResourcePanel")}catch{}try{aZ.displayName||(aZ.displayName="ResourcePanelFileTree")}catch{}var a3=a(17005),a4=a(76872),a6=a(56149);let a7={ReportSpaceContainer:"ReportSpaceDialog-module__ReportSpaceContainer--zrFJR",ReportSpaceHelpText:"ReportSpaceDialog-module__ReportSpaceHelpText--dcoV2",ReportSpaceSubmitButton:"ReportSpaceDialog-module__ReportSpaceSubmitButton--c04jD",ReportSpaceFooterSpacing:"ReportSpaceDialog-module__ReportSpaceFooterSpacing--eTYaB",ReportSpaceDialog:"ReportSpaceDialog-module__ReportSpaceDialog--X_oiN"},a5=({reportUrl:e,onClose:t})=>{let a=(0,c.jsxs)("div",{className:a7.ReportSpaceContainer,children:[(0,c.jsx)("span",{children:"Contact GitHub Support about this user's spammy or abusive behavior."}),(0,c.jsxs)("div",{className:a7.ReportSpaceFooterSpacing,children:[(0,c.jsxs)("div",{className:a7.ReportSpaceHelpText,children:[(0,c.jsx)("span",{children:"Learn more about "}),(0,c.jsx)(ev.A,{href:"https://docs.github.com/articles/reporting-abuse-or-spam",children:"reporting abuse to GitHub support"})]}),e&&(0,c.jsx)(a_.Q,{variant:"danger",as:"a",href:e,target:"_blank",rel:"noopener noreferrer",className:a7.ReportSpaceSubmitButton,children:"Report abuse to GitHub support"})]})]});return(0,c.jsx)(a6.ZL,{children:(0,c.jsx)(aE.l,{title:"Report Space to GitHub Support",width:"xlarge",height:"auto",onClose:t,className:a7.ReportSpaceDialog,children:a})})};try{a5.displayName||(a5.displayName="ReportSpaceDialog")}catch{}var a8=a(96459),a9=a(72511),se=a(72011),st=a(97665),sa=a(94747),ss=a(96379),sn=a(24990),sr=a(69726),si=a(51563),so=a(40260),sl=a(77430),sc=a(71315),su=a(46251),sd=a(69497),sm=a(99511),sh=a(97286);let sp=(e,t)=>{let a,s,n,r,i,o,l,c,d,m,h,p,_,D,g,f,x,C,y=(0,u.c)(51),v=(0,st.jE)();y[0]!==t||y[1]!==e?(a=(0,O.Cb)({id:t,owner:e}),y[0]=t,y[1]=e,y[2]=a):a=y[2];let b=a,j=`${b}/permissions`;y[3]!==j?(s={queryKey:["copilotSpaceCollaborators",j],queryFn:async()=>{let e=await (0,ss.lS)(j),t=await e.json();if(!e.ok)throw t.errorMessages;return t}},y[3]=j,y[4]=s):s=y[4];let{data:S,isLoading:E}=(0,sh.I)(s);y[5]!==j?(n=async e=>{let t=await (0,ss.lS)(j,{method:"POST",body:{permission:e}}),a=await t.json();if(!t.ok)throw a.errorMessages;return a},y[5]=j,y[6]=n):n=y[6],y[7]!==j||y[8]!==v||y[9]!==t||y[10]!==e?(r=()=>(v.invalidateQueries({queryKey:(0,se.dp)({id:t,owner:e})}),v.invalidateQueries({queryKey:["copilotSpaceCollaborators",j]})),y[7]=j,y[8]=v,y[9]=t,y[10]=e,y[11]=r):r=y[11],y[12]!==n||y[13]!==r?(i={mutationFn:n,onSuccess:r},y[12]=n,y[13]=r,y[14]=i):i=y[14];let N=(0,sa.n)(i);y[15]!==N?({mutateAsync:o,...l}=N,y[15]=N,y[16]=o,y[17]=l):(o=y[16],l=y[17]),y[18]!==j?(c=async e=>{let t=await (0,ss.lS)(j,{method:"PUT",body:{permission:e}}),a=await t.json();if(!t.ok)throw a.errorMessages;return a},y[18]=j,y[19]=c):c=y[19],y[20]!==j||y[21]!==v?(d=()=>v.invalidateQueries({queryKey:["copilotSpaceCollaborators",j]}),y[20]=j,y[21]=v,y[22]=d):d=y[22],y[23]!==c||y[24]!==d?(m={mutationFn:c,onSuccess:d},y[23]=c,y[24]=d,y[25]=m):m=y[25];let I=(0,sa.n)(m);y[26]!==I?({mutateAsync:h,...p}=I,y[26]=I,y[27]=h,y[28]=p):(h=y[27],p=y[28]),y[29]!==j?(_=async e=>{let t=await (0,ss.lS)(j,{method:"DELETE",body:{permission:e}});if(!t.ok)throw(await t.json()).errorMessages},y[29]=j,y[30]=_):_=y[30],y[31]!==j||y[32]!==v||y[33]!==t||y[34]!==e?(D=()=>(v.invalidateQueries({queryKey:(0,se.dp)({id:t,owner:e})}),v.invalidateQueries({queryKey:["copilotSpaceCollaborators",j]})),y[31]=j,y[32]=v,y[33]=t,y[34]=e,y[35]=D):D=y[35],y[36]!==_||y[37]!==D?(g={mutationFn:_,onSuccess:D},y[36]=_,y[37]=D,y[38]=g):g=y[38];let w=(0,sa.n)(g);return y[39]!==w?({mutateAsync:f,...x}=w,y[39]=w,y[40]=f,y[41]=x):(f=y[40],x=y[41]),y[42]!==o||y[43]!==l||y[44]!==S||y[45]!==E||y[46]!==f||y[47]!==x||y[48]!==h||y[49]!==p?(C={collaborators:S,isLoading:E,addCollaborator:o,updateCollaborator:h,removeCollaborator:f,isAddPending:l.isPending,isUpdatePending:p.isPending,isRemovePending:x.isPending,...l,...p,...x},y[42]=o,y[43]=l,y[44]=S,y[45]=E,y[46]=f,y[47]=x,y[48]=h,y[49]=p,y[50]=C):C=y[50],C};function s_(e){if("user"in e)return{...e.user,actor_type:"user"};if("team"in e)return{...e.team,actor_type:"team"};throw Error("suggestion has a value, but the types suggest this should not be possible. Did we account for all possible options properly in the typings?")}let sD={copyLinkSection:"SpaceCollaborators-module__copyLinkSection--G8YCd",spacesSuggestionsList:"SpaceCollaborators-module__spacesSuggestionsList--oqwht"};function sg({copilotSpace:e,onError:t}){let a=(0,H.b)(),[s,n]=(0,p.useState)(""),[r,i]=(0,p.useState)(!1),o=(0,p.useRef)(null),l=B.W.copilotSpacesReadAccessToUserOwnedSpaces,{data:d,isLoading:m}=(e=>{let t,a,s,n,r,i,o=(0,u.c)(17),{input:l}=e;o[0]!==l?(t=["suggestedSpaceCollaborators",l],o[0]=l,o[1]=t):t=o[1],o[2]!==l.allUsers||o[3]!==l.query||o[4]!==l.spaceId||o[5]!==l.spaceOwner?(a=async()=>{let e=(0,O.Cb)({id:l.spaceId,owner:l.spaceOwner}),t=l.allUsers?`${e}/suggested_collaborators?q=${encodeURIComponent(l.query)}&all_users=true`:`${e}/suggested_collaborators?q=${encodeURIComponent(l.query)}`,a=await (0,ss.lS)(t);if(!a.ok)throw Error("Failed to fetch suggested collaborators");return(await a.json()).suggestions.map(s_)},o[2]=l.allUsers,o[3]=l.query,o[4]=l.spaceId,o[5]=l.spaceOwner,o[6]=a):a=o[6];let c=!!l.query;o[7]!==t||o[8]!==a||o[9]!==c?(s={queryKey:t,queryFn:a,enabled:c},o[7]=t,o[8]=a,o[9]=c,o[10]=s):s=o[10];let d=(0,sh.I)(s);return o[11]!==d?({data:n,...r}=d,o[11]=d,o[12]=n,o[13]=r):(n=o[12],r=o[13]),o[14]!==n||o[15]!==r?(i={data:n,...r},o[14]=n,o[15]=r,o[16]=i):i=o[16],i})({input:{query:(0,p.useDeferredValue)(s.startsWith("@")?s.trim().slice(1):s.trim()),spaceOwner:e.owner,spaceId:e.id,allUsers:l&&!e.ownerIsOrg}}),{collaborators:h,addCollaborator:_,error:D,isLoading:g}=sp(e.owner,e.id);async function f(s){if(h?.some(e=>e.actor_id===s.id&&e.actor_type===s.actor_type)){n(""),i(!1);return}try{await _({actor_id:s.id,role_name:"custom_copilot_reader",actor_type:s.actor_type}),n(""),!e.ownerIsOrg&&h&&h?.length<=1&&a.dispatch({type:"SET_CUSTOM_COPILOT",partial:!0,customCopilot:{...e,collaborative:!0}}),i(!1)}catch{t({base:"An error occurred while adding a collaborator."})}}return(0,p.useEffect)(()=>{function e(e){o.current&&!o.current.contains(e.target)&&i(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,p.useEffect)(()=>{i(!!(s&&!m&&d&&d.length>0))},[s,d,m]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(su.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,c.jsx)("span",{className:"text-small text-bold color-fg-muted mb-1",children:"People with access"}),(0,c.jsxs)("div",{className:sD.copyLinkSection,style:{position:"relative"},children:[(0,c.jsx)(sm.A,{block:!0,placeholder:e.ownerIsOrg?`Search people within ${e.owner}`:"Search for any GitHub user",value:s,onChange:e=>n(e.target.value),className:"color-fg-default","aria-label":e.ownerIsOrg?"Search for users or teams to share this space with":"Search for any GitHub user to share this space with"}),r&&d&&(0,c.jsx)("div",{ref:o,children:(0,c.jsx)(sv,{items:d,onSelect:f})})]})]}),g?(0,c.jsx)("div",{className:"d-flex flex-justify-center p-2",children:(0,c.jsx)(sr.A,{})}):D?(0,c.jsx)(N.l,{variant:"critical",title:"There was a problem with loading this Space's collaborators."}):h&&h.length>0?(0,c.jsx)(su.B,{direction:"vertical",gap:"condensed",align:"start",children:h.map(a=>(0,c.jsx)(sf,{actor:a,copilotSpace:e,collaboratorsCount:h.length,onError:t},`${a.actor_type}-${a.actor_id}`))}):(0,c.jsx)("span",{className:"text-small color-fg-muted p-2",children:"This Space isn't shared with anyone yet"})]})}function sf(e){let t,a,s,n,r,i,o,l,d,m=(0,u.c)(27),{actor:h,copilotSpace:p,onError:_,collaboratorsCount:D}=e,g="user"===h.actor_type?h.display_login:h.slug,f="team"===h.actor_type;return m[0]!==h.avatar_url||m[1]!==f?(t=(0,c.jsx)(sl.r,{src:h.avatar_url,className:"mr-2",square:f,size:32}),m[0]=h.avatar_url,m[1]=f,m[2]=t):t=m[2],m[3]!==g?(a=(0,c.jsx)("b",{children:g}),m[3]=g,m[4]=a):a=m[4],m[5]!==g||m[6]!==a?(s=(0,c.jsx)("span",{className:"ml-1",children:(0,c.jsx)(sd.A,{maxWidth:"230px",title:g,inline:!0,children:a})}),m[5]=g,m[6]=a,m[7]=s):s=m[7],m[8]!==h.name?(n=(0,c.jsx)("p",{children:h.name}),m[8]=h.name,m[9]=n):n=m[9],m[10]!==h.name||m[11]!==n?(r=(0,c.jsx)("span",{className:"text-small color-fg-muted ml-1",children:(0,c.jsx)(sd.A,{maxWidth:"230px",title:h.name,inline:!0,children:n})}),m[10]=h.name,m[11]=n,m[12]=r):r=m[12],m[13]!==s||m[14]!==r?(i=(0,c.jsxs)("div",{className:"d-flex flex-column mt-1",children:[s,r]}),m[13]=s,m[14]=r,m[15]=i):i=m[15],m[16]!==t||m[17]!==i?(o=(0,c.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[t,i]}),m[16]=t,m[17]=i,m[18]=o):o=m[18],m[19]!==h||m[20]!==D||m[21]!==p||m[22]!==_?(l=(0,c.jsx)(sy,{actor:h,onError:_,copilotSpace:p,collaboratorsCount:D}),m[19]=h,m[20]=D,m[21]=p,m[22]=_,m[23]=l):l=m[23],m[24]!==o||m[25]!==l?(d=(0,c.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[o,l]}),m[24]=o,m[25]=l,m[26]=d):d=m[26],d}let sx=[{text:"Admin",value:"custom_copilot_admin"},{text:"Editor",value:"custom_copilot_writer"},{text:"Viewer",value:"custom_copilot_reader"}],sC={custom_copilot_admin:"Can view, make changes and add new people",custom_copilot_writer:"Can view and make changes",custom_copilot_reader:"Can view"};function sy({actor:e,onError:t,copilotSpace:a,collaboratorsCount:s}){let n=(0,H.b)(),[r,i]=(0,p.useState)(!1),o=(0,p.useRef)(null),l=sx.find(t=>t.value===e.role),{updateCollaborator:u,removeCollaborator:d,isUpdatePending:m,isRemovePending:h}=sp(a.owner,a.id);async function _(a){try{await u({actor_id:e.actor_id,role_name:a,actor_type:e.actor_type})}catch{t({base:"An error occurred while updating an actor's permission level."})}finally{i(!1)}}async function D(){try{await d({actor_id:e.actor_id,actor_type:e.actor_type})}catch{t({base:"An error occurred while removing an actor's permissions."})}finally{!a.ownerIsOrg&&s<=2&&n.dispatch({type:"SET_CUSTOM_COPILOT",partial:!0,customCopilot:{...a,collaborative:!1}}),i(!1)}}return(0,c.jsxs)(am.W,{onOpenChange:i,anchorRef:o,open:r,children:[(0,c.jsx)(am.W.Button,{disabled:e.disabled,loading:m||h,variant:"invisible",className:"text-small",ref:o,onClick:()=>i(!0),"aria-label":`Change role for ${e.name}`,children:(0,c.jsx)(sd.A,{title:l?.text||"",inline:!0,children:l?.text})}),(0,c.jsx)(am.W.Overlay,{side:"outside-bottom",align:"end",width:"medium",children:(0,c.jsxs)(ah.l,{selectionVariant:"single","aria-label":`Role options for ${e.name}`,children:[sx.map(e=>(0,c.jsxs)(ah.l.Item,{selected:e.value===l?.value,onSelect:()=>_(e.value),children:[(0,c.jsx)("span",{className:"text-medium",children:(0,c.jsx)("b",{children:e.text})}),(0,c.jsx)("span",{className:"text-small color-fg-muted",children:(0,c.jsx)("p",{className:"m-0",children:sC[e.value]})})]},e.value)),(0,c.jsx)(ah.l.Divider,{}),(0,c.jsxs)(ah.l.Item,{variant:"danger",onSelect:()=>D(),children:[(0,c.jsx)("span",{className:"text-medium",children:(0,c.jsx)("b",{children:"Remove"})}),(0,c.jsx)("span",{className:"text-small color-fg-muted",children:(0,c.jsx)("p",{className:"m-0",children:"Loses access to this content"})})]},"remove")]})})]})}function sv(e){let t,a,s=(0,u.c)(7),{items:n,onSelect:r}=e;if(s[0]!==n||s[1]!==r){let e;s[3]!==r?(e=e=>{let t=`${e.actor_type}-${e.id}`,a="user"===e.actor_type?e.login:e.slug;return(0,c.jsxs)(ah.l.Item,{onSelect:()=>r(e),role:"option",children:[(0,c.jsx)(ah.l.LeadingVisual,{children:(0,c.jsx)(sl.r,{src:e.avatarUrl,square:"team"===e.actor_type,size:20})}),(0,c.jsx)("span",{className:"text-bold",children:a}),e.name&&(0,c.jsx)(ah.l.Description,{children:e.name})]},t)},s[3]=r,s[4]=e):e=s[4],t=n.map(e),s[0]=n,s[1]=r,s[2]=t}else t=s[2];return s[5]!==t?(a=(0,c.jsx)("div",{role:"dialog","aria-label":"Suggested collaborators",className:sD.spacesSuggestionsList,children:(0,c.jsx)(ah.l,{children:t})}),s[5]=t,s[6]=a):a=s[6],a}try{sg.displayName||(sg.displayName="SpaceCollaborators")}catch{}try{sf.displayName||(sf.displayName="SpaceCollaboratorRow")}catch{}try{2..displayName||(2..displayName="MIN_COLLABORATORS_TO_BE_COLLABORATIVE")}catch{}try{sy.displayName||(sy.displayName="ActorRoleSelect")}catch{}try{sv.displayName||(sv.displayName="SpacesSuggestionsList")}catch{}let sb={spaceVisibilityDialog:"SpaceSharingDialog-module__spaceVisibilityDialog--q8XMu",errorBanner:"SpaceSharingDialog-module__errorBanner--SkBp1",visibilityDropdown:"SpaceSharingDialog-module__visibilityDropdown--HMESi",visibilityChoice:"SpaceSharingDialog-module__visibilityChoice--Z75rm",visibilityIcon:"SpaceSharingDialog-module__visibilityIcon--KK57C",attentionIcon:"SpaceSharingDialog-module__attentionIcon--lZ9Sq",accentIcon:"SpaceSharingDialog-module__accentIcon--q8VZ5",footerText:"SpaceSharingDialog-module__footerText--TJavK"};function sj(e){let t,a,s,n,r,i,o,l,d,m=(0,u.c)(23),{closeDialog:h,customCopilotId:_,userOwned:D}=e;m[0]===Symbol.for("react.memo_cache_sentinel")?(t={},m[0]=t):t=m[0];let[g,f]=(0,p.useState)(t),[x,C]=(0,p.useState)(!1),y=(0,p.useRef)(null),{isPending:v,data:b}=(0,P.Ao)(_),j=B.W.copilotSpacesReadAccessToUserOwnedSpaces&&void 0!==D&&D,S=B.W.spacesIndividualRestrictedOrgContent&&!v&&!b?.shareable,E=()=>S?null:(0,c.jsx)(sw,{copySharedLink:w,copied:x,isSpaceLoading:v,copilotSpace:b});m[1]===Symbol.for("react.memo_cache_sentinel")?(a=()=>()=>{y.current&&(clearTimeout(y.current),y.current=null)},s=[],m[1]=a,m[2]=s):(a=m[1],s=m[2]),(0,p.useEffect)(a,s),m[3]!==e.customCopilotId?(n=(0,O.Cb)(e.customCopilotId),m[3]=e.customCopilotId,m[4]=n):n=m[4];let I=`${sc.fV.origin}${n}`,w=()=>{(0,so.D)(I),C(!0),y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{C(!1),y.current=null},2e3)};return m[5]===Symbol.for("react.memo_cache_sentinel")?(r={narrow:"fullscreen"},m[5]=r):r=m[5],m[6]!==S?(i=S&&(0,c.jsx)(N.l,{hideTitle:!0,variant:"warning",title:"org content restricted",description:"This space contains resources owned by an organization and cannot be shared. Please either delete the resources owned by the organization or duplicate this space and change ownership to the organization."}),m[6]=S,m[7]=i):i=m[7],m[8]!==g.base||m[9]!==g.visibility?(o=g.base||g.visibility?(0,c.jsx)(N.l,{hideTitle:!0,title:"Unable to update space",description:g.visibility||g.base,"aria-label":"Critical",variant:"critical",className:sb.errorBanner}):null,m[8]=g.base,m[9]=g.visibility,m[10]=o):o=m[10],m[11]!==b||m[12]!==v||m[13]!==S||m[14]!==e||m[15]!==j?(l=!S&&(0,c.jsxs)(su.B,{"data-testid":"custom-copilot-visibility",gap:"condensed",children:[b&&(0,c.jsx)(sg,{copilotSpace:b,onError:f}),(0,c.jsx)(ah.l.Divider,{}),j?(0,c.jsx)(sk,{copilotSpace:b,isSpaceLoading:v,onError:f}):(0,c.jsxs)(su.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,c.jsx)("span",{className:"text-small text-bold color-fg-muted",children:"Settings"}),(0,c.jsx)(sS,{onError:f,copilotSpace:b,isSpaceLoading:v,...e})]})]}),m[11]=b,m[12]=v,m[13]=S,m[14]=e,m[15]=j,m[16]=l):l=m[16],m[17]!==h||m[18]!==E||m[19]!==i||m[20]!==o||m[21]!==l?(d=(0,c.jsxs)(aE.l,{position:r,title:"Share this space",renderFooter:E,onClose:h,className:sb.spaceVisibilityDialog,width:"large","aria-label":"Share this space",children:[i,o,l]}),m[17]=h,m[18]=E,m[19]=i,m[20]=o,m[21]=l,m[22]=d):d=m[22],d}function sS(e){let t,a,s,n,r,i,o,l,d,m,h,_,D=(0,u.c)(36),{copilotSpace:g,isSpaceLoading:f,onError:x}=e,{data:C,isLoading:y,error:v}=(0,P.Tx)(g?.owner||"",g?.id??-1);if(D[0]!==g||D[1]!==f||D[2]!==y||D[3]!==x||D[4]!==C?(t=()=>{f||y||g&&C||x({visibility:"Could not load your space's visibility settings"})},a=[f,y,g,C,x],D[0]=g,D[1]=f,D[2]=y,D[3]=x,D[4]=C,D[5]=t,D[6]=a):(t=D[5],a=D[6]),(0,p.useEffect)(t,a),f){let e;return D[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}),D[7]=e):e=D[7],e}if(!g){let e;return D[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."}),D[8]=e):e=D[8],e}let b=g.owner,j=C?.memberCount;return D[9]!==g.ownerAvatar?(s=(0,c.jsx)(sl.r,{src:g.ownerAvatar,className:"mr-2",square:!0,size:32}),D[9]=g.ownerAvatar,D[10]=s):s=D[10],D[11]!==g.ownerDisplayName?(n=(0,c.jsx)("b",{children:g.ownerDisplayName}),D[11]=g.ownerDisplayName,D[12]=n):n=D[12],D[13]!==g.ownerDisplayName||D[14]!==n?(r=(0,c.jsx)(sd.A,{maxWidth:"230px",title:g.ownerDisplayName,inline:!0,children:n}),D[13]=g.ownerDisplayName,D[14]=n,D[15]=r):r=D[15],D[16]===Symbol.for("react.memo_cache_sentinel")?(i=(0,c.jsx)("span",{className:"color-fg-muted ml-1",children:"(owner)"}),D[16]=i):i=D[16],D[17]!==r?(o=(0,c.jsxs)("span",{className:"ml-1",children:[r,i]}),D[17]=r,D[18]=o):o=D[18],D[19]!==v||D[20]!==y||D[21]!==j||D[22]!==b?(l=b&&(0,c.jsxs)(c.Fragment,{children:[!y&&null!==j&&(0,c.jsxs)("span",{className:"text-small color-fg-muted ml-1",children:[j," ",1===j?"person":"people"]}),(y||v||null===j)&&(0,c.jsx)("span",{className:"text-small color-fg-muted ml-1",children:"Organization"})]}),D[19]=v,D[20]=y,D[21]=j,D[22]=b,D[23]=l):l=D[23],D[24]!==o||D[25]!==l?(d=(0,c.jsxs)("div",{className:"d-flex flex-column",children:[o,l]}),D[24]=o,D[25]=l,D[26]=d):d=D[26],D[27]!==s||D[28]!==d?(m=(0,c.jsxs)("div",{className:"d-flex flex-items-center mt-1",children:[s,d]}),D[27]=s,D[28]=d,D[29]=m):m=D[29],D[30]!==g||D[31]!==x?(h=(0,c.jsx)(sI,{onError:x,copilotSpace:g}),D[30]=g,D[31]=x,D[32]=h):h=D[32],D[33]!==m||D[34]!==h?(_=(0,c.jsxs)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:[m,h]}),D[33]=m,D[34]=h,D[35]=_):_=D[35],_}let sE=[{text:"Admin",value:"custom_copilot_admin"},{text:"Editor",value:"custom_copilot_writer"},{text:"Viewer",value:"custom_copilot_reader"},{text:"No access",value:"none"}],sN={custom_copilot_admin:"Can view, make changes and add new people",custom_copilot_writer:"Can view and make changes",custom_copilot_reader:"Can view",none:"Hidden from your organization"};function sI({copilotSpace:e,onError:t}){let[a,s]=(0,p.useState)(!1),n=(0,p.useRef)(null),r=sE.find(t=>t.value===e.baseRole),{upsertCopilotSpace:i,isPending:o}=(0,si.$)(e);async function l(e){if(!o)try{await i({baseRole:e})}catch{t({base:"An error occurred while updating your space's base role."})}finally{s(!1)}}return e.adminable?(0,c.jsxs)(am.W,{onOpenChange:s,anchorRef:n,open:a,children:[(0,c.jsx)(am.W.Button,{loading:o,variant:"invisible",className:"text-small",ref:n,onClick:()=>s(!0),children:(0,c.jsx)(sd.A,{title:r?.text||"",inline:!0,children:r?.text})}),(0,c.jsx)(am.W.Overlay,{side:"outside-bottom",align:"end",width:"medium",children:(0,c.jsx)(ah.l,{selectionVariant:"single",children:sE.map(e=>(0,c.jsxs)(ah.l.Item,{selected:e.value===r?.value,onSelect:()=>l(e.value),children:[(0,c.jsx)("span",{className:"text-medium",children:(0,c.jsx)("b",{children:e.text})}),(0,c.jsx)("span",{className:"text-small color-fg-muted",children:(0,c.jsx)("p",{className:"m-0",children:sN[e.value]})})]},e.value))})})]}):(0,c.jsx)("div",{children:(0,c.jsx)(sd.A,{title:r?.text||"",className:"text-small text-light",children:r?.text})})}function sw(e){let t,a,s,n,r,i=(0,u.c)(12),{copySharedLink:o,copied:l,isSpaceLoading:d,copilotSpace:m}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={borderBottomLeftRadius:"var(--borderRadius-large, 0.75rem)",borderBottomRightRadius:"var(--borderRadius-large, 0.75rem)",borderTop:"1px solid var(--borderColor-muted)",padding:"var(--base-size-12)"},i[0]=t):t=i[0],i[1]!==m?.ownerIsOrg?(a=!m?.ownerIsOrg&&(0,c.jsxs)("div",{className:sb.footerText,children:[(0,c.jsx)(eo.InfoIcon,{}),(0,c.jsx)("span",{children:"Viewers will only see sources they have access to."})]}),i[1]=m?.ownerIsOrg,i[2]=a):a=i[2],i[3]===Symbol.for("react.memo_cache_sentinel")?(s={minWidth:"90px"},i[3]=s):s=i[3],i[4]!==l||i[5]!==m||i[6]!==o||i[7]!==d?(n=(0,c.jsx)("div",{style:s,className:"d-flex flex-items-center gap-2",children:l?(0,c.jsx)(a_.Q,{className:"color-fg-success",disabled:d||!m,children:"Link copied"}):(0,c.jsx)(a_.Q,{onClick:o,leadingVisual:eo.LinkIcon,disabled:d||!m,children:"Copy link"})}),i[4]=l,i[5]=m,i[6]=o,i[7]=d,i[8]=n):n=i[8],i[9]!==a||i[10]!==n?(r=(0,c.jsxs)(aE.l.Footer,{style:t,className:"color-fg-muted flex-items-center flex-justify-between text-small",children:[a,n]}),i[9]=a,i[10]=n,i[11]=r):r=i[11],r}let sF={text:"Restricted",value:"none",description:"Only people with access can open the link",icon:eo.LockIcon,color:"attention"},sA={text:"Anyone with link",value:"custom_copilot_reader",description:"Everyone with access to the resources can access the link",icon:eo.GlobeIcon,color:"accent"},sT=B.W.copilotSpacesPublicAccessToUserOwnedSpaces?[sF,sA]:[sF];function sk({copilotSpace:e,isSpaceLoading:t,onError:a}){let[s,n]=(0,p.useState)(!1),r=(0,p.useRef)(null),i=sT.find(t=>t.value===e?.baseRole)??sF,{upsertCopilotSpace:o,isPending:l}=(0,si.$)(e);async function u(e){if(!l)try{await o({baseRole:e})}catch{a({base:"An error occurred while updating your space's visibility."})}finally{n(!1)}}let d=i.icon;return t?(0,c.jsx)("div",{className:"color-fg-muted p-2",children:"Loading space information..."}):e?(0,c.jsxs)(su.B,{direction:"vertical",gap:"condensed",align:"start",children:[(0,c.jsx)("span",{className:"text-small text-bold color-fg-muted",children:"General access"}),(0,c.jsx)("div",{className:"width-full d-flex flex-items-center flex-justify-between",children:(0,c.jsxs)("div",{className:sb.visibilityChoice,children:[(0,c.jsx)("div",{className:(0,eJ.$)(sb.visibilityIcon,"accent"===i.color?sb.accentIcon:sb.attentionIcon),children:(0,c.jsx)(d,{size:16})}),(0,c.jsxs)("div",{className:"d-flex flex-column",children:[B.W.copilotSpacesPublicAccessToUserOwnedSpaces?(0,c.jsxs)(am.W,{onOpenChange:n,anchorRef:r,open:s,children:[(0,c.jsx)(am.W.Button,{loading:l,variant:"invisible",className:sb.visibilityDropdown,ref:r,onClick:()=>n(!0),disabled:!e.adminable,children:i.text}),(0,c.jsx)(am.W.Overlay,{side:"outside-top",align:"start",width:"small",children:(0,c.jsx)(ah.l,{selectionVariant:"single",children:sT.map(t=>{let a=t.icon;return(0,c.jsxs)(ah.l.Item,{selected:t.value===e.baseRole,onSelect:()=>u(t.value),children:[(0,c.jsx)(ah.l.LeadingVisual,{children:(0,c.jsx)(a,{})}),(0,c.jsx)("div",{className:"d-flex flex-column",children:(0,c.jsx)("span",{className:"text-medium",children:t.text})})]},t.value)})})})]}):(0,c.jsx)("span",{className:sb.visibilityDropdown,children:i.text}),(0,c.jsx)("span",{className:"text-small color-fg-muted p-1",children:i.description})]})]})})]}):(0,c.jsx)("div",{className:"color-fg-muted p-2",children:"Could not load data for your space."})}try{sj.displayName||(sj.displayName="SpaceSharingDialog")}catch{}try{sS.displayName||(sS.displayName="VisibilitySettings")}catch{}try{sI.displayName||(sI.displayName="BaseRoleSelect")}catch{}try{sw.displayName||(sw.displayName="CopilotSpaceSharingDialogFooter")}catch{}try{sk.displayName||(sk.displayName="UserOwnedVisibilitySettings")}catch{}function sR(e){let t,a,s,n,r,i,o,l,d,m,h,_,D,g,f,x,C,y,v,b,j,S=(0,u.c)(57),{onDelete:N,copilot:I}=e,[w,F]=(0,p.useState)(null),[A,T]=(0,p.useState)(!1),[k,R]=(0,p.useState)(!1),L=(0,p.useRef)(null),U=(0,M.Zp)(),z=B.W.copilotSpacesReadAccessToUserOwnedSpaces,$=I?.ownerIsOrg&&I?.adminable,W=z&&!I?.ownerIsOrg&&I?.adminable,V=$||W,G=I?.ownerIsOrg&&("none"!==I.baseRole||I.collaborative),H=!!(I&&(G||I?.shared));S[0]!==I?(t=I?{id:I.id,owner:I.owner}:null,S[0]=I,S[1]=t):t=S[1];let q=(0,P.$W)(t),K="duplicate"===w,{data:Q,isLoading:J}=(0,P.Ao)(K?I:null);"duplicate"===w&&k&&!J&&Q&&R(!1),S[2]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{(0,aD.flushSync)(()=>F(null)),L.current?.focus()},S[2]=a):a=S[2];let Y=a;S[3]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),Y()},S[3]=s):s=S[3];let X=s;S[4]===Symbol.for("react.memo_cache_sentinel")?(n=async e=>{Y(),T(!0),await e(),T(!1)},S[4]=n):n=S[4];let Z=n;S[5]!==N?(r=async()=>{(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_LIST_ACTION_DELETE",mode:"immersive"}),await Z(N)},S[5]=N,S[6]=r):r=S[6];let ee=r;S[7]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),F("share")},S[7]=i):i=S[7];let et=i;S[8]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DUPLICATE",mode:"immersive"}),F("duplicate"),e.preventDefault()},S[8]=o):o=S[8];let ea=o;S[9]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_REPORT",mode:"immersive"}),F("report")},S[9]=l):l=S[9];let es=l;return S[10]!==A?(d=(0,c.jsx)(am.W.Anchor,{children:(0,c.jsx)(eQ.K,{loading:A,icon:eo.KebabHorizontalIcon,"aria-label":"Manage space",variant:"invisible",onClick:sB})}),S[10]=A,S[11]=d):d=S[11],S[12]!==I||S[13]!==U?(m=I.editable&&(0,c.jsxs)(ah.l.Item,{onSelect:()=>{(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_EDIT",mode:"immersive"}),U((0,O.Cb)(I))},children:[(0,c.jsx)(ah.l.LeadingVisual,{children:(0,c.jsx)(eo.PencilIcon,{})}),"Edit"]}),S[12]=I,S[13]=U,S[14]=m):m=S[14],S[15]!==V?(h=V&&(0,c.jsxs)(ah.l.Item,{onSelect:et,children:[(0,c.jsx)(ah.l.LeadingVisual,{children:(0,c.jsx)(eo.ShareIcon,{})}),"Share"]}),S[15]=V,S[16]=h):h=S[16],S[17]!==I.adminable||S[18]!==I.editable||S[19]!==J||S[20]!==w?(_=(I.adminable||I.editable)&&(0,c.jsxs)(ah.l.Item,{onSelect:e=>{ea(e)},loading:J&&"duplicate"===w,children:[(0,c.jsx)(ah.l.LeadingVisual,{children:(0,c.jsx)(eo.CopyIcon,{})}),"Duplicate"]}),S[17]=I.adminable,S[18]=I.editable,S[19]=J,S[20]=w,S[21]=_):_=S[21],S[22]!==H?(D=B.W.copilotSpacesReportAbuse&&H&&(0,c.jsxs)(ah.l.Item,{onSelect:es,children:[(0,c.jsx)(ah.l.LeadingVisual,{children:(0,c.jsx)(eo.ReportIcon,{})}),"Report content"]}),S[22]=H,S[23]=D):D=S[23],S[24]!==I.adminable?(g=I.adminable&&(0,c.jsxs)(ah.l.Item,{variant:"danger",onSelect:()=>{(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),F("delete")},children:[(0,c.jsx)(ah.l.LeadingVisual,{children:(0,c.jsx)(eo.TrashIcon,{})}),"Delete"]}),S[24]=I.adminable,S[25]=g):g=S[25],S[26]!==m||S[27]!==h||S[28]!==_||S[29]!==D||S[30]!==g?(f=(0,c.jsx)(am.W.Overlay,{side:"outside-bottom",align:"end",children:(0,c.jsxs)(ah.l,{children:[m,h,_,D,g]})}),S[26]=m,S[27]=h,S[28]=_,S[29]=D,S[30]=g,S[31]=f):f=S[31],S[32]!==k||S[33]!==f||S[34]!==d?(x=(0,c.jsxs)(am.W,{anchorRef:L,open:k,onOpenChange:R,children:[d,f]}),S[32]=k,S[33]=f,S[34]=d,S[35]=x):x=S[35],S[36]!==ee||S[37]!==w?(C="delete"===w?(0,c.jsx)(sO,{onCancel:Y,onConfirm:ee}):null,S[36]=ee,S[37]=w,S[38]=C):C=S[38],S[39]!==I||S[40]!==$||S[41]!==W||S[42]!==w?(y="share"===w?(0,c.jsx)(sj,{closeDialog:X,customCopilotId:I,userOwned:!$&&W}):null,S[39]=I,S[40]=$,S[41]=W,S[42]=w,S[43]=y):y=S[43],S[44]!==Q||S[45]!==w?(v="duplicate"===w&&Q?(0,c.jsx)(a4.D,{dialogTitle:"Duplicate Space",closeDialog:()=>{(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DUPLICATE_DIALOG_CLOSE",mode:"immersive"}),F(null)},initialSpace:Q}):null,S[44]=Q,S[45]=w,S[46]=v):v=S[46],S[47]!==I||S[48]!==q||S[49]!==w?(b="report"===w&&I&&q?(0,c.jsx)(a5,{reportUrl:q,onClose:()=>{(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_REPORT_DIALOG_CLOSE",mode:"immersive"}),F(null)}}):null,S[47]=I,S[48]=q,S[49]=w,S[50]=b):b=S[50],S[51]!==x||S[52]!==C||S[53]!==y||S[54]!==v||S[55]!==b?(j=(0,c.jsxs)(c.Fragment,{children:[x,C,y,v,b]}),S[51]=x,S[52]=C,S[53]=y,S[54]=v,S[55]=b,S[56]=j):j=S[56],j}function sB(){return(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU",mode:"immersive"})}let sO=({onConfirm:e,onCancel:t})=>{let[a,s]=(0,p.useState)(!1),n=async()=>{s(!0),(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CONFIRM",mode:"immersive"});try{await e()}finally{s(!1)}};return(0,c.jsx)(sn.K,{title:"Delete space",onClose:async e=>{a||("confirm"===e?await n():((0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DIALOG_DELETE_CANCEL",mode:"immersive"}),t()))},confirmButtonContent:a?(0,c.jsx)(sr.A,{size:"small"}):"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this space? This action cannot be undone."})};try{sR.displayName||(sR.displayName="CopilotSpacesMenu")}catch{}try{sO.displayName||(sO.displayName="DeleteDialog")}catch{}let sP={starButton:"SpacesHeader-module__starButton--RT51O"};var sL=a(44956),sM=a(86877),sU=a(4175);function sz({copilotSpace:e,onClose:t,onSaved:a,returnFocusRef:s,maxDescriptionLength:n}){let{upsertCopilotSpace:r,isPending:i}=(0,si.$)(e),[o,l]=(0,p.useState)(e.description??""),[u,d]=(0,p.useState)(null);async function m(){try{let e=await r({description:o});a?.(e),t()}catch(e){e instanceof Error?d(e.message):d("Failed to save description")}}function h(){l(e.description??""),t()}return(0,c.jsx)(aE.l,{title:"Description",onClose:h,returnFocusRef:s,position:{narrow:"fullscreen"},renderBody:()=>(0,c.jsxs)("div",{className:"p-3",children:[u&&(0,c.jsx)(N.l,{variant:"critical",title:u,className:"mb-2"}),(0,c.jsxs)(sM.A,{children:[(0,c.jsx)(sM.A.Label,{visuallyHidden:!0,children:"Description"}),(0,c.jsx)(sU.Ay,{block:!0,value:o,onChange:e=>l(e.target.value),placeholder:"Describe what this space is for",resize:"vertical",rows:5}),(0,c.jsx)(s$,{text:o,promptCharLimit:n})]})]}),renderFooter:()=>(0,c.jsx)(sL.m,{onCancel:h,onSave:m,isLoading:i,loadingAnnouncement:"Saving description",saveButtonText:"Save"})})}function s$(e){let t,a,s,n,r=(0,u.c)(10),{text:i,promptCharLimit:o}=e,l=i.length>o;r[0]!==i.length?(t=i.length.toLocaleString(),r[0]=i.length,r[1]=t):t=r[1],r[2]!==o?(a=o.toLocaleString(),r[2]=o,r[3]=a):a=r[3],r[4]!==t||r[5]!==a?(s=(0,c.jsxs)(c.Fragment,{children:[t," / ",a," characters"]}),r[4]=t,r[5]=a,r[6]=s):s=r[6];let d=s;return r[7]!==d||r[8]!==l?(n=l?(0,c.jsx)(sM.A.Validation,{variant:"error",children:d}):(0,c.jsx)(sM.A.Caption,{children:d}),r[7]=d,r[8]=l,r[9]=n):n=r[9],n}try{sz.displayName||(sz.displayName="DescriptionDialog")}catch{}try{s$.displayName||(s$.displayName="CharacterCount")}catch{}function sW(e){let t,a,s,n,r,i,o,l,d,m,h,D,g,x,y,v,b,j,S,N,I,w,F,A,T,k,R,L,U,z,$,W,V,G,K=(0,u.c)(87),{copilotSpace:Q}=e,J=(0,_.Pk)(),Y=(0,H.b)(),X=(0,M.zy)(),Z=(0,q.G)(),{updateGlobalNavigationBreadcrumbs:ee}=ab(),et=(0,a8.Z)(),[ea,es]=(0,p.useState)(!1),[en,er]=(0,p.useState)(!1),[ei,el]=(0,p.useState)(!1),[ec,eu]=(0,p.useState)(!1),[ed,em]=(0,p.useState)(!1),[eh,ep]=(0,p.useState)(null),e_=(0,p.useRef)(null),eD=(0,p.useRef)(null),eg=(0,p.useRef)(null),ef=X.pathname,ex=Z&&ef!==f.VR,eC=B.W.copilotSpacesReadAccessToUserOwnedSpaces,ey=eC&&B.W.copilotSpacesPublicAccessToUserOwnedSpaces,{data:ev}=(0,P.Ao)(Z),{mutateAsync:eb}=(0,P.$7)(),{copilotSpacesConfig:ej}=(0,C.X)(),{maxDescriptionLength:eS}=ej;e:if(ey)t=Q??ev??null;else{let e;if(!Z){t=null;break e}K[0]!==Z||K[1]!==J.customCopilots?(e=(0,O.JB)(J.customCopilots,Z),K[0]=Z,K[1]=J.customCopilots,K[2]=e):e=K[2],t=e}let eE=t,eN=eE?.ownerIsOrg&&eE?.adminable,eI=eC&&!eE?.ownerIsOrg&&Z&&eE?.adminable,ew=eN||eI,eF=eE?.ownerIsOrg&&("none"!==eE.baseRole||eE.collaborative),eA=!!(eE&&Z&&(eF||eE?.shared)),eT=(0,P.$W)(Z),{starCopilotSpace:ek,isLoading:eR}=((e,t)=>{let a,s,n,r,i,o,l,c=(0,u.c)(20),d=B.W.copilotSpacesReadAccessToUserOwnedSpaces&&B.W.copilotSpacesPublicAccessToUserOwnedSpaces,m=(0,H.b)(),{customCopilots:h}=(0,_.Pk)(),p=(0,st.jE)();c[0]!==e||c[1]!==p||c[2]!==t?(a=async()=>{if(!d&&e&&await p.invalidateQueries({queryKey:(0,se.dp)(e)}),d&&t){let e={id:t.id,owner:t.owner};await p.invalidateQueries({queryKey:(0,se.dp)(e)})}return p.invalidateQueries({queryKey:se.O6})},c[0]=e,c[1]=p,c[2]=t,c[3]=a):a=c[3],c[4]!==h||c[5]!==e||c[6]!==m||c[7]!==t?(s=async a=>{let s=d?t:(0,O.JB)(h,e);if(!s)return;let n=d?{id:s.id,owner:s.owner}:e,r=`${(0,O.Cb)(n)}/stars`,i=a.starred?"POST":"DELETE";if((await (0,ss.lS)(r,{method:i})).ok)return s={...s,starred:a.starred},m.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:s}),s},c[4]=h,c[5]=e,c[6]=m,c[7]=t,c[8]=s):s=c[8],c[9]!==a||c[10]!==s?(n={onSuccess:a,mutationFn:s},c[9]=a,c[10]=s,c[11]=n):n=c[11];let D=(0,sa.n)(n);return c[12]!==D?({mutateAsync:o,isPending:r,...i}=D,c[12]=D,c[13]=r,c[14]=i,c[15]=o):(r=c[13],i=c[14],o=c[15]),c[16]!==r||c[17]!==i||c[18]!==o?(l={starCopilotSpace:o,isLoading:r,...i},c[16]=r,c[17]=i,c[18]=o,c[19]=l):l=c[19],l})(Z,eE);K[3]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{eu(!1),es(!1),er(!1),el(!1),em(!1)},K[3]=a):a=K[3],K[4]!==Z?(s=[Z],K[4]=Z,K[5]=s):s=K[5],(0,p.useEffect)(a,s),K[6]!==ee?(n=()=>{ee()},r=[ee],K[6]=ee,K[7]=n,K[8]=r):(n=K[7],r=K[8]),(0,p.useEffect)(n,r),K[9]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DUPLICATE_DIALOG_CLOSE",mode:"immersive"}),eu(!1)},K[9]=i):i=K[9];let eB=i;K[10]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_SHARE_DIALOG_CLOSE",mode:"immersive"}),er(!1)},K[10]=o):o=K[10];let eO=o;K[11]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_DELETE_DIALOG_CLOSE",mode:"immersive"}),es(!1)},K[11]=l):l=K[11];let eP=l;K[12]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_REPORT_DIALOG_CLOSE",mode:"immersive"}),em(!1)},K[12]=d):d=K[12];let eL=d;K[13]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DUPLICATE",mode:"immersive"}),eu(!0)},K[13]=m):m=K[13];let eM=m;K[14]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_SHARE",mode:"immersive"}),er(!0)},K[14]=h):h=K[14];let eU=h;K[15]===Symbol.for("react.memo_cache_sentinel")?(D=()=>{(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_DELETE",mode:"immersive"}),es(!0)},K[15]=D):D=K[15];let ez=D;K[16]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CONTEXT_MENU_REPORT",mode:"immersive"}),em(!0)},K[16]=g):g=K[16];let e$=g;K[17]!==eb||K[18]!==et||K[19]!==Z?(x=async()=>{if(Z)try{await eb(Z),es(!1),et(f.VR)}catch(e){ep(e instanceof Error?e:Error(String(e))),eP()}},K[17]=eb,K[18]=et,K[19]=Z,K[20]=x):x=K[20];let eW=x;K[21]!==eE||K[22]!==ek?(y=()=>{eE&&ek&&((0,E.BI)("dotcom_chat.activate",{target:eE.starred?"SPACE_UNSTAR":"SPACE_STAR",mode:"immersive"}),ek({starred:!eE.starred}))},K[21]=eE,K[22]=ek,K[23]=y):y=K[23];let eV=y,eG=eE?.adminable;K[24]!==eG?(v=eG&&(0,c.jsxs)(ah.l.Item,{variant:"danger",onSelect:ez,children:[(0,c.jsx)(ah.l.LeadingVisual,{children:(0,c.jsx)(eo.TrashIcon,{})}),"Delete"]}),K[24]=eG,K[25]=v):v=K[25];let eH=v;K[26]!==eE?(b=eE&&(0,c.jsxs)(ah.l.Item,{onSelect:eM,children:[(0,c.jsx)(ah.l.LeadingVisual,{children:(0,c.jsx)(eo.CopyIcon,{})}),"Duplicate"]}),K[26]=eE,K[27]=b):b=K[27];let eq=b;K[28]!==eH||K[29]!==eq||K[30]!==ex||K[31]!==J.selectedThreadID?(j=ex&&!J.selectedThreadID&&(eq||eH)?(0,c.jsxs)(c.Fragment,{children:[eq,eH]}):null,K[28]=eH,K[29]=eq,K[30]=ex,K[31]=J.selectedThreadID,K[32]=j):j=K[32];let eK=j;K[33]===Symbol.for("react.memo_cache_sentinel")?(S=(0,c.jsx)(a_.Q,{variant:"link",onClick:()=>{eD.current?.openDialog(),(0,E.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},children:"Give feedback"}),K[33]=S):S=K[33];let eJ=S;K[34]!==ew?(N=ew&&(0,c.jsx)(eQ.K,{icon:eo.ShareIcon,onClick:eU,variant:"invisible","aria-label":"Share space",...(0,tn.G)("share-space-button")}),K[34]=ew,K[35]=N):N=K[35];let eY=N;K[36]!==eA?(I=B.W.copilotSpacesReportAbuse&&eA&&(0,c.jsx)(eQ.K,{icon:eo.ReportIcon,onClick:e$,variant:"invisible","aria-label":"Report space content",...(0,tn.G)("report-space-button")}),K[36]=eA,K[37]=I):I=K[37];let eX=I;K[38]!==eE||K[39]!==eV||K[40]!==eR||K[41]!==Z?(w=eE&&Z&&(0,c.jsx)(eQ.K,{ref:e_,onClick:eV,disabled:eR,icon:eE.starred?eo.StarFillIcon:eo.StarIcon,className:eE.starred?sP.starButton:void 0,variant:"invisible","aria-label":eE.starred?"Unstar space":"Star space"}),K[38]=eE,K[39]=eV,K[40]=eR,K[41]=Z,K[42]=w):w=K[42];let eZ=w;K[43]===Symbol.for("react.memo_cache_sentinel")?(F=(0,c.jsx)(eQ.K,{icon:eo.BookIcon,as:"a",href:"https://docs.github.com/copilot/how-tos/provide-context/use-copilot-spaces/create-and-use-copilot-spaces","aria-label":"Copilot Spaces documentation",target:"_blank",rel:"noopener noreferrer",variant:"invisible",onClick:sV,...(0,tn.G)("spaces-doc-link")}),K[43]=F):F=K[43],K[44]!==eZ||K[45]!==eX||K[46]!==eY?(A=(0,c.jsxs)(c.Fragment,{children:[eJ,F,eY,eX,eZ]}),K[44]=eZ,K[45]=eX,K[46]=eY,K[47]=A):A=K[47];let e0=A;K[48]!==Y?(T=e=>{Y.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})},K[48]=Y,K[49]=T):T=K[49];let e1=T,e2=eE?.name||"";return K[50]!==e0||K[51]!==eK||K[52]!==e2?(k=(0,c.jsx)(aw,{showPreviewPaneButton:!1,conversationSpecificItems:eK,customButtons:e0,defaultName:e2}),K[50]=e0,K[51]=eK,K[52]=e2,K[53]=k):k=K[53],K[54]!==eh?(R=eh&&(0,c.jsxs)(a9.A,{variant:"danger",children:[(0,c.jsx)(eo.AlertIcon,{}),"There was a problem deleting your space."]}),K[54]=eh,K[55]=R):R=K[55],K[56]!==ev||K[57]!==ec?(L=ec&&ev?(0,c.jsx)(a4.D,{dialogTitle:"Duplicate Space",closeDialog:eB,initialSpace:ev}):null,K[56]=ev,K[57]=ec,K[58]=L):L=K[58],K[59]!==eW||K[60]!==Z||K[61]!==ea?(U=ea&&Z?(0,c.jsx)(sO,{onCancel:eP,onConfirm:eW}):null,K[59]=eW,K[60]=Z,K[61]=ea,K[62]=U):U=K[62],K[63]!==eN||K[64]!==Z||K[65]!==en||K[66]!==eI?(z=en&&Z?(0,c.jsx)(sj,{closeDialog:eO,customCopilotId:Z,userOwned:!!(!eN&&eI)}):null,K[63]=eN,K[64]=Z,K[65]=en,K[66]=eI,K[67]=z):z=K[67],K[68]!==eE||K[69]!==e1||K[70]!==eS||K[71]!==ei?($=ei&&eE?(0,c.jsx)(sz,{copilotSpace:eE,onClose:()=>el(!1),returnFocusRef:e_,maxDescriptionLength:eS,onSaved:e1}):null,K[68]=eE,K[69]=e1,K[70]=eS,K[71]=ei,K[72]=$):$=K[72],K[73]!==eE||K[74]!==eT||K[75]!==Z||K[76]!==ed?(W=ed&&eE&&Z?(0,c.jsx)(a5,{reportUrl:eT,onClose:eL}):null,K[73]=eE,K[74]=eT,K[75]=Z,K[76]=ed,K[77]=W):W=K[77],K[78]===Symbol.for("react.memo_cache_sentinel")?(V=(0,c.jsx)(a3.l,{ref:eD,mode:"immersive",returnFocusRef:eg}),K[78]=V):V=K[78],K[79]!==k||K[80]!==R||K[81]!==L||K[82]!==U||K[83]!==z||K[84]!==$||K[85]!==W?(G=(0,c.jsxs)(c.Fragment,{children:[k,R,L,U,z,$,W,V]}),K[79]=k,K[80]=R,K[81]=L,K[82]=U,K[83]=z,K[84]=$,K[85]=W,K[86]=G):G=K[86],G}function sV(){return(0,E.BI)("copilot-spaces.click",{target:"HELP_BUTTON_CLICKED"})}try{sW.displayName||(sW.displayName="SpacesHeader")}catch{}var sG=a(81829);let sH={container:"InlineEditableText-module__container--aZo_B",textarea:"InlineEditableText-module__textarea--5ls6_",placeholder:"InlineEditableText-module__placeholder--e7Xf4",readModeContainer:"InlineEditableText-module__readModeContainer--ysnii",editIcon:"InlineEditableText-module__editIcon--UTuha",readModeText:"InlineEditableText-module__readModeText--MyHNO"},sq={circleProgressBar:"CircleProgressBar-module__circleProgressBar--LGSpA",exceeded:"CircleProgressBar-module__exceeded--duTAI"};function sK({value:e}){let t=e>100;return(0,c.jsx)("div",{className:(0,eJ.$)(sq.circleProgressBar,t?sq.exceeded:""),style:{"--progress":`${e}%`},children:(0,c.jsxs)("progress",{value:e,max:"100",style:{visibility:"hidden",height:0,width:0},children:[e,"%"]})})}try{sK.displayName||(sK.displayName="CircleProgressBar")}catch{}let sQ={actionButtons:"InlineEditActions-module__actionButtons--yWSpe",cancelButton:"InlineEditActions-module__cancelButton--a0gzS",saveButton:"InlineEditActions-module__saveButton--pMcIj",line:"InlineEditActions-module__line--vKo7v",characterCountStatus:"InlineEditActions-module__characterCountStatus--wRiqc",characterCountText:"InlineEditActions-module__characterCountText--QcUxR"};function sJ({value:e,maxLength:t,onSave:a,onCancel:s}){let n=!!(t&&t>0),r=n&&e.length>(t||0);return(0,c.jsxs)("div",{className:sQ.actionButtons,children:[n&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(sX,{text:e,promptCharLimit:t||0}),(0,c.jsx)(sY,{})]}),(0,c.jsx)(eQ.K,{className:sQ.cancelButton,variant:"invisible",icon:eo.XIcon,"aria-label":"Cancel",size:"small",onClick:s}),(0,c.jsx)(eQ.K,{className:sQ.saveButton,variant:"invisible",icon:eo.CheckIcon,"aria-label":"Save",disabled:r,size:"small",onClick:a})]})}let sY=()=>(0,c.jsx)("div",{className:sQ.line});function sX({text:e,promptCharLimit:t}){return(0,c.jsxs)("div",{className:sQ.characterCountStatus,children:[(0,c.jsx)(sK,{value:e.length/t*100}),(0,c.jsx)("span",{className:sQ.characterCountText,children:(t-e.length).toLocaleString()})]})}try{sJ.displayName||(sJ.displayName="InlineEditActions")}catch{}try{sY.displayName||(sY.displayName="Line")}catch{}try{sX.displayName||(sX.displayName="CharacterCountStatus")}catch{}function sZ({value:e,onChange:t,maxLength:a=null,placeholder:s="",className:n="",defaultEditing:r=!1}){let[i,o]=(0,p.useState)(r),[l,u]=(0,p.useState)(e),[d,m]=(0,p.useState)(null),h=(0,p.useRef)(null),_=(0,p.useRef)(null),D=(0,p.useRef)(null);(0,p.useEffect)(()=>{let e=e=>{i&&D.current&&!D.current.contains(e.target)&&(o(!1),t(l.trim()))};return i&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[i,l,D,t]),(0,p.useEffect)(()=>{h.current&&m(h.current.offsetHeight)},[e]),(0,p.useEffect)(()=>{i&&_.current&&(_.current.focus(),_.current.style.height=`${d}px`)},[i,d]);let g=()=>{o(!1),t(l.trim())};return(0,c.jsxs)("div",{ref:D,className:(0,eJ.$)(sH.container,n),children:[i?(0,c.jsx)(sU.Ay,{ref:_,value:l,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),g())},placeholder:s,className:sH.textarea,style:{height:d||"auto"},resize:"none"}):(0,c.jsxs)("button",{ref:h,onClick:()=>o(!0),className:sH.readModeContainer,children:[(0,c.jsx)("span",{className:(0,eJ.$)(sH.readModeText,n),children:e?.trim()||(0,c.jsx)("span",{className:sH.placeholder,children:s})}),(0,c.jsx)(eo.PencilIcon,{className:sH.editIcon,size:16})]}),i&&(0,c.jsx)(sJ,{value:l,maxLength:a,onSave:g,onCancel:()=>{o(!1),u(e)}})]})}try{sZ.displayName||(sZ.displayName="InlineEditableText")}catch{}var s0=a(26956),s1=a(77141),s2=a(62935);function s3(e){let t=!!B.W.copilotSpacesReadAccessToUserOwnedSpaces&&e.collaborative;if(!e.shareable)return"Private";if(t)return"Shared";switch(e.baseRole){case"custom_copilot_reader":case"custom_copilot_writer":case"custom_copilot_admin":return"Shared"}return"org_public"===e.visibility?"Shared":"Private"}let s4={container:"SpaceNotFoundComponent-module__container--IrGEt",description:"SpaceNotFoundComponent-module__description--klDGL",banner:"SpaceNotFoundComponent-module__banner--uHb2q",icon:"SpaceNotFoundComponent-module__icon--dQYtq"},s6=e=>{let t,a,s,n,r,i=(0,u.c)(7),{protectedOrganizations:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(eo.AlertIcon,{className:s4.icon}),a=(0,c.jsx)("h3",{children:"Space not found"}),s=(0,c.jsx)("p",{className:s4.description,children:"This URL may be incorrect, you're signed out of your organization, or the Space may have been deleted."}),i[0]=t,i[1]=a,i[2]=s):(t=i[0],a=i[1],s=i[2]),i[3]!==o?(n=o&&!(0,J.G7)("global_sso_banner")&&(0,c.jsx)(tT.x,{protectedOrgs:o,redirectURI:s7}),i[3]=o,i[4]=n):n=i[4],i[5]!==n?(r=(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:s4.container,children:[t,a,s,(0,c.jsx)("div",{className:s4.banner,children:n})]})}),i[5]=n,i[6]=r):r=i[6],r};try{s6.displayName||(s6.displayName="SpaceNotFoundComponent")}catch{}function s7(){return`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`}var s5=a(97564),s8=a(6219),s9=a(60905),ne=a(30456),nt=a(81075),na=a(75735),ns=a(72439);let UploadableFileExtensions=class UploadableFileExtensions{static get text(){if(null!=(0,nt._)(this,UploadableFileExtensions,nn))return(0,nt._)(this,UploadableFileExtensions,nn);let e=[...ns.E.getTextFileExtensions().split(","),".babelrc",".conf",".eslintrc",".lock",".log",".npmrc",".prettierrc",".sum",".yarnrc"];return(0,na._)(this,UploadableFileExtensions,nn,new Set(e.map(e=>e.toLowerCase()))),(0,nt._)(this,UploadableFileExtensions,nn)}static images(e){return new Set(s9.s.getFileExtensions(e).map(e=>e.toLowerCase()))}};var nn={writable:!0,value:void 0},nr=a(31971);let ni=()=>{let e,t,a,s,n=(0,u.c)(7);n[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:nl},n[0]=e):e=n[0];let r=(0,sa.n)(e);return n[1]!==r?({mutateAsync:t,...a}=r,n[1]=r,n[2]=t,n[3]=a):(t=n[2],a=n[3]),n[4]!==t||n[5]!==a?(s={getCopilotSpaceResourceSizes:t,...a},n[4]=t,n[5]=a,n[6]=s):s=n[6],s};function no(e){return{id:e.id,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,metadata:(0,nr.M)(e)}}async function nl(e){let t={resources:e.resources?.map(no)},a=await (0,ss.lS)("/copilot/spaces/resource_sizes",{method:"POST",body:t}),s=await a.json();if(!a.ok)throw s.errorMessages;return s}function nc({onResourcesAdded:e,onError:t,onUploadingChange:a}){let{availableModels:s}=(0,_.Pk)(),{hydrateResourcesWithSizePercentages:n}=function(){let{getCopilotSpaceResourceSizes:e}=ni();return{hydrateResourcesWithSizePercentages:(0,p.useCallback)(async t=>{if(0===t.length)return;let a=await e({resources:t});for(let e of t)e.sizePercentage=a[e.id]??0},[e])}}();return{processFiles:(0,p.useCallback)(async(r,{source:i})=>{if(r&&0!==r.length){(function(e,{source:t}){for(let a of((0,E.BI)("copilot-spaces.selected_local_files",{fileCount:e.length,source:t}),Array.from(e))){let e=nu(a.name);(0,E.BI)("copilot-spaces.selected_local_file",{fileExtension:e,contentType:a.type,fileSize:a.size,source:t})}})(r,{source:i}),a?.(!0),t?.([]);try{let{imageFiles:a,nonImageFiles:o}=function(e,t){let a=UploadableFileExtensions.images(t);return Array.from(e).reduce((e,t)=>(!function(e,t){if(e.type.startsWith("image/"))return!0;let a=nu(e.name);return t.has(a)}(t,a)?e.nonImageFiles.push(t):e.imageFiles.push(t),e),{imageFiles:[],nonImageFiles:[]})}(r,s),[l,c]=await Promise.all([np(o),nm(a,s)]),u=[...l.resources,...c.resources];await n(u),u.length>0&&(e(u),(0,O.Pg)(u,i));let d=[...l.errorMessages,...c.errorMessages];d.length>0&&t?.(d)}catch{t?.(["Something went wrong while trying to add the files. Please try again."])}finally{a?.(!1)}}},[s,e,t,n,a])}}function nu(e){let t=e.split(".");return t.length>1?`.${t.pop()?.toLowerCase()??""}`:""}function nd(e){let t=[],a=[];for(let s of e)"fulfilled"===s.status?"resource"in s.value?t.push(s.value.resource):a.push(s.value.error):a.push("An unexpected error occurred while processing a file.");return{errorMessages:a,resources:t}}async function nm(e,t){if(0===e.length)return{errorMessages:[],resources:[]};if(!B.W.spacesImagesEnabled)return{errorMessages:["Images are not yet supported"],resources:[]};let a=e.map(e=>nh(e,s9.s.getMimeTypes(t)));return nd(await Promise.allSettled(a))}async function nh(e,t){try{if(e.size>s9.s.getAttachmentSizeLimit())return{error:nf(e.name)};if(!t.includes(e.type))return{error:ng(e.name)};let{id:a,attachment:s}=s9.s.makeImageReference(e,""),n=await s.prefetch();return{resource:{id:a,type:"media_content",mediaType:e.type,name:e.name||"Image",url:n.href||"",copilotChatAttachmentId:n.id||0,height:s.height||0,width:s.width||0,markedForDestroy:!1}}}catch(t){var a,s;return a=t,s=e,a instanceof Error&&"FileSizeError"===a.name?{error:nf(s.name)}:{error:nD(s.name)}}}async function np(e){if(0===e.length)return{errorMessages:[],resources:[]};let t=e.map(e=>n_(e));return nd(await Promise.allSettled(t))}async function n_(e){try{var t;if(!e.type.startsWith("text/")){let t=nu(e.name);if(!UploadableFileExtensions.text.has(t))return{error:ng(e.name)}}e=(t=e).type.startsWith("text/")?t:new File([t],t.name,{type:"text/plain"});let a=crypto.randomUUID(),s=await new ne.N(a,e).prefetch();return{resource:{id:a,type:"uploaded_text_file",name:e.name,copilotChatAttachmentId:s.id,url:s.href,markedForDestroy:!1}}}catch(n){var a=n,s=e;if(!(a instanceof s8.ZK))return{error:nD(s.name)};let t=a.errors?.[0];return"string"==typeof t?{error:t}:{error:t?.message||nD(s.name)}}}function nD(e){return`An error occurred uploading "${e}".`}function ng(e){return`File "${e}" is not a supported file type.`}function nf(e){let t=function(e){if(e<0)throw Error("File size cannot be negative");if(!Number.isInteger(e))throw Error("File size must be a whole number of bytes");let t=["B","KB","MB","GB","TB","PB"],a=e,s=0;for(;a>=1024&&s<t.length-1;)a/=1024,s++;let n=Math.round(100*a)/100;return`${n}${t[s]}`}(s9.s.getAttachmentSizeLimit());return`File "${e}" is too large. The maximum size for this file type is ${t}.`}let nx=(0,p.forwardRef)(({onResourcesAdded:e,onError:t,onUploadingChange:a},s)=>{let{processFiles:n}=nc({onResourcesAdded:e,onError:t,onUploadingChange:a}),{availableModels:r}=(0,_.Pk)(),i=(0,p.useMemo)(()=>["text/*",...Array.from(UploadableFileExtensions.text),...B.W.spacesImagesEnabled?Array.from(UploadableFileExtensions.images(r)):[]].join(","),[r]),o=(0,p.useRef)(null);return(0,p.useImperativeHandle)(s,()=>({addResources:()=>o.current?.click()})),(0,c.jsx)("input",{"data-testid":"file-upload-input",ref:o,type:"file",accept:i,multiple:!0,style:{display:"none"},onChange:e=>{e.target.files&&(n(e.target.files,{source:"file-upload"}),e.target.value="")}})});nx.displayName="FileUploadInput";var nC=a(73017),ny=a(46747),nv=a(50467);let UrlDetails=class UrlDetails{constructor(e,t="",a="",s="",n=0,r="",i="",o="unknown"){(0,nv._)(this,"url",void 0),(0,nv._)(this,"owner",void 0),(0,nv._)(this,"repo",void 0),(0,nv._)(this,"number",void 0),(0,nv._)(this,"type",void 0),(0,nv._)(this,"id",void 0),(0,nv._)(this,"file_path",void 0),(0,nv._)(this,"errorMessage",void 0),(0,nv._)(this,"sha",void 0),this.id=e,this.url=t,this.owner=a,this.repo=s,this.number=n,this.type=o,this.file_path=i,this.sha=r}};function nb(e){return{id:e.id,resource_type:e.type,metadata:function(e){switch(e.type){case"github_issue":case"github_pull_request":return{owner:e.owner,repo:e.repo,number:e.number};case"github_file":return{owner:e.owner,repo:e.repo,file_path:e.file_path,sha:e.sha};default:throw Error("Unsupported resource")}}(e)}}async function nj(e){let{input:t,spaceOwner:a}=e,s={resources_attributes:t.map(nb),space_owner:a},n=await (0,ss.lS)("/copilot/spaces/validate_url_resources",{method:"POST",body:s}),r=await n.json();if(!n.ok)throw r;return r}function nS(e){let t,a,s,n,r,i,o,l,d,m,h,_,D,g,f,x,C,y=(0,u.c)(62),{onClose:v,onSave:b,resourcesToSave:j,owner:S,resourceCounts:E}=e,[I,w]=(0,p.useState)(!1),[F,A]=(0,p.useState)(nI),[T,k]=(0,p.useState)(!1),[R,B]=(0,p.useState)(!1),{validateUrlResources:P}=(()=>{let e,t,a,s,n=(0,u.c)(7);n[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:nj},n[0]=e):e=n[0];let r=(0,sa.n)(e);return n[1]!==r?({mutateAsync:a,...t}=r,n[1]=r,n[2]=t,n[3]=a):(t=n[2],a=n[3]),n[4]!==t||n[5]!==a?(s={validateUrlResources:a,...t},n[4]=t,n[5]=a,n[6]=s):s=n[6],s})();if(y[0]!==I||y[1]!==v||y[2]!==b||y[3]!==S||y[4]!==j||y[5]!==F||y[6]!==P){let e;t=e=>{e?.preventDefault(),e?.stopPropagation(),I||(w(!0),s().finally(()=>{w(!1)}))},y[8]===Symbol.for("react.memo_cache_sentinel")?(e=function(e){if("github_file"===e.type){let t="nwo"in e?e.nwo:`${e.owner}/${e.repo}`,a=e.sha,s="filePath"in e?e.filePath:e.file_path;return`${t}/github_file/${a}/${s}`}if("github_issue"===e.type||"github_pull_request"===e.type){let t="nwo"in e?e.nwo:`${e.owner}/${e.repo}`,a=e.number,s=e.type;return`${t}/${a}/${s}`}return""},y[8]=e):e=y[8];let a=e,s=async()=>{k(!1),B(!1);let e=(()=>{let e=new Set(j?.map(e=>a(e))??[]),t=new Set;return F.filter(s=>{let n=a(s);return!(t.has(n)||e.has(n))&&""!==s.url.trim()&&(t.add(n),!0)})})(),t=nN,s=e.filter(e=>"unknown"===e.type||S&&e.owner!==S||e.file_path&&!t(e.file_path));if(s.length>0){A(F.map(e=>S&&e.owner&&e.owner!==S?{...e,errorMessage:`This doesn't belong to the ${S} organization.`}:e.file_path&&!t(e.file_path)?{...e,errorMessage:"Unsupported file type"}:s.some(t=>t.id===e.id)?{...e,errorMessage:"Invalid URL"}:e)),k(!0);return}if(0===e.length)return void v();try{let t=await P({input:e,spaceOwner:S});b(t),(0,O.Pg)(t,"url-dialog"),v()}catch(e){if(Array.isArray(e)){for(let t of e){let e=F.find(e=>e.id===t.id);e&&(e.errorMessage="Resource not found")}k(!0)}}};y[0]=I,y[1]=v,y[2]=b,y[3]=S,y[4]=j,y[5]=F,y[6]=P,y[7]=t}else t=y[7];let L=!!E&&E.currentResourceCount+F.length+1>E.maxResourceCount;y[9]!==F||y[10]!==L?(a=()=>{if(L)return void B(!0);A([...F,new UrlDetails(crypto.randomUUID())])},y[9]=F,y[10]=L,y[11]=a):a=y[11];let M=a,U=R&&E?`You can select a maximum of ${E.maxResourceCount} sources.`:null;y[12]!==R||y[13]!==E?(s=e=>{R&&E&&(E.currentResourceCount+e.length>E.maxResourceCount||B(!1))},y[12]=R,y[13]=E,y[14]=s):s=y[14];let z=s;y[15]!==z||y[16]!==F?(n=e=>{let t=[...F];t.splice(e,1),A(t),z(t)},y[15]=z,y[16]=F,y[17]=n):n=y[17];let $=n;if(y[18]!==z||y[19]!==F){r=(t,a)=>{let s=[...F],n=e(a,s[t]||new UrlDetails(crypto.randomUUID()));s[t]=n,A(s),z(s)};let e=nE;y[18]=z,y[19]=F,y[20]=r}else r=y[20];if(y[21]===Symbol.for("react.memo_cache_sentinel")?(i={narrow:"fullscreen"},y[21]=i):i=y[21],y[22]!==t||y[23]!==I||y[24]!==v||y[25]!==U?(o=()=>(0,c.jsxs)(aE.l.Footer,{children:[(0,c.jsx)("div",{className:"d-flex flex-items-center",children:U&&(0,c.jsx)(sM.A.Validation,{variant:"error",children:U})}),(0,c.jsxs)("div",{className:"d-flex flex-row flex-justify-end gap-2",children:[(0,c.jsx)(a_.Q,{onClick:v,children:"Cancel"}),(0,c.jsx)(a_.Q,{variant:"primary",onClick:t,loadingAnnouncement:"Saving resource",loading:I,children:"Add"})]})]}),y[22]=t,y[23]=I,y[24]=v,y[25]=U,y[26]=o):o=y[26],y[27]!==T?(l=T&&(0,c.jsx)(N.l,{title:"Failed to save URL(s)",variant:"critical",className:"mb-2"}),y[27]=T,y[28]=l):l=y[28],y[29]!==S?(d=S&&(0,c.jsx)(nC.JR,{html:`from the <b>${S}</b> organization`}),y[29]=S,y[30]=d):d=y[30],y[31]!==d?(m=(0,c.jsxs)("p",{children:["Paste the URLs of the GitHub content"," ",d," you want to add. You can include issues and pull requests."]}),y[31]=d,y[32]=m):m=y[32],y[33]!==t?(h={"github:submit-form":()=>t()},y[33]=t,y[34]=h):h=y[34],y[35]!==T||y[36]!==r||y[37]!==$||y[38]!==F){let e;y[40]!==T||y[41]!==r||y[42]!==$||y[43]!==F.length?(e=(e,t)=>(0,c.jsxs)("div",{style:{width:"100%"},children:[(0,c.jsx)(nw,{index:t,removeUrlTextInputRow:$,inputCount:F.length,updateUrls:r,setIsUpdating:w,urlValue:e.url}),T&&void 0!==e.errorMessage&&(0,c.jsx)(sM.A.Validation,{className:"mt-1",variant:"error",children:e.errorMessage})]},e.id),y[40]=T,y[41]=r,y[42]=$,y[43]=F.length,y[44]=e):e=y[44],_=F.map(e),y[35]=T,y[36]=r,y[37]=$,y[38]=F,y[39]=_}else _=y[39];return y[45]!==_?(D=(0,c.jsx)(su.B,{direction:"vertical",align:"center",children:_}),y[45]=_,y[46]=D):D=y[46],y[47]!==t||y[48]!==D?(g=(0,c.jsx)("form",{onSubmit:t,children:D}),y[47]=t,y[48]=D,y[49]=g):g=y[49],y[50]!==g||y[51]!==h?(f=(0,c.jsx)(tr.tL,{commands:h,children:g}),y[50]=g,y[51]=h,y[52]=f):f=y[52],y[53]!==M?(x=(0,c.jsx)(a_.Q,{leadingVisual:eo.PlusIcon,className:"mt-3",onClick:M,children:"Add another"}),y[53]=M,y[54]=x):x=y[54],y[55]!==v||y[56]!==f||y[57]!==x||y[58]!==o||y[59]!==l||y[60]!==m?(C=(0,c.jsxs)(aE.l,{position:i,width:"large",title:"Add via GitHub URL",onClose:v,renderFooter:o,children:[l,m,f,x]}),y[55]=v,y[56]=f,y[57]=x,y[58]=o,y[59]=l,y[60]=m,y[61]=C):C=y[61],C}function nE(e,t){let a=e.match(/\/([^/]+)\/([^/]+)\/issues\/(\d+)/),s=e.match(/\/([^/]+)\/([^/]+)\/pull\/(\d+)/),n=e.match(/\/([^/]+)\/([^/]+)\/blob\/([^/]+)\/(.+)$/);return t.url=e,a?(t.owner=a[1]??"",t.repo=a[2]??"",t.number=parseInt(a[3]??"0",10),t.type="github_issue"):s?(t.owner=s[1]??"",t.repo=s[2]??"",t.number=parseInt(s[3]??"0",10),t.type="github_pull_request"):n&&(t.owner=n[1]??"",t.repo=n[2]??"",t.sha=n[3]??"",t.file_path=n[4]??"",t.type="github_file"),t}function nN(e){let t=e.match(/\.([^.]+)$/);if(!t)return!0;let a=`.${t[1]?.toLowerCase()}`;return UploadableFileExtensions.text.has(a)}function nI(){return[new UrlDetails(crypto.randomUUID())]}function nw(e){let t,a,s,n,r,i,o,l=(0,u.c)(18),{index:d,removeUrlTextInputRow:m,inputCount:h,updateUrls:_,setIsUpdating:D,urlValue:g}=e,[f,x]=(0,p.useState)(g),[C,y]=(0,p.useState)(!1);l[0]!==g?(t=()=>{x(g)},a=[g],l[0]=g,l[1]=t,l[2]=a):(t=l[1],a=l[2]),(0,p.useEffect)(t,a);let v=e=>{let t=e.target.value;x(t),C||(y(!0),D(!0)),b(t)};l[3]!==d||l[4]!==D||l[5]!==_?(s=e=>{_(d,e),y(!1),D(!1)},l[3]=d,l[4]=D,l[5]=_,l[6]=s):s=l[6];let b=(0,ny.d)(s,400);return l[7]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.jsx)(sM.A.Label,{visuallyHidden:!0,children:"URL"}),l[7]=n):n=l[7],l[8]!==v||l[9]!==f?(r=(0,c.jsx)(sm.A,{placeholder:"https://github.com/mona/playground/issues/123",value:f,onChange:v,className:"width-full"}),l[8]=v,l[9]=f,l[10]=r):r=l[10],l[11]!==d||l[12]!==h||l[13]!==m?(i=h>1&&(0,c.jsx)(eQ.K,{icon:eo.TrashIcon,variant:"invisible","aria-label":"Remove url",className:"ml-2",onClick:()=>m(d)}),l[11]=d,l[12]=h,l[13]=m,l[14]=i):i=l[14],l[15]!==r||l[16]!==i?(o=(0,c.jsxs)(sM.A,{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[n,r,i]}),l[15]=r,l[16]=i,l[17]=o):o=l[17],o}try{nS.displayName||(nS.displayName="GitHubUrlDialog")}catch{}try{(r=AddUrlTextInputRow).displayName||(r.displayName="AddUrlTextInputRow")}catch{}try{nw.displayName||(nw.displayName="UrlTextInputRow")}catch{}var nF=a(77809);function nA(e){let t,a,s,n=(0,u.c)(14),{isOpen:r,onClose:i,onResourcesAdded:o,owner:l,resourceCounts:d,initialRepo:m,onRepoSelect:h,hideBackButton:_}=e,D=(0,p.useRef)(null),{getCopilotSpaceResourceSizes:g}=ni(),{searchWorkerFilePath:f}=(0,C.X)();n[0]!==i||n[1]!==o||n[2]!==g?(t=async e=>{let t=e.filter(nT);if(0===t.length)return void i();let a=await g({resources:t}),s=t.map(e=>{let t=a[e.id];return{...e,fileExists:!0,markedForDestroy:!1,sizePercentage:t}});o(s),(0,O.Pg)(s,"file-picker"),i()},n[0]=i,n[1]=o,n[2]=g,n[3]=t):t=n[3];let x=t;return r?(n[4]===Symbol.for("react.memo_cache_sentinel")?(a=[],n[4]=a):a=n[4],n[5]!==_||n[6]!==m||n[7]!==i||n[8]!==h||n[9]!==l||n[10]!==d||n[11]!==x||n[12]!==f?(s=(0,c.jsx)(nF.Q,{formData:a,onCancel:i,onSaveFiles:x,findFileWorkerPath:f,attachmentButtonRef:D,owner:l,resourceCounts:d,initialRepo:m,onRepoSelect:h,hideBackButton:_,maxFileCount:50}),n[5]=_,n[6]=m,n[7]=i,n[8]=h,n[9]=l,n[10]=d,n[11]=x,n[12]=f,n[13]=s):s=n[13],s):null}function nT(e){return"github_file"===e.type}try{nA.displayName||(nA.displayName="SpacesFilePicker")}catch{}let nk={dialogBody:"TextFileDialog-module__dialogBody--e27Cv",grow:"TextFileDialog-module__grow--TUgOh",form:"TextFileDialog-module__form--BVMha",footerContainer:"TextFileDialog-module__footerContainer--A_bOn"};function nR({sizePercentage:e,onClose:t,onSave:a,resource:s,readOnly:n=!1}){let{copilotSpacesConfig:{maxContentSize:r}}=(0,C.X)(),[i,o]=(0,p.useState)(s?.name||""),[l,u]=(0,p.useState)(s?.text||""),[d,m]=(0,p.useState)(!1),[h,_]=(0,p.useState)(""),[D,g]=(0,p.useState)(!1),f=s?.text??"",[x,y]=(0,p.useState)({}),{getCopilotSpaceResourceSizes:v}=ni(),b=async e=>{e?.preventDefault(),e?.stopPropagation();let n=!i.trim(),r=!l.trim();if(n||r)return void y(e=>({...e,"resources.name":n?"Name is required":"","resources.text":r?"Content is required":""}));m(!0),_("");try{let e={id:s?.id||Date.now().toString(),databaseId:s?.databaseId,type:"free_text",name:i,text:l,markedForDestroy:!1},n=await v({resources:[e]}),r={...e,sizePercentage:n[e.id]};a(r),(0,O.Pg)([r],"text-file-dialog"),t()}catch{_("An unexpected error occurred while validating the text file")}finally{m(!1)}};return(0,c.jsx)(aE.l,{position:{narrow:"fullscreen"},title:"Add text content",onClose:t,width:"xlarge",height:"large",renderBody:()=>(0,c.jsxs)("div",{className:nk.dialogBody,children:[h&&(0,c.jsx)(N.l,{variant:"critical",className:"mb-2",title:h}),(0,c.jsx)(tr.tL,{className:nk.grow,commands:{"github:submit-form":()=>void b()},children:(0,c.jsxs)("form",{onSubmit:b,className:nk.form,children:[(0,c.jsxs)(sM.A,{required:!0,children:[(0,c.jsx)(sM.A.Label,{children:"Name"}),(0,c.jsx)(sm.A,{block:!0,placeholder:"Give the file a title",value:i,onChange:e=>{o(e.target.value),y(e=>({...e,"resources.name":""}))},maxLength:1e3,validationStatus:x["resources.name"]?"error":void 0,...(0,tn.G)("text-file-name-input"),readOnly:n}),x["resources.name"]&&(0,c.jsx)(sM.A.Validation,{variant:"error",children:x["resources.name"]})]}),(0,c.jsxs)(sM.A,{required:!0,className:nk.grow,children:[(0,c.jsx)(sM.A.Label,{children:"Content"}),(0,c.jsx)(sU.Ay,{block:!0,name:"content",value:l,placeholder:"Enter content here",resize:"none",className:nk.grow,onChange:e=>{u(e.target.value),y(e=>({...e,"resources.text":""}))},...(0,tn.G)("text-file-content-input"),readOnly:n}),x["resources.text"]?(0,c.jsx)(sM.A.Validation,{variant:"error",children:x["resources.text"]}):void 0!==e&&(0,c.jsx)(nB,{text:l,percentage:e,resourceContent:f,setOverSpaceLimit:g,maxContentSize:r})]})]})})]}),renderFooter:()=>(0,c.jsxs)("div",{className:nk.footerContainer,children:[(0,c.jsx)(a_.Q,{onClick:t,children:"Cancel"}),(0,c.jsx)(a_.Q,{variant:"primary",onClickCapture:D?void 0:b,loadingAnnouncement:"Validating resource",inactive:D,loading:d,...(0,tn.G)("save-text-file-button"),disabled:n,children:"Add"})]})})}function nB(e){let t,a,s,n,r=(0,u.c)(11),{text:i,percentage:o,resourceContent:l,setOverSpaceLimit:d,maxContentSize:m}=e;r[0]!==l.length||r[1]!==i.length?(t=i.length>l.length?Math.abs(i.length-l.length):-Math.abs(i.length-l.length),r[0]=l.length,r[1]=i.length,r[2]=t):t=r[2];let h=o/100*m+t,_=Math.floor(h/m*100),D=h>m;if(r[3]!==d||r[4]!==D?(a=()=>{d(D)},s=[D,d],r[3]=d,r[4]=D,r[5]=a,r[6]=s):(a=r[5],s=r[6]),(0,p.useEffect)(a,s),D){let e,t=`Total percent used: ${_}%`;return r[7]!==t?(e=(0,c.jsx)(sM.A.Validation,{variant:"error",children:t}),r[7]=t,r[8]=e):e=r[8],e}let g=`Total percent used: ${_}%`;return r[9]!==g?(n=(0,c.jsx)(sM.A.Caption,{children:g}),r[9]=g,r[10]=n):n=r[10],n}try{nR.displayName||(nR.displayName="TextFileDialog")}catch{}try{nB.displayName||(nB.displayName="CharacterCount")}catch{}let nO=({children:e,onResourcesAdded:t,onError:a,owner:s,sizePercentage:n,resourcesToSave:r,resourceCounts:i,onUploadingChange:o,initialRepo:l,onRepoSelect:u})=>{let[d,m]=(0,p.useState)(!1),[h,_]=(0,p.useState)(!1),[D,g]=(0,p.useState)(!1),[f,x]=(0,p.useState)(!1),[C,y]=(0,p.useState)(),v=(0,p.useRef)(null),b=(0,p.useRef)(null),j=(0,p.useRef)(!1),S=(0,p.useCallback)(async e=>{if(e){j.current=!0,y(void 0);try{let a=await (0,s5.V)(e),s={type:"repository",id:`${a.id}`,repositoryId:a.id,nwo:`${a.ownerLogin}/${a.name}`,ownerAvatarUrl:a.ownerAvatarUrl,ownerType:a.ownerType,markedForDestroy:!1};t([s]),(0,E.BI)("copilot-spaces.click",{target:"SAVED_REPOSITORY_FROM_REPO_PICKER"}),u?.(a),x(!1)}catch(t){let e=t instanceof Error?t.message:"An unknown error occurred";y("Error: failed to attach repository. Please try again."),a?.([e])}finally{j.current=!1}}},[a,u,t]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(nx,{ref:v,onResourcesAdded:t,onError:a,onUploadingChange:o}),(0,c.jsxs)(am.W,{anchorRef:b,children:[(0,c.jsx)(am.W.Anchor,{ref:b,children:e}),(0,c.jsx)(am.W.Overlay,{align:"end",width:"small",children:(0,c.jsxs)(ah.l,{children:[(0,c.jsxs)(ah.l.Group,{children:[(0,c.jsx)(ah.l.GroupHeading,{children:"Repository"}),(0,c.jsxs)(ah.l.Item,{onSelect:()=>{(0,E.BI)("copilot-spaces.click",{target:"ADD_REPOSITORY_BUTTON"}),y(void 0),x(!0)},children:[(0,c.jsx)(ah.l.LeadingVisual,{children:(0,c.jsx)(eo.RepoIcon,{...(0,tn.G)("add-repository-menu-item-icon")})}),"Add repository"]}),(0,c.jsxs)(ah.l.Item,{onSelect:()=>{(0,E.BI)("copilot-spaces.click",{target:"ADD_GITHUB_FILES_BUTTON"}),_(!0)},children:[(0,c.jsx)(ah.l.LeadingVisual,{children:(0,c.jsx)(eo.FileCodeIcon,{...(0,tn.G)("add-github-files-menu-item-icon")})}),"Add files from repository"]}),(0,c.jsxs)(ah.l.Item,{onSelect:()=>{(0,E.BI)("copilot-spaces.click",{target:"ADD_GITHUB_URL_BUTTON"}),g(!0)},children:[(0,c.jsx)(ah.l.LeadingVisual,{children:(0,c.jsx)(eo.LinkIcon,{})}),"Link files, pull requests, and issues"]})]}),(0,c.jsx)(ah.l.Divider,{}),(0,c.jsxs)(ah.l.Group,{children:[(0,c.jsx)(ah.l.GroupHeading,{children:"Local"}),(0,c.jsxs)(ah.l.Item,{onSelect:()=>{(0,E.BI)("copilot-spaces.click",{target:"LOCAL_FILE_UPLOAD"}),v.current?.addResources()},children:[(0,c.jsx)(ah.l.LeadingVisual,{children:(0,c.jsx)(eo.UploadIcon,{})}),"Upload a file"]}),(0,c.jsxs)(ah.l.Item,{onSelect:()=>{(0,E.BI)("copilot-spaces.click",{target:"ADD_TEXT_FILE_BUTTON"}),m(!0)},children:[(0,c.jsx)(ah.l.LeadingVisual,{children:(0,c.jsx)(eo.PasteIcon,{...(0,tn.G)("add-text-file-menu-item-icon")})}),"Add text content"]})]})]})})]}),d&&(0,c.jsx)(nR,{sizePercentage:n,onClose:()=>m(!1),onSave:e=>t([e])}),h&&(0,c.jsx)(nA,{isOpen:h,onClose:()=>_(!1),onResourcesAdded:t,owner:s,resourceCounts:i,initialRepo:l,onRepoSelect:u}),D&&(0,c.jsx)(nS,{onClose:()=>g(!1),onSave:e=>t(e),resourcesToSave:r,resourceCounts:i,owner:s}),f&&(0,c.jsx)(aG.X1,{cancelReturnFocusRef:b,submitReturnFocusRef:b,open:f,onOpenChange:e=>{j.current||x(e)},selectedRepoIds:new Set,onSelectRepo:S,selectionVariant:"instant",description:"Select a repository to add to this space.",error:C,ownerDisplayLogin:s,includeForks:!0})]})};try{nO.displayName||(nO.displayName="AddAttachmentMenu")}catch{}function nP(e){return{id:e.databaseId,copilot_chat_attachment_id:e.copilotChatAttachmentId,resource_type:e.type,_destroy:!0,metadata:(0,nr.M)(e)}}var nL=a(46720),nM=a(74753),nU=a(10006),nz=a(3803);function n$(e){let t=(0,u.c)(14),{attachment:a,className:s}=e;switch(a.type){case"github_file":{let e;return t[0]!==s?(e=(0,c.jsx)(eo.FileIcon,{className:s}),t[0]=s,t[1]=e):e=t[1],e}case"free_text":{let e;return t[2]!==s?(e=(0,c.jsx)(eo.PasteIcon,{className:s}),t[2]=s,t[3]=e):e=t[3],e}case"uploaded_text_file":{let e;return t[4]!==s?(e=(0,c.jsx)(eo.FileIcon,{className:s}),t[4]=s,t[5]=e):e=t[5],e}case"github_issue":{let e;return t[6]!==s?(e=(0,c.jsx)(eo.IssueOpenedIcon,{className:s}),t[6]=s,t[7]=e):e=t[7],e}case"github_pull_request":{let e;return t[8]!==s?(e=(0,c.jsx)(eo.GitPullRequestIcon,{className:s}),t[8]=s,t[9]=e):e=t[9],e}case"media_content":{let e;return t[10]!==s?(e=(0,c.jsx)(eo.ImageIcon,{className:s}),t[10]=s,t[11]=e):e=t[11],e}case"repository":{let e;return t[12]!==s?(e=(0,c.jsx)(eo.RepoIcon,{className:s}),t[12]=s,t[13]=e):e=t[13],e}default:return null}}try{n$.displayName||(n$.displayName="AttachmentIcon")}catch{}let nW={attachmentText:"AttachmentPreview-module__attachmentText--ELczx",attachmentPreviewImage:"AttachmentPreview-module__attachmentPreviewImage--hqleR"};function nV(e){let t=(0,u.c)(13),{attachment:a}=e;if(!a){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("p",{className:nW.attachmentText,children:"No attachment selected."}),t[0]=e):e=t[0],e}switch(a.type){case"free_text":{let e;return t[1]!==a.text?(e=(0,c.jsx)("p",{className:nW.attachmentText,children:a.text}),t[1]=a.text,t[2]=e):e=t[2],e}case"media_content":{let e,s,n,r=`image: ${a.name}`;return t[3]!==a.url||t[4]!==r?(e=(0,c.jsx)("img",{alt:r,src:a.url}),t[3]=a.url,t[4]=r,t[5]=e):e=t[5],t[6]!==a.name||t[7]!==a.url?(s=(0,c.jsx)(a_.Q,{onClick:()=>(function(e,t,a="image"){let s=document.createElement("a");s.href=e,s.setAttribute("download",t||a),document.body.appendChild(s),s.click(),document.body.removeChild(s)})(a.url,a.name),children:"Download"}),t[6]=a.name,t[7]=a.url,t[8]=s):s=t[8],t[9]!==e||t[10]!==s?(n=(0,c.jsxs)("div",{className:nW.attachmentPreviewImage,children:[e,s]}),t[9]=e,t[10]=s,t[11]=n):n=t[11],n}default:{let e;return t[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("p",{children:"No preview available for this attachment."}),t[12]=e):e=t[12],e}}}try{nV.displayName||(nV.displayName="AttachmentPreview")}catch{}let nG={warningIcon:"ReferencesTable-module__warningIcon--ZQ8GD",referenceTitle:"ReferencesTable-module__referenceTitle--X4GB2",referenceSubtitle:"ReferencesTable-module__referenceSubtitle--cUDlc",referenceTitleLink:"ReferencesTable-module__referenceTitleLink--rezaS",headerText:"ReferencesTable-module__headerText--HR4t9",repositoryWarning:"ReferencesTable-module__repositoryWarning--obEpu"};function nH({resources:e,onDeleteResources:t,onUpdateResource:a,sizePercentage:s,onResourcesAdded:n,owner:r,readOnly:i=!1}){let o=(0,p.useMemo)(()=>Object.values(e.reduce((e,t)=>{let a=nQ(t);return{...e,[a]:t}},{})),[e]),[l,u]=(0,p.useState)(!1),[d,m]=(0,p.useState)(null),h=(0,p.useRef)(null),[_,D]=(0,p.useState)([]),g=(0,p.useCallback)(()=>{_.length>0&&(t(_),D([]))},[t,_]),f=(0,p.useCallback)(()=>{_.length>0?D([]):D(o)},[_,o]),x=(0,p.useMemo)(()=>{let e={id:"id",header:()=>(0,c.jsx)("span",{className:nG.headerText,children:_.length>0?`${_.length} selected`:`${o.length} ${1===o.length?"source":"sources"}`}),rowHeader:!0,renderCell:e=>{switch(e.type){case"github_file":{let{filePath:t,fileName:a,fileUrl:s,sha:n}=(0,O.q5)(e);return(0,c.jsxs)(su.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,c.jsx)(n$,{attachment:e,className:"fgColor-muted"}),(0,c.jsxs)(su.B,{gap:"none",children:[(0,c.jsx)("div",{children:e.fileExists?(0,c.jsxs)(su.B,{direction:"horizontal",wrap:"wrap",children:[(0,c.jsx)(sd.A,{title:a,className:nG.referenceTitle,children:(0,c.jsx)(ev.A,{rel:"noopener",target:"_blank",href:s,className:nG.referenceTitleLink,children:a})}),n&&(0,c.jsx)(ap.A,{className:"ml-1",children:n.substring(0,7)})]}):(0,c.jsx)(sd.A,{title:a,className:nG.referenceTitle,children:a})}),(0,c.jsx)("div",{children:(0,c.jsx)(sd.A,{title:t,className:(0,eJ.$)(nG.referenceSubtitle,"fgColor-muted"),children:t})})]})]})}case"free_text":return(0,c.jsxs)(su.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,c.jsx)(n$,{attachment:e,className:"fgColor-muted"}),(0,c.jsx)("div",{children:(0,c.jsx)(sd.A,{title:e.name,maxWidth:300,className:nG.referenceTitle,children:e.name})})]});case"repository":return(0,c.jsxs)(su.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,c.jsx)(sl.r,{square:"Organization"===e.ownerType,src:e.ownerAvatarUrl}),(0,c.jsxs)(su.B,{gap:"none",children:[(0,c.jsx)("div",{children:(0,c.jsx)(sd.A,{title:e.nwo,maxWidth:300,className:nG.referenceTitle,children:(0,c.jsx)(ev.A,{className:nG.referenceTitleLink,href:`/${e.nwo}`,rel:"noopener noreferrer",target:"_blank",children:e.nwo})})}),!i&&(0,c.jsx)("div",{className:(0,eJ.$)(nG.repositoryWarning,"fgColor-attention"),...(0,tn.G)("repo-warning"),children:"Spaces work best with specific files added."})]})]});case"uploaded_text_file":return(0,c.jsxs)(su.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,c.jsx)(n$,{attachment:e,className:"fgColor-muted"}),(0,c.jsx)("div",{children:(0,c.jsx)(sd.A,{title:e.name,maxWidth:300,className:nG.referenceTitle,children:(0,c.jsx)(ev.A,{className:nG.referenceTitleLink,href:e.url,download:e.name,children:e.name})})})]});case"github_pull_request":case"github_issue":return(0,c.jsxs)(su.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,c.jsx)("span",{children:(0,c.jsx)(n$,{attachment:e,className:"fgColor-success"})}),(0,c.jsxs)(su.B,{gap:"none",children:[(0,c.jsx)("div",{children:(0,c.jsx)(sd.A,{title:e.title||"",className:nG.referenceTitle,children:(0,c.jsxs)(ev.A,{rel:"noopener",target:"_blank",href:e.url,className:nG.referenceTitleLink,children:[e.title," ",(0,c.jsx)("span",{className:"fgColor-muted text-light",children:`#${e.number}`})]})})}),(0,c.jsx)("div",{children:(0,c.jsx)(sd.A,{title:e.nwo||"",className:(0,eJ.$)(nG.referenceSubtitle,"fgColor-muted"),children:e.nwo})})]})]});case"media_content":return(0,c.jsxs)(su.B,{direction:"horizontal",align:"center",gap:"normal",children:[(0,c.jsx)("span",{className:"fgColor-muted",children:(0,c.jsx)(n$,{attachment:e,className:"fgColor-muted"})}),(0,c.jsx)(ev.A,{as:"button",className:nG.referenceTitleLink,ref:h,onClick:t=>{t.preventDefault(),m(e),u(!0)},"aria-haspopup":"dialog","aria-expanded":l,children:(0,c.jsx)(sd.A,{title:e.name,maxWidth:300,className:(0,eJ.$)(nG.referenceTitle),children:e.name})})]});default:return null}}},d={id:"size",header:()=>(0,c.jsx)(nM.s,{children:"Size"}),align:"end",maxWidth:"auto",width:"growCollapse",renderCell:e=>(0,c.jsx)(nq,{row:e,onResourcesAdded:n,owner:r})},p={id:"actions",header:()=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(nM.s,{children:"Actions"}),(0,c.jsx)(a_.Q,{style:{visibility:_.length>0&&!i?"visible":"hidden"},size:"small","aria-label":"Remove selected resources",onClick:g,children:"Remove"})]}),maxWidth:"auto",align:"end",renderCell:e=>{let n="github_file"===e.type&&!e.fileExists;return(0,c.jsxs)(c.Fragment,{children:[n&&(0,c.jsx)(eQ.K,{className:nG.warningIcon,icon:eo.AlertIcon,variant:"invisible",size:"small","aria-label":"This file no longer exists"}),(0,c.jsx)(nK,{row:e,onEdit:a,onDelete:e=>t([e]),sizePercentage:s,readOnly:i})]})}};return i?[e,d,p]:[{id:"select",header:()=>(0,c.jsx)(nL.A,{checked:_.length===o.length,indeterminate:_.length>0&&_.length<o.length,"aria-label":"Select all sources",value:"default",onChange:f}),width:"auto",renderCell:e=>(0,c.jsx)(nL.A,{checked:_.some(t=>t.id===e.id),"aria-label":"Select source",value:e.id,onChange:t=>{D(a=>t.target.checked?[...a,e]:a.filter(t=>t.id!==e.id))}})},e,d,p]},[_,o.length,f,l,g,a,s,n,r,t,i]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(nU.X.Container,{children:(0,c.jsx)(nz.b,{"aria-labelledby":"references-title",cellPadding:"normal",data:o,columns:x})}),l&&d&&"media_content"===d.type&&(0,c.jsx)(aE.l,{onClose:()=>{m(null),u(!1)},position:{narrow:"fullscreen"},returnFocusRef:h,title:d.name,children:(0,c.jsx)(nV,{attachment:d})})]})}let nq=({row:e,onResourcesAdded:t,owner:a})=>{let[s,n]=(0,p.useState)(!1),[r,i]=(0,p.useState)(null),[o,l]=(0,p.useState)(!1),u=(0,p.useRef)(null),d=async e=>{l(!0);try{let t=await (0,s5.V)(e);i(t),n(!0)}finally{l(!1)}};return"repository"===e.type?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(eQ.K,{variant:"invisible",className:"float-left",ref:u,loading:o,"aria-label":"Add specific files",onClick:async()=>{await d(e.repositoryId)},icon:eo.PencilIcon}),s&&r&&(0,c.jsx)(nA,{isOpen:s,onClose:()=>n(!1),onResourcesAdded:t,owner:a,initialRepo:r,hideBackButton:!0})]}):"sizePercentage"in e?(0,c.jsx)("span",{className:"fgColor-muted",children:e.sizePercentage&&e.sizePercentage<1?"<1%":`${Math.round(e.sizePercentage||0)}%`}):void 0},nK=({row:e,onDelete:t,onEdit:a,sizePercentage:s,readOnly:n=!1})=>{let[r,i]=(0,p.useState)(null),o="";switch(e.type){case"github_pull_request":case"github_issue":o=e.title;break;case"github_file":o=e.filePath;break;case"repository":o=e.nwo;break;case"free_text":case"uploaded_text_file":case"media_content":o=e.name}return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"d-md-none",children:(!n||n&&"free_text"===e.type)&&(0,c.jsxs)(am.W,{children:[(0,c.jsx)(am.W.Anchor,{children:(0,c.jsx)(eQ.K,{"aria-label":`Attachment actions: ${o}`,title:"Attachment actions",icon:eo.KebabHorizontalIcon,variant:"invisible"})}),(0,c.jsx)(am.W.Overlay,{align:"end",children:(0,c.jsxs)(ah.l,{children:["free_text"===e.type&&(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(ah.l.Item,{"aria-label":`${n?"View":"Edit"} attachment: ${e.id}`,onSelect:()=>i(e),children:[(0,c.jsx)(ah.l.LeadingVisual,{children:n?(0,c.jsx)(eo.EyeIcon,{}):(0,c.jsx)(eo.PencilIcon,{})}),n?"View":"Edit"]})}),!n&&(0,c.jsxs)(ah.l.Item,{"aria-label":`Delete attachment: ${e.id}`,variant:"danger",onSelect:()=>t(e),children:[(0,c.jsx)(ah.l.LeadingVisual,{children:(0,c.jsx)(eo.TrashIcon,{})}),"Delete"]})]})})]})}),(0,c.jsxs)("div",{className:"d-none d-md-flex flex-md-row",children:["free_text"===e.type&&(0,c.jsx)(eQ.K,{onClick:()=>i(e),variant:"invisible","aria-label":n?"View":"Edit",icon:n?eo.EyeIcon:eo.PencilIcon}),!n&&(0,c.jsx)(eQ.K,{onClick:()=>t(e),variant:"invisible","aria-label":"Delete",icon:eo.TrashIcon})]}),r&&(0,c.jsx)(nR,{sizePercentage:s,resource:r,onSave:a,onClose:()=>i(null),readOnly:n})]})},nQ=e=>{switch(e.type){case"github_file":return`${e.repositoryId}@${e.filePath}@${e.sha}`;case"github_issue":case"github_pull_request":return e.url;default:return String(e.id)}};try{nH.displayName||(nH.displayName="ReferencesTable")}catch{}try{nq.displayName||(nq.displayName="RowSize")}catch{}try{nK.displayName||(nK.displayName="RowActions")}catch{}let nJ={instructionsContainer:"InstructionsDialog-module__instructionsContainer--tvd1E",grow:"InstructionsDialog-module__grow--mfJpQ"};function nY({copilotSpace:e,onClose:t,onSaved:a,returnFocusRef:s}){let{upsertCopilotSpace:n,isPending:r}=(0,si.$)(e),[i,o]=(0,p.useState)(e.generalInstructions??""),[l,u]=(0,p.useState)(null);async function d(){try{let e=await n({generalInstructions:i});a?.(e),t()}catch(e){e instanceof Error?u(e.message):u("Failed to save instructions")}}function m(){o(e.generalInstructions??""),t()}return(0,c.jsx)(aE.l,{width:"xlarge",height:"large",title:"Instructions",onClose:m,returnFocusRef:s,position:{narrow:"fullscreen"},renderBody:()=>(0,c.jsxs)("div",{className:nJ.instructionsContainer,children:[l&&(0,c.jsx)(N.l,{variant:"critical",title:l,className:"mb-2"}),(0,c.jsxs)(sM.A,{className:nJ.grow,disabled:!e.editable,children:[(0,c.jsx)(sM.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,c.jsx)(sU.Ay,{block:!0,value:i,onChange:e=>o(e.target.value),placeholder:"Define Copilot's role, focus, and what to avoid in this space. Ex. \u201CYou are a [role]. Follow our [framework/patterns] to [type of task]. Avoid [practices or tools] unless specified\u201D.",resize:"none",className:nJ.grow}),(0,c.jsx)(nX,{text:i,promptCharLimit:4e3})]})]}),renderFooter:()=>e.editable&&(0,c.jsx)(sL.m,{onCancel:m,onSave:d,isLoading:r,loadingAnnouncement:"Saving instructions",saveButtonText:"Save"})})}function nX(e){let t,a,s,n,r=(0,u.c)(10),{text:i,promptCharLimit:o}=e,l=i.length>o;r[0]!==i.length?(t=i.length.toLocaleString(),r[0]=i.length,r[1]=t):t=r[1],r[2]!==o?(a=o.toLocaleString(),r[2]=o,r[3]=a):a=r[3],r[4]!==t||r[5]!==a?(s=(0,c.jsxs)(c.Fragment,{children:[t," / ",a," characters"]}),r[4]=t,r[5]=a,r[6]=s):s=r[6];let d=s;return r[7]!==d||r[8]!==l?(n=l?(0,c.jsx)(sM.A.Validation,{variant:"error",children:d}):(0,c.jsx)(sM.A.Caption,{children:d}),r[7]=d,r[8]=l,r[9]=n):n=r[9],n}try{nY.displayName||(nY.displayName="InstructionsDialog")}catch{}try{nX.displayName||(nX.displayName="CharacterCount")}catch{}let nZ={header:"SpacesConversation-module__header--GkfTQ",headerTopRow:"SpacesConversation-module__headerTopRow--vpBF1",spaceDescription:"SpacesConversation-module__spaceDescription--nRmSr",chatInput:"SpacesConversation-module__chatInput--Nrvmc",instructions:"SpacesConversation-module__instructions--t36Ks",instructionsHeader:"SpacesConversation-module__instructionsHeader--ynDM7",instructionsIcon:"SpacesConversation-module__instructionsIcon--KKXjS",instructionsTitle:"SpacesConversation-module__instructionsTitle--xAAKT",instructionsContent:"SpacesConversation-module__instructionsContent--DYqhz",instructionsEmptyState:"SpacesConversation-module__instructionsEmptyState--wlbTe",content:"SpacesConversation-module__content--FPhr6",tabContainer:"SpacesConversation-module__tabContainer--rTZgf",underlineNav:"SpacesConversation-module__underlineNav--qjoAn",attachButton:"SpacesConversation-module__attachButton--Hr8sv",tabEmptyContainer:"SpacesConversation-module__tabEmptyContainer--dnmPR",tabEmptyTitle:"SpacesConversation-module__tabEmptyTitle--Pw6Ln",tabEmptyText:"SpacesConversation-module__tabEmptyText--SxP9A",tabContent:"SpacesConversation-module__tabContent--zCP1V",conversationsList:"SpacesConversation-module__conversationsList--KLG2n",conversationItem:"SpacesConversation-module__conversationItem--kxjxw",conversationItemMenuOpen:"SpacesConversation-module__conversationItemMenuOpen--Z1mQR",conversationItemLeftColumn:"SpacesConversation-module__conversationItemLeftColumn--YsHsM",conversationName:"SpacesConversation-module__conversationName--wbn54",conversationTimestamp:"SpacesConversation-module__conversationTimestamp--tcI92",text:"SpacesConversation-module__text--v551F",referencesSizeProgressBar:"SpacesConversation-module__referencesSizeProgressBar--pRjZw",referencesSizeText:"SpacesConversation-module__referencesSizeText--buwhH",descriptionText:"SpacesConversation-module__descriptionText--hYXsZ",titleText:"SpacesConversation-module__titleText--czjJm"};function n0({customCopilotId:e,selectedThreadID:t,textAreaRef:a}){let{currentTopic:s,messages:n,streamingMessage:r,ambientError:i,threads:o}=(0,_.Pk)(),l=(0,H.b)(),[d,m]=(0,M.ok)(),h=(0,er.G)(),D=eD(),g=d.get("tab")||"attachments",[f,x]=(0,p.useState)(!1),[y,v]=(0,p.useState)(null),b=(0,p.useRef)(null),[j,S]=(0,p.useState)(null),[E,I]=(0,p.useState)([]),[w,F]=(0,p.useState)(null),[A,T]=(0,p.useState)(null),[k,R]=(0,p.useState)(!1),[B,L]=(0,p.useState)([]),[U,z]=(0,p.useState)(null),$=es((0,p.useRef)(s),n.length),{isPending:W,data:V,error:G}=(0,P.Ao)(e),{upsertCopilotSpace:q,error:K}=(0,si.$)(j||void 0),{deleteCopilotSpaceResources:Q,error:J}=(e=>{let t,a,s,n,r,i,o,l=(0,u.c)(15),c=(0,st.jE)(),[d,m]=(0,p.useState)(!1);l[0]!==e?(t={mutationFn:async t=>{if(!e)return;m(!0);let a=(0,O.fn)(e),s={custom_copilot:{resources_attributes:t.map(nP)}},n=await (0,ss.lS)(a,{method:"PUT",body:s}),r=await n.json();if(!n.ok&&404!==n.status)throw Error("Unable to delete resources.");return r}},l[0]=e,l[1]=t):t=l[1];let h=(0,sa.n)(t);return l[2]!==h?({mutateAsync:a,isPending:s,...n}=h,l[2]=h,l[3]=a,l[4]=s,l[5]=n):(a=l[3],s=l[4],n=l[5]),l[6]!==e||l[7]!==s||l[8]!==c||l[9]!==d?(r=()=>{e&&d&&!s&&(m(!1),c.invalidateQueries({queryKey:(0,se.dp)(e)}))},i=[d,s,e,c],l[6]=e,l[7]=s,l[8]=c,l[9]=d,l[10]=r,l[11]=i):(r=l[10],i=l[11]),(0,p.useEffect)(r,i),l[12]!==a||l[13]!==n?(o={deleteCopilotSpaceResources:a,...n},l[12]=a,l[13]=n,l[14]=o):o=l[14],o})(j||void 0);(0,p.useEffect)(()=>{(0,au.D)(j?.name?`${j.name} \xb7 Spaces \xb7 GitHub Copilot`:"Spaces \xb7 GitHub Copilot")},[j?.name]);let{processFiles:X}=nc({onResourcesAdded:e=>void eg(e),onError:L,onUploadingChange:R}),{copilotSpacesConfig:{maxResourceCount:Z,maxDescriptionLength:ee}}=(0,C.X)(),et=K||G||A||J,ea=(0,p.useRef)(!1),ei=E.filter(e=>!e.markedForDestroy).length,el=(0,p.useMemo)(()=>j?l.sortAndFilterThreads(o,t=>t.customCopilotOwner===e.owner&&t.customCopilotID===e.id).slice(0,10):[],[o,e,l,j]),eu=(0,p.useMemo)(()=>j?j.resources.reduce((e,t)=>e+(t.sizePercentage||0),0):0,[j]);(0,p.useEffect)(()=>{V&&(S(V),I(e=>V.resources?.filter(t=>!e.find(e=>e.id===t.id&&e.markedForDestroy))||[]),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:V})),l.clearCurrentReferences(["image"])},[V,l]),(0,p.useEffect)(()=>()=>{ea.current||(l.clearCurrentReferences(),ea.current=!1)},[l,e]);let ed=(0,p.useCallback)(async e=>{ea.current=!0,await $(e)},[$]),em=(0,p.useCallback)(e=>{m({tab:e},{replace:!0})},[m]),eh=(0,p.useCallback)(e=>{l.deleteThread(e)},[l]);async function ep(e){let t=[];if(I(a=>{for(let s of(t=[...a],e))t=s.databaseId?t.map(e=>s.databaseId===e.databaseId?{...e,markedForDestroy:!0}:e):t.filter(e=>e.id!==s.id);return t}),j)try{await Q(e),T(null)}catch{I(t=>[...t,...e])}}async function e_(e){let t=[];if(I(a=>t=a.map(t=>t.id===e.id?e:t)),j)try{await q({...j,resources:t}),T(null)}catch{I(j.resources)}}let eg=(0,p.useCallback)(async e=>{let t=function(e,t){let a=new Map(e.map(e=>[e.id,e]));for(let s of t){if("repository"===s.type){let t=e.find(e=>"repository"===e.type&&e.repositoryId===s.repositoryId);if(t){a.set(t.id,{...t,markedForDestroy:!1});continue}}a.set(s.id,s)}return Array.from(a.values())}(E,e);I(t);try{await q({...j,resources:t}),T(null)}catch{j&&I(j.resources)}},[j,q,E]),ex=(0,p.useCallback)(()=>{T(`You can select a maximum of ${Z} sources`)},[Z]),eC=(0,p.useCallback)(e=>{X(e,{source:"drag-and-drop"})},[X]),ey=(0,p.useCallback)(async e=>{if(j&&e){F(e);try{let t=await q({name:e});S(t),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:t}),F(null),T(null)}catch{S(j),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:j}),F(null)}}},[j,q,l]),ev=(0,p.useCallback)(async e=>{if(j){S({...j,description:e});try{let t=await q({description:e});S(t),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:t})}catch{S(j),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:j})}}},[j,q,l]);if(G instanceof P.OW)return(0,c.jsx)(s6,{protectedOrganizations:G.protectedOrganizations});if(G instanceof P.i9)return(0,c.jsx)(s6,{});if(W||!j)return(0,c.jsx)(tF,{});let eb=j.ownerIsOrg&&!j.allowsPrivateReposFromOtherOrgs?j.owner:void 0,ej=w??j.name,eS=(0,O.Hh)(V);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Y.t,{fallback:(0,c.jsx)(eU.x,{regionName:"This space"}),children:(0,c.jsxs)(s0.Zf.Container,{width:"small",children:[(0,c.jsxs)("div",{className:nZ.header,children:[(0,c.jsxs)("div",{className:nZ.headerTopRow,children:[(0,c.jsx)("div",{children:(0,c.jsx)(ap.A,{children:s3(j)})}),(0,c.jsx)(a_.Q,{leadingVisual:eo.McpIcon,as:"a",href:O.Ku,target:"_blank",rel:"noopener noreferrer",children:"Install MCP"})]}),(0,c.jsx)("h1",{children:j.editable?(0,c.jsx)(sZ,{className:nZ.titleText,value:ej,onChange:ey}):(0,c.jsx)("span",{className:nZ.text,children:ej})}),j.editable?(0,c.jsx)(sZ,{className:nZ.descriptionText,placeholder:"Add a short description to explain this space's purpose (e.g., 'Frontend design system' or 'API docs hub').",value:j.description||"",maxLength:ee,onChange:ev}):j.description&&(0,c.jsx)("p",{className:nZ.spaceDescription,children:j.description})]}),(0,c.jsxs)("div",{className:nZ.chatInput,children:[i&&(0,c.jsx)(ec.P,{ambientError:i}),eS&&(0,c.jsx)(eT,{}),!eS&&(D.visible?(0,c.jsx)(ef,{onDismiss:D.onDismiss}):(0,c.jsx)(en.V,{textAreaRef:a,onSubmit:ed,isStreaming:!!r,size:"large",modes:[{name:"Chat",supportsMCP:!1,supportsAttachments:!0,supportsModelSwitching:!0,icon:(0,c.jsx)(eo.SpaceIcon,{}),placeholder:"How can I help you?"}],showPlanningToggle:!t,onNewThreadSelected:h},t))]}),(0,c.jsxs)("button",{ref:b,className:nZ.instructions,onClick:()=>x(!0),"aria-haspopup":"dialog","aria-expanded":f,children:[(0,c.jsxs)("div",{className:nZ.instructionsHeader,children:[(0,c.jsx)(eo.SlidersIcon,{size:16,className:nZ.instructionsIcon}),(0,c.jsx)("h2",{className:nZ.instructionsTitle,children:"Instructions"})]}),j.generalInstructions?(0,c.jsx)("p",{className:nZ.instructionsContent,children:j.generalInstructions}):(0,c.jsx)("p",{className:nZ.instructionsEmptyState,children:"Define Copilot\u2019s role, focus, and what to avoid in this space. Ex. \u201CYou are a [role]. Follow our [framework/patterns] to [type of task]. Avoid [practices or tools] unless specified\u201D."})]}),et&&(0,c.jsx)(N.l,{title:A?"Maximum source count reached":"Failed to save space",variant:"critical",description:"string"==typeof et?et:"object"==typeof et&&null!==et&&"base"in et?String(et.base):et instanceof Error?et.message:"An error occurred"}),B.length>0&&(0,c.jsx)(ek,{errorMessages:B,onDismiss:()=>L([])}),(0,c.jsxs)("div",{className:nZ.content,children:[(0,c.jsxs)("div",{className:nZ.tabContainer,children:[(0,c.jsx)("div",{className:nZ.underlineNav,children:(0,c.jsxs)(aJ.O,{"aria-label":"Space content",children:[(0,c.jsx)(aJ.O.Item,{"aria-current":"attachments"===g?"page":void 0,onClick:()=>em("attachments"),counter:ei,children:"Sources"}),(0,c.jsx)(aJ.O.Item,{"aria-current":"conversations"===g?"page":void 0,onClick:()=>em("conversations"),counter:el.length,children:"Conversations"})]})}),(0,c.jsxs)(su.B,{direction:"horizontal",align:"center",gap:"none",children:[eu>80&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s1.z,{inline:!0,barSize:"small",progress:eu,className:nZ.referencesSizeProgressBar,"aria-hidden":"true"}),(0,c.jsx)("span",{className:"sr-only",children:`${Math.max(0,Math.round(100-eu))}% remaining attachment capacity`}),(0,c.jsxs)("span",{className:nZ.referencesSizeText,children:[eu<1?"<1":Math.round(eu),"%"]})]}),j.editable&&(0,c.jsx)("div",{className:nZ.attachButton,children:ei>=Z?(0,c.jsx)(a_.Q,{leadingVisual:eo.PlusIcon,onClick:ex,children:"Add sources"}):(0,c.jsx)(nO,{sizePercentage:eu,owner:eb,onResourcesAdded:eg,resourcesToSave:E,resourceCounts:{currentResourceCount:ei,maxResourceCount:Z},onError:L,initialRepo:U,onRepoSelect:z,onUploadingChange:e=>{e&&L([]),R(e)},children:(0,c.jsx)(a_.Q,{leadingVisual:eo.PlusIcon,children:"Add sources"})})})]})]}),(0,c.jsx)("div",{className:nZ.tabContent,children:(()=>{if("attachments"===g){let e=E.filter(e=>!e.markedForDestroy);return e.length>0?(0,c.jsx)(nH,{resources:e,sizePercentage:eu,onDeleteResources:ep,onUpdateResource:e_,onResourcesAdded:eg,readOnly:!j?.editable}):(0,c.jsxs)("div",{className:nZ.tabEmptyContainer,children:[(0,c.jsx)(eo.FileIcon,{size:24,className:"fgColor-muted mb-2"}),(0,c.jsx)("h2",{className:nZ.tabEmptyTitle,children:j?.editable?"Add sources to get started":"Welcome"}),(0,c.jsx)("p",{className:nZ.tabEmptyText,children:j?.editable?"Provide files, docs, issues, or repositories so Copilot can give more relevant answers.":"This space doesn't have any sources yet. Someone with edit access can add them."})]})}if("conversations"===g)return el.length>0?(0,c.jsx)("ul",{role:"menu",className:nZ.conversationsList,children:el.map(e=>(0,c.jsx)(n1,{conversation:e,activeMenuConversationId:y,setActiveMenuConversationId:v,onDelete:eh},e.id))}):(0,c.jsxs)("div",{className:nZ.tabEmptyContainer,children:[(0,c.jsx)("h2",{className:nZ.tabEmptyTitle,children:"No conversations yet"}),(0,c.jsx)("p",{className:nZ.tabEmptyText,children:"Start a new conversation in this space by typing in the input box at the top."})]})})()}),f&&(0,c.jsx)(nY,{copilotSpace:j,onClose:()=>x(!1),returnFocusRef:b,onSaved:e=>{S(e),l.dispatch({type:"SET_CUSTOM_COPILOT",customCopilot:e})}})]})]})}),(0,c.jsx)(sG.A,{onFilesDrop:eC,isUploading:k})]})}function n1({conversation:e,activeMenuConversationId:t,setActiveMenuConversationId:a,onDelete:s}){let n=(0,a8.Z)(),r=(0,f.CB)(e),i=`${f.Jz}/c/${e.id}`;return(0,c.jsxs)("li",{role:"menuitem",onClick:()=>n(i),onKeyDown:e=>{"Enter"===e.key&&n(i)},className:(0,eJ.$)(nZ.conversationItem,null!==t&&nZ.conversationItemMenuOpen),children:[(0,c.jsxs)("div",{className:nZ.conversationItemLeftColumn,children:[(0,c.jsx)("div",{className:nZ.conversationName,children:r}),(0,c.jsxs)("div",{className:nZ.conversationTimestamp,children:[(0,c.jsx)(eo.ClockIcon,{})," ",(0,c.jsx)(s2.A,{format:"relative",prefix:"",date:new Date(e.updatedAt)})]})]}),(0,c.jsxs)(am.W,{open:t===e.id,onOpenChange:t=>{a(t?e.id:null)},children:[(0,c.jsx)(am.W.Anchor,{children:(0,c.jsx)(eQ.K,{variant:"invisible","aria-label":"Conversation options",icon:eo.KebabHorizontalIcon,onClick:e=>{e.stopPropagation()}})}),(0,c.jsx)(am.W.Overlay,{onClick:e=>e.stopPropagation(),align:"end",children:(0,c.jsx)(ah.l,{children:(0,c.jsxs)(ah.l.Item,{variant:"danger",onSelect:()=>s(e),children:[(0,c.jsx)(ah.l.LeadingVisual,{children:(0,c.jsx)(eo.TrashIcon,{})}),"Delete"]})})})]})]})}try{n0.displayName||(n0.displayName="SpacesConversation")}catch{}try{n1.displayName||(n1.displayName="ConversationItem")}catch{}function n2({primary:e=!1}){let[t,a]=(0,p.useState)(!1);return(0,c.jsxs)(c.Fragment,{children:[t?(0,c.jsx)(a4.D,{closeDialog:()=>{(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_CLOSE",mode:"immersive"}),a(!1)}}):null,(0,c.jsx)(a_.Q,{variant:e?"primary":"default",onClick:()=>{(0,E.BI)("dotcom_chat.activate",{target:"COPILOT_SPACE_CREATE_DIALOG_OPEN",mode:"immersive"}),a(!0)},children:"Create space"})]})}try{n2.displayName||(n2.displayName="CreateSpaceButton")}catch{}var n3=a(30388);function n4(e,t){var a=["name","description","owner"],s=!1;if(!t.trim())return!0;let n=s?t.trim():t.toLowerCase().trim();return a.some(t=>{let a;return null!=(a="function"==typeof t?t(e):e[t])&&(s?String(a):String(a).toLowerCase()).includes(n)})}var n6=a(21229);let n7={banner:"SpacesView-module__banner--ZHxIa",button:"SpacesView-module__button--j38nS",counter:"SpacesView-module__counter--ZdDOv",disabledButton:"SpacesView-module__disabledButton--Ygunf",description:"SpacesView-module__description--IyY7g",filterButtons:"SpacesView-module__filterButtons--qTV2E",metadata:"SpacesView-module__metadata--Sw1rv",metadataItem:"SpacesView-module__metadataItem--rLi5j",sharedSpacesTab:"SpacesView-module__sharedSpacesTab--dS9e3",benefitSections:"SpacesView-module__benefitSections--ZQRGR",benefitSection:"SpacesView-module__benefitSection--GRkgW",benefitIcon:"SpacesView-module__benefitIcon--Pk9zH",benefitTitle:"SpacesView-module__benefitTitle--NOGgu",benefitDescription:"SpacesView-module__benefitDescription--FU6Sj"};function n5(){return(0,c.jsx)(ev.A,{href:"https://docs.github.com/copilot/how-tos/provide-context/use-copilot-spaces/create-and-use-copilot-spaces",className:"mt-4 f5",target:"_blank",rel:"noopener noreferrer",children:"Need help? Read the docs"})}function n8({copilotSpace:e,onDelete:t,onClick:a}){let s=e.ownerIsOrg?eo.OrganizationIcon:eo.PersonIcon,n=s3(e),r="Shared"===n?eo.PeopleIcon:eo.LockIcon,i=e.adminable||e.editable;return(0,c.jsxs)(n3.qJ.Item,{href:(0,O.Cb)(e),onClick:a,children:[(0,c.jsx)(n3.qJ.Item.Title,{children:e.name}),(0,c.jsx)(n3.qJ.Item.Description,{children:(0,c.jsx)("div",{className:n7.description,children:e.description})}),(0,c.jsx)(n3.qJ.Item.Metadata,{children:(0,c.jsxs)("div",{className:n7.metadata,children:[(0,c.jsxs)("span",{className:n7.metadataItem,children:[(0,c.jsx)(s,{size:16}),e.owner]}),(0,c.jsxs)("span",{className:n7.metadataItem,children:[(0,c.jsx)(r,{size:16}),n]})]})}),(i||B.W.copilotSpacesReportAbuse)&&(0,c.jsx)(n3.qJ.Item.Actions,{children:(0,c.jsx)(sR,{copilot:e,onDelete:t})})]})}function n9(){return(0,c.jsxs)("li",{children:[(0,c.jsxs)("div",{className:"my-8 d-flex flex-column gap-3 text-center",children:[(0,c.jsx)("h2",{className:"f3 fgColor-default",children:"Start your first space"}),(0,c.jsxs)("div",{className:"d-flex flex-items-center flex-column",children:[(0,c.jsx)(n2,{}),(0,c.jsx)(n5,{})]})]}),(0,c.jsxs)("div",{className:n7.benefitSections,children:[(0,c.jsxs)("div",{className:n7.benefitSection,children:[(0,c.jsx)("div",{className:n7.benefitIcon,children:(0,c.jsx)(eo.CodeIcon,{size:16})}),(0,c.jsx)("h3",{className:n7.benefitTitle,children:"Generate code"}),(0,c.jsx)("p",{className:n7.benefitDescription,children:"Produce code that follows your team's patterns."})]}),(0,c.jsxs)("div",{className:n7.benefitSection,children:[(0,c.jsx)("div",{className:n7.benefitIcon,children:(0,c.jsx)(eo.BookIcon,{size:16})}),(0,c.jsx)("h3",{className:n7.benefitTitle,children:"Share knowledge"}),(0,c.jsx)("p",{className:n7.benefitDescription,children:"Centralize docs so your team can quickly find answers."})]}),(0,c.jsxs)("div",{className:n7.benefitSection,children:[(0,c.jsx)("div",{className:n7.benefitIcon,children:(0,c.jsx)(eo.ProjectIcon,{size:16})}),(0,c.jsx)("h3",{className:n7.benefitTitle,children:"Plan projects"}),(0,c.jsx)("p",{className:n7.benefitDescription,children:"Create requirements and issues your team can ship."})]})]})]})}let re=e=>e.shared&&e.collaborative;function rt({spaces:e,starredSpaces:t,isLoading:a,onDelete:s,onSpaceClick:n,searchQuery:r,currentUserLogin:i}){let o=K.Jt.getSpacesSelectedTab(),[l,u]=(0,p.useState)(o),d=(0,p.useCallback)(e=>{u(e),K.Jt.setSpacesSelectedTab(e)},[]),m=t&&t.length>0,h=B.W.copilotSpacesReadAccessToUserOwnedSpaces,{copilotSpacesConfig:{userHasOrgs:_}}=(0,C.X)();(0,p.useEffect)(()=>{m&&d("starred")},[m,d]);let D=(0,p.useMemo)(()=>e?e.filter(e=>!!("starred"===l&&e.starred||"personal"===l&&!e.ownerIsOrg&&!e.shared||"org"===l&&e.ownerIsOrg||h&&"shared"===l&&re(e))&&n4(e,r)):[],[e,l,r,h]),{personalSpacesCount:g,orgSpacesCount:f,starredSpacesCount:x,sharedSpacesCount:y}=(0,p.useMemo)(()=>{if(!e)return{personalSpacesCount:0,orgSpacesCount:0,starredSpacesCount:0,sharedSpacesCount:0};let t=r.trim()?e.filter(e=>n4(e,r)):e;return{personalSpacesCount:t.filter(e=>!e.ownerIsOrg&&!e.shared).length,orgSpacesCount:t.filter(e=>e.ownerIsOrg).length,starredSpacesCount:t.filter(e=>e.starred).length,sharedSpacesCount:h?t.filter(re).length:0}},[e,r,h]),v=e&&!e.some(e=>e.creator===i)&&!a,b=e&&e.length>0&&D?.length===0&&!a,j=h&&y>0;return(0,c.jsxs)(n3.qJ,{children:[(0,c.jsx)(n3.qJ.Header,{children:(0,c.jsxs)("div",{role:"tablist","aria-label":"Filter spaces",className:n7.filterButtons,children:[m&&(0,c.jsxs)("button",{onClick:()=>d("starred"),role:"tab","aria-selected":"starred"===l,"aria-controls":"spaces-list",id:"starred-tab",className:n7.button,children:["Starred ",(0,c.jsx)("span",{className:n7.counter,children:x})]}),_||m||j?(0,c.jsxs)("button",{onClick:()=>d("personal"),role:"tab","aria-selected":"personal"===l,"aria-controls":"spaces-list",id:"personal-tab",className:n7.button,children:["Yours ",(0,c.jsx)("span",{className:n7.counter,children:g})]}):(0,c.jsxs)("span",{id:"disabled-personal-tab",role:"tab",className:n7.disabledButton,children:["Yours ",(0,c.jsx)("span",{className:n7.counter,children:g})]}),j&&(0,c.jsxs)("button",{onClick:()=>d("shared"),role:"tab","aria-selected":"shared"===l,"aria-controls":"spaces-list",id:"shared-with-me-tab",className:(0,eJ.$)(n7.button,n7.sharedSpacesTab),children:["Shared with me ",(0,c.jsx)("span",{className:n7.counter,children:y})]}),_&&(0,c.jsxs)("button",{onClick:()=>d("org"),role:"tab","aria-selected":"org"===l,"aria-controls":"spaces-list",id:"org-tab",className:n7.button,children:["Organizations ",(0,c.jsx)("span",{className:n7.counter,children:f})]})]})}),(0,c.jsx)(n3.qJ.List,{loading:a,id:"spaces-list","aria-labelledby":l,children:v&&D?.length===0?(0,c.jsx)(n9,{}):b?(0,c.jsxs)(n3.qJ.EmptyState,{children:[(0,c.jsxs)("p",{children:["starred"===l&&"Spaces you star will appear here.","personal"===l&&"Spaces you create will appear here.","org"===l&&"Spaces belonging to your organizations will appear here.","shared"===l&&"Shared spaces will appear here."]}),(0,c.jsx)(n2,{}),(0,c.jsx)(n5,{})]}):D?.map(e=>(0,c.jsx)(n8,{copilotSpace:e,onDelete:()=>s(e),onClick:n},e.owner?`${e.owner}/${e.id}`:e.id))})]})}function ra({copilotSpaces:e}){let t=(0,_.Pk)(),{ssoOrganizations:a}=t,s=a.map(e=>e.login),[n,r]=(0,p.useState)(null),[i,o]=(0,p.useState)(""),l=K.Jt.getSpacesMcpBannerDismissalCount(),[u,d]=(0,p.useState)(l<2),m=void 0===e,h=e?.filter(e=>e.starred),{mutateAsync:D}=(0,P.$7)(),g=async e=>{try{await D(e),r(null)}catch(e){r(e instanceof Error?e:Error(String(e)))}};return(0,c.jsxs)(Y.t,{fallback:(0,c.jsx)(eU.x,{regionName:"Spaces"}),children:[n&&(0,c.jsxs)(a9.A,{variant:"danger",children:[(0,c.jsx)(eo.AlertIcon,{}),"There was a problem deleting your space."]}),(0,c.jsxs)(s0.Zf.Container,{width:"small",children:[u&&(0,c.jsx)(s0.Zf.Banner,{children:(0,c.jsx)(N.l,{title:"Try Spaces in VSCode",hideTitle:!0,icon:(0,c.jsx)(eo.McpIcon,{}),description:"Spaces are now available through the GitHub MCP in VSCode.",variant:"upsell",primaryAction:(0,c.jsx)(N.l.PrimaryAction,{as:"a",href:O.Ku,target:"_blank",rel:"noopener noreferrer",children:"Install"}),onDismiss:()=>{let e=K.Jt.getSpacesMcpBannerDismissalCount();K.Jt.setSpacesMcpBannerDismissalCount(e+1),d(!1)}})}),(0,c.jsxs)(s0.Zf.Header,{children:[(0,c.jsx)(s0.Zf.Title,{children:"Spaces"}),(0,c.jsx)(s0.Zf.Description,{children:"Spaces organize your files, pull requests, issues, and standards so Copilot can give more relevant help for your work."}),(0,c.jsx)(s0.Zf.Actions,{children:(0,c.jsx)(n2,{primary:!0})})]}),a.length>0&&!(0,J.G7)("global_sso_banner")&&(0,c.jsx)("div",{className:n7.banner,children:(0,c.jsx)(tT.x,{protectedOrgs:s,redirectURI:()=>`/search/refresh_blackbird_caches?return_to=${encodeURIComponent(window.location.href)}`})}),(0,c.jsx)(n6.D,{onSearch:o}),(0,c.jsx)(s0.Zf.Section,{children:(0,c.jsx)(rt,{spaces:e,starredSpaces:h,isLoading:m,onDelete:g,onSpaceClick:()=>{(0,E.BI)("dotcom_chat.activate",{target:"SPACES_VIEW_SPACE_SELECTED",mode:"immersive"})},searchQuery:i,currentUserLogin:t.currentUserLogin})})]})]})}try{n5.displayName||(n5.displayName="DocsLink")}catch{}try{n8.displayName||(n8.displayName="SpacesListItem")}catch{}try{n9.displayName||(n9.displayName="FirstSpaceEmptyState")}catch{}try{rt.displayName||(rt.displayName="SpacesList")}catch{}try{ra.displayName||(ra.displayName="SpacesView")}catch{}function rs(){let e,t,a,s,n,r,i,o,l,d,m,h,D,g,C=(0,u.c)(52),y=(0,_.Pk)(),{customCopilots:v}=y,b=(0,x.U)(),S=(0,k.v)(),E=(0,M.zy)(),N=(0,P.BV)(),I=(0,O.y_)(),w=N&&I,F=(0,O.iI)(),{isNarrowViewport:A}=(0,z.B)();(0,P.e9)(N),function(){let e=(0,_.Pk)(),{referenceId:t,messageIndex:a}=function(){let e=(0,M.zy)();return(0,p.useMemo)(()=>{let t=new URLSearchParams(e.search),a=t.get("reference_id"),s=t.get("message_index"),n=null;if(null!==s){let e=parseInt(s,10);isNaN(e)||(n=e)}return{referenceId:a,messageIndex:n}},[e.search])}(),[,s]=(0,M.ok)(),n=(0,p.useMemo)(()=>e.messages??[],[e.messages]),r=(0,p.useMemo)(()=>null!==a&&a>=0&&a<n.length?n[a]:null,[n,a]),i=(0,p.useMemo)(()=>r?.references??e.currentReferences??[],[r?.references,e.currentReferences]),o=(0,p.useMemo)(()=>t&&i.length?i.find(e=>(0,f.Vb)(e)===t)??null:null,[t,i]),l=(0,U.I)({messageIndex:a??n.length,messageId:r?.id,messageTimestamp:r?.createdAt});(0,p.useEffect)(()=>{o&&(l(o),s(e=>{let t=new URLSearchParams(e);return t.delete("reference_id"),t.delete("message_index"),t}))},[o,l,s])}();let V=(0,j.tZ)(),G=(0,j.wI)(),{closePreviewPane:H,openPreviewPane:q,closeResourcePanel:K,openResourcePanel:Q}=(0,j.xx)();C[0]!==H||C[1]!==q?(e=e=>{e?q():H()},C[0]=H,C[1]=q,C[2]=e):e=C[2];let J=e;C[3]!==K||C[4]!==Q?(t=e=>{e?Q():K()},C[3]=K,C[4]=Q,C[5]=t):t=C[5];let Y=t;C[6]!==S||C[7]!==E?(a=(0,R.bG)(S,E),C[6]=S,C[7]=E,C[8]=a):a=C[8];let X=a;if(S&&X){let e,t,a=X.Component;return C[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)("span",{"data-favicon-override":$.i}),C[9]=e):e=C[9],C[10]!==a||C[11]!==S||C[12]!==y?(t=(0,c.jsxs)(c.Fragment,{children:[e,(0,c.jsx)(p.Suspense,{children:(0,c.jsx)(a,{chatState:y,plugin:S})})]}),C[10]=a,C[11]=S,C[12]=y,C[13]=t):t=C[13],t}C[14]!==F||C[15]!==v||C[16]!==w||C[17]!==y.selectedThreadID||C[18]!==b?(s=w?(0,c.jsx)(ra,{copilotSpaces:v}):F?(0,c.jsx)(n0,{customCopilotId:F,selectedThreadID:y.selectedThreadID,textAreaRef:b}):null,C[14]=F,C[15]=v,C[16]=w,C[17]=y.selectedThreadID,C[18]=b,C[19]=s):s=C[19];let Z=s;if(Z){let e,t,a;return C[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(L.P.Header,{children:(0,c.jsx)(sW,{})}),C[20]=e):e=C[20],C[21]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(L.P.Sidebar,{children:(0,c.jsx)(T.U,{})}),C[21]=t):t=C[21],C[22]!==Z?(a=(0,c.jsxs)(L.P,{"data-testid":"chat-layout","data-hpc":!0,faviconOverride:$.i,children:[e,t,(0,c.jsx)(L.P.ColumnLeft,{children:Z})]}),C[22]=Z,C[23]=a):a=C[23],a}C[24]!==V||C[25]!==J?(n=[V,J],C[24]=V,C[25]=J,C[26]=n):n=C[26],C[27]!==G||C[28]!==Y?(r=[G,Y],C[27]=G,C[28]=Y,C[29]=r):r=C[29],C[30]===Symbol.for("react.memo_cache_sentinel")?(i=(0,c.jsx)(L.P.Sidebar,{children:(0,c.jsx)(T.U,{})}),C[30]=i):i=C[30],C[31]!==y.selectedThreadID?(o=!y.selectedThreadID&&(0,c.jsx)(aU,{}),C[31]=y.selectedThreadID,C[32]=o):o=C[32],C[33]!==o?(l=(0,c.jsx)(L.P.Header,{children:(0,c.jsx)(aw,{customButtons:o})}),C[33]=o,C[34]=l):l=C[34];let ee=B.W.stableConversationView?void 0:y.selectedThreadID;return C[35]!==A||C[36]!==ee||C[37]!==b?(d=(0,c.jsx)(L.P.ColumnLeft,{children:(0,c.jsx)(ai,{isMobile:A,textAreaRef:b},ee)}),C[35]=A,C[36]=ee,C[37]=b,C[38]=d):d=C[38],C[39]!==G?(m=B.W.copilotResourcePanel&&G&&(0,c.jsx)(aX,{}),C[39]=G,C[40]=m):m=C[40],C[41]!==b?(h=(0,c.jsx)(W.U,{returnFocusRef:b}),C[41]=b,C[42]=h):h=C[42],C[43]!==m||C[44]!==h?(D=(0,c.jsxs)(L.P.ColumnRight,{className:"d-flex",children:[m,h]}),C[43]=m,C[44]=h,C[45]=D):D=C[45],C[46]!==d||C[47]!==D||C[48]!==n||C[49]!==r||C[50]!==l?(g=(0,c.jsxs)(L.P,{"data-testid":"chat-layout","data-hpc":!0,faviconOverride:$.i,secondaryColumnState:n,resourcePanelState:r,children:[i,l,d,D]}),C[46]=d,C[47]=D,C[48]=n,C[49]=r,C[50]=l,C[51]=g):g=C[51],g}try{rs.displayName||(rs.displayName="Layout")}catch{}var rn=a(97645),rr=a(40235);let ri=(0,y.E7)();function ro(){let e,t=(0,u.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(b.RelayEnvironmentProvider,{environment:ri,children:(0,c.jsx)(rl,{})}),t[0]=e):e=t[0],e}function rl(){let e=(0,u.c)(2),t=(0,C.X)();if(t?.copilotChatSettingEnabled){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(rc,{children:(0,c.jsx)(ru,{})}),e[0]=t):t=e[0],t}{let t;return e[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,c.jsx)(F,{}),e[1]=t):t=e[1],t}}function rc(e){let t,a,s,n,r,i,o,l,d,D,y,b=(0,u.c)(36),{children:S}=e,E=(0,C.X)(),N=ea(),I=E.requestedTopic;if((0,f.P)(I)){let e,a;b[0]!==I?(e=(0,f.UU)(I),b[0]=I,b[1]=e):e=b[1],b[2]!==e?(a={refs:[e],topic:void 0},b[2]=e,b[3]=a):a=b[3],t=a}else if(E.reference){let e,a;b[4]!==E.reference?(e=[E.reference],b[4]=E.reference,b[5]=e):e=b[5],b[6]!==I||b[7]!==e?(a={refs:e,topic:I},b[6]=I,b[7]=e,b[8]=a):a=b[8],t=a}else{let e,a;b[9]===Symbol.for("react.memo_cache_sentinel")?(e=[],b[9]=e):e=b[9],b[10]!==I?(a={refs:e,topic:I},b[10]=I,b[11]=a):a=b[11],t=a}let{refs:w,topic:F}=t;b[12]===Symbol.for("react.memo_cache_sentinel")?(a=[],b[12]=a):a=b[12];let[,A]=(0,p.useState)(a);b[13]===Symbol.for("react.memo_cache_sentinel")?(s={onError:(e,t)=>{A(e=>[{...t},...e])}},b[13]=s):s=b[13];let{createTask:T}=(0,m.Z)(s);b[14]!==T?(n=(e,t,a,s)=>{let n=e.trim();""!==n&&a&&""!==a.trim()&&t&&T({nwo:t.nameWithOwner,problemStatement:n,baseRef:a,eventType:"immersive_page",eventContent:n,customAgent:s})},b[14]=T,b[15]=n):n=b[15];let k=n,R=(0,p.useRef)(k);b[16]!==k?(r=()=>{R.current=k},i=[k],b[16]=k,b[17]=r,b[18]=i):(r=b[17],i=b[18]),(0,p.useEffect)(r,i),b[19]!==E?(o={payload:E,handleUserSubmitRef:R},b[19]=E,b[20]=o):o=b[20];let B=(0,rn.N)(o);return b[21]!==S?(l=(0,c.jsx)(j.BH,{children:S}),b[21]=S,b[22]=l):l=b[22],b[23]!==E||b[24]!==w||b[25]!==l||b[26]!==N||b[27]!==F?(d=(0,c.jsx)(_.Mj,{workerPath:E.searchWorkerFilePath,threadId:N,refs:w,mode:"immersive",topic:F,ssoOrganizations:E.ssoOrganizations,copilotChatPayload:E,children:l}),b[23]=E,b[24]=w,b[25]=l,b[26]=N,b[27]=F,b[28]=d):d=b[28],b[29]!==E.apiURL||b[30]!==E.ssoOrganizations||b[31]!==d?(D=(0,c.jsx)(h.hh,{apiURL:E.apiURL,ssoOrgs:E.ssoOrganizations,children:d}),b[29]=E.apiURL,b[30]=E.ssoOrganizations,b[31]=d,b[32]=D):D=b[32],b[33]!==B||b[34]!==D?(y=(0,c.jsx)(x.KL,{children:(0,c.jsx)(v.LB,{children:(0,c.jsx)(g.Hb,{plugins:B,children:D})})}),b[33]=B,b[34]=D,b[35]=y):y=b[35],y}function ru(){let e,t,a,s=(0,u.c)(1);!function(){let e,t,a=(0,u.c)(7),s=ea(),n=(0,p.useRef)(!0),r=(0,p.useRef)(null),i=(0,H.b)(),{threads:o,selectedThreadID:l}=(0,_.Pk)(),c=et(),{selectedThreadID:d,sharedThreadChannel:m}=(0,_.Pk)(),h=(0,H.b)();(0,rr.x)(m,()=>{h.fetchSharedThreadMessages(d)}),a[0]!==c||a[1]!==i||a[2]!==l||a[3]!==s||a[4]!==o?(e=()=>{if(n.current){n.current=!1,r.current=s,c?i.fetchSharedThreadMessages(l):i.fetchMessages(l);return}if(r.current!==s){if(r.current=s,s===l)return;let e=s&&o?.get(s);i.selectThread(e||null,{includeThreads:!1,clearTopic:!0})}},t=[i,s,o,l,c],a[0]=c,a[1]=i,a[2]=l,a[3]=s,a[4]=o,a[5]=e,a[6]=t):(e=a[5],t=a[6]),(0,p.useEffect)(e,t)}(),function(){let e,t,a=(0,u.c)(8),{selectedThreadID:s}=(0,_.Pk)(),n=(0,k.v)(),r=(0,ti.M)((0,M.Zp)());a[0]!==r||a[1]!==n?.skipSyncRouteToThread||a[2]!==s?(e=()=>{if(!s||n?.skipSyncRouteToThread)return;let e=`${f.Jz}/c/${s}`,t=`${f.Jz}/share/${s}`,a=window.location.pathname;a.startsWith(e)||a.startsWith(t)||r.current(e)},a[0]=r,a[1]=n?.skipSyncRouteToThread,a[2]=s,a[3]=e):e=a[3];let i=n?.skipSyncRouteToThread;a[4]!==r||a[5]!==s||a[6]!==i?(t=[r,i,s],a[4]=r,a[5]=s,a[6]=i,a[7]=t):t=a[7],(0,p.useEffect)(e,t)}();let n=(0,u.c)(3),r=(0,H.b)();return n[0]!==r?(t=()=>{let e=()=>{window.location.href.includes("/r/")?(r.showTopicPicker(!1),r.selectThread(null)):window.location.href.includes("/c/")||(r.showTopicPicker(!0),r.selectThread(null))};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},a=[r],n[0]=r,n[1]=t,n[2]=a):(t=n[1],a=n[2]),(0,p.useEffect)(t,a),!function(){let e,t,a,s,n=(0,u.c)(11),r=(0,D.y)(),{selectedThreadID:i,fetchSharedThreads:o}=(0,_.bP)("selectedThreadID","fetchSharedThreads"),l=!!o?.shareId&&i===o?.shareId;n[0]!==l||n[1]!==i||n[2]!==r?(e=()=>{i&&!l&&r.fetchAndLoadTraces(i)},t=[i,r,l],n[0]=l,n[1]=i,n[2]=r,n[3]=e,n[4]=t):(e=n[3],t=n[4]),(0,p.useEffect)(e,t),n[5]!==o||n[6]!==l||n[7]!==i||n[8]!==r?(a=()=>{o?.ok&&o.originalThreadId&&l&&i&&r.fetchAndLoadTraces(o.originalThreadId,i)},s=[o,r,l,i],n[5]=o,n[6]=l,n[7]=i,n[8]=r,n[9]=a,n[10]=s):(a=n[9],s=n[10]),(0,p.useEffect)(a,s)}(),s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.jsx)(rs,{}),s[0]=e):e=s[0],e}try{ro.displayName||(ro.displayName="CopilotImmersive")}catch{}try{rl.displayName||(rl.displayName="CopilotImmersiveNoRelay")}catch{}try{rc.displayName||(rc.displayName="CopilotImmersiveProviders")}catch{}try{ru.displayName||(ru.displayName="Immersive")}catch{}(0,l.o)("copilot-immersive-v1",()=>({App:d,routes:[(0,o.a)({path:"/copilot",Component:ro,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,o.a)({path:"/copilot/c/:threadID",Component:ro,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,o.a)({path:"/copilot/d/:docsetName",Component:ro}),(0,o.a)({path:"/copilot/r/:owner/:repository",Component:ro}),(0,o.a)({path:"/copilot/share/:threadID",Component:ro}),(0,o.a)({path:"/copilot/loops",Component:ro,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,o.a)({path:"/copilot/l/:loopID",Component:ro,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,o.a)({path:"/copilot/workbench",Component:ro,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,o.a)({path:"/copilot/spark",Component:ro,transitionType:i.E.TRANSITION_WITHOUT_FETCH}),(0,o.a)({path:"/copilot/spaces",Component:ro}),(0,o.a)({path:"/copilot/spaces/:spaceID",Component:ro}),(0,o.a)({path:"/copilot/spaces/:owner/:spaceNumber",Component:ro}),(0,o.a)({path:"/copilot/spaces/:owner/:spaceNumber/edit",Component:ro}),(0,o.a)({path:"/copilot/spaces/:spaceID/edit",Component:ro}),(0,o.a)({path:"/copilot/spaces/new",Component:ro}),(0,o.a)({path:"/copilot/agents",Component:ro}),(0,o.a)({path:"/copilot/tasks/pull/:globalID",Component:ro})]}))},20255:(e,t,a)=>{a.d(t,{I:()=>i});var s=a(96540),n=a(35180),r=a(90147);function i(){r.r.current||(0,n.U)();let[e]=(0,s.useState)(r.O.current);return e}},25942:(e,t,a)=>{a.d(t,{C:()=>g});var s=/(?:^\s+|\s+$)/g,n=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2642\u2640]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDD27\uDCBC\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCC\uDFCB]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function r(e){var t=e.nodeType,a="";if(1===t||9===t||11===t)if("string"==typeof e.textContent)return e.textContent;else for(e=e.firstChild;e;e=e.nextSibling)a+=r(e);else if(3===t||4===t)return e.nodeValue;return a}function i(e,t,a,r,i){if(e+="",a&&(e=e.trim?e.trim():e.replace(s,"")),t&&""!==t)return e.replace(/>/g,"&gt;").replace(/</g,"&lt;").split(t);for(var o,l,c=[],u=e.length,d=0;d<u;d++)((l=e.charAt(d)).charCodeAt(0)>=55296&&56319>=l.charCodeAt(0)||e.charCodeAt(d+1)>=65024&&65039>=e.charCodeAt(d+1))&&(o=((e.substr(d,12).split(n)||[])[1]||"").length||2,l=e.substr(d,o),c.emoji=1,d+=o-1),c.push(i?l:">"===l?"&gt;":"<"===l?"&lt;":r&&" "===l&&(" "===e.charAt(d-1)||" "===e.charAt(d+1))?"&nbsp;":l);return c}var o,l,c=function(){function e(e){this.chars=i(e),this.sets=[],this.length=50;for(var t=0;t<20;t++)this.sets[t]=m(80,this.chars)}return e.prototype.grow=function(e){for(var t=0;t<20;t++)this.sets[t]+=m(e-this.length,this.chars);this.length=e},e}(),u=function(){return o||"undefined"!=typeof window&&(o=window.gsap)&&o.registerPlugin&&o},d=/\s+/g,m=function(e,t){for(var a=t.length,s="";--e>-1;)s+=t[~~(Math.random()*a)];return s},h="ABCDEFGHIJKLMNOPQRSTUVWXYZ",p=h.toLowerCase(),_={upperCase:new c(h),lowerCase:new c(p),upperAndLowerCase:new c(h+p)},D=function(){l=o=u()},g={version:"3.13.0",name:"scrambleText",register:function(e,t,a){o=e,D()},init:function(e,t,a,s,n){if(l||D(),this.prop="innerHTML"in e?"innerHTML":"textContent"in e?"textContent":0,this.prop){this.target=e,"object"!=typeof t&&(t={text:t});var o,u,m,h,p=t.text||t.value||"",g=!1!==t.trim;return this.delimiter=o=t.delimiter||"",this.original=i(r(e).replace(d," ").split("&nbsp;").join(""),o,g),("{original}"===p||!0===p||null==p)&&(p=this.original.join(o)),this.text=i((p||"").replace(d," "),o,g),this.hasClass=!!(t.newClass||t.oldClass),this.newClass=t.newClass,this.oldClass=t.oldClass,h=""===o,this.textHasEmoji=h&&!!this.text.emoji,this.charsHaveEmoji=!!t.chars&&!!i(t.chars).emoji,this.length=h?this.original.length:this.original.join(o).length,this.lengthDif=(h?this.text.length:this.text.join(o).length)-this.length,this.fillChar=t.fillChar||t.chars&&~t.chars.indexOf(" ")?"&nbsp;":"",this.charSet=m=_[t.chars||"upperCase"]||new c(t.chars),this.speed=.05/(t.speed||1),this.prevScrambleTime=0,this.setIndex=20*Math.random()|0,(u=this.length+Math.max(this.lengthDif,0))>m.length&&m.grow(u),this.chars=m.sets[this.setIndex],this.revealDelay=t.revealDelay||0,this.tweenLength=!1!==t.tweenLength,this.tween=a,this.rightToLeft=!!t.rightToLeft,this._props.push("scrambleText","text"),1}},render:function(e,t){var a,s,n,r,o,l,c,u,d,m,h,p=t.target,_=t.prop,D=t.text,g=t.delimiter,f=t.tween,x=t.prevScrambleTime,C=t.revealDelay,y=t.setIndex,v=t.chars,b=t.charSet,j=t.length,S=t.textHasEmoji,E=t.charsHaveEmoji,N=t.lengthDif,I=t.tweenLength,w=t.oldClass,F=t.newClass,A=t.rightToLeft,T=t.fillChar,k=t.speed,R=t.original,B=t.hasClass,O=D.length,P=f._time,L=P-x;C&&(f._from&&(P=f._dur-P),e=0===P?0:P<C?1e-6:P===f._dur?1:f._ease((P-C)/(f._dur-C))),e<0?e=0:e>1&&(e=1),A&&(e=1-e),a=~~(e*O+.5),e?((L>k||L<-k)&&(t.setIndex=y=(y+(19*Math.random()|0))%20,t.chars=b.sets[y],t.prevScrambleTime+=L),r=v):r=R.join(g),h=f._from?e:1-e,m=j+(I?f._from?h*h*h:1-h*h*h:1)*N,A?1===e&&(f._from||"isFromStart"===f.data)?(n="",r=R.join(g)):(c=D.slice(a).join(g),n=E?i(r).slice(0,m-(S?i(c):c).length+.5|0).join(""):r.substr(0,m-(S?i(c):c).length+.5|0),r=c):(n=D.slice(0,a).join(g),s=(S?i(n):n).length,r=E?i(r).slice(s,m+.5|0).join(""):r.substr(s,m-s+.5|0)),B?(u=A?w:F,d=A?F:w,c=((o=u&&0!==a)?"<span class='"+u+"'>":"")+n+(o?"</span>":"")+((l=d&&a!==O)?"<span class='"+d+"'>":"")+g+r+(l?"</span>":"")):c=n+g+r,p[_]="&nbsp;"===T&&~c.indexOf("  ")?c.split("  ").join("&nbsp;&nbsp;"):c}};g.emojiSafeSplit=i,g.getText=r,u()&&o.registerPlugin(g)},37351:(e,t,a)=>{a.d(t,{_:()=>s});function s(e,t){if(e!==t)throw TypeError("Private static access of wrong provenance")}},39595:(e,t,a)=>{let s;a.d(t,{CF:()=>_,p_:()=>F,FB:()=>d,Se:()=>j,aC:()=>I,zV:()=>w});let n=new WeakSet,r=new WeakMap;function i(e=document){if(r.has(e))return r.get(e);let t=!1,a=new MutationObserver(e=>{for(let t of e)if("attributes"===t.type&&t.target instanceof Element)u(t.target);else if("childList"===t.type&&t.addedNodes.length)for(let e of t.addedNodes)e instanceof Element&&o(e)});a.observe(e,{childList:!0,subtree:!0,attributeFilter:["data-action"]});let s={get closed(){return t},unsubscribe(){t=!0,r.delete(e),a.disconnect()}};return r.set(e,s),s}function o(e){for(let t of e.querySelectorAll("[data-action]"))u(t);e instanceof Element&&e.hasAttribute("data-action")&&u(e)}function l(e){let t=e.currentTarget;for(let a of c(t))if(e.type===a.type){let s=t.closest(a.tag);n.has(s)&&"function"==typeof s[a.method]&&s[a.method](e);let r=t.getRootNode();if(r instanceof ShadowRoot&&n.has(r.host)&&r.host.matches(a.tag)){let t=r.host;"function"==typeof t[a.method]&&t[a.method](e)}}}function*c(e){for(let t of(e.getAttribute("data-action")||"").trim().split(/\s+/)){let e=t.lastIndexOf(":"),a=Math.max(0,t.lastIndexOf("#"))||t.length;yield{type:t.slice(0,e),tag:t.slice(e+1,a),method:t.slice(a+1)||"handleEvent"}}}function u(e){for(let t of c(e))e.addEventListener(t.type,l)}function d(e,t){let a=e.tagName.toLowerCase();if(e.shadowRoot){for(let s of e.shadowRoot.querySelectorAll(`[data-target~="${a}.${t}"]`))if(!s.closest(a))return s}for(let s of e.querySelectorAll(`[data-target~="${a}.${t}"]`))if(s.closest(a)===e)return s}let m=e=>String("symbol"==typeof e?e.description:e).replace(/([A-Z]($|[a-z]))/g,"-$1").replace(/--/g,"-").replace(/^-|-$/,"").toLowerCase(),h=(e,t="property")=>{let a=m(e);if(!a.includes("-"))throw new DOMException(`${t}: ${String(e)} is not a valid ${t} name`,"SyntaxError");return a},p="attr";function _(e,t){N(e,p).add(t)}let D=new WeakSet;function g(e,t){if(D.has(e))return;D.add(e);let a=Object.getPrototypeOf(e),s=a?.constructor?.attrPrefix??"data-";for(let n of(t||(t=N(a,p)),t)){let t=e[n],a=h(`${s}${n}`),r={configurable:!0,get(){return this.getAttribute(a)||""},set(e){this.setAttribute(a,e||"")}};"number"==typeof t?r={configurable:!0,get(){return Number(this.getAttribute(a)||0)},set(e){this.setAttribute(a,e)}}:"boolean"==typeof t&&(r={configurable:!0,get(){return this.hasAttribute(a)},set(e){this.toggleAttribute(a,e)}}),Object.defineProperty(e,n,r),n in e&&!e.hasAttribute(a)&&r.set.call(e,t)}}let f=new Map,x=new Promise(e=>{"loading"!==document.readyState?e():document.addEventListener("readystatechange",()=>e(),{once:!0})}),C=new Promise(e=>{let t=new AbortController;t.signal.addEventListener("abort",()=>e());let a={once:!0,passive:!0,signal:t.signal},s=()=>t.abort();document.addEventListener("mousedown",s,a),document.addEventListener("touchstart",s,a),document.addEventListener("keydown",s,a),document.addEventListener("pointerdown",s,a)}),y={ready:()=>x,firstInteraction:()=>C,visible:e=>new Promise(t=>{let a=new IntersectionObserver(e=>{for(let s of e)if(s.isIntersecting){t(),a.disconnect();return}},{rootMargin:"0px 0px 256px 0px",threshold:.01});for(let t of document.querySelectorAll(e))a.observe(t)})},v=new WeakMap;function b(e){cancelAnimationFrame(v.get(e)||0),v.set(e,requestAnimationFrame(()=>{for(let t of f.keys()){let a=e instanceof Element&&e.matches(t)?e:e.querySelector(t);if(customElements.get(t)||a){let s=a?.getAttribute("data-load-on")||"ready",n=s in y?y[s]:y.ready;for(let e of f.get(t)||[])n(t).then(e);f.delete(t),v.delete(e)}}}))}function j(e,t){for(let[a,s]of("string"==typeof e&&t&&(e={[e]:t}),Object.entries(e)))f.has(a)||f.set(a,new Set),f.get(a).add(s);S(document)}function S(e){s||(s=new MutationObserver(e=>{if(f.size)for(let t of e)for(let e of t.addedNodes)e instanceof Element&&b(e)})),b(e),s.observe(e,{subtree:!0,childList:!0})}let E=Symbol.for("catalyst");let CatalystDelegate=class CatalystDelegate{constructor(e){let t=this,a=e.prototype.connectedCallback;e.prototype.connectedCallback=function(){t.connectedCallback(this,a)};let s=e.prototype.disconnectedCallback;e.prototype.disconnectedCallback=function(){t.disconnectedCallback(this,s)};let n=e.prototype.attributeChangedCallback;e.prototype.attributeChangedCallback=function(e,a,s){t.attributeChangedCallback(this,e,a,s,n)};let r=e.observedAttributes||[];Object.defineProperty(e,"observedAttributes",{configurable:!0,get(){return t.observedAttributes(this,r)},set(e){r=e}}),function(e){let t=e.observedAttributes||[],a=e.attrPrefix??"data-",s=e=>h(`${a}${e}`);Object.defineProperty(e,"observedAttributes",{configurable:!0,get:()=>[...N(e.prototype,p)].map(s).concat(t),set(e){t=e}})}(e),function(e){let t=m(e.name).replace(/-element$/,"");try{window.customElements.define(t,e),window[e.name]=customElements.get(t)}catch(e){if(!(e instanceof DOMException&&"NotSupportedError"===e.name))throw e}}(e)}observedAttributes(e,t){return t}connectedCallback(e,t){var a,s;for(let t of(e.toggleAttribute("data-catalyst",!0),customElements.upgrade(e),e.querySelectorAll("template[data-shadowroot]")))t.parentElement===e&&e.attachShadow({mode:"closed"===t.getAttribute("data-shadowroot")?"closed":"open"}).append(t.content.cloneNode(!0));(g(e),n.add(e),e.shadowRoot&&(o(s=e.shadowRoot),i(s)),o(e),i(e.ownerDocument),t?.call(e),e.shadowRoot)&&(o(a=e.shadowRoot),i(a),S(e.shadowRoot))}disconnectedCallback(e,t){t?.call(e)}attributeChangedCallback(e,t,a,s,n){g(e),"data-catalyst"!==t&&n&&n.call(e,t,a,s)}};function N(e,t){if(!Object.prototype.hasOwnProperty.call(e,E)){let t=e[E],a=e[E]=new Map;if(t)for(let[e,s]of t)a.set(e,new Set(s))}let a=e[E];return a.has(t)||a.set(t,new Set),a.get(t)}function I(e,t){N(e,"target").add(t),Object.defineProperty(e,t,{configurable:!0,get(){return d(this,t)}})}function w(e,t){N(e,"targets").add(t),Object.defineProperty(e,t,{configurable:!0,get(){let e=this.tagName.toLowerCase(),a=[];if(this.shadowRoot)for(let s of this.shadowRoot.querySelectorAll(`[data-targets~="${e}.${t}"]`))s.closest(e)||a.push(s);for(let s of this.querySelectorAll(`[data-targets~="${e}.${t}"]`))s.closest(e)===this&&a.push(s);return a}})}function F(e){new CatalystDelegate(e)}},44953:(e,t,a)=>{a.d(t,{_:()=>s});function s(e,t){if(void 0===e)throw TypeError("attempted to "+t+" private static field before its declaration")}},56487:(e,t,a)=>{a.d(t,{F:()=>l,t:()=>c});var s=a(74848),n=a(35247),r=a(53419),i=a(5524),o=a(60429);function l({eventName:e,menuLocation:t,mode:a,action:s,text:n}){let i=`${t.toUpperCase()}_${e.toUpperCase()}`;(0,r.BI)("dotcom_chat.activate",{target:i,text:n,category:t,action:s,mode:a})}function c({menuLocation:e,mode:t,onItemClick:a}){return Object.entries(o.A).map(([r,{name:o,url:c,icon:u}])=>(0,s.jsxs)(i.l.LinkItem,{href:c,onClick:()=>{a?.(),n.W.freeToPaidTelemetry&&l({eventName:r,menuLocation:e,mode:t,action:"menu_item_click",text:o})},children:[o,(0,s.jsx)(i.l.LeadingVisual,{children:(0,s.jsx)("img",{src:u,alt:"",height:"20",width:"20"})})]},r))}try{c.displayName||(c.displayName="EditorMenuItems")}catch{}},60429:(e,t,a)=>{a.d(t,{A:()=>i});let s=a.p+"jetbrains-e16495e63a33.png",n=a.p+"neovim-3301f23c4307.png",r=a.p+"vscode-380056900de8.png",i={vscode:{url:"https://marketplace.visualstudio.com/items?itemName=GitHub.copilot",icon:r,name:"Visual Studio Code",eventName:"VSCODE"},visualstudio:{url:"https://visualstudio.microsoft.com/github-copilot/",icon:a.p+"vsstudio-806c4b726938.png",name:"Visual Studio",eventName:"VS"},xcode:{url:"https://github.com/github/CopilotForXcode",icon:a.p+"xcode-a6c2735aa7ac.png",name:"Xcode",eventName:"XCODE"},jetbrains:{url:"https://plugins.jetbrains.com/plugin/17718-github-copilot",icon:s,name:"JetBrains",eventName:"JETBRAINS"},neovim:{url:"https://github.com/github/copilot.vim",icon:n,name:"Neovim",eventName:"NEOVIM"}}},61767:(e,t,a)=>{a.d(t,{FC:()=>l,I0:()=>i,dV:()=>o,h$:()=>u,jK:()=>c});let s=null,n=!1;function r(e){let t=function(){let e=document.querySelector("context-region");return e&&e.isConnected&&e.pushCrumb&&"function"==typeof e.pushCrumb?e:null}();if(t)return void e(t);s=e,function(){if(n)return;n=!0;let e=document.querySelector("context-region-controller");e&&e.addEventListener("context-region-connected",()=>{s&&(s(e.contextRegion),s=null)},{once:!0})}()}function i(e){r(t=>t.pushCrumb(e))}function o(){r(e=>e.popCrumb())}function l(e){r(t=>t.replaceCrumbs(e))}function c(e){r(t=>t.renameCurrentCrumb(e))}function u(e){r(t=>t.replaceCurrentCrumb(e))}},75735:(e,t,a)=>{a.d(t,{_:()=>i});var s=a(5570),n=a(37351),r=a(44953);function i(e,t,a,i){return(0,n._)(e,t),(0,r._)(a,"set"),(0,s._)(e,a,i),i}},81075:(e,t,a)=>{a.d(t,{_:()=>i});var s=a(50894),n=a(37351),r=a(44953);function i(e,t,a){return(0,n._)(e,t),(0,r._)(a,"get"),(0,s._)(e,a)}},87419:(e,t,a)=>{a.d(t,{Y:()=>u});var s=a(21728),n=a(96540),r=a(25641),i=a(79064),o=a(2635),l=a(33592),c=a(72303);function u(e){let t,a,u,d,m,h,p,_,D,g,f=(0,s.c)(26),x=(0,o.Pk)(),C=(0,l.b)(),{currentTopic:y,messages:v,selectedThreadID:b}=x;f[0]!==x?(t=(0,c.W)(x),f[0]=x,f[1]=t):t=f[1];let j=t,S=(0,n.useRef)(null),E=e||S;return f[2]!==C||f[3]!==v.length||f[4]!==j?(a=()=>{j&&v.length>0&&C.showTopicPicker(!1)},u=[j,v.length,C],f[2]=C,f[3]=v.length,f[4]=j,f[5]=a,f[6]=u):(a=f[5],u=f[6]),(0,n.useEffect)(a,u),f[7]!==y||f[8]!==b?(d=()=>{let e=y?(0,r.P)(y)?y.name:String(y.id):null;b&&e&&i.Jt.setSelectedTopic(b,e)},m=[b,y],f[7]=y,f[8]=b,f[9]=d,f[10]=m):(d=f[9],m=f[10]),(0,n.useEffect)(d,m),f[11]!==E?(h=()=>{let e=window.setTimeout(()=>{E.current?.focus()},1);return()=>{window.clearTimeout(e)}},p=[E],f[11]=E,f[12]=h,f[13]=p):(h=f[12],p=f[13]),(0,n.useEffect)(h,p),f[14]!==C||f[15]!==x.context?.[0]||f[16]!==x.currentRepository?(_=()=>{let e=x.context?.[0]??x.currentRepository;return e&&C.generateSuggestions(e),()=>{C.clearSuggestions()}},f[14]=C,f[15]=x.context?.[0],f[16]=x.currentRepository,f[17]=_):_=f[17],f[18]!==C||f[19]!==x.context||f[20]!==x.currentRepository||f[21]!==x.currentTopic||f[22]!==x.selectedThreadID?(D=[C,x.context,x.currentTopic,x.currentRepository,x.selectedThreadID],f[18]=C,f[19]=x.context,f[20]=x.currentRepository,f[21]=x.currentTopic,f[22]=x.selectedThreadID,f[23]=D):D=f[23],(0,n.useEffect)(_,D),f[24]!==E?(g={textAreaRef:E},f[24]=E,f[25]=g):g=f[25],g}},97315:(e,t,a)=>{a.d(t,{P:()=>c});var s=a(74848),n=a(21728),r=a(84078),i=a(96540),o=a(33592);let l={ambientErrorBanner:"AmbientErrorBanner-module__ambientErrorBanner--lajPC",largeBorderRadius:"AmbientErrorBanner-module__largeBorderRadius--NGjjE",mediumBorderRadius:"AmbientErrorBanner-module__mediumBorderRadius--aAp6Z"};function c(e){let t,a,c,d,m,h,p=(0,n.c)(14),{ambientError:_,useLargerBorderRadius:D}=e,g=(0,o.b)(),[f,x]=(0,i.useState)(0),C=void 0!==D&&D?l.largeBorderRadius:l.mediumBorderRadius,y=(0,i.useRef)(null);p[0]!==_.message?(t=()=>{if(_.message){x(u);let e=setTimeout(()=>{y.current&&y.current.focus()},250);return()=>clearTimeout(e)}},p[0]=_.message,p[1]=t):t=p[1],p[2]!==_?(a=[_],p[2]=_,p[3]=a):a=p[3],(0,i.useEffect)(t,a);let v=`${l.ambientErrorBanner} ${C}`;return p[4]===Symbol.for("react.memo_cache_sentinel")?(c={outline:"none"},p[4]=c):c=p[4],p[5]!==_.message?(d=(0,s.jsx)("div",{ref:y,tabIndex:-1,style:c,children:_.message}),p[5]=_.message,p[6]=d):d=p[6],p[7]!==g?(m=()=>{g.dismissAmbientError()},p[7]=g,p[8]=m):m=p[8],p[9]!==f||p[10]!==v||p[11]!==d||p[12]!==m?(h=(0,s.jsx)(r.l,{"aria-atomic":"true",className:v,description:d,variant:"critical",title:"Error during copilot chat has occurred.",hideTitle:!0,onDismiss:m},f),p[9]=f,p[10]=v,p[11]=d,p[12]=m,p[13]=h):h=p[13],h}function u(e){return e+1}try{c.displayName||(c.displayName="AmbientErrorBanner")}catch{}}},e=>{e.O(0,["primer-react","react-lib","react-core","octicons-react","vendors-node_modules_primer_behaviors_dist_esm_index_mjs","vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js","vendors-node_modules_stacktrace-parser_dist_stack-trace-parser_esm_js-node_modules_github_bro-2f4e04","vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-825c28","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_github_hydro-analytics-c-c228f9","vendors-node_modules_tanstack_query-core_build_modern_mutation_js-node_modules_tanstack_query-9bf7e4","vendors-node_modules_swc_helpers_esm__class_private_method_get_js-node_modules_swc_helpers_es-d6b1a6","vendors-node_modules_dompurify_dist_purify_es_mjs","vendors-node_modules_tanstack_query-core_build_modern_queryObserver_js-node_modules_tanstack_-defd52","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_lodash-es__Stack_js-node_modules_lodash-es__Uint8Array_js-node_modules_l-4faaa6","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_github_hotkey_dist_index_js-node_modules_date-fns_getDaysInMonth_mjs-nod-70c11b","vendors-node_modules_github_hydro-analytics-client_dist_analytics-client_js-node_modules_gith-c7919d","vendors-node_modules_dnd-kit_modifiers_dist_modifiers_esm_js-node_modules_dnd-kit_sortable_di-5ada6e","vendors-node_modules_lodash-es_cloneDeep_js","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-bb80ec","vendors-node_modules_tanstack_react-virtual_dist_esm_index_js","vendors-node_modules_tanstack_react-query_build_modern_useQuery_js-node_modules_diff_lib_index_mjs","vendors-node_modules_react-relay_index_js","vendors-node_modules_comma-separated-tokens_index_js-node_modules_mdast-util-from-markdown_li-6db53e","vendors-node_modules_hastscript_lib_index_js-node_modules_mdast-util-gfm_lib_index_js-node_mo-2895d2","vendors-node_modules_github_mini-throttle_dist_decorators_js-node_modules_accname_dist_access-ce77c7","vendors-node_modules_remark-parse_lib_index_js-node_modules_unified_lib_index_js","vendors-node_modules_lowlight_lib_all_js-node_modules_react-markdown_lib_index_js-node_module-5ac2ea","vendors-node_modules_codemirror_language_dist_index_js","vendors-node_modules_codemirror_commands_dist_index_js","vendors-node_modules_fzy_js_index_js-node_modules_github_g-emoji-element_dist_index_js-node_m-b54f2c","vendors-node_modules_primer_react-brand_lib_index_js","vendors-node_modules_gsap_index_js","vendors-node_modules_codemirror_language-data_dist_index_js","vendors-node_modules_codemirror_autocomplete_dist_index_js-node_modules_codemirror_search_dis-aafe81","vendors-node_modules_js-yaml_dist_js-yaml_mjs","vendors-node_modules_github_quote-selection_dist_index_js-node_modules_pluralize_pluralize_js-f5867b","vendors-node_modules_tanstack_react-query_build_modern_queryOptions_js-node_modules_marked_li-65af4e","vendors-node_modules_motion_dist_es_framer-motion_dist_es_components_AnimatePresence_index_mj-61d1c2","vendors-node_modules_lodash_merge_index_js-node_modules_lodash_mergewith_index_js-node_module-9c5f50","vendors-node_modules_emoji-regex_index_js-node_modules_codemirror_merge_dist_index_js-node_mo-c44105","packages_paths_index_ts","packages_ui-commands_ui-commands_ts","packages_date-picker_components_DatePicker_tsx","packages_drag-and-drop_drag-and-drop_ts-packages_hydro-analytics_hydro-analytics_ts","packages_list-view_src_hooks_use-next-header-tag_ts-packages_list-view_src_ListItem_ListItem_-055669","packages_filter_utils_index_ts-packages_fuzzy-score_fuzzy-score_ts-packages_use-analytics_use-efa20b","packages_ref-selector_RefSelector_tsx","packages_copilot-chat_utils_copilot-local-storage_ts","packages_copilot-chat_components_tracing_TraceProvider_tsx","packages_copilot-chat_utils_CopilotChatContext_tsx-packages_safe-html_VerifiedHTML_tsx","packages_relay-environment_relay-environment_ts","packages_item-picker_components_RepositoryPicker_tsx","packages_copilot-chat_utils_language-info_ts-packages_copy-to-clipboard_CopyToClipboardButton_tsx","packages_history_history_ts-packages_soft-nav_state_ts-packages_agent-sessions_components_new-9fc8d0","packages_copilot-markdown_MarkdownRenderer_tsx","packages_comment-box_api_file-upload_ts-packages_comment-box_api_preview_ts-packages_markdown-c95d34","packages_code-view-shared_hooks_use-repos-analytics_ts-packages_code-view-shared_hooks_use-tr-fbe81a","packages_copilot-chat_components_ModelPicker_tsx-packages_copilot-byok_providers_assets_anthr-76f86b","packages_document-metadata_document-metadata_ts-packages_promise-with-resolvers-polyfill_prom-51a480","packages_agent-sessions_hooks_use-sso-change-detection_ts-packages_agent-sessions_utils_gener-7b2f56","packages_signed-commit-badge_index_ts","packages_commenting_hooks_use-markdown-body_ts-packages_commenting_utils_blocked-commenting-r-21549c","packages_diff-file-header_diff-file-header_ts-packages_diff-file-tree_diff-file-tree-helpers_-b49245","packages_code-mirror_CodeMirror_tsx","packages_diff-lines_diff-lines_ts","packages_copilot-chat_components_CopilotIconAnimation_tsx","packages_nested-list-view_src_NestedListItem_LeadingContent_tsx-packages_nested-list-view_src-1f776c","packages_markdown-viewer_NewMarkdownViewer_tsx","packages_commits_shared_use-update-user-tree-preference_ts-packages_use-hide-footer_use-hide--80c91a","packages_copilot-chat_hooks_use-active-plugin_ts-packages_copilot-chat_components_ChatMessage-aba353","packages_issue-viewer_components_IssueViewer_tsx-packages_issue-viewer_contexts_IssueViewerCo-f66842","packages_copilot-chat_hooks_use-chat-message-behavior_ts-packages_copilot-chat_hooks_use-grou-d552cd","packages_dashboard-lists_components_AgentsList_tsx","packages_product-announcement_components_ProductAnnouncement_ProductAnnouncement_tsx-packages-3b3181","packages_agent-sessions_components_AgentsIcon_tsx-packages_agent-sessions_components_PremiumR-93ba44","packages_code-mirror_autocomplete_theme_ts-packages_code-mirror_extensions_help-panels_ts-pac-5c4426","packages_app-uuid_app-uuid_ts-packages_copilot-chat_components_tracing_TraceDisplay_tsx"],()=>e(e.s=11891)),e.O()}]);
//# sourceMappingURL=copilot-immersive-v1-e4b7673dc61d.js.map