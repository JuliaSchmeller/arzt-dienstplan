"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["packages_code-mirror_autocomplete_theme_ts-packages_code-mirror_extensions_help-panels_ts-pac-5c4426","packages_global-sso-banner_GlobalSsoBanner_tsx"],{295:(e,t,n)=>{n.d(t,{h:()=>c});var i=n(21728),a=n(97665),s=n(94747),r=n(99519),o=n(80770),l=n(99993);function c(){let e,t,n,c=(0,i.c)(7),d=(0,a.jE)(),u=(0,r.EY)();return c[0]!==u?(e=async e=>await u.deleteLoop(e),c[0]=u,c[1]=e):e=c[1],c[2]!==d?(t=(e,t)=>{e.success&&(d.removeQueries({queryKey:[l.M1,t]}),d.invalidateQueries({queryKey:[o.n]}))},c[2]=d,c[3]=t):t=c[3],c[4]!==e||c[5]!==t?(n={mutationFn:e,onSuccess:t},c[4]=e,c[5]=t,c[6]=n):n=c[6],(0,s.n)(n)}},894:(e,t,n)=>{n.d(t,{L:()=>s,M:()=>a});var i=n(96540);let a=(0,i.createContext)(null);function s(){let e=(0,i.useContext)(a);if(!e)throw Error("useLayoutContext must be used within a Layout component");return e}},1747:(e,t,n)=>{n.d(t,{BH:()=>A,xx:()=>B,tZ:()=>F,wI:()=>M});var i=n(74848),a=n(21728),s=n(2635),r=n(35247),o=n(42312),l=n(33535),c=n(6551),d=n(40104),u=n(96540),m=n(93380),p=n(79064),h=n(7812),f=n(41649),g=n(33592),y=n(25641),v=n(82075),x=n(46996);let b=["thread-scoped-file","draft-issue","draft-update-issue"],_=e=>!!e.isUserEdited,j=(e,t)=>e.size===t.size&&Array.from(e).every(([e,n])=>(0,x.A)(t.get(e),n)),w=(e,t)=>!j(new Map(e.filter(e=>b.includes(e.type)).map(e=>[(0,y.Vb)(e),e])),new Map(t.filter(e=>b.includes(e.type)).map(e=>[(0,y.Vb)(e),e]))),N=(e,t)=>!j(new Map(Array.from(e).filter(([,e])=>_(e))),new Map(Array.from(t).filter(([,e])=>_(e))));function C(e){return[e.id,e]}function k(e){return null!=e}function S(e){return[(0,y.Vb)(e),e]}function I(e){return null!=e}function T(e){return(0,h.PO)(e)}let E=(0,u.createContext)(void 0),L=new Map,R=[];function A(e){let t,n,d,x,j,A,B,F,M,$,V,U,q,W,H,G,K,z=(0,a.c)(55),{children:Q}=e,Y=(0,l.AI)(!1),J=(0,l.AI)(!1),X=(0,o.U)(),Z=(0,u.useRef)(null),[ee,et]=(0,u.useState)(L),[en,ei]=(0,u.useState)(R),[ea,es]=(0,u.useState)(R),[er,eo]=(0,u.useState)(void 0),[el,ec,ed]=(0,m.B)(!1),eu=(0,c.S)((0,s.pn)(P)),em=(0,s.pn)(D);z[0]!==Y||z[1]!==eu||z[2]!==em?(t=()=>{eu&&eu!==em&&(et(L),ei(R),eo(void 0),null===em&&Y.setValue(!1))},n=[em,eu,Y],z[0]=Y,z[1]=eu,z[2]=em,z[3]=t,z[4]=n):(t=z[3],n=z[4]),(0,u.useEffect)(t,n),z[5]===Symbol.for("react.memo_cache_sentinel")?(d=(e,t)=>{let n=void 0===t||t;ei(t=>{if(t.includes(e))return t;let n=(0,h.oy)(e),i=t.findIndex(e=>(0,h.oy)(e)===n),a=[...t];return -1===i?a.push(e):a.splice(i,1,e),a}),eo(t=>n||void 0===t||(0,h.oy)(t)===(0,h.oy)(e)?e:t)},z[5]=d):d=z[5];let ep=d;z[6]===Symbol.for("react.memo_cache_sentinel")?(x=e=>{et(t=>{let n=new Map(t);return n.set(e.id,e),n})},z[6]=x):x=z[6];let eh=x;z[7]!==en||z[8]!==er?(j=e=>{let t=en.indexOf(e);if(-1===t)return;let n=en.toSpliced(t,1);er===e&&eo(n[t-1]??n[0]),ei(n)},z[7]=en,z[8]=er,z[9]=j):j=z[9];let ef=(0,f.K)(j);z[10]!==en||z[11]!==er?(A=e=>{if(e){let t=en;for(let n of e){let e=t.indexOf(n);-1!==e&&(t=t.toSpliced(e,1),er===n&&eo(t[e-1]??t[0]))}ei(t)}else ei(R),eo(void 0)},z[10]=en,z[11]=er,z[12]=A):A=z[12];let eg=(0,f.K)(A);if(z[13]!==ee){for(let[e,t]of(B=new Map,ee)){let n=(0,h.oy)(e),i=B.get(n)??[];i.push(t.id),B.set(n,i)}for(let e of B.values())e.sort((e,t)=>{let n=ee.get(e),i=ee.get(t);return"timestamp"in n&&"timestamp"in i?n.timestamp.valueOf()-i.timestamp.valueOf():0});z[13]=ee,z[14]=B}else B=z[14];let ey=B;z[15]!==ef||z[16]!==en||z[17]!==ey?(F=e=>{if(e){for(let t of e)if(et(e=>{let n=new Map(e);return n.delete(t)?n:e}),en.includes(t)){let e=(0,h.oy)(t),n=ey.get(e),i=n?.indexOf(t)??-1,a=n?.[i-1];a?ep(a,!1):ef(t)}}else et(L),ei(R),eo(void 0)},z[15]=ef,z[16]=en,z[17]=ey,z[18]=F):F=z[18];let ev=(0,f.K)(F);z[19]!==Y.value||z[20]!==en?(M=()=>Y.value?en:R,z[19]=Y.value,z[20]=en,z[21]=M):M=z[21];let ex=(0,f.K)(M);z[22]!==X||z[23]!==Y?($=e=>{Y.setValue(!0),queueMicrotask(()=>{X.current?.focus()}),void 0!==e&&(Z.current=e)},z[22]=X,z[23]=Y,z[24]=$):$=z[24];let eb=$;z[25]!==Y||z[26]!==J?(V=()=>{Y.setValue(!1),J.setValue(!1)},z[25]=Y,z[26]=J,z[27]=V):V=z[27];let e_=V;z[28]!==J?(U=()=>J.setValue(!0),z[28]=J,z[29]=U):U=z[29];let ej=U;z[30]!==J?(q=()=>J.setValue(!1),z[30]=J,z[31]=q):q=z[31];let ew=q;z[32]!==ef||z[33]!==eg||z[34]!==e_||z[35]!==ew||z[36]!==X||z[37]!==ed||z[38]!==ec||z[39]!==ex||z[40]!==Y||z[41]!==J||z[42]!==ee||z[43]!==en||z[44]!==ea||z[45]!==eb||z[46]!==ej||z[47]!==ev||z[48]!==er||z[49]!==el||z[50]!==ey?(W={items:ee,versionedItems:ey,contentPreviewRef:X,isContentPreviewOpen:Y,isResourcePanelOpen:J,getOpenItems:ex,allOpenItems:en,openItemsBeforeSubthreadChange:ea,selectedItem:er,updateItem:eh,setOpenItemsBeforeSubthreadChange:es,openItem:ep,closeItem:ef,closeItems:eg,openPreviewPane:eb,closePreviewPane:e_,openResourcePanel:ej,closeResourcePanel:ew,removeItems:ev,showLoadingState:el,enableLoadingState:ec,disableLoadingState:ed,returnFocusElementRef:Z},z[32]=ef,z[33]=eg,z[34]=e_,z[35]=ew,z[36]=X,z[37]=ed,z[38]=ec,z[39]=ex,z[40]=Y,z[41]=J,z[42]=ee,z[43]=en,z[44]=ea,z[45]=eb,z[46]=ej,z[47]=ev,z[48]=er,z[49]=el,z[50]=ey,z[51]=W):W=z[51];let eN=W,eC=(0,a.c)(5),{updateItem:ek,openItem:eS,openPreviewPane:eI}=eN;return eC[0]!==eS||eC[1]!==eI||eC[2]!==ek?(G=()=>{if(!r.W.copilotRedirectDiffViewToImmersive)return;let e=p.Jt.getCopilotDiffReferences();if(e&&0!==e.length){for(let t of e){let e=(0,h.g)(t);ek(e),eS(e.id)}eI(),p.Jt.removeCopilotDiffReferences()}},K=[ek,eS,eI],eC[0]=eS,eC[1]=eI,eC[2]=ek,eC[3]=G,eC[4]=K):(G=eC[3],K=eC[4]),(0,u.useEffect)(G,K),O(eN),!function(e){let t,n,i,o=(0,a.c)(10),{items:l,removeItems:c,updateItem:d}=e,{currentReferences:m,messages:p,selectedThreadID:f}=(0,s.Pk)(),x=(0,g.b)(),j=(0,u.useRef)(l),E=(0,u.useRef)(m);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,v.A)("sessionStorage"),o[0]=t):t=o[0];let L=t;o[1]!==m||o[2]!==l||o[3]!==x||o[4]!==p.length||o[5]!==c||o[6]!==f||o[7]!==d?(n=()=>{let e=N(j.current,l);j.current=l;let t=w(E.current,m);if(E.current=m,e){let e=new Map(Array.from(l.values()).filter(_).map(T).filter(I).map(S)),t=new Set;for(let n of m)if(b.includes(n.type)){let i=(0,y.Vb)(n);t.add(i);let a=e.get(i);a?w([a],[n])&&x.addReference(a,"content-preview"):x.removeReference(n)}for(let[n,i]of e)t.has(n)||x.addReference(i,"content-preview")}else if(t){let e=new Map(m.map(e=>(0,h.oR)({ref:e,messageIndex:p.length})).filter(k).map(C)),t=new Set;for(let[n,i]of l)if(_(i)){t.add(n);let a=e.get(n);null!=a?N(new Map([[a.id,a]]),new Map([[i.id,i]]))&&d(a):(c([n]),r.W.copilotPersistEditedDraftIssues&&L.removeItem(`edited-${f}-${n}`))}for(let[n,i]of e)t.has(n)||d(i)}},i=[l,x,m,p.length,c,d,L,f],o[1]=m,o[2]=l,o[3]=x,o[4]=p.length,o[5]=c,o[6]=f,o[7]=d,o[8]=n,o[9]=i):(n=o[8],i=o[9]),(0,u.useEffect)(n,i)}(eN),z[52]!==Q||z[53]!==eN?(H=(0,i.jsx)(E.Provider,{value:eN,children:Q}),z[52]=Q,z[53]=eN,z[54]=H):H=z[54],H}function D(e){return e.selectedThreadID}function P(e){return e.selectedThreadID}let O=e=>{let t,n,i,o=(0,a.c)(8),{updateItem:l}=e,{messagesLoading:c,selectedThreadID:m}=(0,s.Pk)(),p=`edited-${m}`;if(r.W.copilotPersistEditedDraftIssues){let e;o[0]!==p?(e=(0,d.MV)(p),o[0]=p,o[1]=e):e=o[1],t=e}else{let e;o[2]===Symbol.for("react.memo_cache_sentinel")?(e=[],o[2]=e):e=o[2],t=e}let h=t;o[3]!==h||o[4]!==c.state||o[5]!==l?(n=()=>{if(h&&"loaded"===c.state)for(let e of h)l(e)},i=[h,l,c.state],o[3]=h,o[4]=c.state,o[5]=l,o[6]=n,o[7]=i):(n=o[6],i=o[7]),(0,u.useEffect)(n,i)};function B(){let e=(0,u.useContext)(E);if(!e)throw Error("useContentPreview must be used within ContentPreviewContextProvider");return e}function F(){let e=(0,u.useContext)(E);if(!e)throw Error("useContentPreviewOpen must be used within ContentPreviewContextProvider");return(0,l.HN)(e.isContentPreviewOpen)}function M(){let e=(0,u.useContext)(E);if(!e)throw Error("useResourcePanelOpen must be used within ContentPreviewContextProvider");return(0,l.HN)(e.isResourcePanelOpen)}try{E.displayName||(E.displayName="ContentPreviewContext")}catch{}try{A.displayName||(A.displayName="ContentPreviewProvider")}catch{}},2022:(e,t,n)=>{n.d(t,{E:()=>l,d:()=>c});var i=n(65510),a=n(20622),s=n(53885),r=n(96379),o=n(50129);function l(){let{basePageDataUrl:e}=(0,o.Yu)();return[a.u.commits,`basePageDataURL:${e}`]}function c(e){let t=(0,s.e)(a.u.commits),n=l();return(0,i.U)({queryKey:n,queryFn:async()=>{let e=await (0,r.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},initialData:e,staleTime:1/0})}},2691:(e,t,n)=>{n.d(t,{I:()=>d});var i=n(74848),a=n(21728),s=n(73017),r=n(94236),o=n(5524),l=n(96540),c=n(15440);function d(e){let t,n,d,u,m,p,h=(0,a.c)(21),{group:f,onEntrySelect:g}=e,[y,v]=(0,l.useState)(!1),x=(0,l.useRef)(null);h[0]!==y?(t=()=>{v(!y)},h[0]=y,h[1]=t):t=h[1];let b=t;if(h[2]!==f.color||h[3]!==f.icon||h[4]!==f.id||h[5]!==f.name||h[6]!==b||h[7]!==y?(n=(0,i.jsx)(r.W.Anchor,{children:(0,i.jsx)(c.Z,{ref:x,testId:f.id,name:f.name,icon:f.icon,color:f.color,onClick:b,dropdown:!0,open:y})}),h[2]=f.color,h[3]=f.icon,h[4]=f.id,h[5]=f.name,h[6]=b,h[7]=y,h[8]=n):n=h[8],h[9]===Symbol.for("react.memo_cache_sentinel")?(d={width:"260px"},h[9]=d):d=h[9],h[10]!==f.entries||h[11]!==g){let e;h[13]!==g?(e=e=>(0,i.jsx)(o.l.Item,{onSelect:()=>g(e),children:(0,i.jsx)(s.$6,{html:e.titleHtml})},e.id),h[13]=g,h[14]=e):e=h[14],u=f.entries.map(e),h[10]=f.entries,h[11]=g,h[12]=u}else u=h[12];return h[15]!==u?(m=(0,i.jsx)(r.W.Overlay,{style:d,children:(0,i.jsx)(o.l,{children:u})}),h[15]=u,h[16]=m):m=h[16],h[17]!==y||h[18]!==n||h[19]!==m?(p=(0,i.jsx)("li",{children:(0,i.jsxs)(r.W,{open:y,onOpenChange:v,children:[n,m]})}),h[17]=y,h[18]=n,h[19]=m,h[20]=p):p=h[20],p}try{d.displayName||(d.displayName="StarterGroupWithMenu")}catch{}},2702:(e,t,n)=>{n.d(t,{X:()=>m});var i=n(74848),a=n(21728),s=n(72206),r=n(53419),o=n(88934),l=n(50393),c=n(2691),d=n(15440);let u={starters:"Starters-module__starters--L2GQo"};function m(e){let t,n,m,p,h=(0,a.c)(10),{handleStarterEntrySelect:f,taskStarterEnabled:g,style:y,startersLocationId:v}=e,x=void 0===y?u.starters:y,b=(0,s.tD)()(),_=void 0!==g&&g&&b.hasCEorCBAccess&&!b.agentsEnabled,j=(0,o.Zp)();h[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("h2",{className:"sr-only",children:"Sample prompts to try"}),h[0]=t):t=h[0];let w=_&&(0,i.jsx)("li",{children:(0,i.jsx)(d.Z,{testId:"task",name:"Task",icon:"agent",color:"var(--display-gray-fgColor)",onClick:()=>{(0,r.BI)("dotcom_chat.activate",{target:`${v.toUpperCase()}_STARTER_MENU_ITEM`,topic:b.currentTopic?.name,mode:"immersive",starterId:"task-starter"}),j("/copilot/agents")}},"task-starter")});h[1]!==f?(n=e=>(0,i.jsx)(c.I,{group:e,onEntrySelect:f},e.id),h[1]=f,h[2]=n):n=h[2];let N=(0,l.M)(_).map(n);return h[3]!==x||h[4]!==w||h[5]!==N?(m=(0,i.jsxs)("ul",{className:x,children:[w,N]}),h[3]=x,h[4]=w,h[5]=N,h[6]=m):m=h[6],h[7]!==t||h[8]!==m?(p=(0,i.jsxs)(i.Fragment,{children:[t,m]}),h[7]=t,h[8]=m,h[9]=p):p=h[9],p}try{m.displayName||(m.displayName="Starters")}catch{}},3482:(e,t,n)=>{n.d(t,{G:()=>a});var i=n(24774);function a(e=null,t="bottom"){return[i.S7.of(()=>({dom:e,top:"top"===t}))]}},5533:(e,t,n)=>{function i(e){return!!e?.startedAt&&!e?.completedAt}function a(e){return!!e&&Object.values(e.nodes).some(i)}n.d(t,{f:()=>i,y:()=>a})},6551:(e,t,n)=>{n.d(t,{S:()=>a});var i=n(96540);function a(e){let t=(0,i.useRef)(void 0);return(0,i.useEffect)(()=>{t.current=e},[e]),t.current}},7026:(e,t,n)=>{n.d(t,{M:()=>a});var i=n(96540);function a(e,t,n){let a=(0,i.useRef)(n);return(0,i.useMemo)(()=>{let n=t(e);return null!=n&&(a.current=n),a.current},[e,t])}},7812:(e,t,n)=>{n.d(t,{Bx:()=>f,LU:()=>l,PO:()=>y,SI:()=>p,SX:()=>x,by:()=>u,g:()=>m,oR:()=>v,oy:()=>o,wN:()=>h,wt:()=>d,yA:()=>g});var i=n(1631),a=n(25641),s=n(51213),r=n(35247);function o(e){return e.split("#")[0]}function l(e,t){let n=o(e),i=t.get(n)??[],a=i.indexOf(e);return i.length>1&&-1!==a?a+1:null}function c(e,t){return`file:${e.name}#${t}`}function d(e,t,n){switch(e.type){case"thread-scoped-file":return l(c(e,t),n)??void 0;case"draft-issue":case"draft-update-issue":return l(v({ref:e,messageIndex:t}).id,n)??void 0}}function u(e,t,n){return{type:"file",id:`file:${(0,a.Vb)(e)}#0`,reference:e,messageId:t??s.Wp,name:e.path,language:e.languageName??"",value:"",isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date}}function m(e,t,n){let i=e=>({type:"file",id:`file:empty:${e}#${Date.now()}`,messageId:t??s.Wp,name:e,language:"",value:"",isStreaming:!1,isUserEdited:!1,timestamp:n?new Date(n):new Date}),r=e.baseFile?u(e.baseFile):i(e.headFile?.path||""),o=e.headFile?u(e.headFile):i(e.baseFile?.path||""),l=e.headFile||e.baseFile,c=l?.path||"";return{type:"file-diff",id:`file-diff:${(0,a.Vb)(e)}#0`,baseFile:r,headFile:o,name:c,language:(e.headFile?o:r).language,isStreaming:!0,isUserEdited:!1,timestamp:n?new Date(n):new Date,messageId:t??s.Wp,reference:e}}function p(e,t){return{type:"issue",id:`issue:${e.number}`,messageId:t??s.Wp,name:e.title??"",number:e.number,owner:e.repository.owner,repo:e.repository.name,href:e.url}}function h(e,t){let{repoOwner:n,repoName:i,id:a}=e;return{type:"job-result",id:`job-result:${n}-${i}-${a}`,messageId:t??s.Wp,name:`Job #${a} in ${n}/${i}`,jobId:Number(a),workflowId:e.workflow?.id,repoOwner:n,repoName:i}}function f(e,t=s.Wp){return{type:"plugin-content",id:`plugin-content:${e.type}:${(0,a.Vb)(e)}`,name:(0,a.z$)(e),icon:(0,i.a_)(e,!1),messageId:t,reference:e}}function g(e){return{type:e.type,tag:e.tag,parentTag:e.parentTag,repository:e.repository,number:e.number,title:e.name,state:e.state,url:e.href,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}}function y(e){var t;switch(e.type){case"file":return{type:"thread-scoped-file",name:e.name,language:e.language,text:e.value};case"new-issue":case"update-issue":return{type:"update-issue"===e.type?"draft-update-issue":"draft-issue",tag:e.tag,parentTag:e.parentTag,title:e.name,description:e.body,bodyVersion:e.bodyVersion,repository:e.repository,template:e.template,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:(t=e.projects)&&0!==t.length?t.filter(e=>!!e.title).map(e=>e.title):[],rawProjectsInput:e.rawProjectsInput,milestone:e.milestone,templateFormValuesById:e.defaultValuesById,issueNumber:e.issueNumber,blockedByTags:e.blockedByTags,isBlockingTags:e.isBlockingTags};default:return null}}function v({ref:e,messageIndex:t,messageId:n,timestamp:i}){switch(e.type){case"thread-scoped-file":return function(e,t,n=s.Wp,i){return{type:"file",id:c(e,t),reference:e,messageId:n,name:e.name,language:e.language,value:e.text,timestamp:i?new Date(i):new Date,isStreaming:!1,isUserEdited:n===s.Wp}}(e,t,n,i);case"draft-issue":case"draft-update-issue":return function({ref:e,messageId:t=s.Wp,messageIndex:n}){var i;let a=e.issueNumber&&r.W.draftUpdateIssue?"update-issue":"new-issue";return{type:a,id:`${a}:${e.tag}#${n}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,name:e.title,body:e.description,bodyVersion:e.bodyVersion,assignees:e.assignees,labels:e.labels,issueType:e.issueType,projects:(i=e.projects)&&0!==i.length?i.filter(e=>""!==e.trim()).map(e=>({title:e})):[],rawProjectsInput:e.rawProjectsInput,milestone:e.milestone,isUserEdited:t===s.Wp,messageId:t,isStreaming:!1,template:e.template,defaultValuesById:e.templateFormValuesById??{},issueNumber:e.issueNumber,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}}({ref:e,messageIndex:t,messageId:n});default:return null}}function x(e,t,n){let i=o(e.id),a=n.get(i),s=a?.findIndex(t=>t===e.id)??-1,r=a?.[s-1];return r&&t.get(r)}},7922:(e,t,n)=>{n.d(t,{b:()=>n9});var i,a,s,r,o,l=n(74848),c=n(70719),d=n(79472),u=n(18799),m=n(71315),p=n(83494),h=n(70843),f=n(15220),g=n(87555),y=n(34164),v=n(96540),x=n(70170),b=n(56051),_=n(5524),j=n(96459),w=n(53627),N=n(82603);function C({basePath:e,fileFilterMenuOptions:t,fileFilterState:n,filterSize:i,viewerLogin:a,setFileFilterState:s}){let[r]=(0,j.o)(),{data:o}=(0,N.dG)({basePath:e}),{filterText:c,fileExtensions:d,unselectedFileExtensions:u,showOnlyOwnedFiles:m,showDeletedFiles:p,showOnlyManifestFiles:h,showVendoredFiles:f,showViewedFiles:g}={...n},{canSeeDeletedFilesFilter:y,canSeeOnlyManifestFilesFilter:C,canSeeVendorFilesFilter:k}=t,{canSeeCodeownersFilter:S}=t,I=0;o&&(S=o.isViewerOneOfMultipleCodeowners,I=Object.values(o.ownershipByPath).filter(e=>e.isOwnedByViewer).length);let T=(0,v.useRef)((0,x.s)(e=>E({filterText:e}),250)),E=(0,v.useCallback)((e,t)=>{t&&(0,w.MM)(t),s({...e})},[s]);return(0,l.jsx)(b.kF,{filterSize:i,filterText:c,fileExtensions:d,unselectedFileExtensions:u,onFilterTextChange:e=>T.current(e),onFilterChange:(e,t)=>{let n=u;"selectFileExtension"===e?n=new Set([...u].filter(e=>e!==t.extension)):"unselectFileExtension"===e&&(n=new Set([...u,t.extension]));let i=Object.keys(d).filter(e=>!n.has(e)),a=new URLSearchParams(r);a.delete("file-filters[]"),i.map(e=>{a.append("file-filters[]",e)}),E({unselectedFileExtensions:n},a)},additionalFilterGroups:(0,l.jsxs)(l.Fragment,{children:[S&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(_.l.Divider,{}),(0,l.jsx)(_.l.Group,{selectionVariant:"single",children:(0,l.jsx)(_.l.Item,{selected:m,onSelect:()=>{if(!a)return;let e=new URLSearchParams(r);m?e.delete("owned-by[]",a):e.set("owned-by[]",a),E({showOnlyOwnedFiles:!m},e)},children:`Only files owned by you (${I})`})})]}),(0,l.jsx)(_.l.Divider,{}),(0,l.jsxs)(_.l.Group,{"aria-label":"More",selectionVariant:"multiple",children:[C&&(0,l.jsx)(_.l.Item,{selected:h,onSelect:()=>{let e=new URLSearchParams(r);e.set("manifests",`${!h}`),E({showOnlyManifestFiles:!h},e)},children:"Only manifest files"}),y&&(0,l.jsx)(_.l.Item,{selected:p,onSelect:()=>{let e=new URLSearchParams(r);e.set("show-deleted-files",`${!p}`),E({showDeletedFiles:!p},e)},children:"Deleted files"}),k&&(0,l.jsx)(_.l.Item,{selected:f,onSelect:()=>{let e=new URLSearchParams(r);e.set("show-vendored-files",`${!f}`),E({showVendoredFiles:!f},e)},children:"Vendored files"}),(0,l.jsx)(_.l.Item,{selected:g,onSelect:()=>{let e=new URLSearchParams(r);e.set("show-viewed-files",`${!g}`),E({showViewedFiles:!g},e)},children:"Viewed files"})]})]})})}try{C.displayName||(C.displayName="FileFilter")}catch{}var k=n(1946),S=n(69599),I=n(75202),T=n(49920),E=n(81960),L=n(69726),R=n(57352),A=n(11196);let D={GroupsListContainer:"GroupsList-module__GroupsListContainer--x6dMy",GroupsListHeadingShiftLeft:"GroupsList-module__GroupsListHeadingShiftLeft--MYsIU",GroupsListItemsShiftLeft:"GroupsList-module__GroupsListItemsShiftLeft--PGMNM",GroupItem:"GroupsList-module__GroupItem--vAFCe",GroupsListScrollable:"GroupsList-module__GroupsListScrollable--xsio1"};var P=n(34535),O=n(30459);function B(){let{sendAnalyticsEvent:e}=(0,O.s)();return{sendPullRequestAnalyticsEvent:(0,v.useCallback)((t,n,i={})=>{e(t,n,i)},[e])}}var F=n(38621),M=n(26108),$=n(64451),V=n(86877),U=n(46720),q=n(4175),W=n(21373);let H=[{label:"Groups contain changes that do not belong together",value:"NOT_RELEVANT"},{label:"Groups are harmful or unsafe",value:"OFFENSIVE_OR_DISCRIMINATORY"},{label:"Groups are poorly formatted",value:"POORLY_FORMATTED"},{label:"Groups are not helpful",value:"NOT_HELPFUL"},{label:"Groups miss changes that should be included",value:"MISSED_CONTENT"},{label:"Other",value:"OTHER"}];function G({onClose:e,onSubmit:t,returnFocusRef:n,feedbackOptions:i=H,precheckOther:a=!1}){let[s,r]=(0,v.useState)(!1),[o,c]=(0,v.useState)(a?["OTHER"]:[]),[d,u]=(0,v.useState)(""),m=e=>{e.preventDefault(),r(!0),o.length&&t({type:"NEGATIVE",feedbackChoice:o,textResponse:d})};return(0,l.jsx)(f.l,{onClose:e,title:"Provide additional feedback",subtitle:"Please help us improve Groups by Copilot by sharing more details about these generated groups.",returnFocusRef:n,renderBody:()=>(0,l.jsxs)("form",{onSubmit:m,children:[(0,l.jsxs)(f.l.Body,{children:[(0,l.jsx)("div",{className:"mb-3",children:(0,l.jsxs)($.A,{onChange:c,required:!0,children:[(0,l.jsx)($.A.Label,{children:"Category"}),i.map(e=>(0,l.jsxs)(V.A,{id:`feedback_choice_${e.value}`,children:[(0,l.jsx)(U.A,{value:e.value,checked:o.includes(e.value)}),(0,l.jsx)(V.A.Label,{children:e.label})]},e.value)),s&&!o.length&&(0,l.jsx)($.A.Validation,{variant:"error",children:"Please select a feedback category"})]})}),(0,l.jsxs)(V.A,{id:"text_response",children:[(0,l.jsx)(V.A.Label,{children:"How should we improve this response?"}),(0,l.jsx)(q.Ay,{block:!0,rows:2,wrap:"wrap",name:"text_response",value:d,resize:"vertical",onChange:e=>u(e.currentTarget.value)})]})]}),(0,l.jsx)(f.l.Footer,{children:(0,l.jsx)(W.Q,{type:"submit",disabled:s&&(!d||!o),children:"Submit"})})]})})}try{G.displayName||(G.displayName="NegativeFeedbackForm")}catch{}function K({disabled:e,onClick:t}){return(0,l.jsx)(M.K,{size:"small",variant:"invisible",disabled:e,icon:F.ThumbsupIcon,"aria-label":"Positive feedback",onClick:()=>t({type:"POSITIVE"})})}function z({disabled:e,onClick:t,feedbackOptions:n}){let[i,a]=(0,v.useState)(!1),s=(0,v.useRef)(null);return(0,l.jsxs)(l.Fragment,{children:[i&&(0,l.jsx)(G,{onClose:()=>a(!1),onSubmit:e=>{t(e),a(!1)},returnFocusRef:s,feedbackOptions:n}),(0,l.jsx)(M.K,{ref:s,size:"small",variant:"invisible",disabled:e,icon:F.ThumbsdownIcon,"aria-label":"Negative feedback",onClick:()=>a(!0)})]})}try{K.displayName||(K.displayName="PositiveFeedbackButton")}catch{}try{z.displayName||(z.displayName="NegativeFeedbackButton")}catch{}var Q=n(20622),Y=n(53885),J=n(94747),X=n(48845);function Z(){let e=(0,Y.e)(Q.u.submitCopilotGroupsFeedback);return(0,J.n)({mutationFn:async({type:t,feedbackChoice:n,textResponse:i})=>{let a={feedback:t};i&&(a.text_response=i),n&&n.length>0&&(a.feedback_choice=n);let s=await (0,X.q$)(e,{method:"POST",headers:{Accept:"application/json"},body:a}),r=await (0,X.hp)(s);return(0,X.R)(s,r),r}})}let ee=({feedbackOptions:e})=>{let[t,n]=(0,v.useState)(),{mutate:i}=Z(),a=e=>{n(e.type),i(e)};return(0,l.jsxs)("div",{className:"d-flex",children:["NEGATIVE"!==t&&(0,l.jsx)(K,{disabled:!!t,onClick:a,feedbackOptions:e}),"POSITIVE"!==t&&(0,l.jsx)(z,{disabled:!!t,onClick:a,feedbackOptions:e})]})},et=()=>(0,l.jsx)(I.t,{fallback:null,children:(0,l.jsx)(ee,{})});try{ee.displayName||(ee.displayName="Feedback")}catch{}try{et.displayName||(et.displayName="GroupsFeedback")}catch{}var en=n(70263),ei=n(40235),ea=n(97286),es=n(96379);function er(e){switch(e){case"CREATED":case"RUNNING":case"STARTED":case"WAITING":return!1;default:return!0}}function eo(e,t){let n=(0,Y.e)(Q.u.changeGroups),i=function({baseSha:e,headSha:t,changeGroupsURL:n}){return[Q.u.changeGroups,n,`baseSha:${e}`,`headSha:${t}`]}({headSha:e,baseSha:t,changeGroupsURL:n}),{updateChangeGroupGeneration:a}=(0,T.wL)(),s=(0,T.xW)(),r=(0,v.useCallback)(()=>{let e=s.latestChangeGroupOrchestration?.state;if(e&&er(e))return s},[s]);return(0,ea.I)({queryKey:i,queryFn:async()=>{let e=await (0,es.QJ)(n);if(!e.ok)throw Error(`HTTP ${e.status}`);let t=await e.json();return a(t),t},initialData:r(),staleTime:1/0})}function el({groups:e,activeGroupId:t,onSelectGroup:n,onClearActiveGroup:i,isLoadingState:a}){let{sendPullRequestAnalyticsEvent:s}=B(),{fullDiff:r}=(0,T.L3)(),o=(0,T.a_)(),c=(0,T.TV)(),{error:d}=eo(r.headOid,r.baseOid);!function(e,t,n){let i=(0,en.A)(),{refetch:a}=eo(n,t),s=(0,v.useMemo)(()=>(0,x.n)(()=>{i()&&a()},2e3),[i,a]),r=(0,v.useMemo)(()=>e=>{e?.base_commit_oid===t&&e?.head_commit_oid===n&&window.setTimeout(()=>s(),e.wait||0)},[t,n,s]);(0,ei.x)(e,r)}(o,r.baseOid,r.headOid);let u=e.length>0,m=(0,S.G7)("pull_request_groups_scroll_groups");return(0,l.jsxs)("div",{className:(0,y.$)(m&&D.GroupsListScrollable,D.GroupsListContainer),children:[(0,l.jsxs)(E.A,{as:"h2",className:(0,y.$)("h6 fgColor-muted d-flex flex-items-center flex-justify-between gap-2 pl-1",D.GroupsListHeadingShiftLeft),children:["Groups by Copilot",u&&(0,l.jsx)(et,{})]}),u&&(0,l.jsxs)(_.l,{className:D.GroupsListItemsShiftLeft,children:[(0,l.jsx)(_.l.Item,{active:void 0===t,onSelect:()=>{s("groups_list.clear_group","GROUPS_LIST_ITEM"),i()},children:"All files"},"All files"),e.toSorted((e,t)=>t.priority-e.priority).map(e=>(0,l.jsx)(ed,{group:e,activeGroupId:t,onSelectGroup:n},e.id))]}),!u&&(0,l.jsx)("div",{className:(0,y.$)(D.GroupsListItemsShiftLeft,"p-2 pb-3 f6 fgColor-muted"),children:c?(0,l.jsxs)("span",{children:[function(e){switch(e){case"DIFF_TOO_LARGE":return"Grouping was skipped because this pull request is too large.";case"DIFF_TOO_SMALL":case"TOO_FEW_GROUPS":return"Grouping was skipped because all changes are closely related.";case"TOO_MANY_GROUPS":return"Grouping was skipped because this pull request generates too many groups.";default:return"Copilot was unable to generate groups for this pull request."}}(c),(0,l.jsx)(ec,{})]}):(0,l.jsxs)(l.Fragment,{children:[a&&(0,l.jsxs)("div",{className:(0,y.$)(D.GroupItem,"d-flex flex-items-center gap-2"),children:[(0,l.jsx)(L.A,{size:"small","aria-label":"Loading Change Groups"}),(0,l.jsx)("span",{children:"Grouping changes..."})]}),!!d&&!a&&(0,l.jsx)("div",{children:"No groups created"})]})})]})}function ec(){let e=(0,v.useRef)(null),{mutate:t}=Z(),[n,i]=(0,v.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(R.A,{className:"ml-1",as:"button",ref:e,inline:!0,muted:!0,onClick:()=>i(!0),children:"Give feedback"}),n&&(0,l.jsx)(G,{onSubmit:e=>{t(e),i(!1)},onClose:()=>i(!1),returnFocusRef:e,precheckOther:!0})]})}function ed({group:e,activeGroupId:t,onSelectGroup:n}){let{sendPullRequestAnalyticsEvent:i}=B(),a=(0,v.useRef)(null),s=(0,P.Z)({focusRowRef:a,mouseRowRef:a}),r=(0,l.jsx)(_.l.Item,{active:t===e.id,onSelect:()=>{i("groups_list.select_group","GROUPS_LIST_ITEM"),n(e.id)},ref:a,children:(0,l.jsx)("div",{className:(0,y.$)(D.GroupItem,"PRIVATE_TreeView-item-content-text"),children:e.name})},e.name);return s?(0,l.jsx)(A.m,{text:e.name,direction:"ne",children:r}):r}try{el.displayName||(el.displayName="GroupsList")}catch{}try{ec.displayName||(ec.displayName="FeedbackButton")}catch{}try{ed.displayName||(ed.displayName="GroupItem")}catch{}var eu=n(45270);let em={sidebar:"PullRequestFileTree-module__sidebar--A_ZKx",FileTreePadTopFilter:"PullRequestFileTree-module__FileTreePadTopFilter--R6WNf",FileTreeScrollable:"PullRequestFileTree-module__FileTreeScrollable--tm_BE",StickFilterToTop:"PullRequestFileTree-module__StickFilterToTop--S6KjN"},ep="pr-file-tree";function eh({className:e,fileFilter:t,filteredDiffs:n,onFileSelected:i,onSetFilterState:a,allowPullRequestGroups:s=!1}){let r=(0,v.useCallback)(e=>(0,l.jsx)(ef,{...e},e.file.filePath),[]),o=(0,T.iY)(),c=(0,T.YL)(),d=(0,eu.ww)(),u=(0,T.Fl)(),m=(0,T.WA)(),p=u&&!er(u.state),h=(0,S.G7)("pull_request_groups_scroll_groups");return(0,l.jsxs)("div",{className:(0,y.$)("d-flex flex-column",!h&&"height-fit"),children:[s&&!d&&m&&(0,l.jsx)(el,{activeGroupId:c,groups:o,onClearActiveGroup:()=>{a({activeChangeGroupId:void 0})},onSelectGroup:e=>{a({activeChangeGroupId:e})},isLoadingState:p||!1}),(0,l.jsx)(I.t,{fallback:(0,l.jsx)("span",{children:"File tree failed to load."}),children:(0,l.jsxs)("div",{className:(0,y.$)("d-flex flex-column min-height-0",e),id:ep,children:[(0,l.jsx)("div",{className:(0,y.$)("pb-3 pr-lg-3",h&&em.StickFilterToTop),children:t}),(0,l.jsxs)("div",{className:(0,y.$)(!h&&em.FileTreeScrollable),children:[(0,l.jsx)("h2",{className:"sr-only",children:"File tree"}),(0,l.jsx)(k.oj,{diffs:n,fileNodeRenderer:r,sortByDiffOrder:!0,onSelect:i,className:"pr-lg-3"})]})]})})]})}let ef=(0,v.memo)(function({file:e,...t}){let n=Object.values(e.diff?.markersMap??{}).flatMap(e=>e.threads.map(e=>e.id)),i=(0,T.Qb)(n),a={...e,diff:{...e.diff,totalCommentsCount:i}};return(0,l.jsx)(k.ZH,{file:a,...t})});try{eh.displayName||(eh.displayName="PullRequestFileTree")}catch{}try{ef.displayName||(ef.displayName="PullRequestFile")}catch{}var eg=n(84078),ey=n(25407);function ev({pageLimits:e,repository:t,urls:n}){let i=e.filesLimitExceeded||e.reviewThreadsLimitExceeded||e.annotationsLimitExceeded;async function a(){let e=new FormData;e.append("feature_name","prx_files"),await (0,es.DI)((0,ey.ZD8)({repo:t}),{body:e,method:"POST"})}let s=(0,l.jsxs)(l.Fragment,{children:[(()=>{let t=[];e.filesLimitExceeded&&t.push(`${e.filesLimit} files`),e.reviewThreadsLimitExceeded&&t.push(`${e.reviewThreadsLimit} comments`),e.annotationsLimitExceeded&&t.push(`${e.annotationsLimit} alerts`);let n="";return 1===t.length?n=`${t[0]}`:2===t.length?n=`${t[0]} and ${t[1]}`:3===t.length&&(n=`${t[0]}, ${t[1]}, and ${t[2]}`),"Only the first "+n+" are currently being shown."})()," To see more,"," ",(0,l.jsx)(R.A,{inline:!0,href:`${n.files}?new_files_changed=false`,onClick:a,rel:"noreferrer",children:"switch back"})," ","to the classic page."]});return i?(0,l.jsx)(eg.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:s,className:"mb-3"}):null}try{ev.displayName||(ev.displayName="PageLimitsBanner")}catch{}let ex={ProgressContainer:"ViewedFileProgress-module__ProgressContainer--ZQ1e8",FilesCountText:"ViewedFileProgress-module__FilesCountText--q4rKx",ViewedText:"ViewedFileProgress-module__ViewedText--vvFsM"},eb=({progress:e})=>(0,l.jsxs)("svg",{"data-circumference":"38",height:"16",role:"presentation",style:{transform:"rotate(-90deg)"},width:"16",children:[(0,l.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--borderColor-default, var(--color-border-default))",strokeWidth:"2"}),(0,l.jsx)("circle",{cx:"50%",cy:"50%",fill:"transparent",r:"6",stroke:"var(--fgColor-done, var(--color-done-fg))",strokeDasharray:38,strokeDashoffset:38-38*e,strokeLinecap:"round",strokeWidth:"2",style:{transition:"stroke-dashoffset 0.35s"}})]});function e_({totalFilesCount:e}){let t=(0,T.gi)();return 0===e?null:(0,l.jsxs)("div",{className:"d-flex flex-row flex-items-center",children:[(0,l.jsx)(eb,{progress:(t??0)/e||0}),(0,l.jsxs)("span",{className:(0,y.$)("ml-1",ex.ProgressContainer),children:[(0,l.jsx)("span",{className:ex.FilesCountText,children:t})," /"," ",(0,l.jsx)("span",{className:ex.FilesCountText,children:e})," ",(0,l.jsx)("span",{className:ex.ViewedText,children:"viewed"})]})]})}try{eb.displayName||(eb.displayName="ProgressIcon")}catch{}try{e_.displayName||(e_.displayName="ViewedFileProgress")}catch{}function ej(e){let t=document.querySelector('#__primerPortalRoot__ div[role="dialog"]'),n=document.querySelector(`#${e} div[role="dialog"]`);(t||n)&&document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",ctrlKey:!0}))}var ew=n(99511),eN=n(94236),eC=n(77430);let ek={filterText:"",showResolvedThreads:!0,showOutdatedThreads:!0};function eS({authorList:e,className:t,filterState:n,onFilterStateChange:i}){return(0,l.jsxs)("div",{className:(0,y.$)("d-flex flex-row gap-2 flex-nowrap",t),children:[(0,l.jsx)(ew.A,{block:!0,"aria-label":"Filter comments",leadingVisual:F.SearchIcon,placeholder:"Filter comments",value:n.filterText,onChange:e=>{var t;return t=e.target.value,void i({...n,filterText:t})}}),(0,l.jsxs)(eN.W,{children:[(0,l.jsx)(eN.W.Anchor,{children:(0,l.jsx)(W.Q,{"aria-label":"Additional comment filters",className:"flex-shink-0",leadingVisual:F.FilterIcon,trailingAction:F.TriangleDownIcon,children:"Filter"})}),(0,l.jsx)(eN.W.Overlay,{width:"small",children:(0,l.jsxs)(_.l,{selectionVariant:"single",children:[(0,l.jsx)(_.l.Item,{selected:n.showResolvedThreads,onSelect:()=>void i({...n,showResolvedThreads:!n.showResolvedThreads}),children:"Show resolved comments"}),(0,l.jsx)(_.l.Item,{selected:n.showOutdatedThreads,onSelect:()=>void i({...n,showOutdatedThreads:!n.showOutdatedThreads}),children:"Show outdated comments"}),e.length>1&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(_.l.Divider,{}),(0,l.jsxs)(_.l.Group,{children:[(0,l.jsx)(_.l.GroupHeading,{children:"Filter by"}),e.map(e=>(0,l.jsxs)(_.l.Item,{selected:n.selectedAuthor===e.login,onSelect:()=>(e=>{if(n.selectedAuthor===e)return i({...n,selectedAuthor:void 0});i({...n,selectedAuthor:e})})(e.login),children:[(0,l.jsx)(_.l.LeadingVisual,{children:(0,l.jsx)(eC.r,{src:e.avatarUrl})}),e.login]},e.login))]})]})]})})]})]})}try{eS.displayName||(eS.displayName="CommentsFilter")}catch{}var eI=n(61219),eT=n(98091),eE=n(58615),eL=n(72511),eR=n(82075),eA=n(26607);let eD={"file-name-overflow":"ConversationHeader-module__file-name-overflow--Ymb0e"};function eP({firstCommentId:e,isCollapsed:t,isOutdated:n,isResolved:i,line:a,onToggleCollapsed:s,onNavigateToDiffComment:r,path:o,rightSideContent:c,threadId:d,headingLevel:u="h3"}){let m=(0,eR.A)("localStorage"),[p,h]=(0,v.useState)(t);return(0,v.useEffect)(()=>{let e=localStorage.getItem(`reviewThreadIsCollapsed_${d}`);null!==e&&h(JSON.parse(e))},[p,d]),(0,l.jsxs)("div",{className:(0,y.$)("d-flex flex-row flex-items-center px-2 py-1 bgColor-muted rounded-top-2 border-bottom",p&&"rounded-2",p&&"border-bottom-0"),children:[(0,l.jsx)(M.K,{"aria-label":p?"Open review comment":"Close review comment",icon:p?F.ChevronRightIcon:F.ChevronDownIcon,size:"small",variant:"invisible",onClick:()=>{m.setItem(`reviewThreadIsCollapsed_${d}`,JSON.stringify(!p)),h(e=>!e),s()}}),(0,l.jsxs)(E.A,{as:u,className:"d-flex flex-items-center flex-1 min-width-0 mr-2 ml-1 f6 text-semibold",children:[(0,l.jsx)(A.m,{direction:"n",text:o,type:"label",children:(0,l.jsxs)(R.A,{className:(0,y.$)(eD["file-name-overflow"],"d-inline text-mono no-wrap overflow-hidden direction-rtl fgColor-default"),onClick:r,href:`#r${e}`,muted:!0,children:["\u200E",o,"\u200E"]})}),!!a&&(0,l.jsxs)("span",{className:"f6 fgColor-muted text-normal no-wrap ml-2",children:["Line ",a]})]}),i&&(0,l.jsx)(eA.A,{size:"large",className:"mx-1",variant:"secondary",children:"Resolved"}),n&&!i&&(0,l.jsx)(eA.A,{size:"large",className:"mx-1",variant:"attention",children:"Outdated"}),(0,l.jsx)(M.K,{as:"a","aria-label":"Jump to the comment in the diff",tooltipDirection:"se",icon:F.FileSymlinkFileIcon,variant:"invisible",href:`#r${e}`,onClick:r}),c]})}try{eP.displayName||(eP.displayName="ConversationHeader")}catch{}let eO={ThreadHeaderIconButton:"ThreadHeader-module__ThreadHeaderIconButton--RGjVM"};var eB=n(97695),eF=n(39698),eM=n(36729);function e$({firstCommentId:e,isCollapsed:t,onToggleCollapsed:n,onNavigateToDiffComment:i,threadPreview:a,headingLevel:s}){let{sendPullRequestAnalyticsEvent:r}=B(),[o,c]=(0,v.useState)(void 0),d=a.thread,u=a.previewInfo,{mutate:m}=(0,eB.H)(u.path,d?.line?`R${d?.line}`:eM.zW),{mutate:p}=(0,eF.i)(u.path,d?.line?`L${d?.line}`:eM.zW),h=async()=>{a&&d?.isResolved&&(p({threadId:a.previewInfo.threadId},{onError:()=>c("Failed to unresolve thread"),onSuccess:()=>{t&&n()}}),r("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON"))};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eP,{firstCommentId:e,isCollapsed:t,isOutdated:d?.isOutdated||!1,isResolved:d?.isResolved||!1,line:d?.line,path:u.path,rightSideContent:(0,l.jsx)(M.K,{"aria-label":d?.isResolved?"Unresolve conversation":"Resolve conversation",tooltipDirection:"sw",icon:d?.isResolved?F.CheckCircleFillIcon:F.CheckCircleIcon,"data-thread-resolved":d?.isResolved,className:eO.ThreadHeaderIconButton,variant:"invisible",onClick:d?.isResolved?h:()=>{d?.isResolved||m({threadId:u.threadId},{onError:()=>c("Failed to resolve thread"),onSuccess:()=>{t||n()}})}}),onNavigateToDiffComment:i,onToggleCollapsed:n,threadId:u.threadId,headingLevel:s}),o&&(0,l.jsxs)(eL.A,{variant:"danger",className:"m-2",children:[(0,l.jsx)(F.StopIcon,{className:"mr-2"}),o]})]})}try{e$.displayName||(e$.displayName="ThreadHeader")}catch{}var eV=n(94602);function eU({commentAuthors:e}){return e.length<1?null:(0,l.jsx)(eV.A,{children:e.map(({login:e,avatarUrl:t})=>(0,l.jsx)(eC.r,{alt:e,size:18,src:t},e))})}try{eU.displayName||(eU.displayName="PreviewAuthors")}catch{}var eq=n(73017);let eW=(0,v.memo)(function({commentPreview:e,onNavigateToDiffComment:t,tabSize:n}){let[i,a]=(0,v.useState)(!1),s=e.commentId,r=(0,v.useCallback)(()=>{window.location.hash=`#r${s}`,t(s)},[s,t]),o=eH(s,e.commentsData??{comments:[]}),c=e.threadPreviewComments.length,d=`${c} previous ${1===c?"comment":"comments"}`;return(0,l.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[(0,l.jsx)(eP,{isCollapsed:i,isOutdated:e.isOutdated||!1,isResolved:e.isResolved||!1,line:e.line,path:e.path,onNavigateToDiffComment:r,onToggleCollapsed:()=>a(e=>!e),threadId:e.threadId,firstCommentId:parseInt(e.commentId)}),!i&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,l.jsx)(eT.i,{diffTableClassName:"border-0",diffLines:e.subject?.diffLines,className:"m-0 border-0",tabSize:n||4})}),c>0&&(0,l.jsx)("div",{className:"my-2 px-2",children:(0,l.jsx)(W.Q,{"aria-label":"View comment in diff",size:"small",trailingVisual:F.ChevronRightIcon,variant:"invisible",onClick:r,children:(0,l.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,l.jsx)("span",{children:d}),(0,l.jsx)(eU,{commentAuthors:o})]})})}),(0,l.jsx)(eq.vb,{className:"markdown-body",html:function(e){let t=(e.commentsData?.comments??[]).find(t=>t&&String(t.databaseId)===e.commentId);return t?.bodyHTML??""}(e),sx:{p:3,fontSize:1}})]})]})});function eH(e,t){let n=new Set;return(t?.comments??[]).reduce((t,i)=>{if(!i||i.id===e)return t;let a=i.author?.login??"",s=i.author?.avatarUrl??"",r=i.author?.id??"",o=i.author?.url??"";return n.has(a)||(t.push({avatarUrl:s,login:a,id:r,url:o}),n.add(a)),t},[])}try{eW.displayName||(eW.displayName="PendingCommentPreview")}catch{}let eG=(0,v.memo)(function({onNavigateToDiffComment:e,pullRequestId:t,tabSize:n,threadPreview:i,headingLevel:a}){let{thread:s,previewInfo:r}=i,{threadId:o,firstComment:c}=r,d=s?.isOutdated??!1,u=c?.id,m=r.path,p=(0,T.j5)(),{navigateToSelectedComment:h}=(0,T.Lh)(),f=(0,v.useCallback)(()=>{if(d&&r.originalDiffPathUri){let e=new URL(r.originalDiffPathUri);e.searchParams.set("new_files_changed","true"),window.location.href=e.toString()}else window.location.hash=`#r${c?.databaseId}`,p&&c?.databaseId&&h(c?.databaseId);e()},[d,r.originalDiffPathUri,e,c?.databaseId,p,h]),[g,y]=(0,eE.M)(`panel-thread-collapsed-state-${o}`,!1),x=r.threadPreviewComments.length,b=0===x?"No replies":`${x} ${1===x?"reply":"replies"}`,_={...s,id:s?.id??"",commentsData:{comments:[]}};if(!c||!_)return null;let j=s?.subjectType==="FILE"?"FILE":`R${s?.line}`,w=eH(r.commentId,s?.commentsData??{comments:[]});return(0,l.jsxs)("div",{className:"border rounded-2 d-flex flex-column",children:[(0,l.jsx)(e$,{firstCommentId:c?.databaseId,isCollapsed:g,threadPreview:i,onNavigateToDiffComment:f,onToggleCollapsed:()=>y(!g),headingLevel:a}),!g&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"border-bottom borderColor-muted overflow-x-auto",children:(0,l.jsx)(eT.i,{diffTableClassName:"border-0",diffLines:r?.subject?.diffLines,className:"m-0 border-0",tabSize:n||4})}),(0,l.jsx)("div",{children:(0,l.jsx)(eI.U,{lineMarkersKey:j,hideActions:!0,isInlineComment:!1,comment:c,filePath:m,index:0,isAnchorable:!1,isOutdated:d,isThreadResolved:s?.isResolved||!1,subjectId:t,threadId:o,originalDiffPathUri:r.originalDiffPathUri,headingLevel:"h3"},u)}),(0,l.jsx)("div",{className:"mb-2 px-2",children:(0,l.jsx)(W.Q,{"aria-label":"View comment in diff",size:"small",trailingVisual:F.ChevronRightIcon,variant:"invisible",onClick:f,children:(0,l.jsxs)("div",{className:"d-flex flex-row flex-justify-start flex-items-center gap-2",children:[(0,l.jsx)("span",{children:b}),(0,l.jsx)(eU,{commentAuthors:w})]})})})]})]})});try{eG.displayName||(eG.displayName="ThreadPreview")}catch{}var eK=n(4559),ez=n(26382);function eQ({heading:e,description:t,icon:n,headingLevel:i="h1"}){return(0,l.jsxs)(ez.E,{children:[(0,l.jsx)(ez.E.Visual,{children:(0,l.jsx)(n,{size:"medium"})}),(0,l.jsx)(ez.E.Heading,{as:i,children:e}),t&&(0,l.jsx)(ez.E.Description,{children:t})]})}try{eQ.displayName||(eQ.displayName="ZeroState")}catch{}var eY=n(69510);function eJ({filteredThreadIds:e,onClose:t,pageLimits:n,pathName:i,pullRequestId:a,isOpen:s,setThreadPreviews:r,tabSize:o}){let{data:c=[]}=(0,eY._l)({pathName:i});(0,v.useEffect)(()=>{r(c)},[c,r]);let d=(0,v.useRef)(null),u=(0,v.useMemo)(()=>(0,x.s)(eK.i,300),[]),m=c.length>0,p=(0,v.useCallback)(()=>{t()},[t]),h=c.map(t=>t&&e.has(t.previewInfo.threadId)?(0,l.jsx)(eG,{tabSize:o,threadPreview:t,onNavigateToDiffComment:p,pullRequestId:a,headingLevel:"h2"},t.previewInfo.threadId):null).filter(Boolean);return(0,v.useEffect)(()=>{s&&u(h.length>0?`${h.length} ${1===h.length?"comment":"comments"}`:"No comments found",{element:d.current})},[s,u,h]),(0,l.jsxs)(l.Fragment,{children:[n.reviewThreadsLimitExceeded&&(0,l.jsx)(eg.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${n.reviewThreadsLimit} comments are currently being shown.`,className:"mb-3"}),h.length>0?(0,l.jsx)(v.Suspense,{fallback:(0,l.jsx)(L.A,{}),children:(0,l.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:h})}):(0,l.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,l.jsx)(eQ,{description:"Comments will show up here as soon as there are some.",heading:m?"No comments match the current filter":"No comments on changes yet",icon:F.CommentIcon,headingLevel:"h2"})}),(0,l.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:d})]})}let eX=(0,v.memo)(function(e){let{pathName:t,toggleSidesheetRef:n,...i}=e,[a,s]=(0,v.useState)([]),[r,o]=(0,v.useState)(()=>({...ek})),c=new Set([...a.filter(e=>{let{thread:t,previewInfo:n}=e;var i={authorLogin:n.firstComment?.author?.login??"",body:n.firstComment?.body??"",id:n.threadId,isResolved:t?.isResolved??!1,isOutdated:t?.isOutdated??!1,path:n.path},a=r;let{filterText:s,showResolvedThreads:o}=a;if(!o&&i.isResolved||!a.showOutdatedThreads&&i.isOutdated)return!1;if(s){let e=s.toLowerCase();if(!i.authorLogin.toLowerCase().includes(e)&&!i.body.toLowerCase().includes(e)&&!i.path.toLowerCase().includes(e))return!1}return!a.selectedAuthor||i.authorLogin===a.selectedAuthor}).map(e=>e.previewInfo.threadId??"")]),d=(0,v.useRef)(null),u=(0,v.useMemo)(()=>{let e=[];for(let t of a){let n=t.previewInfo.firstComment;n?.author&&!e.some(e=>e.login===n.author?.login)&&("Copilot"===n.author.login?e.unshift(n.author):e.push(n.author))}return e},[a]);return i.isOpen?(0,l.jsx)(f.l,{initialFocusRef:d,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:n,onClose:i.onClose,renderHeader:({dialogLabelId:e})=>(0,l.jsxs)(f.l.Header,{className:"p-3",children:[(0,l.jsxs)("div",{className:"d-flex flex-row flex-justify-between flex-items-center width-full",children:[(0,l.jsx)(f.l.Title,{id:e,children:"Comments"}),(0,l.jsx)(M.K,{ref:d,"aria-label":"Close comments panel",icon:F.XIcon,variant:"invisible",onClick:i.onClose})]}),(0,l.jsx)(eS,{authorList:u,className:"mt-2 width-full",filterState:r,onFilterStateChange:o})]}),children:(0,l.jsx)(v.Suspense,{fallback:(0,l.jsx)("div",{className:"d-flex flex-justify-center",children:(0,l.jsx)(L.A,{})}),children:(0,l.jsx)(eJ,{...i,filteredThreadIds:c,pathName:t,setThreadPreviews:s})})}):null});try{eJ.displayName||(eJ.displayName="CommentsSidePanelContent")}catch{}try{eX.displayName||(eX.displayName="CommentsSidePanel")}catch{}function eZ({isFileTreeExpanded:e,pageLimits:t,pullRequest:n,tabSize:i}){let[a,s]=(0,v.useState)(!1),r=(0,v.useRef)(null),o=n.id,c=(0,T.Qb)(),{sendPullRequestAnalyticsEvent:d}=B();return(0,l.jsx)("div",{className:"d-flex flex-items-center",children:(0,l.jsxs)(I.t,{fallback:(0,l.jsx)(W.Q,{"aria-label":"The comments side panel cannot currently be opened.",leadingVisual:F.CommentDiscussionIcon,size:"small",variant:"invisible"}),children:[(0,l.jsx)(W.Q,{ref:r,"aria-label":"Open comments side panel",count:c,leadingVisual:F.CommentDiscussionIcon,size:"small",onClick:()=>{d("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),ej(),s(!0)},children:e&&(0,l.jsx)("span",{className:"d-none d-xl-block",children:"Comments"})}),(0,l.jsx)(eX,{isOpen:a,pageLimits:t,pathName:n.pathName,pullRequestId:o,tabSize:i,toggleSidesheetRef:r,onClose:()=>s(!1)})]})})}try{eZ.displayName||(eZ.displayName="OpenCommentsSidePanelButton")}catch{}var e0=n(86909);function e1({className:e,filteredText:t,onFilteredTextChange:n}){return(0,l.jsx)("div",{className:e,children:(0,l.jsx)(ew.A,{block:!0,"aria-label":"Filter alerts\u2026",leadingVisual:F.SearchIcon,placeholder:"Filter alerts\u2026",value:t,onChange:e=>n(e.target.value)})})}try{e1.displayName||(e1.displayName="AlertsFilter")}catch{}let e2={annotationsHeaderFileName:"AlertsSidePanel-module__annotationsHeaderFileName--JzcsF"};function e3({databaseId:e,lineNumber:t,path:n,onNavigateToAnnotation:i}){return(0,l.jsxs)("div",{className:"d-flex flex-row flex-items-center py-1 px-2 bgColor-inset rounded-top-2 border-bottom",children:[(0,l.jsxs)("h2",{className:"d-flex flex-items-center flex-1 min-width-0 ml-1 mr-2",children:[(0,l.jsx)(A.m,{direction:"n",text:n,type:"label",children:(0,l.jsxs)(R.A,{className:(0,y.$)("overflow-hidden text-mono text-semibold f6 no-wrap",e2.annotationsHeaderFileName),href:`#annotation_${e}`,onClick:i,muted:!0,children:["\u200E",n]})}),(0,l.jsxs)("span",{className:"f6 fgColor-muted text-normal ml-2 no-wrap",children:["Line ",t]})]}),(0,l.jsx)(M.K,{as:"a","aria-label":"Jump to the alert in the diff",tooltipDirection:"se",icon:F.FileSymlinkFileIcon,variant:"invisible",href:`#annotation_${e}`,onClick:i})]})}let e4=(0,v.memo)(function({annotations:e,onClose:t,isOpen:n,pageLimits:i,returnFocusRef:a}){let[s,r]=(0,v.useState)(""),o=new Set(e.filter(e=>(function(e,t){if(t){let n=t.toLowerCase();if(!e.annotationLevel.toLowerCase().includes(n)&&!e.message.toLowerCase().includes(n)&&!e.path.toLowerCase().includes(n)&&!e.title?.toLowerCase().includes(n)&&!e.checkRun.name?.toLowerCase().includes(n)&&!e.appAvatarAltText.toLowerCase().includes(n)&&!e.checkSuiteName?.toLowerCase().includes(n))return!1}return!0})(e,s)).map(e=>e.id)),c=(0,v.useRef)(null),d=e.length>0,u=(0,T.j5)(),{navigateToSelectedAnnotation:m}=(0,T.Lh)(),p=(0,v.useCallback)(e=>{u&&m(e),t()},[t,u,m]),h=e.map(e=>e&&o.has(e.id)?(0,l.jsxs)("div",{className:"border rounded-2 bgColor-default overflow-hidden",children:[(0,l.jsx)(e3,{databaseId:e.databaseId,lineNumber:e.endLine,path:e.path,onNavigateToAnnotation:()=>p(e.databaseId)}),(0,l.jsx)(e0.Y,{annotation:e,inSidePanel:!0})]},e.id):null).filter(Boolean),g=(0,v.useRef)(null),y=(0,v.useMemo)(()=>(0,x.s)(eK.i,300),[]);return((0,v.useEffect)(()=>{n&&y(h.length>0?`${h.length} ${1===h.length?"alert":"alerts"}`:"No alerts found",{element:g.current})},[n,y,h]),n)?(0,l.jsxs)(f.l,{initialFocusRef:c,onClose:t,position:{narrow:"fullscreen",regular:"right",wide:"right"},returnFocusRef:a,renderHeader:({dialogLabelId:e})=>(0,l.jsxs)(f.l.Header,{className:"p-3",children:[(0,l.jsxs)("div",{className:"d-flex flex-row flex-items-center flex-justify-between width-full",children:[(0,l.jsx)(E.A,{as:"h1",className:"f4 text-bold",id:e,children:"Alerts"}),(0,l.jsx)(M.K,{ref:c,"aria-label":"Close alerts panel",icon:F.XIcon,variant:"invisible",onClick:t})]}),(0,l.jsx)(e1,{className:"mt-2 width-full",filteredText:s,onFilteredTextChange:r})]}),children:[i.annotationsLimitExceeded&&(0,l.jsx)(eg.l,{"aria-label":"Warning",title:"Warning",variant:"warning",hideTitle:!0,description:`Only the first ${i.annotationsLimit} alerts are currently being shown.`,className:"mb-3"}),h.length>0?(0,l.jsx)("div",{className:"d-flex flex-column position-relative width-full gap-3",children:h}):(0,l.jsx)("div",{className:"d-flex flex-column position-relative width-full height-full flex-justify-center",children:(0,l.jsx)(eQ,{heading:d?"No alerts match the current filter":"No alerts on changes yet",icon:F.AlertIcon})}),(0,l.jsx)("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",ref:g})]}):null});try{e3.displayName||(e3.displayName="AnnotationHeader")}catch{}try{e4.displayName||(e4.displayName="AlertsSidePanel")}catch{}function e5({isFileTreeExpanded:e,pageLimits:t}){let[n,i]=(0,v.useState)(!1),a=(0,v.useRef)(null),s=(0,v.useCallback)(()=>i(!1),[]),r=(0,T.wI)(),{sendPullRequestAnalyticsEvent:o}=B();if(!r)return null;let c=Object.values(r),d=c.length;return d>0?(0,l.jsx)("div",{className:"d-flex flex-items-center",children:(0,l.jsxs)(I.t,{fallback:(0,l.jsx)(W.Q,{"aria-label":"The alerts side panel cannot currently be opened.",icon:F.AlertIcon,size:"small",variant:"invisible"}),children:[(0,l.jsx)(W.Q,{ref:a,"aria-label":"Open alerts side panel",count:d,leadingVisual:F.AlertIcon,size:"small",onClick:()=>{o("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),ej(),i(!0)},children:e&&(0,l.jsx)("span",{className:"d-none d-xl-block",children:"Alerts"})}),(0,l.jsx)(e4,{annotations:c,isOpen:n,pageLimits:t,returnFocusRef:a,onClose:s})]})}):null}try{e5.displayName||(e5.displayName="OpenAlertsPanelButton")}catch{}var e6=n(70109),e7=n(42255),e8=n(31604),e9=n(46251),te=n(33578);let tt={approve:"approve",comment:"comment",requestChanges:"request changes"};var tn=n(46747);let{getItem:ti,removeItem:ta,setItem:ts}=(0,eR.D)("localStorage"),tr={ReviewMenuButton:"ReviewMenuButton-module__ReviewMenuButton--uK7FN",SubmitReviewButton:"ReviewMenuButton-module__SubmitReviewButton--ZSu4L",ErrorMessage:"ReviewMenuButton-module__ErrorMessage--bglZe",ExpandSection:"ReviewMenuButton-module__ExpandSection--sAB8o",AnchoredReviewBody:"ReviewMenuButton-module__AnchoredReviewBody--nirqE"};var to=n(29255),tl=n(55461),tc=n(15837),td=n(39183),tu=n(55255);let tm={Radio:"ReviewMenu-module__Radio--i3DSd",RadioGroup:"ReviewMenu-module__RadioGroup--uQwUG",RadioText:"ReviewMenu-module__RadioText--dXY49"};function tp({isPROpen:e,reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:i,viewerHasViolatedPushPolicy:a,viewerIsAuthor:s,viewerIsCopilotAttributed:r,handleReviewEventChange:o,handleReviewSubmit:c}){return e?(0,l.jsx)(p.tL,{commands:{"pull-request-files-changed:submit-review":c},children:(0,l.jsx)(th,{reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:i,viewerHasViolatedPushPolicy:a,viewerIsAuthor:s,viewerIsCopilotAttributed:r,onReviewEventChange:o})}):null}let th=(0,v.memo)(function({onReviewEventChange:e,reviewEvent:t,viewerAllowedNonCommentReviewTypes:n,viewerCanWriteToRepo:i,viewerHasViolatedPushPolicy:a,viewerIsAuthor:s,viewerIsCopilotAttributed:r}){var o,c,d,u,m;return(0,l.jsxs)(tc.A,{name:"reviewEvent",onChange:e,className:tm.RadioGroup,children:[(0,l.jsx)(tc.A.Label,{visuallyHidden:!0,children:"Review Event"}),(0,l.jsx)(tf,{checked:t===tt.comment,label:(0,tl.ZH)(tt.comment),subLabel:"Submit general feedback without explicit approval.",value:tt.comment}),(0,l.jsx)(tf,{checked:t===tt.approve,disabled:!n.includes("APPROVE"),label:(0,tl.ZH)(tt.approve),subLabel:r?"Only users who did not collaborate with Copilot will satisfy review requirements.":"Submit feedback and approve merging these changes.",value:tt.approve,disabledTooltip:(o=s,c=!!a,d=n,o?"Pull request authors can't approve their own pull requests.":c?"Users that pushed changes to this pull request after it was opened can't approve":d.includes("APPROVE")?"":"Only users with explicit access to this repository may approve pull requests")}),(0,l.jsx)(tf,{checked:t===tt.requestChanges,disabled:!n.includes("REQUEST_CHANGES"),disabledTooltip:(u=s,m=n,u?"Pull request authors can't request changes on their own pull requests.":m.includes("REQUEST_CHANGES")?"":"Only users with explicit access to this repository may request changes on pull requests"),label:(0,tl.ZH)(tt.requestChanges),value:tt.requestChanges,subLabel:i?"Submit feedback that must be addressed before merging.":"Submit feedback suggesting changes."})]})});function tf({checked:e,disabled:t,disabledTooltip:n,label:i,subLabel:a,value:s}){let r=(0,l.jsxs)(V.A,{disabled:t,children:[(0,l.jsx)(td.A,{checked:e,value:s,className:tm.Radio}),(0,l.jsxs)(V.A.Label,{className:"d-flex flex-column",children:[(0,l.jsx)("span",{className:"text-bold",children:i}),(0,l.jsx)("span",{className:tm.RadioText,children:a})]})]});return t&&n?(0,l.jsx)(tu.A,{text:n,children:r}):r}try{tp.displayName||(tp.displayName="ReviewTypeSelector")}catch{}try{th.displayName||(th.displayName="ReviewRadioButtons")}catch{}try{tf.displayName||(tf.displayName="RadioButton")}catch{}var tg=n(4908),ty=n(23398),tv=n(67955);function tx({totalPendingComments:e,commentsList:t,handleNavigateToDiffComment:n}){let{getDetailsProps:i,open:a}=(0,tg.A)({defaultOpen:!0,closeOnOutsideClick:!1});return e?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(ty.A,{...i(),children:[(0,l.jsx)(ty.A.Summary,{children:(0,l.jsxs)("div",{className:"d-flex flex-row flex-items-center gap-2 mt-4 mb-2",children:[a&&(0,l.jsx)(F.ChevronDownIcon,{className:"fgColor-muted"}),!a&&(0,l.jsx)(F.ChevronRightIcon,{className:"fgColor-muted"}),(0,l.jsxs)(E.A,{as:"h2",className:"f5",children:["Pending comments ",(0,l.jsx)(tv.A,{children:e})]})]})}),(0,l.jsx)(v.Suspense,{fallback:(0,l.jsx)(L.A,{}),children:(0,l.jsx)("div",{className:"d-flex flex-column gap-3",children:t?.map(e=>(0,l.jsx)(eW,{commentPreview:e,onNavigateToDiffComment:n},e.threadId))})})]})}):null}try{tx.displayName||(tx.displayName="ReviewCommentsSection")}catch{}var tb=n(56149);let t_=({portalName:e})=>{let t=(0,v.useRef)(null);return(0,v.useEffect)(()=>{t.current&&(0,tb.cw)(t.current,e)},[e]),(0,l.jsx)("div",{ref:t,className:"position-absolute"})};try{t_.displayName||(t_.displayName="OverlayPortalContainer")}catch{}let tj="review-menu-portal-root";function tw({currentUserLogin:e,pullRequest:t,repository:n,redirectOnMutation:i=!0}){let{author:a,pathName:s,state:r,viewerAllowedNonCommentReviewTypes:o,viewerHasViolatedPushPolicy:c,viewerIsCopilotAttributed:d,comparison:u}=t,m=(0,T.ys)(),p=(0,T.HZ)(),{persistedReview:h,persistReviewToStorage:g,removePersistedReviewFromStorage:y}=function(e){let[t,n]=(0,v.useState)(!1),i=(0,v.useMemo)(()=>`Review:${e}`,[e]);return{persistedReview:ti(i),persistReviewToStorage:(0,tn.d)((e,a)=>{if(!t)try{ts(i,{event:e,text:a})}catch{n(!0)}},1e3),removePersistedReviewFromStorage:()=>{ta(i)}}}(s),x=function(e,t){let n=(0,T.BI)(e),i=(0,T.l0)();return(0,v.useMemo)(()=>{let a=e;if(void 0===n||void 0===i)return[];let s=[];for(let e of Object.keys(t)){let r=t[e];if(!r)continue;let o=0,{path:l,diffLines:c}=r,d=i[l];if(d){let e=function(e,t){if(!e||!e.markersMap)return[];let n=e.markersMap.FILE;if(void 0===n)return[];let i=[];for(let a of n.threads){if(void 0===a.id)continue;let n=t.find(e=>Number(e.id)===a.id);if(!n)continue;let s=n.commentsData?.comments.slice(0,-1),r=[];for(let e of s??[])e.author&&r.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});let o=(n.commentsData?.comments??[]).filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:n.id,commentId:(t.databaseId??0).toString(),isOutdated:n.isOutdated??!1,isResolved:!1,path:e.path,subjectType:"FILE",commentsData:n.commentsData,threadPreviewComments:r}));i.push(...o)}return i}(d,n);e.length>0&&(s.push(...e),a=a.filter(t=>!e.some(e=>e.threadId===t.toString()))),c.map(e=>{let t=function(e,t,n,i,a,s){let r="DELETION"!==t.type?`R${t.right}`:`L${t.left}`;if(!n||!n.markersMap)return{pendingCommentsReturnArray:[],markersFoundInLine:[]};let o=n.markersMap[r],l=[],c=[];if(o){for(let t of o.threads){let n;if(void 0===t.id)continue;let o=i.find(e=>Number(e.id)===t.id);if(!o)continue;let d=parseInt(r.slice(1))||0,u=-1,m=5;t.start&&(n="L"===t.start[0]?"LEFT":"RIGHT",u=parseInt(t.start.slice(1))||-1),-1!==u&&(m=d-u),m>a&&(m=a+1);let p=s.slice(a+1-m,a+1);for(let e=0;e<p.length;e++)p[e]?.type==="HUNK"&&p.splice(0,e+1);let h=o.commentsData?.comments.slice(0,-1),f=[];for(let e of h??[])e.author&&f.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});l.push(t.id),o.commentsData&&(c=c.concat(o.commentsData.comments.filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:o.id,commentId:(t.databaseId??0).toString(),isOutdated:o.isOutdated??!1,isResolved:!1,line:d,path:e,subject:{diffLines:p,endLine:d,startDiffSide:n,startLine:-1===u?null:u},subjectType:t.subjectType??"LINE",commentsData:o.commentsData,threadPreviewComments:f}))))}return{pendingCommentsReturnArray:c,markersFoundInLine:l}}return{pendingCommentsReturnArray:[],markersFoundInLine:[]}}(r.path,e,d,n,o,c);o++,void 0!==t&&(s.push(...t.pendingCommentsReturnArray),a=a.filter(e=>!t.markersFoundInLine.includes(e)))})}}return[...s,...function(e,t){let n=[];for(let i of e){let e=t[i];if(!e)continue;let a=e.commentsData?.comments.slice(0,-1),s=[];for(let e of a??[])e.author&&s.push({author:{avatarUrl:e.author.avatarUrl,login:e.author.login}});let r=(e.commentsData?.comments??[]).filter(e=>"pending"===e.state).map(t=>({bodyHTML:t.bodyHTML??"",threadId:e.id,commentId:(t.databaseId??0).toString(),isOutdated:e.isOutdated??!1,isResolved:!1,path:"",subjectType:t.subjectType??"LINE",commentsData:e.commentsData,threadPreviewComments:s}));n.push(...r)}return n}(a,n)]},[e,n,i,t])}(m?.pendingReviewIDs??[],p),b=x?.length??0,_=a?.login===e,j=r!==te.Q.Closed&&r!==te.Q.Merged,w="WRITE"===n.viewerPermission||"ADMIN"===n.viewerPermission,N=u.headOid,[C,k]=(0,e7.A)("none"),[S,I]=(0,e7.A)("idle"),[L,R]=(0,e7.A)(),[A,D]=(0,e7.A)(h?.event??tt.comment),P=(m?.pendingReviewIDs??[]).length>0,O=(0,v.useRef)(null),$=h?.text??"",V=(0,v.useRef)($),[U,q]=(0,e7.A)(!!h?.text),H="submitting"===S||!U&&A===tt.comment&&!b,{sendPullRequestAnalyticsEvent:G}=B(),K=(0,v.useCallback)(e=>{V.current=e,q(!!e.trim()),g(A,e)},[g,A,q]),z=(0,v.useCallback)(e=>{Object.values(tt).includes(e)&&(D(e),g(e,V.current))},[g,D]),{mutate:X}=function({onSuccess:e,onError:t}){let n=(0,Y.e)(Q.u.submitReview);return(0,J.n)({mutationFn:async({body:e,event:t,headSha:i})=>(0,es.Sr)(`${n}`,{method:"PUT",headers:{Accept:"application/json"},body:{body:e,event:t,headSha:i}}),onSuccess:async t=>{let n=await t.json(),i=n.error||"Unknown error occurred";if(!t.ok)throw Error(i);e(n)},onError:e=>{t(e)}})}({onSuccess:({redirectUrl:e})=>{y(),i&&(window.location.href=e)},onError:e=>{I("idle"),R(e.message)}}),{mutate:Z}=function({onSuccess:e,onError:t}){let n=(0,Y.e)(Q.u.abandonReview);return(0,J.n)({mutationFn:async()=>(0,es.Sr)(`${n}`,{method:"DELETE",headers:{Accept:"application/json"}}),onSuccess:async t=>{let n=await t.json(),i=n.error||"Unknown error occurred";if(!t.ok)throw Error(i);e(n)},onError:e=>{t(e)}})}({onSuccess:({redirectUrl:e})=>{y(),i&&(window.location.href=e)},onError:e=>{I("idle"),R(e.message)}}),ee=(0,v.useCallback)(()=>{H||(L&&R(void 0),I("submitting"),G("submit_review_dialog.submit","SUBMIT_REVIEW_BUTTON"),X({body:V.current,event:A,headSha:N}))},[L,N,A,G,R,I,H,X]),et=(0,v.useCallback)(()=>{0!==(m?.pendingReviewIDs??[]).length&&confirm("Are you sure you want to cancel? You will lose all your pending comments.")&&(L&&R(void 0),I("canceling"),G("submit_review_dialog.cancel","CANCEL_REVIEW_BUTTON"),Z())},[Z,L,m?.pendingReviewIDs,G,R,I]),en=(0,v.useMemo)(()=>(function({viewerIsAuthor:e,viewerAllowedNonCommentReviewTypes:t,isPROpen:n}){let i=t.includes("APPROVE"),a=t.includes("REQUEST_CHANGES");switch(!0){case!n:return{isHidden:!1,text:"comments"};case e:case i:case a:return{isHidden:!1,text:"review"};default:return{isHidden:!1,text:"comments"}}})({isPROpen:j,viewerAllowedNonCommentReviewTypes:o,viewerIsAuthor:_}),[o,_,j]),ei=(0,v.useCallback)(()=>{window.innerWidth<768?k("dialog"):k("anchored"),G("submit_review_dialog.open","REVIEW_CHANGES_BUTTON")},[G,k]),ea=(0,v.useCallback)(()=>{k("none")},[k]),er=(0,v.useCallback)(()=>{k("none")},[k]),eo=(0,v.useCallback)(()=>{"none"===C?ei():ea()},[ea,ei,C]),el=(0,v.useMemo)(()=>(0,l.jsx)(tk,{initialReviewBody:$,isPROpen:j,onReviewBodyChange:K,reviewEvent:A,viewerAllowedNonCommentReviewTypes:o,viewerCanWriteToRepo:w,viewerHasViolatedPushPolicy:c,viewerIsAuthor:_,viewerIsCopilotAttributed:d,commentsList:x,totalPendingComments:b,handleNavigateToDiffComment:er,handleReviewSubmit:ee,handleReviewEventChange:z}),[x,er,z,ee,$,j,K,A,b,o,w,c,_,d]);if(en.isHidden)return null;let ec=()=>(0,l.jsx)(tC,{errorMessage:L,hasPendingReviews:P,reviewSubmissionState:S,handleReviewCancel:et,handleCloseReviewDialog:ea,handleReviewSubmit:ee,submitDisabled:H,reviewMenuButtonDisplayState:en});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(W.Q,{count:b||void 0,className:tr.ReviewMenuButton,trailingAction:F.TriangleDownIcon,variant:"primary",onClick:eo,size:"small",ref:O,children:["Submit ",en.text]}),(0,l.jsx)(t_,{portalName:tj}),(0,l.jsxs)(e8.T,{open:"anchored"===C,anchorRef:O,width:"xlarge",onClose:ea,displayCloseButton:!1,variant:{regular:"anchored",narrow:"fullscreen"},renderAnchor:null,focusZoneSettings:{disabled:!0},overlayProps:{role:"dialog","aria-labelledby":"anchored-review-title","aria-modal":"true",portalContainerName:tj},children:[(0,l.jsxs)(e9.B,{direction:"horizontal",align:"center",justify:"space-between",className:"py-2 border-bottom px-3",children:[(0,l.jsxs)(E.A,{as:"h1",className:"flex-1 f5",variant:"small",id:"anchored-review-title",children:["Finish your ",en.text]}),(0,l.jsxs)(e9.B,{direction:"horizontal",align:"center",gap:"none",children:[P&&(0,l.jsx)(M.K,{icon:F.MaximizeIcon,className:tr.ExpandSection,variant:"invisible","aria-label":"Expand this section",onClick:()=>k("dialog")}),(0,l.jsx)(M.K,{icon:F.XIcon,variant:"invisible","aria-label":"Close",onClick:ea})]})]}),(0,l.jsx)("div",{className:tr.AnchoredReviewBody,children:el}),(0,l.jsx)("div",{className:"p-3 border-top",children:(0,l.jsx)(ec,{})})]}),"dialog"===C&&(0,l.jsx)(f.l,{onClose:ea,returnFocusRef:O,"aria-label":"Review changes",position:{narrow:"fullscreen",regular:"right",wide:"right"},title:`Finish your ${en.text}`,renderFooter:()=>(0,l.jsx)(f.l.Footer,{children:(0,l.jsx)(ec,{})}),children:el})]})}let tN=(0,v.forwardRef)(({initialValue:e,onChange:t,...n},i)=>{let[a,s]=(0,e7.A)(e),r=(0,v.useCallback)(e=>{s(e),t(e)},[s,t]);return(0,l.jsx)(e6.S,{...n,value:a,onChange:r,ref:i})});function tC({errorMessage:e,handleReviewCancel:t,handleCloseReviewDialog:n,handleReviewSubmit:i,hasPendingReviews:a,submitDisabled:s,reviewMenuButtonDisplayState:r,reviewSubmissionState:o}){let c="canceling"===o,d="submitting"===o;return(0,l.jsxs)(l.Fragment,{children:[e&&(0,l.jsxs)(eL.A,{className:tr.ErrorMessage,variant:"danger",children:[(0,l.jsx)(F.StopIcon,{className:"mr-2"}),e]}),(0,l.jsxs)("div",{className:"d-flex flex-row flex-1 flex-items-center flex-justify-between gap-2",children:[a?(0,l.jsx)(W.Q,{disabled:c||d,loading:c,onClick:t,tabIndex:0,variant:"danger",children:(0,l.jsxs)(e9.B,{direction:"horizontal",align:"center",children:["Discard ",r.text]})}):(0,l.jsx)("div",{}),(0,l.jsxs)("div",{className:"d-flex flex-row gap-2",children:[(0,l.jsx)(W.Q,{onClick:n,disabled:c||d,children:"Cancel"}),(0,l.jsx)(W.Q,{disabled:s||d,variant:"primary",onClick:i,loading:d,className:tr.SubmitReviewButton,trailingVisual:(0,l.jsx)(to.U,{keys:"Mod+enter",variant:"onPrimary"}),children:(0,l.jsxs)("div",{className:"d-flex flex-row flex-justify-center",children:["Submit ",r.text]})})]})]})]})}function tk({initialReviewBody:e,isPROpen:t,onReviewBodyChange:n,reviewEvent:i,viewerAllowedNonCommentReviewTypes:a,viewerCanWriteToRepo:s,viewerHasViolatedPushPolicy:r,viewerIsAuthor:o,viewerIsCopilotAttributed:c,commentsList:d,totalPendingComments:u,handleNavigateToDiffComment:m,handleReviewSubmit:p,handleReviewEventChange:h}){let f=(0,v.useRef)(null);return(0,v.useEffect)(()=>{let e=window.setTimeout(()=>f.current?.focus());return()=>{window.clearTimeout(e)}},[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tN,{ref:f,label:"Add review comment",placeholder:"Leave a comment",sx:{flexGrow:"1",width:"100%"},initialValue:e,onChange:n,onPrimaryAction:p}),(0,l.jsx)(tp,{isPROpen:t,reviewEvent:i,viewerAllowedNonCommentReviewTypes:a,viewerCanWriteToRepo:s,viewerHasViolatedPushPolicy:r,viewerIsAuthor:o,viewerIsCopilotAttributed:c,handleReviewEventChange:h,handleReviewSubmit:p}),(0,l.jsx)(tx,{totalPendingComments:u,commentsList:d,handleNavigateToDiffComment:m})]})}tN.displayName="ControlledCommentBox";try{tw.displayName||(tw.displayName="ReviewMenuButton")}catch{}try{(i=ReviewMenuBody).displayName||(i.displayName="ReviewMenuBody")}catch{}try{(a=ReviewMenuFooter).displayName||(a.displayName="ReviewMenuFooter")}catch{}try{tC.displayName||(tC.displayName="ReviewMenuFooterComponent")}catch{}try{tk.displayName||(tk.displayName="ReviewMenuBodyComponent")}catch{}var tS=n(27028),tI=n(39029);let tT={refresh:"RefreshButton-module__refresh--gOrN1"};function tE({aliveChannel:e,pathName:t}){let[n,i]=(0,v.useState)(!1);return((0,tI.Zi)(e,()=>{i(!0)},{git_updated:!0}),n)?(0,l.jsx)(W.Q,{as:R.A,variant:"invisible",href:`${t}/files`,className:tT.refresh,leadingVisual:F.SyncIcon,size:"small",onClick:e=>{e.preventDefault(),window.location.href=`${t}/files`},children:"Refresh"}):null}try{tE.displayName||(tE.displayName="RefreshButton")}catch{}var tL=n(62935),tR=n(18096);let tA=(0,v.memo)(function({baseRefOid:e,commitOids:t,commits:n,endOid:i,onClose:a,onRangeUpdated:s,startOid:r}){let[o,c]=(0,v.useState)(()=>{if(!r||!i)return;let e=r?t.indexOf(r)+1:-1,n=i?t.indexOf(i):-1;if(!(e<0)&&!(n<0))return{start:e,end:n}}),d=o?t.slice(o.start,o.end+1):[];return(0,l.jsxs)(tR.X,{defaultOpen:!0,open:!0,description:"Picking a range will select commits in between.",selectionVariant:"multiple",title:"Pick one or more commits",variant:"modal",width:"large",onCancel:a,onClearSelection:()=>{c(void 0)},onSubmit:()=>{let n,l;if(o&&(o.start>0||o.end<t.length-1)&&(n=o.start>0?t[o.start-1]:e,l=t[o.end]),n===r&&l===i)return void a();n&&l?o&&o.start===o.end?s({type:"single",oid:l}):s({type:"range",fromPRBase:n===e,baseOid:n,endOid:l}):s({type:"unfiltered"})},children:[(0,l.jsx)(_.l,{children:n.map(e=>{let n=d.includes(e.oid);return(0,l.jsxs)(_.l.Item,{selected:n,onSelect:()=>((e,n)=>{let i,a=t.indexOf(e);if(o){if(o.start!==o.end||"removed"!==n){var s,r;let e,t,{newStartIndex:l,newEndIndex:c}=(s=o.start,r=o.end,"added"===n?(e=Math.min(a,s),t=Math.max(a,r)):a===s?(e=s+1,t=r):(e=s,t=a-1),{newStartIndex:e,newEndIndex:t});i={start:l,end:c}}}else i="added"===n?{start:a,end:a}:void 0;c(i)})(e.oid,n?"removed":"added"),children:[e.messageHeadline,(0,l.jsxs)(_.l.Description,{variant:"block",children:[e.shortOid," \xb7 ",e.actorLogin," \xb7 ",(0,l.jsx)(tL.A,{datetime:e.createdAt})]})]},e.oid)})}),(0,l.jsx)(tR.X.Footer,{})]})});try{tA.displayName||(tA.displayName="CommitsSelector")}catch{}let tD="All commits",tP={default:{variant:"default",leadingVisual:F.VersionsIcon},condensed:{variant:"invisible",leadingVisual:void 0}};function tO({onRangeUpdated:e,commits:t,lastReviewOid:n,variant:i="default"}){let{endOid:a,startOid:s,baseRefOid:r}=(0,eu.Xv)(),o=(0,eu.ww)(),c=(0,v.useMemo)(()=>t.map(e=>e.oid),[t]),d=c[c.length-1],u=!!n&&s===n&&a===d,[m,p]=(0,v.useState)(!1),[h,f]=(0,v.useState)(!1),g=(0,v.useMemo)(()=>{if(!s)return;if(s===r)return c[0];let e=c.findIndex(e=>e===s);if(!(e<0))return c[e+1]},[r,c,s]),y=function({endOid:e,startOid:t,firstCommitInRange:n}){return n&&e&&n===e?`Commit ${e.slice(0,7)}`:t&&e?`${t.slice(0,7)}..${e.slice(0,7)}`:tD}({endOid:a,startOid:s,firstCommitInRange:g}),x=function({commitOids:e,endOid:t,firstCommitInRange:n}){if(n&&t&&n===t)return`Commit ${t.slice(0,7)}...`;if(n&&t){let i=e.indexOf(n),a=e.indexOf(t);if(i>-1&&a>-1)return`${a-i+1} commits...`}return"Specific commit\u2026"}({endOid:a,firstCommitInRange:g,commitOids:c}),{sendPullRequestAnalyticsEvent:b}=B(),j=t=>{f(!1),e(t)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(eN.W,{open:m,onOpenChange:e=>{p(e),e&&b("commits_menu.open","COMMITS_MENU")},children:[(0,l.jsx)(eN.W.Anchor,{children:(0,l.jsx)(W.Q,{alignContent:"start",className:"flex-shrink-0",leadingVisual:tP[i].leadingVisual,size:"small",variant:tP[i].variant,trailingAction:F.TriangleDownIcon,children:y})}),(0,l.jsx)(eN.W.Overlay,{side:"outside-bottom",width:"small",children:(0,l.jsxs)(_.l,{selectionVariant:"single",children:[(0,l.jsx)(_.l.Item,{selected:!o,onSelect:()=>{e({type:"unfiltered"})},children:tD}),n&&d&&n!==d&&(0,l.jsx)(_.l.Item,{selected:u,onSelect:()=>j({type:"range",fromPRBase:n===r,baseOid:n,endOid:d}),children:"Changes since your last review"}),(0,l.jsx)(_.l.Divider,{}),(0,l.jsx)(_.l.Item,{selected:o&&!u,onSelect:()=>{b("commits_menu.select_commit","COMMITS_MENU_ITEM"),p(!1),f(!0)},children:x})]})})]}),h&&(0,l.jsx)(tA,{baseRefOid:r||"",commitOids:c,commits:t,endOid:a,startOid:s,onClose:()=>f(!1),onRangeUpdated:j})]})}try{tO.displayName||(tO.displayName="CommitsDropdown")}catch{}function tB({ownerLogin:e,repositoryName:t,pullRequestNumber:n,commits:i,lastReviewOid:a,variant:s}){return(0,l.jsx)(tO,{commits:i,lastReviewOid:a,onRangeUpdated:i=>{let a;if("unfiltered"===i.type)a=(0,ey.jrm)({owner:e,repo:t,number:n});else if("range"===i.type){let s=i.fromPRBase?void 0:i.baseOid;a=(0,ey.nSV)({owner:e,repo:t,number:n,base:s,head:i.endOid})}else a=(0,ey.yIb)({owner:e,repo:t,number:n,commit:i.oid});window.location.href=a},variant:s})}try{tB.displayName||(tB.displayName="ChangesSelector")}catch{}var tF=n(33644),tM=n(2694),t$=n(81070),tV=n(33195);let tU={"is-stuck":"PullRequestFilesToolbar-module__is-stuck--pCXhL","show-when-stuck":"PullRequestFilesToolbar-module__show-when-stuck--ONyyF","hide-when-stuck-large":"PullRequestFilesToolbar-module__hide-when-stuck-large--jRjpF","pr-title-details":"PullRequestFilesToolbar-module__pr-title-details--NZamC","pr-sticky-title":"PullRequestFilesToolbar-module__pr-sticky-title--Fu24T","file-controls":"PullRequestFilesToolbar-module__file-controls--XN2fA","file-controls-navigation":"PullRequestFilesToolbar-module__file-controls-navigation--Ti_xo","file-controls-divider":"PullRequestFilesToolbar-module__file-controls-divider--oWuSw",toolbar:"PullRequestFilesToolbar-module__toolbar--bXrnB","simple-toolbar":"PullRequestFilesToolbar-module__simple-toolbar--q_1hU"};var tq=n(21968),tW=n(34261),tH=n(89155),tG=n(73783),tK=n(81355),tz=n(61583);function tQ(){let e=(0,T.mU)(),t=(0,T.$W)(e),{selectedPathDigest:n}=(0,tK.U)(),i=(0,v.useMemo)(()=>n?t.findIndex(e=>e.pathDigest===n):0,[t,n]),a=(0,v.useCallback)(e=>{(0,tz.pk)(`diff-${e}`),(0,w.kd)(window.location.href)},[]);return{navigateToPrevious:(0,v.useCallback)(()=>{if(t.length>0){let e;e=i<=0?t.length-1:i-1;let n=t[e];n&&a(n.pathDigest)}},[i,t,a]),navigateToNext:(0,v.useCallback)(()=>{if(t.length>0){let e;e=i>=t.length-1||i<0?0:i+1;let n=t[e];n&&a(n.pathDigest)}},[i,t,a]),currentPathDigest:n,currentIndex:i>=0?i:void 0}}var tY=n(29295);let tJ={PopoverContainer:"SingleFileModeOnboardingPopover-module__PopoverContainer--wtwv5",PopoverContent:"SingleFileModeOnboardingPopover-module__PopoverContent--zQnno",Heading:"SingleFileModeOnboardingPopover-module__Heading--BRcrc"};var tX=n(21067),tZ=n(76648);function t0(e){return 0===(function(){let e=(0,tZ.B)();return e?(e.userNotices??[]).filter(e=>!e.dismissed):[]})().filter(t=>t.name===e).length}let t1="single_file_mode";function t2(){let e=t0(t1),t=(0,T.j5)(),[n,i]=(0,v.useState)(!0),{dismissNotice:a}=function(e){let t=t0(e);return{dismissNotice:(0,v.useCallback)(()=>{(0,tX.M3)()&&!t&&(0,es.DI)((0,ey.VB1)({noticeName:e}),{method:"POST"})},[t,e])}}(t1);return!t||e?null:(0,l.jsx)(tY.A,{className:tJ.PopoverContainer,open:n,children:(0,l.jsxs)(tY.A.Content,{className:(0,y.$)("d-flex flex-column gap-2",tJ.PopoverContent),children:[(0,l.jsx)(E.A,{as:"h3",variant:"small",className:tJ.Heading,children:"You're in single-file mode"}),(0,l.jsx)("p",{children:"Due to the large number of changes in this pull request, only one file is being shown at a time."}),(0,l.jsxs)("p",{children:["Use the ",(0,l.jsx)("strong",{children:"Previous"})," and ",(0,l.jsx)("strong",{children:"Next"})," buttons to move between files."]}),(0,l.jsx)("div",{className:"d-flex flex-items-center",children:(0,l.jsx)(W.Q,{onClick:()=>{a(),i(!1)},children:"OK, got it"})})]})})}try{t2.displayName||(t2.displayName="SingleFileModeOnboardingPopover")}catch{}var t3=n(44569);function t4(){let e=(0,t3.zw)(),{navigateToPrevious:t,navigateToNext:n}=tQ();return(0,l.jsxs)("div",{className:"position-relative",children:[(0,l.jsxs)(tG.A,{children:[(0,l.jsx)(M.K,{icon:F.ChevronUpIcon,"aria-label":e?"Previous file (K)":"Previous file",size:"small",onClick:t,"data-hotkey":"k"}),(0,l.jsx)(M.K,{icon:F.ChevronDownIcon,"aria-label":e?"Next file (J)":"Next file",size:"small",onClick:n,"data-hotkey":"j"})]}),(0,l.jsx)(t2,{})]})}try{t4.displayName||(t4.displayName="ReviewNavigationButtonGroup")}catch{}function t5({pageLimits:e,pullRequest:t,hideWhitespace:n,onUpdateWhitespace:i,additionalPreferences:a}){let[s,r]=(0,v.useState)(!1),[o,c]=(0,v.useState)(!1),[d,u]=(0,v.useState)(!1),[m,p]=(0,v.useState)(!1),h=(0,v.useRef)(null),f=(0,T.wI)(),g=(0,T.Qb)(),{sendPullRequestAnalyticsEvent:y}=B(),x=f?Object.values(f):[],b=x.length,j=(0,v.useCallback)(()=>{y("comments_side_panel.open","COMMENTS_SIDE_PANEL_BUTTON"),ej(),r(!0),u(!1)},[y]),w=(0,v.useCallback)(()=>{y("alerts_side_panel.open","ALERTS_SIDE_PANEL_BUTTON"),ej(),c(!0),u(!1)},[y]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(eN.W,{open:d,onOpenChange:u,children:[(0,l.jsx)(eN.W.Anchor,{children:(0,l.jsx)(M.K,{ref:h,icon:F.KebabHorizontalIcon,variant:"default",size:"small","aria-label":"More options"})}),(0,l.jsx)(eN.W.Overlay,{align:"end",children:(0,l.jsxs)(_.l,{children:[(0,l.jsxs)(_.l.Group,{children:[(0,l.jsxs)(_.l.Item,{onSelect:j,children:[(0,l.jsx)(_.l.LeadingVisual,{children:(0,l.jsx)(F.CommentDiscussionIcon,{})}),"Comments",g>0&&(0,l.jsx)(_.l.TrailingVisual,{children:g})]}),b>0&&(0,l.jsxs)(_.l.Item,{onSelect:w,children:[(0,l.jsx)(_.l.LeadingVisual,{children:(0,l.jsx)(F.AlertIcon,{})}),"Alerts",(0,l.jsx)(_.l.TrailingVisual,{children:b})]})]}),(0,l.jsx)(_.l.Divider,{}),(0,l.jsx)(_.l.Group,{children:(0,l.jsxs)(eN.W,{open:m,onOpenChange:p,children:[(0,l.jsx)(eN.W.Anchor,{children:(0,l.jsxs)(_.l.Item,{children:[(0,l.jsx)(_.l.LeadingVisual,{children:(0,l.jsx)(F.GearIcon,{})}),"Settings",(0,l.jsx)(_.l.TrailingVisual,{children:(0,l.jsx)(F.ChevronRightIcon,{})})]})}),(0,l.jsx)(eN.W.Overlay,{side:"outside-bottom",align:"end",children:(0,l.jsx)(_.l,{children:(0,l.jsx)(tS.Q,{reloadOnWhitespaceChange:!0,onUpdateWhitespace:i,defaultHideWhitespace:n,additionalPreferences:a})})})]})})]})})]}),(0,l.jsx)(eX,{isOpen:s,pageLimits:e,pathName:t.pathName,pullRequestId:t.id,toggleSidesheetRef:h,onClose:()=>r(!1)}),b>0&&(0,l.jsx)(e4,{annotations:x,isOpen:o,pageLimits:e,returnFocusRef:h,onClose:()=>c(!1)})]})}try{t5.displayName||(t5.displayName="ToolbarMoreMenu")}catch{}var t6=n(91747);function t7({changeGroupsPreferenceAvailable:e,showChangeGroups:t,onShowChangeGroupsChange:n}){if(e)return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(_.l.Divider,{}),(0,l.jsx)(_.l.Group,{"aria-label":"Change Groups",selectionVariant:"single",children:(0,l.jsxs)(_.l.Item,{selected:t,onSelect:()=>n(!t),children:["Show changes by group",(0,l.jsx)(_.l.Description,{variant:"block",children:"Organize changes into groups with Copilot"})]})})]})}try{t7.displayName||(t7.displayName="ChangeGroupsPreferences")}catch{}var t8=n(3585);function t9(e){let t=new Map;if(!e)return t;for(let[n,i]of Object.entries(e))for(let e of Object.values(i))for(let i of e?.threads??[])for(let e of i.commentsData?.comments??[])void 0!==e.databaseId&&null!==e.databaseId&&t.set(e.databaseId,{comment:e,path:n});return t}var ne=n(3252),nt=n(88008);function nn({aliveChannel:e,repository:t,pullRequest:n,bannersData:i,urls:a,user:s,...r}){let{data:{pullRequest:o}}=(0,tW.W)();(0,tW.W)({aliveChannel:e,repository:t,pullRequest:n,bannersData:i,urls:a,user:s}),(0,tH.F)(e);let c={...n,...o};return(0,l.jsx)(ni,{repository:t,pullRequest:c,...r})}function ni({changeGroupsPreferenceAvailable:e,commits:t,currentUserLogin:n,fileFilter:i,isFileTreeExpanded:a,lastReviewOid:s,pageLimits:r,pullRequest:o,repository:c,shouldShowViewedFilesCount:d,totalFilesCount:u,treeToggleElement:p}){let h=(0,t6.u)("batch_suggested_changes"),{mutate:f}=function(){let e=(0,T.Kp)(),{updateWhitespace:t}=(0,T.yo)();return(0,J.n)({mutationFn:async({hideWhitespace:t})=>{let n=`${e}/page_data/${Q.u.updateWhitespacePreference}`,i=await (0,X.q$)(n,{method:"POST",body:{w:+!!t}}),a=await (0,X.hp)(i);return(0,X.R)(i,a),a},onSuccess:e=>{t(e.ignoreWhitespace)}})}(),{clearSuggestionBatch:g,removeSuggestionFromBatch:x}=(0,T.xJ)(),{mutate:b}=function(e,t){let n=(0,Y.e)(Q.u.submitSuggestedChanges),i=(0,T.WK)(),a=(0,T.qL)(),{clearSuggestionBatch:s}=(0,T.xJ)();return(0,J.n)({mutationFn:async({currentOid:e,message:t})=>{let s=function(e,t){if(!e||0===t.length)return[];let n=t9(e),i=[];for(let e of t){let t=n.get(e);if(!t)continue;let{comment:a,path:s}=t,r=(0,ne.T)(a.body);r&&i.push({threadId:String(e),path:s,suggestion:r})}return i}(a,i.activeBatch);if(0===s.length)throw Error("No valid suggestions found in batch");let r=await (0,es.Sr)(n,{method:"POST",headers:{Accept:"application/json"},body:{changes:s,currentOid:e,message:t}}),o=await (0,X.hp)(r);return(0,X.R)(r,o),o},onSuccess:()=>{s(),(0,nt.hW)(e,t),m.cg?.location.reload()}})}(o.pathName,o.comparison.headOid),{mutate:_}=function(){let e=(0,T.Kp)(),{updateChangeGroupPreference:t}=(0,T.wL)(),{updateDiffFilter:n}=(0,T.or)();return(0,J.n)({mutationFn:async({showChangeGroups:t})=>{let n=`${e}/page_data/${Q.u.updateShowChangeGroupsPreference}`,i=await (0,X.q$)(n,{method:"POST",headers:{"Content-Type":"application/json"},body:{show_change_groups:t?"true":"false"}}),a=await (0,X.hp)(i);return(0,X.R)(i,a),a},onMutate:({showChangeGroups:e})=>{t(e),e||n({activeChangeGroupId:void 0})}})}(),j=(0,T.WA)(),w=o.pathName,{hideWhitespace:N,fullDiff:C}=(0,T.L3)(),[k,S]=(0,v.useState)(!1),I=d||!a,E=(0,T.j5)(),L=(0,T.RH)(),R=(0,T.WK)(),D=(0,T.qL)(),[P,O]=(0,v.useState)(!1),B=(0,T.Kp)(),F=(0,T.L3)(),M=function(e,t){if(!e||0===t.length)return[];let n=t9(e),i=[];for(let e of t){let t=n.get(e);t&&i.push({commentDatabaseId:e,path:t.path})}return i}(D,R.activeBatch),$=M.length,V=e=>{f({hideWhitespace:e})},[U,q]=(0,tM.B)(e=>{e[0]&&S(!e[0].isIntersecting)}),H=(0,v.useCallback)(e=>{x(e),(0,nt.CE)(B,F.fullDiff.headOid,R.activeBatch.filter(t=>t!==e))},[x,R,B,F]),G=(0,v.useCallback)(()=>{O(!0)},[]),K=(0,v.useCallback)(()=>{O(!1)},[]),z=(0,v.useCallback)(()=>{g(),(0,nt.hW)(B,F.fullDiff.headOid),K()},[g,B,F,K]),Z=(0,v.useCallback)((e,t,n)=>{b({message:e,currentOid:C.headOid},{onSuccess:()=>{K(),n()},onError:e=>{t(e)}})},[C,b,K]),ee=e=>{_({showChangeGroups:e})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t$.X,{sx:{visibility:"hidden",height:"1px"},onObserve:U,onUnobserve:q}),(0,l.jsxs)(e9.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:(0,y.$)(tF.A.stickyHeader,tU.toolbar,k&&tU["is-stuck"]),children:[(0,l.jsx)("h2",{className:"sr-only",children:"Pull Request Toolbar"}),(0,l.jsxs)(e9.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:[(0,l.jsx)("div",{children:p}),(0,l.jsx)("div",{className:tU["show-when-stuck"],children:(0,l.jsx)(tV.u,{state:o.state})}),(0,l.jsx)("div",{className:tU["hide-when-stuck-large"],children:(0,l.jsx)(tB,{commits:t,lastReviewOid:s,ownerLogin:c.ownerLogin,pullRequestNumber:o.number,repositoryName:c.name})}),(0,l.jsxs)(e9.B,{direction:"vertical",gap:"none",className:(0,y.$)(tU["show-when-stuck"],"min-width-0"),children:[(0,l.jsxs)("div",{className:(0,y.$)("d-flex mb-n1",tU["pr-title-details"]),children:[(0,l.jsx)(A.m,{type:"label",direction:"s",text:o.title,children:(0,l.jsx)("a",{href:"#top",className:"d-flex overflow-hidden fgColor-default",children:(0,l.jsx)("bdi",{className:(0,y.$)("f5 text-bold overflow-hidden no-wrap",tU["pr-sticky-title"]),children:o.title})})}),(0,l.jsxs)("span",{className:"f5 text-normal pl-2 fgColor-muted d-inline",children:["#",o.number]})]}),(0,l.jsxs)("div",{className:"f6 text-normal d-flex flex-items-center ml-n2",children:[(0,l.jsx)(tB,{commits:t,lastReviewOid:s,ownerLogin:c.ownerLogin,pullRequestNumber:o.number,repositoryName:c.name,variant:"condensed"}),(0,l.jsxs)("div",{className:(0,y.$)("d-none d-lg-flex flex-items-center min-width-0",tU["pr-title-details"]),children:[(0,l.jsx)("div",{className:"border-left mx-1 pr-1 d-block",style:{width:"1px",height:"16px"}}),(0,l.jsx)(tq.O,{author:o.author.login,baseBranch:o.baseBranch,baseRepositoryOwnerLogin:c.ownerLogin,baseRepositoryName:c.name,commitsCount:o.commitsCount,headBranch:o.headBranch,headRepositoryOwnerLogin:o.headRepositoryOwnerLogin,headRepositoryName:o.headRepositoryName,isInAdvisoryRepo:o.isInAdvisoryRepo,mergedBy:o.mergedBy,state:o.state,pullRequestId:o.id,pullRequestNumber:o.number,repositoryId:c.id})]})]})]})]}),(0,l.jsxs)(e9.B,{direction:"horizontal",align:"center",children:[(0,l.jsx)(tE,{aliveChannel:o.aliveChannel,pathName:w}),(0,l.jsxs)("div",{className:tU["file-controls"],children:[d&&(0,l.jsx)(e_,{totalFilesCount:u}),!a&&i,E&&u>1&&(0,l.jsx)("div",{className:tU["file-controls-navigation"],children:(0,l.jsx)(t4,{})})]}),I&&(0,l.jsx)("div",{className:tU["file-controls-divider"],"data-testid":"file-controls-divider"}),L&&h?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(W.Q,{variant:"danger",size:"small",onClick:z,children:"Discard batch"}),(0,l.jsxs)(W.Q,{variant:"primary",size:"small",onClick:G,children:["Commit suggestions ",(0,l.jsx)(tv.A,{className:"ml-1 color-fg-inherit",children:$})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"d-none d-sm-flex",children:(0,l.jsx)(eZ,{pageLimits:r,pullRequest:o,isFileTreeExpanded:a})}),(0,l.jsx)("div",{className:"d-none d-sm-flex",children:(0,l.jsx)(e5,{pageLimits:r,isFileTreeExpanded:a})}),n&&(0,l.jsx)(tw,{currentUserLogin:n,pullRequest:o,repository:c}),(0,l.jsx)("div",{className:"d-none d-sm-flex",children:(0,l.jsx)(tS.G,{invisible:!1,reloadOnWhitespaceChange:!0,onUpdateWhitespace:V,defaultHideWhitespace:N,small:!0,additionalPreferences:t7({changeGroupsPreferenceAvailable:e,showChangeGroups:j,onShowChangeGroupsChange:ee})})}),(0,l.jsx)("div",{className:"d-flex d-sm-none",children:(0,l.jsx)(t5,{pageLimits:r,pullRequest:o,hideWhitespace:N,onUpdateWhitespace:V,additionalPreferences:t7({changeGroupsPreferenceAvailable:e,showChangeGroups:j,onShowChangeGroupsChange:ee})})})]})]})]}),P&&(0,l.jsx)(t8.$,{authorLogins:[],batchSize:R.activeBatch.length,onClose:K,onCommit:Z,defaultCommitMessage:"Apply suggestions from code review",dialogTitle:`Commit ${1===R.activeBatch.length?"suggestion":"suggestions"}`,suggestions:M.map(e=>({commentDatabaseId:e.commentDatabaseId,path:e.path})),onRemoveSuggestion:H,onDiscardBatch:z})]})}try{nn.displayName||(nn.displayName="LivePullRequestFilesToolbar")}catch{}try{ni.displayName||(ni.displayName="PullRequestFilesToolbar")}catch{}let na={L:"LEFT",R:"RIGHT"};function ns(e){return"L"===e||"R"===e}let nr={Container:"DiffComparisonViewer-module__Container--nndHZ",HiddenPane:"DiffComparisonViewer-module__HiddenPane--pMKU7",PaneContain:"DiffComparisonViewer-module__PaneContain--PQMad",PaneOverflowVisible:"DiffComparisonViewer-module__PaneOverflowVisible--fmHF4",PaneScroll:"DiffComparisonViewer-module__PaneScroll--l53kR",Pane:"DiffComparisonViewer-module__Pane--FbQgQ",MobileExpanded:"DiffComparisonViewer-module__MobileExpanded--w1t6O",TreeExpanded:"DiffComparisonViewer-module__TreeExpanded--sy49K",MainContentHidden:"DiffComparisonViewer-module__MainContentHidden--rHQNo",Content:"DiffComparisonViewer-module__Content--Cv2ab",SkeletonWrapper:"DiffComparisonViewer-module__SkeletonWrapper--eZhhq",SkeletonIconWrapper:"DiffComparisonViewer-module__SkeletonIconWrapper--e2YmQ"};var no=n(5981),nl=n(24798),nc=n(50129);function nd({fileFilter:e,isFileTreeExpanded:t,shouldShowViewedFilesCount:n,totalFilesCount:i,treeToggleElement:a}){let[s,r]=(0,v.useState)(!1),o=(0,T.j5)(),c=n||!t,[d,u]=(0,tM.B)(e=>{e[0]&&r(!e[0].isIntersecting)});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t$.X,{sx:{visibility:"hidden",height:"1px"},onObserve:d,onUnobserve:u}),(0,l.jsxs)(e9.B,{as:"section",direction:"horizontal",justify:"space-between",gap:"condensed",align:"center",className:(0,y.$)(tF.A.stickyHeader,tU["simple-toolbar"],s&&tU["is-stuck"]),children:[(0,l.jsx)("h2",{className:"sr-only",children:"Diff Comparison Toolbar"}),(0,l.jsx)(e9.B,{direction:"horizontal",gap:"condensed",align:"center",className:"min-width-0",children:(0,l.jsx)("div",{children:a})}),(0,l.jsxs)(e9.B,{direction:"horizontal",align:"center",children:[(0,l.jsxs)("div",{className:tU["file-controls"],children:[n&&(0,l.jsx)(e_,{totalFilesCount:i}),!t&&e,o&&i>1&&(0,l.jsx)("div",{className:tU["file-controls-navigation"],children:(0,l.jsx)(t4,{})})]}),c&&(0,l.jsx)("div",{className:tU["file-controls-divider"],"data-testid":"file-controls-divider"}),(0,l.jsx)(tS.G,{invisible:!1,small:!0,enabledDiffViewSettings:["line-spacing"]})]})]})]})}try{nd.displayName||(nd.displayName="BasicDiffComparisonViewToolbar")}catch{}var nu=n(8624),nm=n(94195),np=n(54571),nh=n(71833),nf=n(19976);function ng(){return(0,l.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,l.jsx)(ez.E,{border:!1,spacious:!0,children:(0,l.jsx)(ez.E.Heading,{children:"No files matched your search"})})})}try{ng.displayName||(ng.displayName="FilesChangedFilterBlankSlate")}catch{}var ny=n(59523),nv=n(87459),nx=n(66358);function nb({pullRequestBasePath:e,className:t,diffPath:n,viewerLogin:i}){let a=(0,v.useId)(),s=(0,N.o5)({basePath:e,diffPath:n});if(!s)return null;let{isOwnedByViewer:r,owners:o,ruleLineNumber:c,ruleUrl:d}=s.data;if(!(r||o.length>0))return null;let u=n_(r,o,c,i);return(0,l.jsx)(A.m,{id:a,"aria-label":u,text:u,children:d?(0,l.jsx)(R.A,{"aria-labelledby":a,href:d,className:t,muted:!r,children:(0,l.jsx)(F.ShieldLockIcon,{})}):(0,l.jsx)(F.ShieldLockIcon,{className:t})})}function n_(e,t,n,i){let a="Owned by ",s=t;return e&&(a+="you",i&&(s=t.filter(e=>e!==`@${i}`)),s.length>0&&(a+=" along with ")),a+=s.join(", "),n&&(a+=` (from CODEOWNERS line ${n})`),a}try{nb.displayName||(nb.displayName="CodeownersBadge")}catch{}var nj=n(78252),nw=n(31675);let nN={hiddenIcon:"BlobActionsMenu-module__hiddenIcon--EJrTU"};function nC({oid:e,path:t,repo:n,branchName:i,isViewable:a=!0,isDeleteable:s=!0,isEditable:r=!0,shouldShowEditOptions:o=!0,copilotDiffChatProps:c,returnToPullRequestPath:d,onCommentOnFile:u,onCopyPath:m,onExpandLines:p,areLinesExpanded:h,richDiffToggle:f,codeownersText:g,codeownersUrl:y}){return(0,l.jsxs)(eN.W,{children:[(0,l.jsx)(eN.W.Anchor,{children:(0,l.jsx)(M.K,{icon:F.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible",size:"small"})}),(0,l.jsx)(eN.W.Overlay,{children:(0,l.jsxs)(_.l,{children:[f?.richDiff?.canToggleRichDiff&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(_.l.Item,{className:nw.A["hide-on-medium-up"],onSelect:f.onToggle,children:[(0,l.jsx)(_.l.LeadingVisual,{children:(0,l.jsx)("span",{className:f.isRichDiff?nN.hiddenIcon:void 0,children:(0,l.jsx)(F.CheckIcon,{})})}),"Source diff"]}),(0,l.jsxs)(_.l.Item,{className:nw.A["hide-on-medium-up"],onSelect:f.onToggle,children:[(0,l.jsx)(_.l.LeadingVisual,{children:(0,l.jsx)("span",{className:f.isRichDiff?void 0:nN.hiddenIcon,children:(0,l.jsx)(F.CheckIcon,{})})}),"Rich diff"]}),(0,l.jsx)(_.l.Divider,{className:nw.A["hide-on-medium-up"]})]}),c&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(nj.$,{...c}),(0,l.jsx)(_.l.Divider,{})]}),u&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(_.l.Item,{className:nw.A["hide-on-desktop"],onSelect:u,children:[(0,l.jsx)(_.l.LeadingVisual,{children:(0,l.jsx)(F.CommentIcon,{})}),"Comment on this file"]}),(0,l.jsx)(_.l.Divider,{className:nw.A["hide-on-desktop"]})]}),m&&(0,l.jsxs)(_.l.Item,{className:nw.A["hide-on-desktop"],onSelect:m,children:[(0,l.jsx)(_.l.LeadingVisual,{children:(0,l.jsx)(F.CopyIcon,{})}),"Copy file name"]}),p&&(0,l.jsxs)(_.l.Item,{className:nw.A["hide-on-desktop"],onSelect:p,children:[(0,l.jsx)(_.l.LeadingVisual,{children:h?(0,l.jsx)(F.FoldIcon,{}):(0,l.jsx)(F.UnfoldIcon,{})}),(0,l.jsx)("span",{children:h?"Collapse non-diff lines":"Expand all lines"})]}),(m||p)&&(0,l.jsx)(_.l.Divider,{className:nw.A["hide-on-desktop"]}),(0,l.jsxs)(_.l.LinkItem,{href:(0,ey.nD_)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:e}),inactiveText:a?void 0:"Action unavailable",children:[(0,l.jsx)(_.l.LeadingVisual,{children:(0,l.jsx)(F.EyeIcon,{})}),"View file"]}),i&&o&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(_.l.LinkItem,{href:(0,ey.Nyd)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:i,returnToPrPath:d}),inactiveText:r?void 0:"Action unavailable",children:[(0,l.jsx)(_.l.LeadingVisual,{children:(0,l.jsx)(F.PencilIcon,{})}),"Edit file"]}),(0,l.jsxs)(_.l.LinkItem,{variant:"danger",href:(0,ey.Y65)({repo:n.name,owner:n.ownerLogin,filePath:t,commitish:i}),inactiveText:s?void 0:"Action unavailable",children:[(0,l.jsx)(_.l.LeadingVisual,{children:(0,l.jsx)(F.TrashIcon,{})}),"Delete file"]})]}),g&&y&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(_.l.Divider,{className:nw.A["hide-on-desktop"]}),(0,l.jsxs)(_.l.LinkItem,{className:nw.A["hide-on-desktop"],href:y,children:[(0,l.jsx)(_.l.LeadingVisual,{children:(0,l.jsx)(F.ShieldLockIcon,{})}),g]})]})]})})]})}try{nC.displayName||(nC.displayName="BlobActionsMenu")}catch{}let nk={viewed:"MarkAsViewedButton-module__viewed--czELS",iconOnly:"MarkAsViewedButton-module__iconOnly--tQ1ah"};function nS({basePath:e,inactive:t=!1,inactiveTooltip:n,path:i,setIsCollapsed:a}){let s=(0,T.Mv)(i),{mutate:r}=function(e,{onSuccess:t,onError:n}){let i=`${e}/file_review`;return(0,J.n)({mutationFn:async({viewedStatus:e,path:t})=>{let n=await (0,es.Sr)(`${i}`,{method:e?"POST":"DELETE",headers:{Accept:"application/json"},body:{path:t,viewed:e?"viewed":void 0,_method:e?void 0:"delete"}}),a=await n.json();if(n.ok)return a;throw Error(a.error||"Unknown error occurred",{cause:n.status})},onSuccess:()=>{t()},onError:e=>{n(e)}})}(e,{onSuccess:()=>{},onError:()=>{}}),{setDiffViewed:o}=(0,T.Ud)(),c=(0,T.j5)(),{navigateToNext:d}=tQ(),u=(0,v.useCallback)(()=>{t||(r({viewedStatus:!s,path:i}),o(i,!s),c?d():a(!s))},[r,t,s,i,o,c,d,a]),m=(0,v.useMemo)(()=>s?(0,l.jsx)(F.CheckboxFillIcon,{className:"color-fg-accent"}):(0,l.jsx)("svg",{"aria-hidden":"true",fill:"none",height:"16",role:"img",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{clipRule:"evenodd",d:"M2.5 2.75C2.5 2.61193 2.61193 2.5 2.75 2.5H13.25C13.3881 2.5 13.5 2.61193 13.5 2.75V13.25C13.5 13.3881 13.3881 13.5 13.25 13.5H2.75C2.61193 13.5 2.5 13.3881 2.5 13.25V2.75ZM2.75 1C1.7835 1 1 1.7835 1 2.75V13.25C1 14.2165 1.7835 15 2.75 15H13.25C14.2165 15 15 14.2165 15 13.25V2.75C15 1.7835 14.2165 1 13.25 1H2.75Z",fill:"currentColor",fillRule:"evenodd"})}),[s]),p=(0,l.jsx)(W.Q,{"aria-pressed":s,"aria-label":s?"Viewed":"Not Viewed",inactive:t,size:"small",variant:"default",leadingVisual:()=>m,className:(0,y.$)(s&&nk.viewed,nk.iconOnly),onClick:u,children:(0,l.jsx)("span",{className:nw.A["hide-on-mobile"],children:"Viewed"})});return t&&n?(0,l.jsx)(A.m,{text:n,children:p}):p}try{nS.displayName||(nS.displayName="MarkAsViewedButton")}catch{}var nI=n(79634);async function nT({basePath:e,fullDiff:t,selectedRange:n,path:i,signal:a}){let s=new URLSearchParams;s.append("path",i),n.baseOid===t.baseOid?s.append("range",n.headOid):s.append("range",`${n.baseOid}..${n.headOid}`);let r=`${e}/page_data/${Q.u.richDiff}?${s.toString()}`;try{let e=await (0,es.Sr)(r,{signal:a});if(a?.aborted)return;let t=await (0,X.hp)(e);return(0,X.R)(e,t),t??void 0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}}var nE=n(15697);function nL(e,t){if(e.type!==t.type)return!1;let n="CONTEXT"===e.type||"ADDITION"===e.type,i="DELETION"===e.type;return n&&e.right===t.line||i&&e.left===t.line}function nR({basePath:e,diffManuallyExpanded:t,headBranchName:n,headRepoName:i,headRepoOwner:a,diffLines:s,path:r,isSelected:o=!1,reviewed:c,...d}){let u=(0,T.JA)(),{fetchContextLines:p}=(0,T.QV)(),h=(0,T.L3)().hideWhitespace?"1":"0",f=function({basePath:e,path:t}){let n=(0,T.L3)(),i=function({basePath:e,selectedRange:t,path:n}){return[Q.u.richDiff,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`,`path:${n}`]}({basePath:e,path:t,...n});return{fetcher:nT,key:i,args:{path:t,basePath:e,...n,signal:void 0}}}({basePath:e,path:r}),g=(0,v.useRef)(null),x=(0,v.useRef)(null),{helpUrl:b}=(0,nI.X)(),_=(0,T.kN)(r),{updateAllFilesCollapsedStatus:j,updateFileCollapsedStatus:C}=(0,T.JR)(),k=(0,T.GR)(),[S,I]=(0,v.useState)(!1),[E,L]=(0,v.useState)(d.richDiff?.defaultToRichDiff??!1),R=(0,T.Fm)(r),A=(0,T.ne)(r),D=(0,N.dG)({basePath:e}),P=(0,N.hG)({diffPath:r,codeownersData:D?.data}),O=(0,v.useMemo)(()=>A?A[eM.zW]?.threads??[]:[],[A]),B=(0,v.useMemo)(()=>u?function(e,t,n){let i=[],a=t.hunkPositions[n];if(!a)return i;let s=0,r=a[0];if(!r)return i;let o=!1;for(let t of e)if(o){if(i.push(t),nL(t,r.endLine)&&(o=!1,!(r=a[++s])))break}else nL(t,r.startLine)&&(o=!0,i.push(r.headerLine),i.push(t));return i}(s,u,r):s,[u,r,s]),$=(0,v.useCallback)(()=>{C(r,!1)},[r,C]),V=(0,v.useCallback)(()=>{k()&&_&&$()},[_,$,k]),U=(0,v.useCallback)(()=>{(0,w.K3)(),V()},[V]),q=(0,v.useCallback)(()=>{(0,tz.o9)()===d.pathDigest&&_&&$()},[d.pathDigest,$,_]),W=(0,v.useCallback)(()=>{V(),q()},[V,q]);(0,v.useEffect)(()=>{W()},[]),(0,v.useEffect)(()=>(m.cg?.addEventListener("hashchange",W),()=>{m.cg?.removeEventListener("hashchange",W)}),[W]);let H=(0,v.useCallback)((e,t,n)=>{if(n&&n.altKey)j(e);else{if(C(t,e),!e)return;m.cg?.requestAnimationFrame(()=>{let e=g.current?.getBoundingClientRect();e&&e.top<62&&m.cg?.scrollTo({top:e.top+m.cg.scrollY-62})})}},[j,C]),G=(0,v.useRef)((0,nE.B)({diffSummary:R})),[K,z]=(0,v.useState)(!1),Y=(0,v.useCallback)(async e=>{U(),G.current.push(e),p({contextLineRanges:G.current,path:r,w:h})},[U,p,r,h]),J=(0,v.useCallback)(async()=>{await p({contextLineRanges:[],path:r})},[p,r]),X=(0,v.useMemo)(()=>{if(d.isBinary||d.isSubmodule||d.isTooBig||(0,ny.dK)({linesChanged:d.linesChanged,newTreeEntry:d.newTreeEntry,oldTreeEntry:d.oldTreeEntry,status:d.status,truncatedReason:d.truncatedReason}))return!1;if(K)return!0;if(0===B.length)return!1;if((B[1]?.blobLineNumber||0)>1)return!0;let e=B.length,t=B[e-1]?.blobLineNumber||0,n=d.newTreeEntry?.lineCount||0;return!!(t<n)||!!(e-1<n)},[d.isBinary,d.isSubmodule,d.isTooBig,d.linesChanged,d.newTreeEntry,d.oldTreeEntry,d.status,d.truncatedReason,B,K]),Z=(0,v.useCallback)(async()=>{let e,t;G.current=[],K||G.current.push({start:1,end:Math.max(d.oldTreeEntry?.lineCount??0,d.newTreeEntry?.lineCount??0)});let n=document.activeElement;await p({contextLineRanges:G.current,path:r,w:h}),z(!K),n&&(e=null,t=null,n&&(n.hasAttribute("data-grid-cell-id")&&(e=n.getAttribute("data-grid-cell-id")),n.hasAttribute("data-file-path")&&(t=n.getAttribute("data-file-path"))),setTimeout(()=>{if(e){let t=document.querySelector(`[data-grid-cell-id="${e}"]`);if(t)return void t.focus()}if(t){let e=document.querySelector(`button[data-file-path="${t}"]`);e&&e.focus()}},0))},[K,d.oldTreeEntry?.lineCount,d.newTreeEntry?.lineCount,p,r,h]),ee=(0,v.useCallback)(()=>L(!E),[E]),et=(0,v.useMemo)(()=>d.richDiff?.canToggleRichDiff?{richDiff:d.richDiff,isRichDiff:E,onToggle:ee}:void 0,[d.richDiff,E,ee]),en=(0,v.useMemo)(()=>P&&(P.isOwnedByViewer||P.owners.length>0)?n_(P.isOwnedByViewer,P.owners,void 0,d.currentUser.login):void 0,[P,d.currentUser.login]),ei=(0,v.useMemo)(()=>P?.ruleUrl,[P]),ea=(0,v.useMemo)(()=>d.currentUser.canComment?()=>I(!0):void 0,[d.currentUser.canComment]),es=(0,v.useCallback)(()=>navigator.clipboard?.writeText(r),[r]),er=(0,v.useMemo)(()=>X?Z:void 0,[X,Z]),eo=(0,v.useMemo)(()=>({richDiff:d.richDiff,showRichDiff:E,onToggleRichDiff:L,queryConfig:f}),[d.richDiff,E,f]),el=(0,v.useMemo)(()=>{let e=new Set([]);return u&&e.add(nx.YR.diffStats).add(nx.YR.expandLines),e},[u]),{disabledFeatures:ec,disabledReasons:ed}=(0,v.useMemo)(()=>{let e=new Set([]),t=new Map;return u&&(e.add(nx.YR.markAsViewed),t.set(nx.YR.markAsViewed,"This file can only be marked as viewed on the \u201CAll files\u201D page")),{disabledFeatures:e,disabledReasons:t}},[u]);return(0,l.jsx)(nv.oO,{loadDiff:J,...d,addFileCommentButtonRef:x,basePath:e,diffManuallyExpanded:t,fileComments:O,hiddenFeatures:el,isAddingFileComment:S,isSelected:o,leftSideContent:(0,l.jsx)(v.Suspense,{children:(0,l.jsx)(nb,{className:(0,y.$)("px-1 flex-items-center flex-order-2 flex-sm-order-1",nw.A["hide-on-mobile"]),diffPath:r,pullRequestBasePath:e,viewerLogin:d.currentUser.login})}),rightSideContent:(0,l.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[!el.has(nx.YR.markAsViewed)&&(0,l.jsx)(nS,{path:r,basePath:e,inactive:ec.has(nx.YR.markAsViewed)||!!u,inactiveTooltip:ed.get(nx.YR.markAsViewed),setIsCollapsed:e=>H(e,r)}),d.currentUser.canComment&&(0,l.jsx)(M.K,{ref:x,icon:F.CommentIcon,"aria-label":"Comment on this file","aria-expanded":S,variant:"invisible",size:"small",onClick:()=>I(!0),className:nw.A["hide-on-mobile"]}),(0,l.jsx)(nC,{oid:"REMOVED"===d.status&&d.oldCommitOid?d.oldCommitOid:d.newCommitOid||"",path:r,repo:{name:i||d.repository.name,ownerLogin:a||d.repository.ownerLogin},isViewable:!d.isSubmodule,isDeleteable:!d.isSubmodule,isEditable:!d.isSubmodule,shouldShowEditOptions:d.currentUser.shouldDisplayEditOptions,branchName:n,returnToPullRequestPath:e,onCommentOnFile:ea,onCopyPath:es,onExpandLines:er,areLinesExpanded:K,richDiffToggle:et,codeownersText:en,codeownersUrl:ei})]}),canExpandOrCollapseLines:X,expandAllContextLines:Z,hasExpandedAllRanges:K,addInjectedContextLines:Y,onToggleCollapse:(e,t)=>H(t,r,e),path:r,ref:g,setIsAddingFileComment:I,collapsed:_,helpUrl:b,linesAdded:R?.linesAdded||d.linesAdded||0,linesChanged:R?.linesChanged||d.linesChanged||0,linesDeleted:R?.linesDeleted||d.linesDeleted||0,diffLines:B,richDiffState:eo})}try{nR.displayName||(nR.displayName="PullRequestDiff")}catch{}var nA=n(81945),nD=n(29731),nP=n(8431);let nO=(0,v.memo)(function({ariaLabel:e,testId:t,id:n,approximateLineCount:i=5}){let{data:a}=(0,d.ID)(),s=a?.lineSpacing==="compact"?20:25;return(0,l.jsx)("div",{className:nP.A.diffTargetable,role:"region","aria-label":e,...(0,nD.G)(t),id:n,children:(0,l.jsx)("div",{className:"border borderColor-muted",children:(0,l.jsxs)("div",{className:"d-flex flex-column gap-2 p-3",style:{minHeight:s*i},children:[(0,l.jsx)(nA.O,{height:"sm",variant:"rounded",width:"random"}),(0,l.jsx)(nA.O,{height:"sm",variant:"rounded",width:"random"}),(0,l.jsx)(nA.O,{height:"sm",variant:"rounded",width:"random"}),(0,l.jsx)(nA.O,{height:"sm",variant:"rounded",width:"random"})]})})})});try{nO.displayName||(nO.displayName="DiffEntryLoadingSkeleton")}catch{}let nB=(0,v.memo)(function({progressiveDiffEntry:e,approximateLineCount:t=5}){let{loadMore:n}=(0,T.pV)(),i=(0,t6.u)("pulls-files-skip-prefer-any-solo-entry"),[a,s]=(0,v.useState)(!1),[r,o]=(0,tM.B)(t=>{t[0]?.isIntersecting&&!a&&(s(!0),n(e,{preferAnySoloEntry:!i}))},{rootMargin:"-72px"});return(0,l.jsx)(t$.X,{onObserve:r,onUnobserve:o,children:(0,l.jsx)(nO,{ariaLabel:`Loading ${e.path}`,testId:`lazy-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})})});try{nB.displayName||(nB.displayName="LazyDiffEntryLoadingSkeleton")}catch{}let nF=(0,v.memo)(function({progressiveDiffEntry:e,approximateLineCount:t=5}){let{loadMore:n}=(0,T.pV)(),i=(0,t6.u)("pulls-files-skip-prefer-any-solo-entry");return(0,v.useEffect)(()=>{n(e,{preferAnySoloEntry:!i})},[n,e,i]),(0,l.jsx)(nO,{ariaLabel:`Loading ${e.path}`,testId:`eager-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})});try{nF.displayName||(nF.displayName="EagerDiffEntryLoadingSkeleton")}catch{}let nM=(0,v.memo)(function({linesAdded:e,linesChanged:t,linesDeleted:n,newTreeEntry:i,oldTreeEntry:a,path:s,pathDigest:r,status:o}){return(0,l.jsx)(nv.Ao,{linesAdded:e,linesChanged:t,linesDeleted:n,newTreeEntry:i,oldTreeEntry:a,path:s,pathDigest:r,status:o})});try{nM.displayName||(nM.displayName="PullRequestDiffEntryErrorFallback")}catch{}var n$=n(50683),nV=n(73189);let nU=(0,v.memo)(function({progressiveDiffEntry:e,approximateLineCount:t=5}){return(0,l.jsx)(nO,{ariaLabel:`Loading ${e.path}`,testId:`hidden-load-${e.path}`,id:`diff-${e.pathDigest}`,approximateLineCount:t})});try{nU.displayName||(nU.displayName="HiddenDiffEntryLoadingSkeleton")}catch{}let nq=(0,v.memo)(nW,(e,t)=>e.basePath===t.basePath&&e.progressiveDiffEntry.pathDigest===t.progressiveDiffEntry.pathDigest&&e.progressiveDiffEntry.renderMode===t.progressiveDiffEntry.renderMode&&e.isSelected===t.isSelected&&e.currentUser.splitPreference===t.currentUser.splitPreference&&e.currentUser.commentsPreference===t.currentUser.commentsPreference&&e.currentUser.lineSpacing===t.currentUser.lineSpacing);function nW({basePath:e,currentUser:t,diffManuallyExpanded:n,headBranchName:i,headRepoName:a,headRepoOwner:s,isSelected:r,isSelectingLineOrRange:o=!1,onScrollToAndFocusEntry:c,progressiveDiffEntry:d,pullRequestGlobalRelayId:u,repository:p,testRenderFn:h}){let f=(0,T.jT)(d.path),g=(0,T.Fm)(d.path),x=(0,T.j5)();h&&h();let b=(0,v.useRef)(!1);if((0,v.useEffect)(()=>{if(!b.current){if(!b.current&&void 0===r){let e=m.fV.hash??"",t=(0,tz.pd)(e)??"";(t=t.replace("diff-","").replace("#",""))!==d.pathDigest&&(b.current=!0)}if(r&&"HIDE"!==d.renderMode&&(!o||"RENDER"===d.renderMode)){let e=m.cg?.document.activeElement;if(e?.closest("#diff-file-tree-filter"))return;b.current=!0,c(d.pathDigest)}}},[r,o,c,d.pathDigest,d.renderMode]),"HIDE"===d.renderMode||"LAZY_AUTO_LOAD"===d.renderMode||"EAGER_AUTO_LOAD"===d.renderMode){let e=(0,l.jsx)(l.Fragment,{}),t=g?.linesChanged??5;return(g?.changeType==="REMOVED"||g?.changeType==="DELETED")&&(t=5),"HIDE"===d.renderMode?e=(0,l.jsx)(nU,{progressiveDiffEntry:d,approximateLineCount:t}):"LAZY_AUTO_LOAD"===d.renderMode?e=(0,l.jsx)(nB,{progressiveDiffEntry:d,approximateLineCount:t}):"EAGER_AUTO_LOAD"===d.renderMode&&(e=(0,l.jsx)(nF,{progressiveDiffEntry:d,approximateLineCount:t})),(0,l.jsxs)("div",{role:"region",id:`diff-${d.pathDigest}`,className:(0,y.$)(nP.A.diffTargetable,nP.A.diff),"data-targeted":r??!1,children:[(0,l.jsx)("div",{className:nP.A.diffHeaderWrapper,children:(0,l.jsx)(n$.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:`#diff-${d.pathDigest}`,canToggleRichDiff:!1,linesAdded:g?.linesAdded??0,linesChanged:g?.linesChanged??0,linesDeleted:g?.linesDeleted??0,newPath:d.path,patchStatus:"",path:d.path,onToggleExpandAllLines:nV.l,onToggleFileCollapsed:nV.l,onToggleDiffDisplay:nV.l,isInSingleFileMode:x})}),e]},`${d.pathDigest}_${d.path}`)}return f?(0,l.jsx)(I.t,{fallback:(0,l.jsx)(nM,{...f}),children:(0,l.jsx)(nR,{basePath:e,changeType:f.status,currentUser:t,diffLines:f.diffLines,diffManuallyExpanded:n,diffSize:f.diffSize,headBranchName:i,headRepoName:a,headRepoOwner:s,helpUrl:f.helpUrl,isBinary:f.isBinary,isSelected:r??!1,isSubmodule:f.isSubmodule,isTooBig:f.isTooBig,linesAdded:f.linesAdded,linesChanged:f.linesChanged,linesDeleted:f.linesDeleted,newCommitOid:f.newCommitOid,newTreeEntry:f.newTreeEntry,objectId:f.objectId,oldCommitOid:f.oldCommitOid,oldTreeEntry:f.oldTreeEntry,path:f.path,pathDigest:f.pathDigest,pullRequestGlobalRelayId:u,repository:p,reviewed:f.reviewed??!1,richDiff:f.richDiff,status:f.status,submodule:f.submodule,truncatedReason:f.truncatedReason})}):(0,l.jsx)(nM,{linesAdded:0,linesChanged:0,linesDeleted:0,path:d.path,pathDigest:d.pathDigest,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"})}try{nq.displayName||(nq.displayName="ProgressivePullRequestDiffEntry")}catch{}try{nW.displayName||(nW.displayName="ProgressivePullRequestDiffEntryUnmemoized")}catch{}function nH(){return(0,l.jsx)("div",{className:"color-bg-default position-relative border rounded-2 color-border-default mt-2 d-flex flex-column",children:(0,l.jsxs)(ez.E,{border:!1,spacious:!0,children:[(0,l.jsx)(ez.E.Heading,{children:"No changes to show"}),(0,l.jsx)(ez.E.Description,{children:"This commit does not include any file changes"})]})})}try{nH.displayName||(nH.displayName="EmptyPullRequestBlankSlate")}catch{}let nG={wrapper:"PullRequestDiffsAnimation-module__wrapper--j5QjR",imageContainer:"PullRequestDiffsAnimation-module__imageContainer--ISOgX",image:"PullRequestDiffsAnimation-module__image--MMHno",firstFrameImage:"PullRequestDiffsAnimation-module__firstFrameImage--DV3ZK",animatedImage:"PullRequestDiffsAnimation-module__animatedImage--yjDlC",reducedMotionImage:"PullRequestDiffsAnimation-module__reducedMotionImage--cBS3Y"};var nK=n(69895);let nz=n.p+"mona-hifive-first-frame-0d428028d4d7.png",nQ=n.p+"mona-hifive-reduced-motion-3a22d8eb870c.png",nY=n.p+"mona-hifive-loop-once-8c78f1af57d0.gif",nJ=()=>{let e=(0,nK.j)(),t=(0,v.useRef)(null),n=(0,v.useRef)(null);return(0,l.jsxs)("div",{className:nG.wrapper,children:[(0,l.jsxs)("div",{className:nG.imageContainer,children:[(0,l.jsx)("img",{src:nY,alt:"GIF of two octocats high fiving each other",className:(0,y.$)(nG.image,nG.animatedImage),ref:t}),(0,l.jsx)("img",{src:nz,alt:"Two octocats",className:(0,y.$)(nG.image,nG.firstFrameImage),ref:i=>{i?(i=>{let a;if(e)return;let s=new IntersectionObserver((e,n)=>{for(let i of e)i.isIntersecting&&(a=setTimeout(()=>{i.target.style.display="none",t.current&&(t.current.style.opacity="1"),n.unobserve(i.target)},1e3))},{threshold:1});return n.current=s,s.observe(i),()=>{s.disconnect(),a&&clearTimeout(a)}})(i):n.current&&(n.current.disconnect(),n.current=null)}}),(0,l.jsx)("img",{src:nQ,alt:"Two octocats high fiving each other",className:(0,y.$)(nG.image,nG.reducedMotionImage)})]}),(0,l.jsx)("span",{className:"fgColor-muted",children:"You made it to the end!"})]})},nX=(0,v.memo)(nJ);try{nJ.displayName||(nJ.displayName="PullRequestDiffsAnimationComponent")}catch{}try{nX.displayName||(nX.displayName="PullRequestDiffsAnimation")}catch{}function nZ(){let e=(0,v.useRef)(!0),{selectedFullDiffHash:t}=(0,tK.U)(),n=(0,tz.jU)(t)??void 0,i=(0,tz.yI)(t),a=(0,v.useRef)(new Map),s=(0,v.useCallback)(()=>a.current,[]);return{onScrollToAndFocusEntry:(0,v.useCallback)((n,{focusPathName:a}={})=>{let r=s().get(n);if(!r)return;let o=r,l=r.querySelector("button");if(a&&(l=r.querySelector("a")),i){let e=t.split("-")[0],n=r.querySelector(`[data-line-anchor=diff-${e}]`);n&&(l=o=n)}else e.current||(o=null);if(o){let e=m.cg?.scrollY??0,t=o.getBoundingClientRect().top+e-57-60;m.cg?.scrollTo({top:t,left:0})}l&&l.focus(),e.current=!1},[s,i,t]),selectedFullDiffHash:t,selectedPathDigest:n,isSelectingLineOrRange:i,getTargetableEntriesMap:s}}let n0=(0,v.memo)(n1);function n1({basePath:e,currentUser:t,filteredDiffSummaries:n,headBranchName:i,headRepoName:a,headRepoOwner:s,onSetFilterState:r,pullRequestGlobalRelayId:o,repository:c,showPullRequestGroups:d}){let[u,m]=(0,v.useState)(!1),p=(0,v.useRef)(null),h=(0,T.$W)(n),f=(0,T.JA)(),{onScrollToAndFocusEntry:g,getTargetableEntriesMap:y,selectedPathDigest:x,isSelectingLineOrRange:b}=nZ(),_=(0,T.qg)(),j=h.length;return 0===_?(0,l.jsx)(nH,{}):0===n.length?(0,l.jsx)(ng,{}):(0,l.jsxs)("div",{ref:p,"data-hpc":!0,className:"d-flex flex-column gap-3",children:[d&&f?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"f4 text-bold mb-0",children:[(0,l.jsx)("span",{className:"fgColor-accent",children:(0,l.jsx)(R.A,{href:"",onClick:e=>{e.preventDefault(),r({activeChangeGroupId:void 0})},children:"All files"})})," ",(0,l.jsx)("span",{className:"fgColor-muted text-normal",children:"/"})," ",f.name]}),f.description?.trim()?(0,l.jsx)("p",{children:f.description}):null]}):null,h.map(n=>(0,l.jsx)("div",{ref:e=>{let t=y();e?t.set(n.pathDigest,e):t.delete(n.pathDigest)},children:(0,l.jsx)(nq,{basePath:e,currentUser:t,diffManuallyExpanded:u,headBranchName:i,headRepoName:a,headRepoOwner:s,pullRequestGlobalRelayId:o,isSelected:void 0===x?void 0:n.pathDigest===x,isSelectingLineOrRange:b,onScrollToAndFocusEntry:g,progressiveDiffEntry:n,repository:c})},n.pathDigest)),j>=15&&(0,l.jsx)(nX,{}),(0,l.jsx)(nf.nq,{})]})}try{n0.displayName||(n0.displayName="PullRequestDiffsList")}catch{}try{n1.displayName||(n1.displayName="PullRequestDiffsListUnmemoized")}catch{}var n2=n(21132);let n3=(0,v.memo)(function({diffEntryPathDigest:e,basePath:t,currentUser:n,diffManuallyExpanded:i,filteredDiffSummaries:a,headBranchName:s,headRepoName:r,headRepoOwner:o,isSelectingLineOrRange:c,pullRequestGlobalRelayId:d,repository:u,onScrollToAndFocusEntry:m}){let p=(0,T.m9)()||e,h=(0,T.mY)().find(e=>e.pathDigest===p),f=(0,T.Fm)(h?.path||""),g=h?.path||"",x=(0,T.jT)(g),b=(0,T.j5)(),_=(0,v.useRef)(!1);if((0,v.useEffect)(()=>{_.current||h?.loadingStatus===n2.s.Loaded&&(m(p,{focusPathName:!0}),_.current=!0)},[c,m,h?.loadingStatus,p]),!a.some(e=>e.path===g))return(0,l.jsx)(ng,{});if(h&&h.loadingStatus!==n2.s.Loaded){let e=(0,l.jsx)(nO,{ariaLabel:`Loading ${g}`,testId:`eager-load-${g}`,approximateLineCount:5,id:`diff-${g}`});return(0,l.jsxs)("div",{role:"region",id:`diff-${g}`,className:(0,y.$)(nP.A.diffTargetable,nP.A.diff),"data-targeted":!1,"data-hpc":!0,children:[(0,l.jsx)("div",{className:nP.A.diffHeaderWrapper,children:(0,l.jsx)(n$.B,{areLinesExpanded:!1,canExpandOrCollapseLines:!1,fileLinkHref:`#diff-${p}`,canToggleRichDiff:!1,linesAdded:f?.linesAdded??0,linesChanged:f?.linesChanged??0,linesDeleted:f?.linesDeleted??0,newPath:g,patchStatus:"",path:g,onToggleExpandAllLines:nV.l,onToggleFileCollapsed:nV.l,onToggleDiffDisplay:nV.l,isInSingleFileMode:b})}),e]},`${p}_${g}`)}return x?(0,l.jsxs)(I.t,{fallback:(0,l.jsx)(nM,{...x}),children:[(0,l.jsx)(nR,{basePath:t,changeType:x.status,currentUser:n,diffLines:x.diffLines,diffManuallyExpanded:i,diffSize:x.diffSize,headBranchName:s,headRepoName:r,headRepoOwner:o,helpUrl:x.helpUrl,isBinary:x.isBinary,isSelected:!1,isTooBig:x.isTooBig,linesAdded:x.linesAdded,linesChanged:x.linesChanged,linesDeleted:x.linesDeleted,newCommitOid:x.newCommitOid,newTreeEntry:x.newTreeEntry,objectId:x.objectId,oldCommitOid:x.oldCommitOid,oldTreeEntry:x.oldTreeEntry,path:x.path,pathDigest:x.pathDigest,pullRequestGlobalRelayId:d,repository:u,reviewed:x.reviewed??!1,richDiff:x.richDiff,status:x.status,submodule:x.submodule,truncatedReason:x.truncatedReason}),(0,l.jsx)(nf.nq,{})]}):(0,l.jsx)(nM,{linesAdded:0,linesChanged:0,linesDeleted:0,path:g,pathDigest:e,newTreeEntry:void 0,oldTreeEntry:void 0,status:"MODIFIED"})});try{n3.displayName||(n3.displayName="SingleFileModePullRequestDiffEntry")}catch{}let n4=(0,v.memo)(function({basePath:e,currentUser:t,filteredDiffSummaries:n,headBranchName:i,headRepoName:a,headRepoOwner:s,pullRequestGlobalRelayId:r,repository:o}){let c=(0,T.HZ)(),d=(0,v.useMemo)(()=>Object.values(c??{}).filter(e=>null!==e),[c])[0],u=(0,T.m9)(),{onScrollToAndFocusEntry:m,getTargetableEntriesMap:p,isSelectingLineOrRange:h}=nZ(),f=(0,T.qg)(),g=(0,T.uh)()[0],y=(0,T.zK)(),x=(0,T.mF)(),{navigateToSelectedComment:b,navigateToSelectedAnnotation:_,handleHashUpdate:j}=(0,T.Lh)(),{setSelectedHash:N}=(0,tK.U)(),C=(0,v.useRef)(!0),k=(0,T.mY)().find(e=>e.pathDigest===u),{loadMore:S}=(0,T.pV)(),I=(0,v.useCallback)(()=>{y?b(y):x&&!isNaN(Number(x))?_(Number(x)):u&&k?S(k):!u&&g?.pathDigest&&(N(g.pathDigest),(0,w.Zu)(`diff-${g.pathDigest}`))},[g?.pathDigest,S,_,b,x,y,u,k,N]);if((0,v.useEffect)(()=>{C.current&&(I(),C.current=!1)},[]),(0,v.useEffect)(()=>{let e=()=>{j()};return j(),window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}},[j]),0===f)return(0,l.jsx)(nH,{});if(0===n.length)return(0,l.jsx)(ng,{});let E=u||d?.pathDigest||g?.pathDigest;return E?(0,l.jsx)("div",{ref:e=>{let t=p();e?t.set(E,e):t.delete(E)},children:(0,l.jsx)(n3,{diffEntryPathDigest:E,basePath:e,currentUser:t,diffManuallyExpanded:!1,filteredDiffSummaries:n,headBranchName:i,headRepoName:a,headRepoOwner:s,pullRequestGlobalRelayId:r,repository:o,onScrollToAndFocusEntry:m,isSelectingLineOrRange:h})}):null});try{n4.displayName||(n4.displayName="SingleFileModeDiffEntryNavigator")}catch{}function n5({lines:e}){return(0,l.jsxs)("div",{className:"border borderColor-muted rounded",children:[(0,l.jsx)("div",{className:"border-bottom bgColor-muted rounded-top-2",style:{padding:"var(--base-size-6) var(--base-size-8)",borderColor:"var(--borderColor-muted)"},children:(0,l.jsx)("div",{className:"d-flex flex-items-center",style:{height:"var(--control-small-size)"},children:(0,l.jsx)(nA.O,{height:"sm",variant:"rounded",width:"random"})})}),(0,l.jsx)("div",{className:"d-flex flex-column gap-2 p-3",children:Array.from({length:e||5}).map((e,t)=>(0,l.jsx)(nA.O,{height:"sm",variant:"rounded",width:"random"},`loading-skeleton-${t}`))})]})}try{n5.displayName||(n5.displayName="EntireDiffLoadingSkeleton")}catch{}function n6({basePath:e,baseSha:t,forceUnifiedView:n,headSha:i,initialData:a,treeCollapsedByDefault:s,useChangeGroups:r,useInlineComments:o,useEditOptions:c,useFileTree:d,useAdvancedToolbar:u,useBasicToolbar:p}){let h=(0,v.useMemo)(()=>({useChangeGroups:r??!1,useInlineComments:o??!1,useEditOptions:c??!1,useFileTree:d??!1,useAdvancedToolbar:u??!1,useBasicToolbar:p??!1,forceUnifiedView:n??!1,treeCollapsedByDefault:s??!1}),[r,o,c,d,u,p,n,s]),f=a?a.pullRequest.comparison.headOid:i,g=a?a.pullRequest.comparison.baseOid:t;if(!f)throw Error("DiffComparisonViewer: headSha is required if initialData is not provided");let{data:y,isLoading:x}=function({basePath:e,headSha:t,baseSha:n,shouldFetch:i}){let a=new URLSearchParams;n===t?a.append("range",t??""):n&&t?a.append("range",`${n}..${t}`):t&&a.append("range",t);let s=`${e}/page_data/${Q.u.baseComparisonInfo}?${a.toString()}`,r=function({basePath:e,selectedRange:t}){return[Q.u.baseComparisonInfo,e,`baseOid:${t.baseOid}`,`headOid:${t.headOid}`]}({basePath:e,selectedRange:{baseOid:n??"base-sha-not-provided",headOid:t}});return(0,ea.I)({queryKey:r,queryFn:async()=>{if(!t)return;let e=await (0,es.QJ)(s);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()??void 0},staleTime:1/0,enabled:i})}({basePath:e,headSha:f,baseSha:g,shouldFetch:!a}),b=a??y;return(0,l.jsx)(l.Fragment,{children:b&&!x?(0,l.jsx)(nc.Kg,{basePageDataUrl:b.pullRequest.pathName,children:(0,l.jsx)(eu.Dp,{baseRefOid:b.pullRequest.comparison.baseOid,path:m.fV.pathname??"",children:(0,l.jsx)(no.v,{initData:b,children:(0,l.jsx)(n7,{...b,configOpts:h})})})}):(0,l.jsxs)("div",{className:"width-full",children:[(0,l.jsx)("div",{className:nr.SkeletonWrapper,children:(0,l.jsx)("div",{className:nr.SkeletonIconWrapper,children:(0,l.jsx)(nA.O,{width:"lg",height:"lg",variant:"rounded"})})}),(0,l.jsxs)("div",{className:"d-flex flex-column gap-3 p-3",children:[(0,l.jsx)(n5,{lines:4}),(0,l.jsx)(n5,{lines:8}),(0,l.jsx)(n5,{lines:5})]})]})})}function n7({codeowners:e,commits:t,configOpts:n,diffSummaries:i,fileFilter:a,pullRequest:s,repository:r,markers:o,pageLimits:m,urls:x,user:b,isSingleFileMode:_}){(0,v.useMemo)(()=>{if(o&&i){for(let e of i)if(e.markersMap)for(let t in e.markersMap){let n=e.markersMap[t];if(n?.threads)for(let e of n.threads){let n=function(e,t){if("FILE"===e)return;let n=e[0];if(!ns(n))throw Error(`Invalid diff side character: ${n}`);let i=Number(e.slice(1)),a=-1,s="R";if(t.start){a=parseInt(t.start.slice(1));let e=t.start[0];ns(e)&&(s=e)}else a=i,s=n;return{endLine:i,endDiffSide:na[n],startLine:a,startDiffSide:na[s],isOutdated:!!t.outdatedReason}}(t,e),i=o.threads[Number(e.id)];if(i&&n){let{isOutdated:e,...t}=n;i.positioning=n,i.subject=t}}}}},[i,o]),(0,h.L)(!0);let j=function(e){let t=(0,d.C0)(e.viewSettings.splitPreference),n=(0,d.Qn)(e.viewSettings.hideWhitespace);return(0,v.useMemo)(()=>({hideWhitespace:n,splitPreference:t,lineSpacing:e.viewSettings.lineSpacing,commentsPreference:e.viewSettings.commentsPreference}),[e.viewSettings.commentsPreference,e.viewSettings.lineSpacing,t,n])}(b),{mutate:w}=(0,c.U)({onSuccess:()=>{},onError:()=>{}}),{data:k}=(0,d.ID)(j),I=(0,v.useCallback)(()=>{w({commentsPreference:k?.commentsPreference===u.sI.Visible?u.sI.Collapsed:u.sI.Visible})},[k?.commentsPreference,w]),E=(0,v.useMemo)(()=>({avatarURL:b.currentUserAvatarUrl||"",login:b.currentUserLogin||"",tabSize:b.tabSize,splitPreference:n.forceUnifiedView?"unified":k?.splitPreference??"unified",shouldDisplayComments:n.useInlineComments??!1,shouldDisplayEditOptions:n.useEditOptions??!1,lineSpacing:k?.lineSpacing??"relaxed",canComment:b.canComment,canApplySuggestion:b.canApplySuggestion,commentsPreference:k?.commentsPreference??"visible",hasCopilotAccess:b.hasCopilotAccess}),[n.forceUnifiedView,n.useEditOptions,n.useInlineComments,k?.commentsPreference,k?.lineSpacing,k?.splitPreference,b.canApplySuggestion,b.canComment,b.currentUserAvatarUrl,b.currentUserLogin,b.hasCopilotAccess,b.tabSize]),{splitPagePaneHidden:L,splitPageContentHidden:R,isTreeExpanded:A,isMobileTreeExpanded:D,treeToggleElement:P,treeContainerElement:O,collapseTree:B}=function(e,t,n){let[i]=(0,np.I)(()=>!1,!0,[]),a=(0,v.useRef)(null),s=(0,v.useRef)(null),r=(0,v.useRef)(null),o=nm.Gy.large,[c,d]=(0,v.useState)(t),[u,m]=(0,v.useState)(!1),[p,h]=(0,v.useState)(!1),f=(0,v.useCallback)(()=>{let e=(0,nm.nn)(window.innerWidth);if(a.current&&e>o){let e=a.current?.getBoundingClientRect().width??0;(0,nm.nn)(e)<o&&h(!0)}e<=o?(m(!0),requestAnimationFrame(()=>r.current?.focus())):(d(!0),(0,nh.B)(!0,n),requestAnimationFrame(()=>s.current?.focus()))},[o,n]),g=(0,v.useCallback)(()=>{let e=(0,nm.nn)(window.innerWidth);h(!1),m(!1),e<=o?requestAnimationFrame(()=>r.current?.focus()):(d(!1),(0,nh.B)(!1,n),requestAnimationFrame(()=>s.current?.focus()))},[o,n]),y=(0,v.useMemo)(()=>(0,l.jsx)(nu.L,{expanded:c,alignment:"left",ariaLabel:c?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:s,onToggleExpanded:()=>{c?g():f()},className:"d-none d-lg-flex position-relative",size:"small"}),[c,e,g,f]),x=(0,v.useMemo)(()=>(0,l.jsx)(nu.L,{expanded:u,alignment:"left",ariaLabel:u?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:r,onToggleExpanded:()=>{u?g():f()},className:"d-lg-none position-relative",size:"small"}),[u,e,g,f]),b=(0,v.useMemo)(()=>(0,l.jsx)("div",{ref:a,style:{width:"100%"}}),[]);return{splitPagePaneHidden:i&&!t,splitPageContentHidden:p,isTreeExpanded:c,isMobileTreeExpanded:u,expandTree:f,collapseTree:g,treeToggleElement:(0,v.useMemo)(()=>(0,l.jsxs)(l.Fragment,{children:[x,y]}),[x,y]),treeContainerElement:b}}(ep,b.isFileTreeExpanded&&!n.treeCollapsedByDefault,E),F={basePath:s.pathName};e&&(F.initialData=e);let{data:M}=(0,N.dG)(F),{setCodeowners:$}=(0,T.wh)();(0,v.useEffect)(()=>{$(M)},[M,$]);let V=(0,T.qg)(),U=(0,T.I8)(),{updateDiffFilter:q}=(0,T.or)();(0,v.useEffect)(()=>{q({...a.initialState,unselectedFileExtensions:new Set(a.initialState.unselectedFileExtensions)})},[q,a.initialState]);let W=(0,T.mU)(),H=(0,v.useCallback)(e=>{q(e,!0)},[q]),G=(0,v.useCallback)(()=>{(D||R)&&B()},[B,D,R]),K=(0,v.useMemo)(()=>(0,l.jsx)(C,{basePath:s.pathName,fileFilterMenuOptions:a.menuOptions,fileFilterState:U,setFileFilterState:H,viewerLogin:E.login,filterSize:A?"medium":"small"}),[E.login,a.menuOptions,U,A,s.pathName,H]),z=(0,T.gt)(),Z=n.useChangeGroups&&z;!function({changeGroupsEnabled:e}){let t=(0,T.gt)(),n=(0,T.iY)(),i=!!(n&&n.length>0),a=(0,t6.u)("generate_groups_on_files_view"),{mutate:s}=function(){let e=(0,Y.e)(Q.u.generateChangeGroups),{updateChangeGroupGeneration:t}=(0,T.wL)();return(0,J.n)({mutationFn:async()=>{let t=await (0,X.q$)(e,{method:"POST"}),n=await (0,X.hp)(t);return(0,X.R)(t,n),n},onSuccess:e=>{t(e)}})}(),r=(0,T.Fl)(),o=r&&(function(e){switch(e){case"ABANDONED":case"FAILED":case"SKIPPED":return!0;default:return!1}}(r.state)||!er(r.state)),l=(0,eu.ww)(),c=(0,v.useRef)(!1);(0,v.useEffect)(()=>{c.current||!a||!e||!t||i||l||o||(s(),c.current=!0)},[t,a,s,i,o,l,e])}({changeGroupsEnabled:Z});let{aliveChannel:ee,bannersData:et}=(0,nl.o)(),en=(0,S.G7)("pull_request_groups_scroll_groups");return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.ak,{commands:{"commit-diff-view:collapse-expand-comments":I}}),O,n.useAdvancedToolbar||n.useBasicToolbar?(0,l.jsxs)(l.Fragment,{children:[n.useAdvancedToolbar&&(0,l.jsx)(nn,{changeGroupsPreferenceAvailable:Z,commits:t,currentUserLogin:b.currentUserLogin,fileFilter:K,isFileTreeExpanded:A,lastReviewOid:b.lastReviewOid,pageLimits:m,pullRequest:s,repository:r,shouldShowViewedFilesCount:b.shouldShowViewedFilesCount,totalFilesCount:V,treeToggleElement:P,bannersData:et,urls:x,user:b,aliveChannel:ee}),n.useBasicToolbar&&(0,l.jsx)(nd,{fileFilter:K,isFileTreeExpanded:A,shouldShowViewedFilesCount:b.shouldShowViewedFilesCount,totalFilesCount:V,treeToggleElement:P}),D&&(0,l.jsx)(f.l,{onClose:()=>B(),position:{narrow:"fullscreen",regular:"left",wide:"left"},title:"Files",className:"p-0",children:(0,l.jsx)(eh,{allowPullRequestGroups:Z,fileFilter:K,filteredDiffs:W,onFileSelected:G,onSetFilterState:H})})]}):null,n.useFileTree?(0,l.jsx)(g.O7.Pane,{position:"start",sticky:!0,offsetHeader:n.useBasicToolbar?"50px":"60px","aria-label":"File tree",padding:"none",className:(0,y.$)(en&&nr.PaneScroll,!en&&nr.PaneOverflowVisible,L?nr.HiddenPane:nr.Pane,D&&nr.MobileExpanded,A&&nr.TreeExpanded,R&&nr.MainContentHidden),divider:{regular:R?"none":"line",narrow:"none"},widthStorageKey:"diff-tree-pane-width",resizable:!R,children:(0,l.jsx)(eh,{allowPullRequestGroups:Z,className:(0,y.$)(em.sidebar,nr.PaneContain,!en&&em.FileTreePadTopFilter),fileFilter:K,filteredDiffs:W,onFileSelected:G,onSetFilterState:H})}):null,(0,l.jsxs)(g.O7.Content,{as:"div",width:"full",hidden:{narrow:!1,regular:R},padding:"none",className:(0,y.$)(nr.Content,A&&nr.TreeExpanded),children:[(0,l.jsx)(ev,{pageLimits:m,repository:r,urls:x}),_?(0,l.jsx)(n4,{basePath:s.pathName,currentUser:E,filteredDiffSummaries:W,headBranchName:s.headBranch,headRepoName:s.headRepositoryName,headRepoOwner:s.headRepositoryOwnerLogin,pullRequestGlobalRelayId:s.globalRelayId,repository:r}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(n0,{basePath:s.pathName,currentUser:E,headBranchName:s.headBranch,headRepoName:s.headRepositoryName,headRepoOwner:s.headRepositoryOwnerLogin,onSetFilterState:H,pullRequestGlobalRelayId:s.globalRelayId,filteredDiffSummaries:W,repository:r,showPullRequestGroups:!0})})]})]})}function n8(e){return(0,l.jsx)("div",{className:(0,y.$)(nr.Container,e.className),children:(0,l.jsx)(g.O7,{children:e.children})})}let n9=Object.assign({},{Container:n8,Header:g.O7.Header,Viewer:n6});try{(s=Some).displayName||(s.displayName="Some")}catch{}try{(r=Some).displayName||(r.displayName="Some")}catch{}try{n6.displayName||(n6.displayName="BaseDiffComparisonViewer")}catch{}try{n7.displayName||(n7.displayName="InternalDiffComparisonViewer")}catch{}try{(o=FilterFilterComponent).displayName||(o.displayName="FilterFilterComponent")}catch{}try{n8.displayName||(n8.displayName="Container")}catch{}try{n9.displayName||(n9.displayName="DiffComparisonViewer")}catch{}},11128:(e,t,n)=>{n.d(t,{n:()=>c});var i=n(74848),a=n(21728),s=n(38621),r=n(21373);let o={errorContainer:"ErrorDisplay-module__errorContainer--r2xoZ",errorNotice:"ErrorDisplay-module__errorNotice--Ey4vJ",errorIcon:"ErrorDisplay-module__errorIcon--SP3WM",errorTitle:"ErrorDisplay-module__errorTitle--P8tnN",errorText:"ErrorDisplay-module__errorText--c4NUQ",errorActions:"ErrorDisplay-module__errorActions--NW0lt"};var l=n(22053);function c(e){let t,n,c,u,m,p,h,f=(0,a.c)(17),{additionalActions:g,errors:y,onFixErrorClick:v,title:x}=e,{isReadonly:b}=(0,l.a)();return f[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(s.AlertIcon,{className:o.errorIcon,size:"medium"}),f[0]=t):t=f[0],f[1]!==x?(n=(0,i.jsx)("h2",{className:o.errorTitle,children:x}),f[1]=x,f[2]=n):n=f[2],f[3]!==y?(c=y.map(d),f[3]=y,f[4]=c):c=f[4],f[5]!==n||f[6]!==c?(u=(0,i.jsxs)("div",{className:o.errorNotice,children:[n,c]}),f[5]=n,f[6]=c,f[7]=u):u=f[7],f[8]!==b||f[9]!==v?(m=!b&&v&&(0,i.jsx)(r.Q,{leadingVisual:s.BeakerIcon,onClick:v,children:"Try to fix it"}),f[8]=b,f[9]=v,f[10]=m):m=f[10],f[11]!==g||f[12]!==m?(p=(0,i.jsxs)("div",{className:o.errorActions,children:[g,m]}),f[11]=g,f[12]=m,f[13]=p):p=f[13],f[14]!==u||f[15]!==p?(h=(0,i.jsxs)("div",{className:o.errorContainer,children:[t,u,p]}),f[14]=u,f[15]=p,f[16]=h):h=f[16],h}function d(e){return(0,i.jsx)("p",{className:o.errorText,children:e},e)}try{c.displayName||(c.displayName="ErrorDisplay")}catch{}},11607:(e,t,n)=>{n.d(t,{$:()=>c});var i=n(74848),a=n(21728),s=n(34164),r=n(96540),o=n(88934);let l={button:"Button-module__button--hMmd1",small:"Button-module__small--xYPhJ",medium:"Button-module__medium--d64dr",condensed:"Button-module__condensed--WrsZL",iconOnly:"Button-module__iconOnly--NkD70",default:"Button-module__default--fN_4Y",disabled:"Button-module__disabled--tNL94",invisible:"Button-module__invisible--lYAq6",icon:"Button-module__icon--Qd_AY",text:"Button-module__text--VDmpz"},c=(0,r.forwardRef)((e,t)=>{let n,r,c,d,u,m,p,h,f,g,y,v,x,b,_,j,w,N=(0,a.c)(65);N[0]!==e?({size:m,variant:p,condensed:h,iconOnly:f,icon:d,className:r,children:n,disabled:c,...u}=e,N[0]=e,N[1]=n,N[2]=r,N[3]=c,N[4]=d,N[5]=u,N[6]=m,N[7]=p,N[8]=h,N[9]=f):(n=N[1],r=N[2],c=N[3],d=N[4],u=N[5],m=N[6],p=N[7],h=N[8],f=N[9]);let C=void 0===p?"default":p,k=void 0!==h&&h,S=void 0!==f&&f,I=l[void 0===m?"small":m],T=l[C],E=k&&l.condensed,L=S&&l.iconOnly,R=c&&l.disabled;N[10]!==r||N[11]!==I||N[12]!==T||N[13]!==E||N[14]!==L||N[15]!==R?(g=(0,s.$)(l.button,I,T,E,L,R,r),N[10]=r,N[11]=I,N[12]=T,N[13]=E,N[14]=L,N[15]=R,N[16]=g):g=N[16];let A=g;N[17]!==d?(y=null!=d?(0,i.jsx)("span",{className:l.icon,children:d}):null,N[17]=d,N[18]=y):y=N[18],N[19]!==n||N[20]!==S?(v=!S&&n?(0,i.jsx)("span",{className:l.text,children:n}):null,N[19]=n,N[20]=S,N[21]=v):v=N[21],N[22]!==y||N[23]!==v?(x=(0,i.jsxs)(i.Fragment,{children:[y,v]}),N[22]=y,N[23]=v,N[24]=x):x=N[24];let D=x;if("to"in u){let e,n,a,s;return N[25]!==u?({to:a,onClick:e,...n}=u,N[25]=u,N[26]=e,N[27]=n,N[28]=a):(e=N[26],n=N[27],a=N[28]),N[29]!==A||N[30]!==D||N[31]!==c||N[32]!==e||N[33]!==n||N[34]!==t||N[35]!==a?(s=(0,i.jsx)(o.N_,{ref:t,to:a,className:A,"aria-disabled":c,onClick:e,...n,children:D}),N[29]=A,N[30]=D,N[31]=c,N[32]=e,N[33]=n,N[34]=t,N[35]=a,N[36]=s):s=N[36],s}if("href"in u){let e,n,a,s,r,o;return N[37]!==u?({href:e,target:r,rel:a,onClick:n,...s}=u,N[37]=u,N[38]=e,N[39]=n,N[40]=a,N[41]=s,N[42]=r):(e=N[38],n=N[39],a=N[40],s=N[41],r=N[42]),N[43]!==A||N[44]!==D||N[45]!==c||N[46]!==e||N[47]!==n||N[48]!==a||N[49]!==s||N[50]!==t||N[51]!==r?(o=(0,i.jsx)("a",{ref:t,href:e,target:r,rel:a,className:A,"aria-disabled":c,onClick:n,...s,children:D}),N[43]=A,N[44]=D,N[45]=c,N[46]=e,N[47]=n,N[48]=a,N[49]=s,N[50]=t,N[51]=r,N[52]=o):o=N[52],o}N[53]!==u?({onClick:b,type:j,..._}=u,N[53]=u,N[54]=b,N[55]=_,N[56]=j):(b=N[54],_=N[55],j=N[56]);let P=void 0===j?"button":j;return N[57]!==A||N[58]!==D||N[59]!==c||N[60]!==b||N[61]!==_||N[62]!==t||N[63]!==P?(w=(0,i.jsx)("button",{ref:t,type:P,onClick:b,disabled:c,className:A,..._,children:D}),N[57]=A,N[58]=D,N[59]=c,N[60]=b,N[61]=_,N[62]=t,N[63]=P,N[64]=w):w=N[64],w});c.displayName="Button"},12357:(e,t,n)=>{n.d(t,{U:()=>S});var i=n(74848),a=n(21728),s=n(4817);let r={outputValue:"OutputDisplay-module__outputValue--I7SuT",jsonOutput:"OutputDisplay-module__jsonOutput--NA93D",markdownOutput:"OutputDisplay-module__markdownOutput--c47bk"};var o=n(85094),l=n(98755);let c={container:"CodeBlocks-module__container--GV7vX",copyContainer:"CodeBlocks-module__copyContainer--PlsVH",copyContent:"CodeBlocks-module__copyContent--_B0qO",copyButton:"CodeBlocks-module__copyButton--xrG5L",immersive:"CodeBlocks-module__immersive--pP6K5",code:"CodeBlocks-module__code--wvK8k",codeContainer:"CodeBlocks-module__codeContainer--wOuWu",codeWrap:"CodeBlocks-module__codeWrap--YQDq8"};var d=n(96540),u=n(57826),m=n(34164),p=n(53419);function h(e){let t,n,s,r,o,h,f,g,y,v=(0,a.c)(18),{children:x,code:b}=e,_=(0,d.useId)(),{chatMode:j,wrapCodeLines:w}=(0,d.useContext)(u.F);v[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.$)(c.container,c.immersive),v[0]=t):t=v[0],v[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.$)(c.copyContainer),s=(0,m.$)(c.copyContent),v[1]=n,v[2]=s):(n=v[1],s=v[2]),v[3]!==j?(r=()=>{(0,p.BI)("dotcom_chat.activate",{target:"CODE_BLOCK_COPY",mode:j})},v[3]=j,v[4]=r):r=v[4],v[5]!==b||v[6]!==r?(o=(0,i.jsx)("div",{className:n,children:(0,i.jsx)("div",{className:s,children:(0,i.jsx)(l.T,{textToCopy:b,ariaLabel:"Copy code",className:c.copyButton,size:"small",onCopy:r})})}),v[5]=b,v[6]=r,v[7]=o):o=v[7],v[8]===Symbol.for("react.memo_cache_sentinel")?(h=(0,m.$)(c.codeContainer),v[8]=h):h=v[8];let N=w&&c.codeWrap;return v[9]!==N?(f=(0,m.$)(N),v[9]=N,v[10]=f):f=v[10],v[11]!==x||v[12]!==f?(g=(0,i.jsx)("div",{className:h,children:(0,i.jsx)("pre",{className:c.code,tabIndex:0,children:(0,i.jsx)("code",{className:f,children:x})})}),v[11]=x,v[12]=f,v[13]=g):g=v[13],v[14]!==_||v[15]!==o||v[16]!==g?(y=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("figure",{className:t,"aria-labelledby":_,children:[o,g]})}),v[14]=_,v[15]=o,v[16]=g,v[17]=y):y=v[17],y}try{h.displayName||(h.displayName="CodeBlocksForLoop")}catch{}var f=n(47970);let g="data-codeblock-for-loop-props",y=(0,o.F)(g),v={code:(e,t)=>{let n=(0,o.k)(e,g);return n?(0,i.jsx)(h,{...n,children:e.children}):t}};var x=n(90122),b=n(76219),_=n(69726);let j={diagramContainer:"Mermaid-module__diagramContainer--YUzME",hiddenSourceCode:"Mermaid-module__hiddenSourceCode--dlgHV",loaderContainer:"Mermaid-module__loaderContainer--pyhaT"},w="data-mermaid-props",N=(0,o.F)(w);function C(e){let t,n,s,r,o,l,c,d,u=(0,a.c)(18),{code:p,identity:h,viewscreenHost:f}=e,g=`${f}/markdown/mermaid`,y=encodeURIComponent(p);u[0]!==y?(t=btoa(y),u[0]=y,u[1]=t):t=u[1];let v=t;u[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,m.$)("js-render-needs-enrichment","render-needs-enrichment",j.diagramContainer),u[2]=n):n=u[2];let x=`${g}?data=${v}`;return u[3]!==p?(s=JSON.stringify({data:p}),u[3]=p,u[4]=s):s=u[4],u[5]!==p?(r=(0,i.jsx)("div",{className:j.hiddenSourceCode,children:(0,i.jsx)("pre",{lang:"mermaid",children:p})}),u[5]=p,u[6]=r):r=u[6],u[7]!==p||u[8]!==s||u[9]!==r?(o=(0,i.jsx)("div",{className:"js-render-enrichment-target","data-json":s,"data-plain":p,children:r}),u[7]=p,u[8]=s,u[9]=r,u[10]=o):o=u[10],u[11]===Symbol.for("react.memo_cache_sentinel")?(l=(0,m.$)("js-render-enrichment-loader",j.loaderContainer),u[11]=l):l=u[11],u[12]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)("span",{className:l,role:"presentation",children:(0,i.jsx)(_.A,{})}),u[12]=c):c=u[12],u[13]!==f||u[14]!==h||u[15]!==x||u[16]!==o?(d=(0,i.jsxs)("section",{className:n,"data-identity":h,"data-host":f,"data-src":x,"data-type":"mermaid","aria-label":"Mermaid diagram rendered output container",children:[o,c]}),u[13]=f,u[14]=h,u[15]=x,u[16]=o,u[17]=d):d=u[17],d}let k={code:(e,t)=>{if(!e.className?.includes("language-mermaid"))return t;let n=(0,o.k)(e,w);return n?(0,i.jsx)(C,{code:n.code,identity:n.identity,viewscreenHost:n.viewscreenHost}):t}};try{C.displayName||(C.displayName="MermaidRenderer")}catch{}function S(e){let t,n,o,l,c,d,u=(0,a.c)(15),{className:p,isRunning:h,nodeValue:g,renderAsJson:_}=e,j=void 0!==_&&_,{previewUrl:w}=(0,b.U)();if(u[0]===Symbol.for("react.memo_cache_sentinel")?(t={transformMarkdown:e=>(0,f.YR)(e,"code",e=>{e.data={...e.data,hName:"code",hProperties:{[y]:JSON.stringify({language:e.lang??"",code:e.value,startOffset:e.position?.start.offset??-1,endOffset:e.position?.end.offset??-1})}}}),transformHtml:e=>(0,f.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&"code"===i.tagName&&y in i.properties&&n.children.splice(t,1,i)}),reactComponents:v},u[0]=t):t=u[0],u[1]!==w){var C;n=[t],w&&n.push((C={viewscreenHost:w},{transformMarkdown:e=>(0,f.YR)(e,"code",e=>{"mermaid"===e.lang&&(e.data={...e.data,hName:"code",hProperties:{className:["language-mermaid"],[N]:JSON.stringify({code:e.value,identity:`mermaid-${Math.random().toString(36).slice(2,11)}`,viewscreenHost:C.viewscreenHost})}})}),transformHtml:e=>(0,f.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&"code"===i.tagName&&N in i.properties&&n.children.splice(t,1,i)}),reactComponents:k})),u[1]=w,u[2]=n}else n=u[2];let S=n;u[3]!==g?(o=(0,x.DO)(g),u[3]=g,u[4]=o):o=u[4];let I=o;return u[5]!==p?(l=(0,m.$)(r.outputValue,p),u[5]=p,u[6]=l):l=u[6],u[7]!==S||u[8]!==h||u[9]!==j||u[10]!==I?(c=j?(0,i.jsx)("pre",{className:r.jsonOutput,children:I}):(0,i.jsx)(s.To,{extensions:S,className:r.markdownOutput,isStreaming:h,markdown:I}),u[7]=S,u[8]=h,u[9]=j,u[10]=I,u[11]=c):c=u[11],u[12]!==l||u[13]!==c?(d=(0,i.jsx)("div",{className:l,children:c}),u[12]=l,u[13]=c,u[14]=d):d=u[14],d}try{S.displayName||(S.displayName="OutputDisplay")}catch{}},12465:(e,t,n)=>{n.d(t,{P:()=>u,W:()=>m});var i=n(21728),a=n(94747),s=n(97665),r=n(46747),o=n(99519),l=n(99993),c=n(33026);function d(e){let t,n,s=(0,i.c)(5),r=(0,o.EY)();return s[0]!==r?(t=async e=>{let{loopID:t,updateFn:n}=e;return await r.updateLoop(t,n)},s[0]=r,s[1]=t):t=s[1],s[2]!==e||s[3]!==t?(n={mutationFn:t,...e},s[2]=e,s[3]=t,s[4]=n):n=s[4],(0,a.n)(n)}function u(){let e,t=(0,i.c)(2),n=(0,s.jE)();return t[0]!==n?(e={onMutate:async e=>{let{loopID:t,updateFn:i}=e;await n.cancelQueries({queryKey:(0,l.c_)(t,c.kj)});let a=n.getQueryData((0,l.c_)(t,c.kj)),s=a?.version?n.getQueryData((0,l.c_)(t,a.version)):null;if(a){let e=i(a);n.setQueryData((0,l.c_)(t,c.kj),e),e.version&&n.setQueryData((0,l.c_)(t,e.version),e)}return{previousDraftLoop:a,previousVersionedLoop:s,loopID:t}},onError:(e,t,i)=>{i?.previousDraftLoop&&(n.setQueryData((0,l.c_)(i.loopID,c.kj),i.previousDraftLoop),i.previousVersionedLoop&&i.previousDraftLoop.version&&n.setQueryData((0,l.c_)(i.loopID,i.previousDraftLoop.version),i.previousVersionedLoop))}},t[0]=n,t[1]=e):e=t[1],d(e)}function m(){let e,t,n=(0,i.c)(6),a=(0,s.jE)(),o=d(),u=(0,r.d)(o.mutate,500);n[0]!==u||n[1]!==a?(e=async(e,t)=>{let{loopID:n,updateFn:i}=e;await a.cancelQueries({queryKey:(0,l.c_)(n,c.kj)});let s=i(a.getQueryData((0,l.c_)(n,c.kj))??null);return a.setQueryData((0,l.c_)(n,c.kj),s),u({loopID:n,updateFn:i}),t?.onSuccess?.(),s},n[0]=u,n[1]=a,n[2]=e):e=n[2];let m=e;return n[3]!==m||n[4]!==o?(t={...o,mutate:m},n[3]=m,n[4]=o,n[5]=t):t=n[5],t}},13107:(e,t,n)=>{n.d(t,{NF:()=>g,QS:()=>u,VO:()=>h,wW:()=>y});var i=n(74848),a=n(73017),s=n(96379),r=n(57352),o=n(69726),l=n(96540),c=n(75202),d=n(65510);function u(e,t){let n=encodeURIComponent(t);return`/codespaces?codespace%5Bref%5D=${n}&current_branch=${n}&event_target=REPO_PAGE&repo=${e}`}function m(e){return(0,i.jsxs)("span",{children:["An unexpected error occurred. Please"," ",(0,i.jsx)(r.A,{inline:!0,href:e,children:"contact support"})," ","for more information."]})}function p({header:e,message:t}){return(0,i.jsxs)("div",{className:"blankslate",children:[(0,i.jsx)("p",{className:"fgColor-default text-bold mb-1",children:e}),(0,i.jsx)("p",{className:"mt-2 mx-4",children:t})]})}function h({children:e}){return(0,i.jsx)("div",{className:"d-flex flex-justify-center",children:(0,i.jsx)(c.t,{fallback:(0,i.jsx)(p,{header:"Codespaces data failed to load.",message:"Refresh the page and try again."}),children:(0,i.jsx)(l.Suspense,{fallback:(0,i.jsx)("div",{className:"m-2",children:(0,i.jsx)(o.A,{})}),children:e})})})}function f({codespacesPath:e}){let{data:t}=(0,d.U)({queryKey:["CodespacesTabContent.content",e],queryFn:async()=>{let t=await (0,s.QJ)(e);if(t.status>=400&&t.status<=499)return"";if(!t.ok)throw Error(`HTTP ${t.status}`);return await t.text()}});return(0,i.jsx)(a.vb,{className:"width-full",html:t})}function g(e){let{hasAccessToCodespaces:t,repoPolicyInfo:n,contactPath:a,currentUserIsEnterpriseManaged:s,enterpriseManagedBusinessName:o,newCodespacePath:l,codespacesPath:c,isLoggedIn:d}=e;if(!t){if(!d)return(0,i.jsx)(p,{header:"Sign in required",message:(0,i.jsxs)("span",{children:["Please"," ",(0,i.jsx)(r.A,{inline:!0,href:l,children:"sign in"})," ","to use Codespaces."]})});if(n?.allowed)if(!n?.changesWouldBeSafe)return(0,i.jsx)(p,{header:"Repository access limited",message:(0,i.jsx)("span",{children:"You do not have access to push to this repository and its owner has disabled forking."})});else return(0,i.jsx)(p,{header:"Codespace access limited",message:m(a)});{let e=null;return e=!n?.canBill&&s?(0,i.jsxs)("span",{children:[(0,i.jsx)(r.A,{href:"https://docs.github.com/enterprise-cloud@latest/admin/identity-and-access-management/using-enterprise-managed-users-for-iam/about-enterprise-managed-users",children:"Enterprise-managed users"}),` must have their Codespaces usage paid for by ${o||"their enterprise"}.`]}):n?.hasIpAllowLists?(0,i.jsxs)("span",{children:["Your organization or enterprise enforces"," ",(0,i.jsx)(r.A,{inline:!0,href:"https://docs.github.com/enterprise-cloud@latest/organizations/keeping-your-organization-secure/managing-security-settings-for-your-organization/managing-allowed-ip-addresses-for-your-organization",children:"IP allow lists"})," ","which are unsupported by Codespaces at this time."]}):n?.disabledByBusiness?(0,i.jsx)("span",{children:"Your enterprise has disabled Codespaces at this time. Please contact your enterprise administrator for more information."}):n?.disabledByOrganization?(0,i.jsx)("span",{children:"Your organization has disabled Codespaces on this repository. Please contact your organization administrator for more information."}):m(a),(0,i.jsx)(p,{header:"Codespace access limited",message:e})}}return(0,i.jsx)(f,{codespacesPath:c})}function y(e){return(0,i.jsx)(h,{children:(0,i.jsx)(g,{...e})})}try{p.displayName||(p.displayName="ErrorMessage")}catch{}try{h.displayName||(h.displayName="CodespacesTabWrapper")}catch{}try{f.displayName||(f.displayName="ServerRenderedCodespacesTabContent")}catch{}try{g.displayName||(g.displayName="CodespacesTabContent")}catch{}try{y.displayName||(y.displayName="CodespacesTab")}catch{}},13647:(e,t,n)=>{n.d(t,{Ch:()=>a,PW:()=>l,V2:()=>o,Ve:()=>r,Xg:()=>c,a1:()=>s});var i=n(69599);function a(){return(0,i.G7)("copilot_pipes_code_nodes")}function s(){return(0,i.G7)("copilot_pipes_react_nodes")}function r(){return(0,i.G7)("copilot_pipes_github_graphql_nodes")}function o(){return(0,i.G7)("copilot_pipes_pipeline_nodes")}function l(){return(0,i.G7)("copilot_loops_post_staff_ship_features")}function c(){return(0,i.G7)("loops_service_graphql_execution")}},13974:(e,t,n)=>{n.d(t,{p:()=>s});var i=n(21728),a=n(96540);function s(e){let t,n,s=(0,i.c)(4),[r,o]=(0,a.useState)(!1),l=(0,a.useRef)(e);return s[0]!==r||s[1]!==e?(t=()=>{e&&(l.current=!0),e||!l.current||r||o(!0)},n=[e,r],s[0]=r,s[1]=e,s[2]=t,s[3]=n):(t=s[2],n=s[3]),(0,a.useEffect)(t,n),r}},14303:(e,t,n)=>{n.d(t,{r:()=>y});var i=n(74848),a=n(21728),s=n(5524),r=n(94236),o=n(24990),l=n(96540),c=n(38621),d=n(295),u=n(53419),m=n(25641),p=n(88934),h=n(25407),f=n(64917),g=n(35247);function y(e){let t,n,y,x,b,_,j,w,N,C,k,S,I,T,E,L,R,A,D,P,O=(0,a.c)(66),{onDelete:B,onCopyLoop:F,onDuplicate:M,onShare:$,onEdit:V,onCopyOutput:U,onRename:q,loopId:W,hasOutput:H,returnFocusRef:G}=e,K=void 0!==H&&H,[z,Q]=(0,l.useState)(null),{mutate:Y}=(0,d.h)(),{ownerLogin:J,owned:X,loopURL:Z}=(0,f.I)(v);O[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{Q("delete")},O[0]=t):t=O[0];let ee=t;O[1]!==G?(n=()=>{Q(null),setTimeout(()=>G?.current?.focus())},O[1]=G,O[2]=n):n=O[2];let et=n;O[3]!==Y||O[4]!==W||O[5]!==B?(y=async()=>{W&&(Q(null),Y(W,{onSuccess:B}))},O[3]=Y,O[4]=W,O[5]=B,O[6]=y):y=O[6];let en=y;O[7]!==W||O[8]!==M?(x=()=>{W&&M&&((0,u.BI)("dotcom_chat.activate",{target:"LOOP_DUPLICATE",mode:"loops"}),M(W))},O[7]=W,O[8]=M,O[9]=x):x=O[9];let ei=x;O[10]!==$?(b=()=>{$?.()},O[10]=$,O[11]=b):b=O[11];let ea=b;O[12]!==V?(_=()=>{(0,u.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_EDIT_LOOP",mode:"loops"}),V?.()},O[12]=V,O[13]=_):_=O[13];let es=_;O[14]!==U?(j=()=>{U&&U()},O[14]=U,O[15]=j):j=O[15];let er=j;return W?(O[16]!==er||O[17]!==K||O[18]!==U?(w=U&&(0,i.jsxs)(s.l.Item,{onSelect:er,disabled:!K,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(c.CopyIcon,{})}),"Copy output"]}),O[16]=er,O[17]=K,O[18]=U,O[19]=w):w=O[19],O[20]!==es||O[21]!==W||O[22]!==V?(N=V&&(0,i.jsxs)(s.l.LinkItem,{as:p.N_,to:`${m.Jz}/l/${W}`,onSelect:es,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(c.PencilIcon,{})}),"Edit loop"]}),O[20]=es,O[21]=W,O[22]=V,O[23]=N):N=O[23],O[24]!==F||O[25]!==U||O[26]!==M||O[27]!==V||O[28]!==$?(C=(U||V)&&(M||$||F)&&(0,i.jsx)(s.l.Divider,{}),O[24]=F,O[25]=U,O[26]=M,O[27]=V,O[28]=$,O[29]=C):C=O[29],O[30]!==ei||O[31]!==M?(k=M&&(0,i.jsxs)(s.l.Item,{onSelect:ei,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(c.DuplicateIcon,{})}),"Duplicate"]}),O[30]=ei,O[31]=M,O[32]=k):k=O[32],O[33]!==q?(S=q&&(0,i.jsxs)(s.l.Item,{onSelect:q,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(c.PencilIcon,{})}),"Rename"]}),O[33]=q,O[34]=S):S=O[34],O[35]!==ea||O[36]!==$?(I=$&&(0,i.jsxs)(s.l.Item,{onSelect:ea,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(c.LinkIcon,{})}),"Copy link"]}),O[35]=ea,O[36]=$,O[37]=I):I=O[37],O[38]!==F?(T=F&&(0,i.jsxs)(s.l.Item,{onSelect:F,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(c.CopyIcon,{})}),"Copy JSON"]}),O[38]=F,O[39]=T):T=O[39],O[40]!==F||O[41]!==M||O[42]!==$?(E=(M||$||F)&&(0,i.jsx)(s.l.Divider,{}),O[40]=F,O[41]=M,O[42]=$,O[43]=E):E=O[43],O[44]===Symbol.for("react.memo_cache_sentinel")?(L=(0,i.jsxs)(s.l.Item,{variant:"danger",onSelect:ee,children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(c.TrashIcon,{})}),"Delete"]}),O[44]=L):L=O[44],O[45]!==Z||O[46]!==X||O[47]!==J?(R=g.W.loopsAbusePrevention&&J&&!X&&Z&&(0,i.jsxs)(s.l.LinkItem,{variant:"danger",href:(0,h.YPg)({report:`${J} (User)`,contentURL:Z}),children:[(0,i.jsx)(s.l.LeadingVisual,{children:(0,i.jsx)(c.AlertIcon,{})}),"Report"]}),O[45]=Z,O[46]=X,O[47]=J,O[48]=R):R=O[48],O[49]!==N||O[50]!==C||O[51]!==k||O[52]!==S||O[53]!==I||O[54]!==T||O[55]!==E||O[56]!==R||O[57]!==w?(A=(0,i.jsx)(r.W.Overlay,{align:"end",children:(0,i.jsxs)(s.l,{children:[w,N,C,k,S,I,T,E,L,R]})}),O[49]=N,O[50]=C,O[51]=k,O[52]=S,O[53]=I,O[54]=T,O[55]=E,O[56]=R,O[57]=w,O[58]=A):A=O[58],O[59]!==et||O[60]!==en||O[61]!==z?(D="delete"===z&&(0,i.jsx)(o.K,{title:"Delete loop",onClose:e=>{"confirm"===e?en():et()},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this loop? This action cannot be undone."}),O[59]=et,O[60]=en,O[61]=z,O[62]=D):D=O[62],O[63]!==A||O[64]!==D?(P=(0,i.jsxs)(i.Fragment,{children:[A,D]}),O[63]=A,O[64]=D,O[65]=P):P=O[65],P):null}function v(e){return{owned:e?.owned,ownerLogin:e?.ownerLogin,loopURL:window.location.origin+window.location.pathname}}try{y.displayName||(y.displayName="LoopsActionMenuOverlay")}catch{}},15440:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(74848),a=n(21728),s=n(82595),r=n(38621),o=n(96540);let l={container:"StarterPill-module__container--d2dFs",icon:"StarterPill-module__icon--GKvj8",title:"StarterPill-module__title--Nsp36",dropdown:"StarterPill-module__dropdown--NngRn"},c=o.forwardRef((e,t)=>{let n,o,c,d,u=(0,a.c)(15),{testId:m,name:p,icon:h,color:f,onClick:g,dropdown:y,open:v}=e,x=`starter-${m}`;return u[0]!==f||u[1]!==h?(n=s.I&&(0,i.jsx)("div",{className:l.icon,children:(0,i.jsx)(s.I,{icon:h,color:f})}),u[0]=f,u[1]=h,u[2]=n):n=u[2],u[3]!==y?(o=y&&(0,i.jsx)("div",{className:l.dropdown,children:(0,i.jsx)(r.TriangleDownIcon,{})}),u[3]=y,u[4]=o):o=u[4],u[5]!==p||u[6]!==o?(c=(0,i.jsxs)("div",{className:l.title,children:[p,o]}),u[5]=p,u[6]=o,u[7]=c):c=u[7],u[8]!==g||u[9]!==v||u[10]!==t||u[11]!==x||u[12]!==n||u[13]!==c?(d=(0,i.jsxs)("button",{ref:t,className:l.container,onClick:g,"aria-expanded":v,"data-testid":x,children:[n,c]}),u[8]=g,u[9]=v,u[10]=t,u[11]=x,u[12]=n,u[13]=c,u[14]=d):d=u[14],d});c.displayName="StarterPill"},16070:(e,t,n)=>{n.d(t,{Y0:()=>B,$I:()=>O,kR:()=>F});var i=n(74848),a=n(96540),s=n(84078),r=n(38621),o=n(88934),l=n(31315),c=n(69599),d=n(51587),u=n(11083),m=n(30459),p=n(79634);let h={bannerOuterWrapper:"GlobalSSOBanner-module__bannerOuterWrapper--fyxDF",bannerInnerWrapper:"GlobalSSOBanner-module__bannerInnerWrapper--butqf",banner:"GlobalSSOBanner-module__banner--kzCnx",dismissedOrgList:"GlobalSSOBanner-module__dismissedOrgList--Jkrx7",durationSelector:"GlobalSSOBanner-module__durationSelector--DOJjX"};function f({children:e,hidden:t}){let[n,s]=a.useState("visible"),r=a.useRef(null),o=a.useRef(void 0);return(a.useEffect(()=>{if(t&&"visible"===n){s("collapsing");let e=r.current;if(e){let t=e.getBoundingClientRect().height;o.current=t,e.style.height=`${t}px`}}else if("collapsing"===n){let e=setTimeout(()=>{s("hidden")},300);return()=>{clearTimeout(e)}}},[t,n]),"hidden"===n)?null:(0,i.jsx)("div",{ref:r,style:{height:"visible"===n?o.current??"auto":0},className:h.bannerOuterWrapper,children:(0,i.jsx)("div",{className:h.bannerInnerWrapper,style:{transform:"visible"===n?void 0:`translateY(-${o.current??0}px)`},children:e})})}try{300..displayName||(300..displayName="ANIMATION_DURATION")}catch{}try{f.displayName||(f.displayName="SlideDismiss")}catch{}var g=n(21728),y=n(57352),v=n(15220);function x(e){let t,n,a,s=(0,g.c)(7),{ssoOrgs:r}=e;if(1===r.length){let e,t=r[0],n=t?.name;return s[0]!==n?(e=(0,i.jsxs)("p",{children:["You are dismissing single sign-on prompts for the ",n," organization on this device."]}),s[0]=n,s[1]=e):e=s[1],e}return s[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("p",{children:"You are dismissing single sign-on prompts for the following organizations on this device:"}),s[2]=t):t=s[2],s[3]!==r?(n=r.map(b),s[3]=r,s[4]=n):n=s[4],s[5]!==n?(a=(0,i.jsxs)(i.Fragment,{children:[t,(0,i.jsx)("ul",{className:h.dismissedOrgList,children:n})]}),s[5]=n,s[6]=a):a=s[6],a}function b(e){return(0,i.jsx)("li",{children:e.name},e.id)}try{x.displayName||(x.displayName="DismissalSummary")}catch{}var _=n(94236),j=n(5524),w=n(46251);let N=30,C=[{id:"one-day",text:"One day",days:1},{id:"one-week",text:"One week",days:7},{id:"one-month",text:"One month",days:N},{id:"one-year",text:"One year",days:365}],k=()=>C.findIndex(e=>e.days===N);function S(e){let t,n,a,s,o,l=(0,g.c)(11),{selectedDurationIndex:c,onDurationChange:d}=e,u=C[c];l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("span",{id:"dismissal-duration-label",children:"Remind me again in"}),l[0]=t):t=l[0];let m=u?.text||"Pick duration";return l[1]!==m?(n=(0,i.jsx)(_.W.Button,{trailingAction:r.TriangleDownIcon,"aria-labelledby":"dismissal-duration-label",children:m}),l[1]=m,l[2]=n):n=l[2],l[3]!==d||l[4]!==c?(a=C.map((e,t)=>(0,i.jsx)(j.l.Item,{role:"menuitemradio",selected:t===c,"aria-checked":t===c,onSelect:()=>d(t),children:e.text},e.id)),l[3]=d,l[4]=c,l[5]=a):a=l[5],l[6]!==a?(s=(0,i.jsx)(_.W.Overlay,{children:(0,i.jsx)(j.l,{selectionVariant:"single",role:"menu","aria-labelledby":"dismissal-duration-label",children:a})}),l[6]=a,l[7]=s):s=l[7],l[8]!==n||l[9]!==s?(o=(0,i.jsxs)(w.B,{align:"center",direction:"horizontal",className:h.durationSelector,children:[t,(0,i.jsxs)(_.W,{children:[n,s]})]}),l[8]=n,l[9]=s,l[10]=o):o=l[10],o}try{S.displayName||(S.displayName="DurationMenu")}catch{}function I(e){let t,n,s,r,o,l,c,d,u,m,p=(0,g.c)(23),{isOpen:h,onClose:f,onConfirm:b,ssoOrgs:_}=e,[j,w]=a.useState(k);p[0]!==h?(t=()=>{h&&w(k())},n=[h],p[0]=h,p[1]=t,p[2]=n):(t=p[1],n=p[2]),a.useEffect(t,n),p[3]!==b||p[4]!==j?(s=()=>{let e=C[j];b(e?.days??N)},p[3]=b,p[4]=j,p[5]=s):s=p[5];let I=s;return h?(p[6]!==f?(r={buttonType:"default",content:"Cancel",onClick:f},p[6]=f,p[7]=r):r=p[7],p[8]!==I?(o={buttonType:"primary",content:"Confirm",onClick:I},p[8]=I,p[9]=o):o=p[9],p[10]!==r||p[11]!==o?(l=[r,o],p[10]=r,p[11]=o,p[12]=l):l=p[12],p[13]!==_?(c=(0,i.jsx)(x,{ssoOrgs:_}),p[13]=_,p[14]=c):c=p[14],p[15]!==j?(d=(0,i.jsx)(S,{selectedDurationIndex:j,onDurationChange:w}),p[15]=j,p[16]=d):d=p[16],p[17]===Symbol.for("react.memo_cache_sentinel")?(u=(0,i.jsxs)("p",{children:["To sign into any of your SSO organizations, visit the"," ",(0,i.jsx)(y.A,{href:"/settings/organizations",inline:!0,children:"SSO settings page."})]}),p[17]=u):u=p[17],p[18]!==f||p[19]!==l||p[20]!==c||p[21]!==d?(m=(0,i.jsxs)(v.l,{title:"Dismiss SSO Banner",width:"medium",height:"auto",onClose:f,footerButtons:l,children:[c,d,u]}),p[18]=f,p[19]=l,p[20]=c,p[21]=d,p[22]=m):m=p[22],m):null}try{I.displayName||(I.displayName="ConfirmationDialog")}catch{}var T=n(21373),E=n(77430),L=n(79988);function R(e,t){let n=`/orgs/${encodeURIComponent(e)}/sso`,i=t.pathname+t.search+t.hash;return`${n}?return_to=${encodeURIComponent(i)}`}function A(e){let t,n,a,s,r,o=(0,g.c)(20),{ssoOrgs:l,redirectLocation:c}=e,{sendClickAnalyticsEvent:d}=(0,m.S)();if(0===l.length)return null;o[0]!==d?(t=()=>{d({category:L.c$,action:"click_single_sso_button",label:"sso_authentication"})},o[0]=d,o[1]=t):t=o[1];let u=t;o[2]!==d?(n=e=>{d({category:L.c$,action:"click_sso_dropdown_item",label:`org:${e}`})},o[2]=d,o[3]=n):n=o[3];let p=n;if(1===l.length){let e,t,n=l[0];return void 0===n?null:(o[4]!==n.login||o[5]!==c?(e=R(n.login,c),o[4]=n.login,o[5]=c,o[6]=e):e=o[6],o[7]!==u||o[8]!==e?(t=(0,i.jsx)(T.Q,{as:"a",href:e,onClick:u,children:"Single sign-on"}),o[7]=u,o[8]=e,o[9]=t):t=o[9],t)}if(o[10]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(_.W.Button,{size:"small",children:"Single sign-on"}),o[10]=a):a=o[10],o[11]!==p||o[12]!==c||o[13]!==l){let e;o[15]!==p||o[16]!==c?(e=e=>(0,i.jsxs)(j.l.LinkItem,{href:R(e.login,c),onClick:()=>p(e.name),children:[e.avatar_url&&(0,i.jsx)(j.l.LeadingVisual,{children:(0,i.jsx)(E.r,{size:24,src:e.avatar_url})}),e.name]},e.login),o[15]=p,o[16]=c,o[17]=e):e=o[17],s=l.map(e),o[11]=p,o[12]=c,o[13]=l,o[14]=s}else s=o[14];return o[18]!==s?(r=(0,i.jsxs)(_.W,{children:[a,(0,i.jsx)(_.W.Overlay,{children:(0,i.jsx)(j.l,{children:s})})]}),o[18]=s,o[19]=r):r=o[19],r}try{A.displayName||(A.displayName="SSOActionMenu")}catch{}function D(){let e=(0,l.Ri)(L.z4);if(e?.value)try{let t=JSON.parse(e.value);return Array.isArray(t)?t:[]}catch(e){(0,l.Yj)(L.z4)}return[]}function P(e){return"object"==typeof e&&null!==e&&"id"in e&&"name"in e&&"login"in e}function O({ssoOrgs:e}){let t=(0,o.zy)(),[n,d]=a.useState("visible"),[p,g]=a.useState(!1),y=a.useRef(!1),{sendClickAnalyticsEvent:v}=(0,m.S)(),x=(0,c.G7)("global_sso_banner_dismiss_dialog");if(a.useEffect(()=>{!y.current&&e.length>0&&((0,c.G7)("record_sso_banner_metrics")&&(0,u.i)({incrementKey:"GLOBAL_SSO_BANNER_DISPLAYED",requestUrl:window.location.href}),y.current=!0)},[e]),0===e.length)return null;let b=(t=N)=>{d("hidden");let n=e.map(e=>e.id);(0,c.G7)("global_sso_banner_dismiss_dialog")&&(n=[...new Set([...D(),...n])].sort()),(0,l.Yj)(L.z4);let i=t??N,a=new Date(Date.now()+24*i*36e5).toUTCString();(0,l.TV)(L.z4,JSON.stringify(n),a)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f,{hidden:"visible"!==n,children:(0,i.jsx)(s.l,{title:"Single-sign on",className:h.banner,hideTitle:!0,icon:(0,i.jsx)(r.ShieldLockIcon,{}),description:(()=>{if(0===e.length)return"Single sign-on to see results";let t=e.slice(0,L.n5),n=e.length-L.n5,a=1===e.length?"organization":"organizations";return(0,i.jsxs)(i.Fragment,{children:["Single sign-on to see results in the ",(()=>{let e=t.map(e=>(0,i.jsx)("strong",{children:e.name},e.login));if(1===e.length)return e[0];{if(2===e.length)return(0,i.jsxs)(i.Fragment,{children:[e[0]," and ",e[1]]});let t=e.length-1,a=(0,i.jsxs)(i.Fragment,{children:[e[0],", ",e[1],", and ",e[t]]});return n>0?(0,i.jsxs)(i.Fragment,{children:[a,", and ",n," more"]}):a}})()," ",a]})})(),onDismiss:()=>{v({category:L.c$,action:"click_dismiss_button",label:"banner_dismissed"}),x?g(!0):b()},primaryAction:(0,i.jsx)(A,{ssoOrgs:e,redirectLocation:t}),"data-testid":"global-sso-banner"})}),(0,i.jsx)(I,{isOpen:x&&p,onClose:()=>g(!1),onConfirm:e=>{b(e),g(!1)},ssoOrgs:e})]})}function B(){let{ssoOrgs:e,suppressBanner:t}=function(){let{ssoOrgs:e,baseAvatarUrl:t}=(0,d.N)(),{current_sso_orgs_match_dismissed_cookie:n}=(0,p.X)()??{},i=a.useMemo(()=>e.filter(P).map(e=>({...e,avatar_url:`${t}/u/${e.id}`})),[e,t]);return{suppressBanner:!0===n||function(e){let t=D();return e.length===t.length&&e.every(e=>t.includes(e.id))}(i),ssoOrgs:i,baseAvatarUrl:t}}();return 0===e.length||!(0,c.G7)("global_sso_banner")||t?null:(0,i.jsx)(O,{ssoOrgs:e})}let F=L.z4;try{O.displayName||(O.displayName="GlobalSsoBanner")}catch{}try{B.displayName||(B.displayName="ContextualGlobalSsoBanner")}catch{}},17005:(e,t,n)=>{n.d(t,{l:()=>u});var i=n(74848),a=n(21728),s=n(77274),r=n(96379),o=n(96540),l=n(35247),c=n(54508);let d=[{name:"Hate it",value:"VERY_NEGATIVE",icon:s.YS,color:"veryDissatisfied"},{name:"Not great",value:"NEGATIVE",icon:s.Mm,color:"dissatisfied"},{name:"It\u2019s ok",value:"POSITIVE",icon:s.Cf,color:"satisfied"},{name:"Love it",value:"VERY_POSITIVE",icon:s.mN,color:"verySatisfied"}],u=(0,o.forwardRef)(function(e,t){let n,u,m,p,h=(0,a.c)(7),{mode:f,returnFocusRef:g}=e,y=(0,o.useRef)(null),v=(0,o.useRef)(null),x=(0,o.useRef)(void 0);h[0]===Symbol.for("react.memo_cache_sentinel")?(n=()=>({openDialog:e=>{x.current=e,l.W.copilotChatInterviewSurvey?y.current?.openDialog():v.current?.openDialog(e)}}),h[0]=n):n=h[0],(0,o.useImperativeHandle)(t,n),h[1]!==f?(u=async(e,t)=>{let n=[];if(null==e&&n.push("Please select a rating."),t.length>2e3&&n.push("Please keep your feedback within 2000 characters or less."),n.length>0)return n;let i={rating:e,content:t,hostname:window.location.hostname,path:window.location.pathname,mode:f};try{(await (0,r.lS)("/github-copilot/feedback",{method:"POST",body:i})).ok||n.push("An error occurred while submitting your feedback.")}catch{n.push("An error occurred while submitting your feedback.")}return n},h[1]=f,h[2]=u):u=h[2];let b=u;return h[3]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsx)(c.E,{ref:y,onClose:e=>{"no-thanks"===e&&v.current?.openDialog(x.current)}}),h[3]=m):m=h[3],h[4]!==b||h[5]!==g?(p=(0,i.jsxs)(i.Fragment,{children:[m,(0,i.jsx)(s.NE,{ref:v,options:d,onSubmit:b,returnFocusRef:g})]}),h[4]=b,h[5]=g,h[6]=p):p=h[6],p});u.displayName="ConversationFeedbackDialog"},19199:(e,t,n)=>{n.d(t,{n:()=>j});var i=n(74848),a=n(82075),s=n(21373),r=n(1481),o=n(96540),l=n(13107),c=n(26410),d=n(20622),u=n(53885),m=n(96379),p=n(65510),h=n(91747),f=n(31604),g=n(94236),y=n(38621);let v=({isPrimary:e,children:t,size:n,onOpenChange:a})=>{let r=(0,h.u)("accessible_code_button"),[l,c]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{r&&a&&a(l)},[l,r]),r)?(0,i.jsx)(f.T,{align:"end",focusZoneSettings:{disabled:!0},open:l,onOpen:()=>c(!0),onClose:()=>c(!1),renderAnchor:t=>(0,i.jsx)(s.Q,{...t,variant:e?"primary":void 0,leadingVisual:()=>(0,i.jsx)(y.CodeIcon,{className:"hide-sm"}),trailingVisual:()=>(0,i.jsx)(y.TriangleDownIcon,{}),size:n||"medium",children:"Code"}),children:t}):(0,i.jsxs)(g.W,{children:[(0,i.jsx)(g.W.Button,{variant:e?"primary":void 0,leadingVisual:()=>(0,i.jsx)(y.CodeIcon,{className:"hide-sm"}),size:n||"medium",children:"Code"}),(0,i.jsx)(g.W.Overlay,{width:"auto",align:"end",children:t})]})};try{v.displayName||(v.displayName="CodeMenuButton")}catch{}let x={TabNav:"CodeDropdownButton-module__TabNav--zWa9N",NavItem:"CodeDropdownButton-module__NavItem--_hXZP"},b=(0,a.A)("localStorage"),_={Local:"local",Codespaces:"cloud"};function j(e){var t,n;let{primary:a,size:d,showCodespacesTab:u,isEnterprise:m,localTab:p,codespacesTab:h,localTabProps:f,codespacesPath:g}=e,y="code-button-default-tab",[j,N]=(0,o.useState)(_.Local),C=(0,o.useCallback)(e=>{N(_.Codespaces),b.setItem(y,_.Codespaces),e?.preventDefault()},[]),k=(0,o.useCallback)(e=>{N(_.Local),b.setItem(y,_.Local),e?.preventDefault()},[]);(0,o.useEffect)(()=>{b.getItem(y)===_.Codespaces&&u&&C()},[]);let S=!m&&u;return(0,i.jsxs)(v,{size:d,isPrimary:a,children:[S&&(0,i.jsxs)(r.A,{className:x.TabNav,children:[(0,i.jsx)(r.A.Link,{as:s.Q,selected:j===_.Local,onClick:k,className:x.NavItem,children:"Local"}),!m&&u&&(0,i.jsx)(r.A.Link,{as:s.Q,selected:j===_.Codespaces,onClick:C,className:x.NavItem,children:"Codespaces"})]}),(0,i.jsxs)("div",{className:"react-overview-code-button-action-list py-0",children:[j===_.Local&&(p||((t=f)?(0,i.jsx)(c.F,{...t}):null)),j===_.Codespaces&&(h||((n=g)?(0,i.jsx)(l.VO,{children:(0,i.jsx)(w,{codespacesPath:n})}):null))]})]})}function w(e){let t=function(e){let t=(0,u.e)(d.u.codeButton);return(0,p.U)({queryKey:[d.u.codeButton,t],queryFn:async()=>{let e=await (0,m.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},initialData:void 0,staleTime:1/0})}().data,n=(0,h.u)("copilot_swe_agent_progress_commands"),{repositoryPolicyInfo:a,...s}=t;return n?(0,i.jsx)(l.NF,{codespacesPath:e.codespacesPath,repoPolicyInfo:a,...s}):(0,i.jsx)(l.NF,{codespacesPath:e.codespacesPath,...t})}try{j.displayName||(j.displayName="CodeDropdownButton")}catch{}try{w.displayName||(w.displayName="SuspendedCodespacesTab")}catch{}},19336:(e,t,n)=>{n.d(t,{G:()=>p});var i=n(74848),a=n(21728),s=n(34031),r=n(11128),o=n(12357),l=n(70324);let c={emptyState:"ExecutionView-module__emptyState--gD9en",emptyStateText:"ExecutionView-module__emptyStateText--awSRT",emptyStateTitle:"ExecutionView-module__emptyStateTitle--F8TRM"};var d=n(53419),u=n(38621);let m=[];function p(e){let t,n=(0,a.c)(9),{outputNodeExists:p,isRunning:h,nodeValue:f,nodeError:g,validationErrors:y,additionalActions:v,onRun:x,onStop:b}=e,_=void 0===y?m:y;return n[0]!==v||n[1]!==h||n[2]!==g||n[3]!==f||n[4]!==x||n[5]!==b||n[6]!==p||n[7]!==_?(t=(0,i.jsx)(i.Fragment,{children:p?h&&!f?(0,i.jsx)(s.M,{isRunning:h,messages:{running:"Running the loop...",waiting:"Waiting..."}}):_.length>0?(0,i.jsx)(r.n,{errors:_,title:"Oops, this loop is configured incorrectly",additionalActions:v}):g?(0,i.jsx)(r.n,{errors:[g],title:"Oops, there was an error running this loop",additionalActions:v}):f?(0,i.jsx)(o.U,{isRunning:h,nodeValue:f}):(0,i.jsxs)("div",{className:c.emptyState,children:[(0,i.jsxs)("div",{className:c.emptyStateText,children:[(0,i.jsx)("h3",{className:c.emptyStateTitle,children:"No output yet"}),(0,i.jsx)("span",{children:"Run this loop to generate output"})]}),(0,i.jsx)(l.c,{onClick:()=>{x(),(0,d.BI)("node_action.select",{target:"PANEL_NODE_EMPTY_STATE_RUN",mode:"loops"})},onStop:()=>{b(),(0,d.BI)("node_action.select",{target:"PANEL_NODE_EMPTY_STATE_STOP",mode:"loops"})},isLoading:h,value:f,variant:"default",leadingVisual:(0,i.jsx)(u.SyncIcon,{})})]}):(0,i.jsx)("p",{children:"No output nodes found in this loop."})}),n[0]=v,n[1]=h,n[2]=g,n[3]=f,n[4]=x,n[5]=b,n[6]=p,n[7]=_,n[8]=t):t=n[8],t}try{p.displayName||(p.displayName="ExecutionView")}catch{}},21046:(e,t,n)=>{function i(){}function a(){}n.d(t,{FF:()=>i,vV:()=>a})},21229:(e,t,n)=>{n.d(t,{D:()=>m});var i=n(74848),a=n(21728),s=n(46747),r=n(38621),o=n(86877),l=n(26108),c=n(99511),d=n(96540);let u={searchContainer:"SearchInput-module__searchContainer--r7MLn",searchInputWrapper:"SearchInput-module__searchInputWrapper--fhRw6",searchInput:"SearchInput-module__searchInput--PKKMu"};function m(e){let t,n,m,p,h,f,g=(0,a.c)(20),{onSearch:y,placeholder:v,"aria-label":x,disabled:b,debounceDelay:_}=e,j=void 0===v?"Search...":v,w=void 0===x?"Search":x,N=void 0!==b&&b,[C,k]=(0,d.useState)(""),S=(0,s.d)(y,void 0===_?200:_);g[0]!==S||g[1]!==y?(t=e=>{let t=e.currentTarget.value;k(t),""===t.trim()?y(""):S(t)},g[0]=S,g[1]=y,g[2]=t):t=g[2];let I=t;g[3]!==y?(n=()=>{k(""),y("")},g[3]=y,g[4]=n):n=g[4];let T=n;return g[5]!==w?(m=(0,i.jsx)(o.A.Label,{visuallyHidden:!0,children:w}),g[5]=w,g[6]=m):m=g[6],g[7]!==T||g[8]!==N||g[9]!==C?(p=""!==C?(0,i.jsx)(l.K,{icon:r.XCircleFillIcon,onClick:T,"aria-label":"Clear search",variant:"invisible",size:"small",disabled:N}):void 0,g[7]=T,g[8]=N,g[9]=C,g[10]=p):p=g[10],g[11]!==I||g[12]!==j||g[13]!==C||g[14]!==p?(h=(0,i.jsx)(c.A,{className:u.searchInput,placeholder:j,value:C,onChange:I,leadingVisual:r.SearchIcon,trailingAction:p}),g[11]=I,g[12]=j,g[13]=C,g[14]=p,g[15]=h):h=g[15],g[16]!==N||g[17]!==m||g[18]!==h?(f=(0,i.jsx)("div",{className:u.searchContainer,children:(0,i.jsxs)(o.A,{className:u.searchInputWrapper,disabled:N,children:[m,h]})}),g[16]=N,g[17]=m,g[18]=h,g[19]=f):f=g[19],f}try{m.displayName||(m.displayName="SearchInput")}catch{}},21502:(e,t,n)=>{n.d(t,{B:()=>r});var i=n(21728),a=n(27912),s=n(96540);function r(e){let t,n=(0,i.c)(2),r=function(e){let t,n,a,r=(0,i.c)(5);r[0]!==e?(t=()=>"undefined"!=typeof window&&window.matchMedia(e).matches,r[0]=e,r[1]=t):t=r[1];let[o,l]=(0,s.useState)(t);return r[2]!==e?(n=()=>{let t=window.matchMedia(e),n=e=>{l(e.matches)};return l(t.matches),t.addEventListener("change",n),()=>{t.removeEventListener("change",n)}},a=[e],r[2]=e,r[3]=n,r[4]=a):(n=r[3],a=r[4]),(0,s.useEffect)(n,a),o}(void 0===e?a.X:e);return n[0]!==r?(t={isNarrowViewport:r},n[0]=r,n[1]=t):t=n[1],t}},21968:(e,t,n)=>{n.d(t,{O:()=>E});var i=n(74848),a=n(96540),s=n(98755),r=n(25407),o=n(69726),l=n(57352),c=n(56149),d=n(21373),u=n(62935),m=n(72579),p=n(99906),h=n(66990),f=n(79634),g=n(79431),y=n(11196),v=n(97665),x=n(33578),b=n(30923),_=n(20622),j=n(53885),w=n(96379),N=n(94747);let C={truncateBranch:"PullRequestHeaderSummary-module__truncateBranch--bdsQu",summaryContainer:"PullRequestHeaderSummary-module__summaryContainer--iNR1T"};var k=n(34261),S=n(2022),I=n(95807),T=n(99223);function E({author:e,baseBranch:t,baseRepositoryDefaultBranch:n="",baseRepositoryName:m="",baseRepositoryOwnerLogin:y="",canChangeBase:E=!1,commitsCount:R,headBranch:A,headRepositoryOwnerLogin:D="",headRepositoryName:P="",isInAdvisoryRepo:O,isEditing:B=!1,mergedBy:F,mergedTime:M,pullRequestId:$,pullRequestNumber:V,repositoryId:U,setIsEditing:q,state:W}){let H=(0,v.jE)(),{refListCacheKey:G}=(0,f.X)(),[K,z]=(0,a.useState)(!1),[Q,Y]=(0,a.useState)(!1),[J,X]=(0,a.useState)(""),[Z,ee]=(0,a.useState)(""),et=(0,k.f)(),en=(0,S.E)(),{mutate:ei}=function(){let e=(0,j.e)(_.u.changeBase);return(0,N.n)({mutationFn:({newBaseBranch:t})=>{let n=btoa(t);return(0,w.Sr)(e,{method:"PATCH",body:{new_base_binary:n}})},onSuccess:async e=>{let t=await e.json();if(t.error)throw Error(t.error);let n=await (await (0,b.Ee)(t.orchestration.url,{headers:{accept:"application/json"}})).json();if(n.orchestration.error_message)throw Error(n.orchestration.error_message)}})}(),ea=e=>{Y(!1),X(e)},es=Q?()=>(0,i.jsx)(o.A,{size:"small"}):null,er=D&&D!==y?`${y}:${t}`:t,eo=function(e,t,n,i,a){if(!t)return"unknown repository";let s=!!t&&t!==e,r=a&&!!n;switch(!0){case s&&r:return`${t}/${n}:${i}`;case s:return`${t}:${i}`;case r:return`${n}:${i}`;default:return i}}(y,D,P,A,O),el=W===x.Q.Merged?F:e,ec=function(e,t,n){let i=`${t} ${t>1?"commits":"commit"}`;return e!==x.Q.Merged?`wants to merge ${i} into`:n?`merged ${i} into`:`${i} merged into`}(W,R,el);return(0,i.jsxs)("span",{className:`fgColor-muted d-flex flex-items-center overflow-hidden ${C.summaryContainer}`,children:[el?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.A,{inline:!0,className:"fgColor-muted text-bold","data-hovercard-url":(0,r.dCN)({owner:el}),href:`/${el}`,children:el})," "]}):null,ec,E&&B?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.PI,{cacheKey:G,canCreate:!1,closeOnSelect:!0,currentCommitish:t,defaultBranch:n,hideShowAll:!0,owner:y,repo:m,types:["branch"],onSelectItem:e=>{z(!0),ee(e)}}),(0,i.jsx)(c.ZL,{children:(0,i.jsxs)(p.A,{"aria-labelledby":"confirm-change-base-branch",isOpen:K,onDismiss:()=>{z(!1),ee(""),X("")},children:[(0,i.jsx)(p.A.Header,{id:"confirm-change-base-branch",children:"Are you sure you want to change the base?"}),(0,i.jsxs)("div",{className:"p-3",children:[(0,i.jsx)("span",{children:"Some commits from the old base branch may be removed from the timeline, and old review comments may become outdated."}),J&&(0,i.jsx)(g.v,{className:"mt-2",variant:"critical",children:J}),(0,i.jsx)("span",{className:"sr-only","aria-live":"polite",children:Q?"Base branch update in progress.":""}),(0,i.jsx)(d.Q,{alignContent:"center","aria-disabled":Q?"true":void 0,block:!0,className:"mt-3",disabled:Q,leadingVisual:es,onClick:()=>{Y(!0),ei({newBaseBranch:Z},{onError:e=>ea(e.message),onSuccess:async()=>{try{await Promise.all([H.refetchQueries({queryKey:et},{throwOnError:!0}),H.refetchQueries({queryKey:en},{throwOnError:!0})]),Y(!1),q?.(!1),z(!1)}catch{ea("Unable to refetch commits. Please refresh the page.")}}})},variant:"primary",children:Q?null:"Change base"})]})]})})]}):(0,i.jsx)(L,{branch:t,branchText:er,repositoryName:m,repositoryOwner:y}),(0,i.jsx)("span",{children:"from "}),(0,i.jsxs)("div",{className:"d-flex flex-items-center overflow-hidden",children:[(0,i.jsx)(L,{branch:A,branchText:eo,repositoryName:P,repositoryOwner:D}),(0,i.jsx)(s.T,{ariaLabel:"Copy head branch name to clipboard",size:"small",textToCopy:D?eo:A})]}),W===x.Q.Merged&&(0,i.jsx)(u.A,{datetime:M}),W===x.Q.Open&&!(0,T.k)()&&(0,i.jsx)(I.i,{processingIndicatorUrl:(0,r.CZ9)({owner:y,repo:m,number:V}),repositoryId:U,pullRequestId:$})]})}function L({branchText:e,repositoryOwner:t,repositoryName:n,branch:a}){if(!n||!t)return(0,i.jsx)(m.A,{as:"span",className:C.truncateBranch,title:"This repository has been deleted",children:e});{let s=(0,r.WJ9)({owner:t,repo:n,branch:a});return(0,i.jsx)(y.m,{text:`${t}/${n}:${a}`,children:(0,i.jsx)(m.A,{href:s,className:C.truncateBranch,children:e})})}}try{E.displayName||(E.displayName="PullRequestHeaderSummary")}catch{}try{L.displayName||(L.displayName="PullRequestBranchName")}catch{}},22053:(e,t,n)=>{n.d(t,{a:()=>o});var i=n(21728),a=n(50050),s=n(33026),r=n(64917);function o(){let e,t=(0,i.c)(4),n=(0,a.Ud)(c),o=(0,r.I)(l),d=n!==s.kj&&n!==s.qD;if(void 0===o){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!1,isLoading:!0},t[0]=e):e=t[0],e}if(!1===o){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!0,isLoading:!1,reason:"shared"},t[1]=e):e=t[1],e}if(d){let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!0,isLoading:!1,reason:"previousVersion"},t[2]=e):e=t[2],e}return t[3]===Symbol.for("react.memo_cache_sentinel")?(e={isReadonly:!1,isLoading:!1},t[3]=e):e=t[3],e}function l(e){return e?.owned}function c(e){return e.version}},22116:(e,t,n)=>{n.d(t,{x:()=>u});var i=n(74848),a=n(21728),s=n(53419),r=n(38621),o=n(57352),l=n(26382),c=n(96540);let d={errorFallbackContainer:"ErrorFallback-module__errorFallbackContainer--uGjJA"};function u(e){let t,n,u,m,p,h,f=(0,a.c)(8),{regionName:g}=e;return f[0]!==g?(t=()=>{let e=`ERROR_FALLBACK_${g.toUpperCase().replace(/\s+/g,"_")}`;(0,s.BI)("dotcom_chat.activate",{target:e,mode:"immersive",message:`${g} error fallback`})},n=[g],f[0]=g,f[1]=t,f[2]=n):(t=f[1],n=f[2]),(0,c.useEffect)(t,n),f[3]===Symbol.for("react.memo_cache_sentinel")?(u=(0,i.jsx)(l.E.Visual,{children:(0,i.jsx)(r.AlertIcon,{size:"medium"})}),m=(0,i.jsx)(l.E.Heading,{children:"Something went wrong"}),f[3]=u,f[4]=m):(u=f[3],m=f[4]),f[5]===Symbol.for("react.memo_cache_sentinel")?(p=(0,i.jsx)(o.A,{href:"https://support.github.com/",inline:!0,children:"contact support"}),f[5]=p):p=f[5],f[6]!==g?(h=(0,i.jsx)("div",{className:d.errorFallbackContainer,children:(0,i.jsxs)(l.E,{children:[u,m,(0,i.jsxs)(l.E.Description,{children:[g," is temporarily unavailable due to an unknown error. Try reloading the page or, if the error persists,"," ",p,"."]})]})}),f[6]=g,f[7]=h):h=f[7],h}try{u.displayName||(u.displayName="ErrorFallback")}catch{}},24798:(e,t,n)=>{n.d(t,{o:()=>a});var i=n(76648);function a(){let e=(0,i.B)()??{};if(e&&"header"in e)return e.header;let{aliveChannel:t,pullRequest:n,bannersData:a,repository:s,urls:r,user:o}=e;return{aliveChannel:t,pullRequest:n,bannersData:a,repository:s,urls:r,user:o}}},25506:(e,t,n)=>{n.d(t,{a:()=>s});var i=n(21728),a=n(23967);function s(e){let t,n,s=(0,i.c)(7),{language:r,value:o}=e;s[0]!==r||s[1]!==o?(t=function({language:e,value:t}){var n;let i=(n=t,/^\t/m.test(n)?"tab":"space");return{indentUnit:function(e,t){if("space"!==t)return 4;{var n;let t=e.match(/^( +)[^*]/im);return void 0!==(n=t?.[1]?.length)&&n>=1&&n<=12?n:2}}(t,i),indentWithTabs:"tab"===i,lineWrapping:function(e){let t=(0,a.vL)(e);return t?.wrap??!1}(e)}}({language:r,value:o}),s[0]=r,s[1]=o,s[2]=t):t=s[2];let l=t;return s[3]!==l.indentUnit||s[4]!==l.indentWithTabs||s[5]!==l.lineWrapping?(n={indentUnit:l.indentUnit,indentWithTabs:l.indentWithTabs,lineWrapping:l.lineWrapping},s[3]=l.indentUnit,s[4]=l.indentWithTabs,s[5]=l.lineWrapping,s[6]=n):n=s[6],n}},26410:(e,t,n)=>{n.d(t,{J:()=>b,F:()=>v});var i=n(74848),a=n(96540),s=n(39111),r=n(96459),o=n(96379),l=n(57352),c=n(19579),d=n(72511),u=n(5524),m=n(81960),p=n(11196),h=n(98755),f=n(38621);let g={UnderlineNav:"LocalTab-module__UnderlineNav--epbgw",PlatformContents:"LocalTab-module__PlatformContents--rz1GK",CloneContainer:"LocalTab-module__CloneContainer--fne3C",CopyToClipboardButton:"LocalTab-module__CopyToClipboardButton--G8eJx"};var y=n(34164);function v(e){let{httpAvailable:t,sshAvailable:n,httpUrl:m,showCloneWarning:h,sshUrl:y,sshCertificatesRequired:v,sshCertificatesAvailable:_,ghCliUrl:j,newSshKeyUrl:w,setProtocolPath:N}=e.protocolInfo,{defaultProtocol:C}=e.protocolInfo,[k,S]=(0,a.useState)(C),[I,T]=(0,a.useState)(""),{cloneUrl:E,visualStudioCloneUrl:L,showVisualStudioCloneButton:R,showXcodeCloneButton:A,xcodeCloneUrl:D,zipballUrl:P}=e.platformInfo,O=(0,s.X)(["windows","mac"]),B=(0,s.X)(["mac"]),F=(0,r.Z)(),M="mt-2 fgColor-muted text-normal",$=(0,a.useCallback)(e=>{if(k!==e){S(e);let t=new FormData;t.set("protocol_selector",e),(0,o.DI)(N,{method:"post",body:t})}},[k,S,N]),V=(0,a.useMemo)(()=>{let e=[];return t&&e.push({protocol:"http",displayName:"HTTPS",ariaLabel:"Clone with HTTPS",handler:()=>$("http")}),n&&e.push({protocol:"ssh",displayName:"SSH",ariaLabel:"Clone with SSH",handler:()=>$("ssh")}),e.push({protocol:"gh_cli",displayName:"GitHub CLI",ariaLabel:"Clone with GitHub CLI",handler:()=>$("gh_cli")}),e},[t,$,n]),U=(0,a.useMemo)(()=>{let e=[];return O&&e.push({name:"githubDesktop",text:"Open with GitHub Desktop",url:E,icon:f.DesktopDownloadIcon}),O&&R&&e.push({name:"visualStudio",text:"Open with Visual Studio",url:L}),B&&A&&e.push({name:"xcode",text:"Open with Xcode",url:D}),e.push({name:"zip",text:"Download ZIP",url:P,icon:f.FileZipIcon}),e},[E,B,O,R,A,L,D,P]);return(0,i.jsx)("div",{children:"githubDesktop"===I?(0,i.jsx)(x,{platform:"GitHub Desktop",href:"https://desktop.github.com/"}):"visualStudio"===I?(0,i.jsx)(x,{platform:"Visual Studio"}):"xcode"===I?(0,i.jsx)(x,{platform:"Xcode",href:"https://developer.apple.com/xcode/"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"m-3",children:[(0,i.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,i.jsx)(f.TerminalIcon,{className:"mr-2"}),(0,i.jsx)("p",{className:"flex-1 text-bold mb-0",children:"Clone"}),(0,i.jsx)(p.m,{text:"Which remote URL should I use?",type:"label",direction:"w",children:(0,i.jsx)(l.A,{muted:!0,href:`${e.helpUrl}/articles/which-remote-url-should-i-use`,children:(0,i.jsx)(f.QuestionIcon,{className:"mr-1"})})})]}),(0,i.jsx)(c.O,{"aria-label":"Remote URL selector",className:g.UnderlineNav,children:V.map(e=>(0,i.jsx)(c.O.Item,{"aria-current":k===e.protocol?"page":void 0,"aria-label":e.ariaLabel,onClick:e.handler,children:e.displayName},e.protocol))}),"http"===k?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b,{inputId:"clone-with-https",inputLabel:"Clone with HTTPS url",url:m}),(0,i.jsx)("p",{className:M,children:"Clone using the web URL."})]}):"ssh"===k?(0,i.jsxs)(i.Fragment,{children:[h&&(0,i.jsxs)(d.A,{className:"mb-2",variant:"warning",children:["You don't have any public SSH keys in your GitHub account. ","You can"," ",(0,i.jsx)(l.A,{inline:!0,href:w,children:"add a new public key"}),", or try cloning this repository via HTTPS."]}),(0,i.jsx)(b,{inputId:"clone-with-ssh",inputLabel:"Clone with SSH url",url:y}),(0,i.jsx)("p",{className:M,children:v?"Use a password-protected SSH certificate.":_?"Use a password-protected SSH key or certificate.":"Use a password-protected SSH key."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b,{buttonAriaLabel:"Copy command to clipboard",inputId:"clone-with-gh-cli",inputLabel:"Clone with GitHub CLI command",url:j}),(0,i.jsxs)("p",{className:M,children:["Work fast with our official CLI."," ",(0,i.jsx)(l.A,{inline:!0,href:"https://cli.github.com",target:"_blank","aria-label":"Learn more about the GitHub CLI",children:"Learn more"})]})]})]}),(0,i.jsx)(u.l,{variant:"inset",className:"border-top",children:U.map(e=>"zip"===e.name?(0,i.jsxs)(u.l.LinkItem,{"data-turbo":"false",href:e.url,rel:"nofollow",children:[e.icon&&(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(e.icon,{})}),e.text]},e.name):(0,i.jsxs)(u.l.Item,{onSelect:t=>{T(e.name),t.preventDefault(),F(e.url)},children:[e.icon&&(0,i.jsx)(u.l.LeadingVisual,{children:(0,i.jsx)(e.icon,{})}),e.text]},e.name))})]})})}function x({platform:e,href:t}){return(0,i.jsxs)("div",{className:(0,y.$)("p-3",g.PlatformContents),children:[(0,i.jsx)(m.A,{as:"h4",className:"mb-3 text-center",children:`Launching ${e}`}),t&&(0,i.jsxs)("p",{className:"mb-3",children:["If nothing happens, ",(0,i.jsx)(l.A,{inline:!0,href:t,children:`download ${e}`})," and try again."]})]})}function b({buttonAriaLabel:e="Copy url to clipboard",inputId:t,inputLabel:n,url:a}){return(0,i.jsxs)("div",{className:(0,y.$)("d-flex mb-2",g.CloneContainer),children:[(0,i.jsx)("label",{htmlFor:t,className:"sr-only",children:n}),(0,i.jsx)("input",{id:t,type:"text",className:"form-control input-monospace input-sm color-bg-subtle","data-autoselect":!0,value:a,readOnly:!0,style:{flexGrow:1}}),(0,i.jsx)(h.T,{className:(0,y.$)("ml-1 mr-0",g.CopyToClipboardButton),textToCopy:a,ariaLabel:e,tooltipProps:{direction:"nw"}})]})}try{v.displayName||(v.displayName="LocalTab")}catch{}try{x.displayName||(x.displayName="LaunchingPlatformContents")}catch{}try{b.displayName||(b.displayName="CloneUrl")}catch{}},26956:(e,t,n)=>{n.d(t,{Zf:()=>j});var i=n(74848),a=n(21728),s=n(66565),r=n(34164),o=n(96540);let l={scrollContainer:"ContentView-module__scrollContainer--_BylN",contentContainer:"ContentView-module__contentContainer--q5UcY",noHeader:"ContentView-module__noHeader--EociJ",content:"ContentView-module__content--kzPet",medium:"ContentView-module__medium--TcCTp",small:"ContentView-module__small--r1fwP",banner:"ContentView-module__banner--rgHMe",serviceHeader:"ContentView-module__serviceHeader--DEEHs",serviceTitle:"ContentView-module__serviceTitle--PbOYe",serviceDescription:"ContentView-module__serviceDescription--ZNDZz",serviceActions:"ContentView-module__serviceActions--IucKo",section:"ContentView-module__section--avH_l",sectionTitle:"ContentView-module__sectionTitle--MkQwz",sectionGrid:"ContentView-module__sectionGrid--unHY4",sectionGridEmpty:"ContentView-module__sectionGridEmpty--oxnzj",skeletonCard:"ContentView-module__skeletonCard--e4yHy"};function c(e){let t,n,s,c,u,m,p=(0,a.c)(15),{children:h,width:f,noHeader:g}=e;if(p[0]!==h){for(let e of(t=[],n=[],o.Children.toArray(h)))o.isValidElement(e)&&e.type===d?t.push(e):n.push(e);p[0]=h,p[1]=t,p[2]=n}else t=p[1],n=p[2];p[3]!==g?(s=(0,r.$)(l.contentContainer,{[l.noHeader]:g}),p[3]=g,p[4]=s):s=p[4];let y="small"===f,v="medium"===f;return p[5]!==y||p[6]!==v?(c=(0,r.$)(l.content,{[l.small]:y,[l.medium]:v}),p[5]=y,p[6]=v,p[7]=c):c=p[7],p[8]!==t||p[9]!==n||p[10]!==c?(u=(0,i.jsxs)("div",{className:c,children:[t,n]}),p[8]=t,p[9]=n,p[10]=c,p[11]=u):u=p[11],p[12]!==s||p[13]!==u?(m=(0,i.jsx)("div",{className:l.scrollContainer,children:(0,i.jsx)("div",{className:s,children:u})}),p[12]=s,p[13]=u,p[14]=m):m=p[14],m}function d(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:l.banner,children:s}),n[0]=s,n[1]=t):t=n[1],t}function u(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:l.serviceHeader,children:s}),n[0]=s,n[1]=t):t=n[1],t}function m(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("section",{className:l.section,children:s}),n[0]=s,n[1]=t):t=n[1],t}function p(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("h1",{className:l.serviceTitle,children:s}),n[0]=s,n[1]=t):t=n[1],t}function h(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("p",{className:l.serviceDescription,children:s}),n[0]=s,n[1]=t):t=n[1],t}function f(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:l.serviceActions,children:s}),n[0]=s,n[1]=t):t=n[1],t}function g(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("h2",{className:l.sectionTitle,children:s}),n[0]=s,n[1]=t):t=n[1],t}function y(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:l.sectionGridEmpty,children:s}),n[0]=s,n[1]=t):t=n[1],t}function v(e){let t,n,s,r=(0,a.c)(8),{children:c,loading:d}=e;if(void 0!==d&&d){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:l.sectionGrid,"data-testid":"service-view-skeleton",children:[void 0,void 0,void 0].map(_)}),r[0]=e):e=r[0],e}if(r[1]!==c){let e=o.Children.toArray(c);t=e.find(b),n=e.filter(x),r[1]=c,r[2]=t,r[3]=n}else t=r[2],n=r[3];let u=n;if(0===u.length&&t){let e;return r[4]!==t?(e=(0,i.jsx)(i.Fragment,{children:t}),r[4]=t,r[5]=e):e=r[5],e}return r[6]!==u?(s=(0,i.jsx)("div",{className:l.sectionGrid,children:u}),r[6]=u,r[7]=s):s=r[7],s}function x(e){return!(o.isValidElement(e)&&e.type===y)}function b(e){return o.isValidElement(e)&&e.type===y}function _(e,t){return(0,i.jsx)(s.f,{className:l.skeletonCard},t)}v.Empty=y,m.Title=g,m.Grid=v;let j={Title:p,Description:h,Actions:f,Container:c,Banner:d,Header:u,Section:m};j.displayName="ContentView",c.displayName="ContentView.Container",d.displayName="ContentView.Banner",u.displayName="ContentView.Header",m.displayName="ContentView.Section",p.displayName="ContentView.Title",h.displayName="ContentView.Description",f.displayName="ContentView.Actions",g.displayName="ContentView.Section.Title",v.displayName="ContentView.Section.Grid",y.displayName="ContentView.Section.Grid.Empty"},27912:(e,t,n)=>{n.d(t,{X:()=>L,P:()=>P});var i=n(74848),a=n(21728),s=n(34164),r=n(96540),o=n(57919),l=n(69599),c=n(16070);let d={container:"Layout-module__container--qlyoa",resizing:"Layout-module__resizing--rf7h4",banner:"Layout-module__banner--b14up",sidebar:"Layout-module__sidebar--r6coV",mainColumn:"Layout-module__mainColumn--OFMVb",secondaryColumn:"Layout-module__secondaryColumn--Ut9LZ",monoView:"Layout-module__monoView--z920C",sidebarCondensed:"Layout-module__sidebarCondensed--m7Zsu",panelView:"Layout-module__panelView--l6qZ7",columnLeft:"Layout-module__columnLeft--jY2aC",secondaryColumnVisible:"Layout-module__secondaryColumnVisible--RdfK7",resourcePanelOpen:"Layout-module__resourcePanelOpen--vh9_8",splitView:"Layout-module__splitView--ldg6X",columnRight:"Layout-module__columnRight--WBwz7",mainColumnRight:"Layout-module__mainColumnRight--Izd_P",verticalSecondaryColumn:"Layout-module__verticalSecondaryColumn--O2DEP",secondaryColumnHidden:"Layout-module__secondaryColumnHidden--y3gv6"},u={header:"Header-module__header--tjtIT",columnHeader:"Header-module__columnHeader--UxTKW",column:"Header-module__column--ysX1b",leftColumn:"Header-module__leftColumn--MghGY",rightColumn:"Header-module__rightColumn--AckUb"};var m=n(38621),p=n(26108),h=n(894);let f={sidebarToggleButton:"SidebarToggle-module__sidebarToggleButton--NAVdU"};function g(){let e,t=(0,a.c)(2),{toggleSidebar:n}=(0,h.L)();return t[0]!==n?(e=(0,i.jsx)("div",{className:f.sidebarToggleButton,children:(0,i.jsx)(p.K,{icon:m.ThreeBarsIcon,onClick:n,"aria-label":"Toggle sidebar"})}),t[0]=n,t[1]=e):e=t[1],e}try{g.displayName||(g.displayName="SidebarToggle")}catch{}function y(e){let t,n,r,o,l,c=(0,a.c)(10);return c[0]!==e?({children:t,className:n,...r}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=r):(t=c[1],n=c[2],r=c[3]),c[4]!==n?(o=(0,s.$)(u.column,u.leftColumn,n),c[4]=n,c[5]=o):o=c[5],c[6]!==t||c[7]!==r||c[8]!==o?(l=(0,i.jsx)("div",{className:o,...r,children:t}),c[6]=t,c[7]=r,c[8]=o,c[9]=l):l=c[9],l}function v(e){let t,n,r,o,l,c=(0,a.c)(10);return c[0]!==e?({children:t,className:n,...r}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=r):(t=c[1],n=c[2],r=c[3]),c[4]!==n?(o=(0,s.$)(u.column,u.rightColumn,n),c[4]=n,c[5]=o):o=c[5],c[6]!==t||c[7]!==r||c[8]!==o?(l=(0,i.jsx)("div",{className:o,...r,children:t}),c[6]=t,c[7]=r,c[8]=o,c[9]=l):l=c[9],l}function x(e){let t,n,r,l,c,d,m,p=(0,a.c)(20);p[0]!==e?({children:t,className:n,...r}=e,p[0]=e,p[1]=t,p[2]=n,p[3]=r):(t=p[1],n=p[2],r=p[3]),p[4]===Symbol.for("react.memo_cache_sentinel")?(l={leftColumn:y,rightColumn:v},p[4]=l):l=p[4];let[h]=(0,o.H)(t,l);if(h.leftColumn&&h.rightColumn){let e,t,a;return p[5]!==n?(e=(0,s.$)(u.columnHeader,n),p[5]=n,p[6]=e):e=p[6],p[7]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(g,{}),p[7]=t):t=p[7],p[8]!==r||p[9]!==h.leftColumn||p[10]!==h.rightColumn||p[11]!==e?(a=(0,i.jsxs)("header",{className:e,...r,children:[t,h.leftColumn,h.rightColumn]}),p[8]=r,p[9]=h.leftColumn,p[10]=h.rightColumn,p[11]=e,p[12]=a):a=p[12],a}return p[13]!==n?(c=(0,s.$)(u.header,n),p[13]=n,p[14]=c):c=p[14],p[15]===Symbol.for("react.memo_cache_sentinel")?(d=(0,i.jsx)(g,{}),p[15]=d):d=p[15],p[16]!==t||p[17]!==r||p[18]!==c?(m=(0,i.jsxs)("header",{className:c,...r,children:[d,t]}),p[16]=t,p[17]=r,p[18]=c,p[19]=m):m=p[19],m}try{y.displayName||(y.displayName="HeaderLeft")}catch{}try{v.displayName||(v.displayName="HeaderRight")}catch{}try{x.displayName||(x.displayName="Header")}catch{}let b={headerToggleOnly:"HeaderToggleOnly-module__headerToggleOnly--wC7_E"};function _(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:b.headerToggleOnly,children:(0,i.jsx)(g,{})}),t[0]=e):e=t[0],e}try{_.displayName||(_.displayName="HeaderToggleOnly")}catch{}var j=n(11607);let w={container:"Sidebar-module__container--onmDW",header:"Sidebar-module__header--rIhJd",sidebar:"Sidebar-module__sidebar--u6QU6",toggleSidebarFloating:"Sidebar-module__toggleSidebarFloating--fQq3y",toggleSidebarVertical:"Sidebar-module__toggleSidebarVertical--_YU5M",githubLogo:"Sidebar-module__githubLogo--qLZu3",visible:"Sidebar-module__visible--NW0KW",toggleSidebarContainer:"Sidebar-module__toggleSidebarContainer--QtdhW",iconLineTop:"Sidebar-module__iconLineTop--Ef2Ww",iconLineBottom:"Sidebar-module__iconLineBottom--QhwW5",condensed:"Sidebar-module__condensed--DvFLD",toggleIcon:"Sidebar-module__toggleIcon--MWRyj"};var N=n(36523),C=n(77999);function k(e){let t,n,o,l,c,d,u,p,h,f,g,y,v=(0,a.c)(37),{children:x,className:b,isVisible:_,isExpanded:k,sidebarRef:S,onToggle:I,"data-testid":T}=e,E=!k,L=(0,N.L)(S),R=(0,r.useId)();v[0]!==_?(t=()=>_?(0,i.jsx)(m.XIcon,{}):(0,i.jsx)(m.ThreeBarsIcon,{}),v[0]=_,v[1]=t):t=v[1];let A=t,D=`${R}-copilot-navigation`;v[2]!==b||v[3]!==E||v[4]!==_?(n=(0,s.$)(w.container,b,{[w.visible]:_,[w.condensed]:E}),v[2]=b,v[3]=E,v[4]=_,v[5]=n):n=v[5];let P=`${R}-copilot-navigation`;v[6]!==P?(o=(0,i.jsx)("h2",{id:P,className:"sr-only",children:"Copilot navigation"}),v[6]=P,v[7]=o):o=v[7],v[8]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsx)("a",{href:"/",target:"_self",className:w.githubLogo,"aria-label":"GitHub homepage",children:(0,i.jsx)(m.MarkGithubIcon,{size:32})}),v[8]=l):l=v[8];let O=_?"Close sidebar":"Open sidebar",B=_?"invisible":"default";v[9]!==A?(c=A(),v[9]=A,v[10]=c):c=v[10],v[11]!==I||v[12]!==O||v[13]!==B||v[14]!==c?(d=(0,i.jsx)(j.$,{className:w.toggleSidebarFloating,"aria-label":O,onClick:I,iconOnly:!0,variant:B,icon:c}),v[11]=I,v[12]=O,v[13]=B,v[14]=c,v[15]=d):d=v[15],v[16]!==d||v[17]!==o?(u=(0,i.jsxs)("div",{className:w.header,children:[o,l,d]}),v[16]=d,v[17]=o,v[18]=u):u=v[18],v[19]!==x||v[20]!==u?(p=(0,i.jsxs)("div",{className:w.sidebar,children:[u,x]}),v[19]=x,v[20]=u,v[21]=p):p=v[21];let F=_||k?"Condense":"Expand",M=k?-8:0,$=_||k?"Condense sidebar":"Expand sidebar";return v[22]===Symbol.for("react.memo_cache_sentinel")?(h=(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",strokeLinejoin:"round",className:w.toggleIcon,children:[(0,i.jsx)("path",{d:"M8 2.75 L8 8.75",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:w.iconLineTop}),(0,i.jsx)("path",{d:"M8 13.25 L8 7.25",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:w.iconLineBottom})]}),v[22]=h):h=v[22],v[23]!==I||v[24]!==$?(f=(0,i.jsx)("button",{className:w.toggleSidebarVertical,"aria-label":$,onClick:I,children:h}),v[23]=I,v[24]=$,v[25]=f):f=v[25],v[26]!==F||v[27]!==M||v[28]!==f?(g=(0,i.jsx)("div",{className:w.toggleSidebarContainer,children:(0,i.jsx)(C.m,{text:F,offset:M,children:f})}),v[26]=F,v[27]=M,v[28]=f,v[29]=g):g=v[29],v[30]!==T||v[31]!==L||v[32]!==p||v[33]!==g||v[34]!==D||v[35]!==n?(y=(0,i.jsxs)("aside",{"aria-labelledby":D,ref:L,className:n,"data-testid":T,children:[p,g]}),v[30]=T,v[31]=L,v[32]=p,v[33]=g,v[34]=D,v[35]=n,v[36]=y):y=v[36],y}try{k.displayName||(k.displayName="Sidebar")}catch{}function S(e){let t,n,r,o,l,c,u=(0,a.c)(17);if(u[0]!==e){let{children:i,className:a,onToggle:s,"data-testid":l,...c}=e;t=i,n=a,r=l,o=c,u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=o}else t=u[1],n=u[2],r=u[3],o=u[4];let{sidebarExpanded:m,sidebarVisible:p,layoutBreakpoint:f,toggleSidebar:g,sidebarRef:y}=(0,h.L)();return u[5]!==n?(l=(0,s.$)(d.sidebar,n),u[5]=n,u[6]=l):l=u[6],u[7]!==t||u[8]!==r||u[9]!==f||u[10]!==o||u[11]!==m||u[12]!==y||u[13]!==p||u[14]!==l||u[15]!==g?(c=(0,i.jsx)(k,{className:l,isFloating:f,isVisible:p,isExpanded:m,onToggle:g,sidebarRef:y,"data-testid":r,...o,children:t}),u[7]=t,u[8]=r,u[9]=f,u[10]=o,u[11]=m,u[12]=y,u[13]=p,u[14]=l,u[15]=g,u[16]=c):c=u[16],c}function I(e){let t,n,r,o,l,c=(0,a.c)(11);c[0]!==e?({children:t,className:n,...r}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=r):(t=c[1],n=c[2],r=c[3]);let{mainColumn:u}=(0,h.L)(),m="left"===u?d.mainColumn:d.secondaryColumn;return c[4]!==n||c[5]!==m?(o=(0,s.$)(d.columnLeft,m,n),c[4]=n,c[5]=m,c[6]=o):o=c[6],c[7]!==t||c[8]!==r||c[9]!==o?(l=(0,i.jsx)("div",{className:o,"data-column-position":"left",...r,children:t}),c[7]=t,c[8]=r,c[9]=o,c[10]=l):l=c[10],l}function T(e){let t,n,r,o,l,c,u=(0,a.c)(13);u[0]!==e?({children:t,className:n,"data-testid":r,...o}=e,u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=o):(t=u[1],n=u[2],r=u[3],o=u[4]);let{mainColumn:m}=(0,h.L)(),p="right"===m?d.mainColumn:d.secondaryColumn;return u[5]!==n||u[6]!==p?(l=(0,s.$)(d.columnRight,p,n),u[5]=n,u[6]=p,u[7]=l):l=u[7],u[8]!==t||u[9]!==r||u[10]!==o||u[11]!==l?(c=(0,i.jsx)("div",{className:l,"data-testid":r,"data-column-position":"right",...o,children:t}),u[8]=t,u[9]=r,u[10]=o,u[11]=l,u[12]=c):c=u[12],c}function E(){let e,t=(0,a.c)(1);return(0,l.G7)("global_sso_banner")?(t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:d.banner,children:(0,i.jsx)(c.Y0,{})}),t[0]=e):e=t[0],e):null}let L="(max-width: 1024px)",R="COPILOT_IMMERSIVE_SIDEBAR_COLLAPSED_STATE_KEY";function A(){return function(){if("undefined"==typeof window)return null;try{let e=localStorage.getItem(R);return null===e?null:JSON.parse(e)}catch{return null}}()??!0}function D(e){let t,n,l,c,u,m,p,f,g,b,j,w,N,C,k,D=(0,a.c)(30);D[0]!==e?({children:t,className:n,mainColumn:f,"data-testid":l,secondaryColumnState:p,resourcePanelState:m,faviconOverride:c,mobileSecondaryColumnDirection:g,...u}=e,D[0]=e,D[1]=t,D[2]=n,D[3]=l,D[4]=c,D[5]=u,D[6]=m,D[7]=p,D[8]=f,D[9]=g):(t=D[1],n=D[2],l=D[3],c=D[4],u=D[5],m=D[6],p=D[7],f=D[8],g=D[9]);let P=void 0===f?"left":f,O=void 0===g?"horizontal":g;D[10]===Symbol.for("react.memo_cache_sentinel")?(b={banner:E,header:x,sidebar:S,columnLeft:I,columnRight:T},D[10]=b):b=D[10];let[B]=(0,o.H)(t,b),F=function(e){if(!e||!(0,r.isValidElement)(e))return!1;let t=!1,n=!1,i=e.props.children;for(let e of r.Children.toArray(i))(0,r.isValidElement)(e)&&(e.type===y&&(t=!0),e.type===v&&(n=!0));return t&&n}(B.header||null),M=!!B.columnLeft&&!B.columnRight||!B.columnLeft&&!!B.columnRight,$=!!B.columnLeft&&!!B.columnRight,V=!F&&!M,U=function(e,t,n){let i,s,o,l,c,d,u,m=(0,a.c)(27),[p,h]=(0,r.useState)(A),[f,g]=(0,r.useState)(!1),y=(0,r.useState)(!1),v=(0,r.useState)(!1),[x,b]=t??y,[_,j]=n??v;m[0]!==j||m[1]!==b?(i=e=>{e?(b(!1),j(!1)):g(!1)},m[0]=j,m[1]=b,m[2]=i):i=m[2];let w=function(e,t){let n,i,s,o=(0,a.c)(6);o[0]!==e?(n=()=>"undefined"!=typeof window&&window.matchMedia(e).matches,o[0]=e,o[1]=n):n=o[1];let[l,c]=(0,r.useState)(n);return o[2]!==t||o[3]!==e?(i=()=>{let n=window.matchMedia(e),i=e=>{c(e.matches),t&&t(e.matches)};return c(n.matches),n.addEventListener("change",i),()=>{n.removeEventListener("change",i)}},s=[e,t],o[2]=t,o[3]=e,o[4]=i,o[5]=s):(i=o[4],s=o[5]),(0,r.useEffect)(i,s),l}(L,i),N=(0,r.useRef)(null),C=(0,r.useRef)(null);m[3]!==w||m[4]!==p||m[5]!==f?(s=()=>{if(w)g(!f);else{let e=!p;h(e);if("undefined"!=typeof window)try{localStorage.setItem(R,JSON.stringify(e))}catch{}}},m[3]=w,m[4]=p,m[5]=f,m[6]=s):s=m[6];let k=s;m[7]!==x||m[8]!==j||m[9]!==b?(o=()=>{x&&j(!1),b(!x)},m[7]=x,m[8]=j,m[9]=b,m[10]=o):o=m[10];let S=o;m[11]!==_||m[12]!==j?(l=()=>{j(!_)},m[11]=_,m[12]=j,m[13]=l):l=m[13];let I=l;return m[14]!==f?(c=()=>{if(f&&C.current){let e=e=>{C.current&&!C.current.contains(e.target)&&g(!1)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e,{passive:!0}),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}},d=[f],m[14]=f,m[15]=c,m[16]=d):(c=m[15],d=m[16]),(0,r.useEffect)(c,d),m[17]!==w||m[18]!==e||m[19]!==_||m[20]!==x||m[21]!==p||m[22]!==f||m[23]!==I||m[24]!==S||m[25]!==k?(u={sidebarExpanded:p,sidebarVisible:f,toggleSidebar:k,secondaryColumnVisible:x,toggleSecondaryColumn:S,resourcePanelOpen:_,toggleResourcePanel:I,layoutBreakpoint:w,mainColumn:e,containerRef:N,sidebarRef:C},m[17]=w,m[18]=e,m[19]=_,m[20]=x,m[21]=p,m[22]=f,m[23]=I,m[24]=S,m[25]=k,m[26]=u):u=m[26],u}(P,p,m),{containerRef:q,secondaryColumnVisible:W,sidebarExpanded:H,resourcePanelOpen:G}=U,K=function(e,t){let n,i,s=(0,a.c)(6),[o,l]=(0,r.useState)(!1),c=(0,r.useRef)(void 0);return void 0!==s[0]||s[1]!==e.current?(n=()=>{if(!e.current)return;let t=new ResizeObserver(e=>{l(!0),c.current&&clearTimeout(c.current),c.current=window.setTimeout(()=>{l(!1)},150)});return t.observe(e.current),()=>{t.disconnect(),c.current&&clearTimeout(c.current)}},s[0]=t,s[1]=e.current,s[2]=n):n=s[2],s[3]!==t||s[4]!==e?(i=[e,t],s[3]=t,s[4]=e,s[5]=i):i=s[5],(0,r.useEffect)(n,i),o}(q),z=h.M,Q=(0,s.$)(d.container,V&&d.panelView,F&&d.splitView,F&&"right"===P&&d.mainColumnRight,W&&d.secondaryColumnVisible,!W&&$&&d.secondaryColumnHidden,G&&d.resourcePanelOpen,M&&d.monoView,!H&&d.sidebarCondensed,K&&d.resizing,"vertical"===O&&d.verticalSecondaryColumn,n);return D[11]!==c?(j=c&&(0,i.jsx)("span",{"data-favicon-override":c,"data-testid":"favicon-override"}),D[11]=c,D[12]=j):j=D[12],D[13]===Symbol.for("react.memo_cache_sentinel")?(w=(0,i.jsx)(E,{}),D[13]=w):w=D[13],D[14]!==B.header?(N=B.header||(0,i.jsx)(_,{}),D[14]=B.header,D[15]=N):N=D[15],D[16]!==q||D[17]!==l||D[18]!==u||D[19]!==B.columnLeft||D[20]!==B.columnRight||D[21]!==B.sidebar||D[22]!==Q||D[23]!==j||D[24]!==N?(C=(0,i.jsxs)("div",{className:Q,"data-testid":l,ref:q,...u,children:[j,w,N,B.sidebar,B.columnLeft,B.columnRight]}),D[16]=q,D[17]=l,D[18]=u,D[19]=B.columnLeft,D[20]=B.columnRight,D[21]=B.sidebar,D[22]=Q,D[23]=j,D[24]=N,D[25]=C):C=D[25],D[26]!==U||D[27]!==z.Provider||D[28]!==C?(k=(0,i.jsx)(z.Provider,{value:U,children:C}),D[26]=U,D[27]=z.Provider,D[28]=C,D[29]=k):k=D[29],k}let P=Object.assign(D,{Banner:E,Sidebar:S,ColumnLeft:I,ColumnRight:T,Header:x,HeaderLeft:y,HeaderRight:v});try{S.displayName||(S.displayName="LayoutSidebar")}catch{}try{I.displayName||(I.displayName="ColumnLeft")}catch{}try{T.displayName||(T.displayName="ColumnRight")}catch{}try{E.displayName||(E.displayName="Banner")}catch{}try{L.displayName||(L.displayName="LAYOUT_BREAKPOINT")}catch{}try{D.displayName||(D.displayName="LayoutRoot")}catch{}try{P.displayName||(P.displayName="Layout")}catch{}},28177:(e,t,n)=>{n.d(t,{n:()=>r});var i=n(74848),a=n(21728),s=n(38621);function r(e){let t,n=(0,a.c)(3);if("existing-issue"===e.type){if("open"===e.state){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(s.IssueOpenedIcon,{className:"fgColor-open"}),n[0]=e):e=n[0],e}if("closed"===e.state){let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(s.IssueClosedIcon,{className:"fgColor-done"}),n[1]=e):e=n[1],e}}return n[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(s.IssueDraftIcon,{className:"fgColor-draft"}),n[2]=t):t=n[2],t}try{r.displayName||(r.displayName="IssueIcon")}catch{}},30388:(e,t,n)=>{n.d(t,{qJ:()=>j});var i=n(74848),a=n(21728),s=n(96540),r=n(34164),o=n(88934),l=n(40090);let c={container:"ListBlock-module__container--QbgMo",header:"ListBlock-module__header--meKIf",list:"ListBlock-module__list--YHbt4",emptyState:"ListBlock-module__emptyState--MymTD",item:"ListBlock-module__item--xlbmd",itemContent:"ListBlock-module__itemContent--cacSg",actions:"ListBlock-module__actions--LfUWo",itemClickable:"ListBlock-module__itemClickable--AFcjc",leadingVisual:"ListBlock-module__leadingVisual--tOjGr",title:"ListBlock-module__title--MZAST",description:"ListBlock-module__description--dTYnl",metadata:"ListBlock-module__metadata--gtl9k",skeletonItem:"ListBlock-module__skeletonItem--ZfJMT"};function d(e){let t,n,s=(0,a.c)(5),{children:o,className:l}=e;return s[0]!==l?(t=(0,r.$)(c.container,l),s[0]=l,s[1]=t):t=s[1],s[2]!==o||s[3]!==t?(n=(0,i.jsx)("div",{className:t,children:o}),s[2]=o,s[3]=t,s[4]=n):n=s[4],n}function u(e){let t,n,s=(0,a.c)(5),{children:o,className:l}=e;return s[0]!==l?(t=(0,r.$)(c.header,l),s[0]=l,s[1]=t):t=s[1],s[2]!==o||s[3]!==t?(n=(0,i.jsx)("div",{className:t,children:o}),s[2]=o,s[3]=t,s[4]=n):n=s[4],n}function m(e){let t,n,s,r,o=(0,a.c)(11);if(o[0]!==e?({children:t,loading:s,...n}=e,o[0]=e,o[1]=t,o[2]=n,o[3]=s):(t=o[1],n=o[2],s=o[3]),void 0!==s&&s){let e,t;return o[4]===Symbol.for("react.memo_cache_sentinel")?(e=[void 0,void 0,void 0,void 0,void 0].map(p),o[4]=e):e=o[4],o[5]!==n||o[6]!==e?(t=(0,i.jsx)("ul",{className:c.list,"data-testid":"list-block-skeleton",...n,children:e}),o[5]=n,o[6]=e,o[7]=t):t=o[7],t}return o[8]!==t||o[9]!==n?(r=(0,i.jsx)("ul",{className:c.list,...n,children:t}),o[8]=t,o[9]=n,o[10]=r):r=o[10],r}function p(e,t){return(0,i.jsx)(g,{},t)}function h(e){let t,n,l,d=(0,a.c)(47),u=null,m=null,p=null,h=null,g=null;if(d[0]!==e.children){for(let t of s.Children.toArray(e.children))s.isValidElement(t)&&(t.type===y?u=t:t.type===v?m=t:t.type===x?p=t:t.type===b?h=t:t.type===f&&(g=t));d[0]=e.children,d[1]=u,d[2]=m,d[3]=p,d[4]=h,d[5]=g}else u=d[1],m=d[2],p=d[3],h=d[4],g=d[5];d[6]!==p||d[7]!==u||d[8]!==h||d[9]!==m?(t=(0,i.jsxs)(i.Fragment,{children:[u,m,p,h]}),d[6]=p,d[7]=u,d[8]=h,d[9]=m,d[10]=t):t=d[10];let _=t;if("href"in e){let t,n,a,s,l,u;if(d[11]!==e?({href:t,isExternalLink:a,...n}=e,d[11]=e,d[12]=t,d[13]=n,d[14]=a):(t=d[12],n=d[13],a=d[14]),void 0!==a&&a){let e,a,s;return d[15]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.$)(c.itemContent,c.itemClickable),d[15]=e):e=d[15],d[16]!==_||d[17]!==t||d[18]!==n?(a=(0,i.jsx)("a",{href:t,className:e,target:"_self",rel:"noopener noreferrer",...n,children:_}),d[16]=_,d[17]=t,d[18]=n,d[19]=a):a=d[19],d[20]!==g||d[21]!==a?(s=(0,i.jsxs)("li",{className:c.item,children:[a,g]}),d[20]=g,d[21]=a,d[22]=s):s=d[22],s}return d[23]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.$)(c.itemContent,c.itemClickable),d[23]=s):s=d[23],d[24]!==_||d[25]!==t||d[26]!==n?(l=(0,i.jsx)(o.N_,{...n,to:t,className:s,children:_}),d[24]=_,d[25]=t,d[26]=n,d[27]=l):l=d[27],d[28]!==g||d[29]!==l?(u=(0,i.jsxs)("li",{className:c.item,children:[l,g]}),d[28]=g,d[29]=l,d[30]=u):u=d[30],u}if("onClick"in e){let t,n,a,s,o;return d[31]!==e?({onClick:t,...n}=e,d[31]=e,d[32]=t,d[33]=n):(t=d[32],n=d[33]),d[34]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.$)(c.itemContent,c.itemClickable),d[34]=a):a=d[34],d[35]!==_||d[36]!==t||d[37]!==n?(s=(0,i.jsx)("button",{...n,className:a,onClick:t,children:_}),d[35]=_,d[36]=t,d[37]=n,d[38]=s):s=d[38],d[39]!==g||d[40]!==s?(o=(0,i.jsxs)("li",{className:c.item,children:[s,g]}),d[39]=g,d[40]=s,d[41]=o):o=d[41],o}return d[42]!==_?(n=(0,i.jsx)("div",{className:c.itemContent,children:_}),d[42]=_,d[43]=n):n=d[43],d[44]!==g||d[45]!==n?(l=(0,i.jsxs)("li",{className:c.item,children:[n,g]}),d[44]=g,d[45]=n,d[46]=l):l=d[46],l}function f(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:c.actions,children:s}),n[0]=s,n[1]=t):t=n[1],t}function g(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("li",{className:c.item,children:(0,i.jsx)("div",{className:c.skeletonItem,children:(0,i.jsx)(l.r,{lines:2})})}),t[0]=e):e=t[0],e}function y(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:c.leadingVisual,children:s}),n[0]=s,n[1]=t):t=n[1],t}function v(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("h3",{className:c.title,children:s}),n[0]=s,n[1]=t):t=n[1],t}function x(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:c.description,children:s}),n[0]=s,n[1]=t):t=n[1],t}function b(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("div",{className:c.metadata,children:s}),n[0]=s,n[1]=t):t=n[1],t}function _(e){let t,n=(0,a.c)(2),{children:s}=e;return n[0]!==s?(t=(0,i.jsx)("li",{className:c.emptyState,children:s}),n[0]=s,n[1]=t):t=n[1],t}h.LeadingVisual=y,h.Title=v,h.Description=x,h.SecondaryDescription=b,h.Metadata=b,h.Actions=f,h.Skeleton=g;let j=d;j.Header=u,j.List=m,j.Item=h,j.EmptyState=_,j.displayName="ListBlock",u.displayName="ListBlock.Header",m.displayName="ListBlock.List",h.displayName="ListBlock.Item",y.displayName="ListBlock.Item.LeadingVisual",v.displayName="ListBlock.Item.Title",x.displayName="ListBlock.Item.Description",b.displayName="ListBlock.Item.Metadata",f.displayName="ListBlock.Item.Actions",g.displayName="ListBlock.Item.Skeleton",_.displayName="ListBlock.EmptyState";try{d.displayName||(d.displayName="ListBlock")}catch{}},31315:(e,t,n)=>{function i(e){return a(e)[0]}function a(e){let t=[];for(let n of function(){try{return document.cookie.split(";")}catch{return[]}}()){let[i,a]=n.trim().split("=");e===i&&void 0!==a&&t.push({key:i,value:a})}return t}function s(e,t,n=null,i=!1,a="lax"){let r=document.domain;if(null==r)throw Error("Unable to get document domain");r.endsWith(".github.com")&&(r="github.com");let o="https:"===location.protocol?"; secure":"",l=n?`; expires=${n}`:"";!1===i&&(r=`.${r}`);try{document.cookie=`${e}=${t}; path=/; domain=${r}${l}${o}; samesite=${a}`}catch{}}function r(e,t=!1){let n=document.domain;if(null==n)throw Error("Unable to get document domain");n.endsWith(".github.com")&&(n="github.com");let i=new Date(Date.now()-1).toUTCString(),a="https:"===location.protocol?"; secure":"",s=`; expires=${i}`;!1===t&&(n=`.${n}`);try{document.cookie=`${e}=''; path=/; domain=${n}${s}${a}`}catch{}}n.d(t,{OR:()=>a,Ri:()=>i,TV:()=>s,Yj:()=>r})},31629:(e,t,n)=>{function i(e){return"github-graphql"===e.type}function a(e){return"loop"===e.type}function s(e){return"text"===e.type}n.d(t,{Tm:()=>i,ir:()=>s,jq:()=>a})},31675:(e,t,n)=>{n.d(t,{A:()=>i});let i={"hide-on-mobile":"responsive-module__hide-on-mobile--lWlU1","hide-on-desktop":"responsive-module__hide-on-desktop--op38F","hide-on-small":"responsive-module__hide-on-small--oDr47","hide-on-medium-up":"responsive-module__hide-on-medium-up--imsgz"}},33026:(e,t,n)=>{n.d(t,{U8:()=>s,kj:()=>i,qD:()=>a});let i="draft",a="latest",s=i},33195:(e,t,n)=>{n.d(t,{u:()=>c});var i=n(74848),a=n(85369),s=n(96540),r=n(34164);let o={unlisted:"PullRequestStateLabel-module__unlisted--pcrfP"};var l=n(33578);function c({className:e,state:t}){let n=(0,s.useMemo)(()=>l.a[t],[t]);return t===l.Q.Unlisted?(0,i.jsxs)("span",{className:o.unlisted,children:[(0,i.jsx)(d,{})," Unlisted"]}):(0,i.jsx)(a.A,{className:(0,r.$)("flex-self-start",e),status:n.status,children:n.description})}function d(){return(0,i.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",fill:"currentColor",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 3.25C2.5 2.83579 2.83579 2.5 3.25 2.5C3.66421 2.5 4 2.83579 4 3.25C4 3.66421 3.66421 4 3.25 4C2.83579 4 2.5 3.66421 2.5 3.25ZM3.25 1C2.00736 1 1 2.00736 1 3.25C1 4.22966 1.62611 5.06309 2.5 5.37197V10.628C1.62611 10.9369 1 11.7703 1 12.75C1 13.9926 2.00736 15 3.25 15C4.49264 15 5.5 13.9926 5.5 12.75C5.5 11.7703 4.87389 10.9369 4 10.628V5.37197C4.87389 5.06309 5.5 4.22966 5.5 3.25C5.5 2.00736 4.49264 1 3.25 1ZM3.25 12C2.83579 12 2.5 12.3358 2.5 12.75C2.5 13.1642 2.83579 13.5 3.25 13.5C3.66421 13.5 4 13.1642 4 12.75C4 12.3358 3.66421 12 3.25 12Z"}),(0,i.jsx)("path",{d:"M14 7.5C14 8.19036 13.3844 8.75 12.625 8.75C11.8656 8.75 11.25 8.19036 11.25 7.5C11.25 6.80964 11.8656 6.25 12.625 6.25C13.3844 6.25 14 6.80964 14 7.5Z"}),(0,i.jsx)("path",{d:"M14 2.75C14 3.44036 13.3844 4 12.625 4C11.8656 4 11.25 3.44036 11.25 2.75C11.25 2.05964 11.8656 1.5 12.625 1.5C13.3844 1.5 14 2.05964 14 2.75Z"}),(0,i.jsx)("path",{d:"M10.2197 10.7197C10.5126 10.4268 10.9874 10.4268 11.2803 10.7197L14.2803 13.7197C14.5732 14.0126 14.5732 14.4874 14.2803 14.7803C13.9874 15.0732 13.5126 15.0732 13.2197 14.7803L10.2197 11.7803C9.92683 11.4874 9.92683 11.0126 10.2197 10.7197Z"})]})}try{c.displayName||(c.displayName="PullRequestStateLabel")}catch{}try{d.displayName||(d.displayName="GitPullRequestUnlistedSvg")}catch{}},33578:(e,t,n)=>{n.d(t,{Q:()=>i,a:()=>a});let i={Open:"OPEN",Closed:"CLOSED",Merged:"MERGED",Queued:"QUEUED",Draft:"DRAFT",Unlisted:"UNLISTED"},a={[i.Open]:{description:"Open",status:"pullOpened"},[i.Closed]:{description:"Closed",status:"pullClosed"},[i.Queued]:{description:"Queued",status:"pullQueued"},[i.Merged]:{description:"Merged",status:"pullMerged"},[i.Draft]:{description:"Draft",status:"draft"},[i.Unlisted]:{description:"Unlisted",status:"unlisted"}}},33644:(e,t,n)=>{n.d(t,{A:()=>i});let i={stickyHeader:"use-sticky-header-module__stickyHeader--UQFpz"}},34031:(e,t,n)=>{n.d(t,{M:()=>o});var i=n(74848),a=n(21728);let s={container:"RunningDisplay-module__container--dUZ8X",text:"RunningDisplay-module__text--nICc0"};var r=n(74807);function o(e){let t,n,o,l,c=(0,a.c)(8),{isRunning:d,messages:u}=e;c[0]===Symbol.for("react.memo_cache_sentinel")?(t={running:"Running...",waiting:"Waiting..."},c[0]=t):t=c[0];let m=t,p=u||m,h=d?p.running:p.waiting,f=d?"thinking":"static";return c[1]!==f?(n=(0,i.jsx)(r.N,{animationType:f,loopAnimation:!0}),c[1]=f,c[2]=n):n=c[2],c[3]!==h?(o=(0,i.jsx)("div",{className:s.text,children:h}),c[3]=h,c[4]=o):o=c[4],c[5]!==n||c[6]!==o?(l=(0,i.jsxs)("div",{className:s.container,children:[n,o]}),c[5]=n,c[6]=o,c[7]=l):l=c[7],l}try{o.displayName||(o.displayName="RunningDisplay")}catch{}},34261:(e,t,n)=>{n.d(t,{W:()=>c,f:()=>l});var i=n(65510),a=n(20622),s=n(53885),r=n(96379),o=n(50129);function l(){let{basePageDataUrl:e}=(0,o.Yu)();return[a.u.header,`basePageDataURL:${e}`]}function c(e){let t=(0,s.e)(a.u.header),n=l();return(0,i.U)({queryKey:n,queryFn:async()=>{let e=await (0,r.QJ)(t);if(!e.ok)throw Error(`HTTP ${e.status}`);return await e.json()},initialData:e,staleTime:1/0})}},35104:(e,t,n)=>{n.d(t,{W:()=>d,Y:()=>c});var i=n(21728),a=n(2635),s=n(33592),r=n(51213),o=n(72303),l=n(53419);function c(e){let t,n,c=(0,i.c)(6),d=(0,s.b)(),u=(0,a.Pk)();c[0]!==d||c[1]!==e||c[2]!==u?(t=async()=>{let t=e.name||e.tag;(0,l.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_DRAFT_ISSUE",mode:"immersive",threadId:(0,o.W)(u)?.id});let n={type:"text",name:`timeline-event: {"type": "planning-task-draft-issue", "markdownContent": "Drafting task '${t}' as an issue..."}`},i=e.repository?` in repository ${e.repository}`:"",a=`
Create a draft issue using the content of the ${e.tag} task${i}.
`;await d.sendChatMessage({thread:(0,o.W)(u),content:a,references:[n],topic:u.currentTopic,context:u.context,customInstructions:u.customInstructions,model:u.model,intent:r.wh.planningAgent})},c[0]=d,c[1]=e,c[2]=u,c[3]=t):t=c[3];let m=t;return c[4]!==m?(n={convertToDraftIssue:m},c[4]=m,c[5]=n):n=c[5],n}function d(e){let t,n,c=(0,i.c)(6),d=(0,s.b)(),u=(0,a.Pk)();c[0]!==d||c[1]!==u||c[2]!==e?(t=async()=>{(0,l.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_DRAFT_ALL_ISSUES",mode:"immersive",threadId:(0,o.W)(u)?.id});let t=`
Create draft issues for all tasks with the following tags: ${e.join(", ")}.
The tasks should be filed under a new parent issue. If the tasklist has a title, use that as the parent issue title.
`;await d.sendChatMessage({thread:(0,o.W)(u),content:t,references:[{type:"text",name:'timeline-event: {"type": "planning-task-draft-issue", "markdownContent": "Drafting all tasks as issues..."}'}],topic:u.currentTopic,context:u.context,customInstructions:u.customInstructions,model:u.model,intent:r.wh.planningAgent})},c[0]=d,c[1]=u,c[2]=e,c[3]=t):t=c[3];let m=t;return c[4]!==m?(n={convertAllToDraftIssues:m},c[4]=m,c[5]=n):n=c[5],n}},37510:(e,t,n)=>{n.d(t,{S:()=>a});var i=n(46996);function a(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;let n={title:e.title,description:e.description,nodes:e.nodes},a={title:t.title,description:t.description,nodes:t.nodes};return(0,i.A)(n,a)}},37673:(e,t,n)=>{n.d(t,{K:()=>d});var i=n(74848),a=n(21728),s=n(88752),r=n(96540),o=n(62828),l=n(7812),c=n(1747);function d(e){let t,n,d,u,m,p=(0,a.c)(20),{className:h,messageId:f,messageIndex:g,messageTimestamp:y,references:v,size:x}=e;p[0]!==f||p[1]!==g||p[2]!==y?(t={messageId:f,messageIndex:g,messageTimestamp:y},p[0]=f,p[1]=g,p[2]=y,p[3]=t):t=p[3];let b=(0,o.I)(t),{updateItem:_,versionedItems:j}=(0,c.xx)();return p[4]!==f||p[5]!==g||p[6]!==y||p[7]!==v||p[8]!==_?(n=()=>{for(let e of v){let t=(0,l.oR)({ref:e,messageIndex:void 0!==g?g:1,messageId:f,timestamp:y});null!=t&&_(t)}},d=[f,g,y,v,_],p[4]=f,p[5]=g,p[6]=y,p[7]=v,p[8]=_,p[9]=n,p[10]=d):(n=p[9],d=p[10]),(0,r.useEffect)(n,d),p[11]!==g||p[12]!==j?(u=e=>(0,l.wt)(e,g,j),p[11]=g,p[12]=j,p[13]=u):u=p[13],p[14]!==h||p[15]!==b||p[16]!==v||p[17]!==x||p[18]!==u?(m=(0,i.jsx)(s.t,{references:v,onClickReference:b,size:x,className:h,getReferenceVersion:u}),p[14]=h,p[15]=b,p[16]=v,p[17]=x,p[18]=u,p[19]=m):m=p[19],m}try{d.displayName||(d.displayName="ChatMessageReferences")}catch{}},38447:(e,t,n)=>{n.d(t,{p:()=>g,E:()=>f});var i=n(74848),a=n(21728),s=n(25641),r=n(35247),o=n(38621),l=n(96540),c=n(37673),d=n(7812),u=n(1747),m=n(80947);let p={timelineEvent:"TimelineEvents-module__timelineEvent--FV3V3",icon:"TimelineEvents-module__icon--E6IJb",situationalTimelineEvent:"TimelineEvents-module__situationalTimelineEvent--WTQlM TimelineEvents-module__timelineEvent--FV3V3",references:"TimelineEvents-module__references--lv7xz ChatMessage-module__references--Pi5OH"};function h(e){return"text"===e.type&&null!=e.name&&e.name.startsWith("timeline-event:")}function f(e,t){return e.references?.some(e=>h(e)&&(void 0===t||t?.some(t=>e.name.startsWith(`timeline-event: {"type": "${t}"`))))??!1}function g(e){let t,n,s,r=(0,a.c)(10),{message:o,messageIndex:l,isViewingSharedThread:c,isSharedMessage:d,isLatestMessage:u}=e;return r[0]!==o||r[1]!==l?(t=f(o)&&(0,i.jsx)(y,{message:o,messageIndex:l}),r[0]=o,r[1]=l,r[2]=t):t=r[2],r[3]!==u||r[4]!==d||r[5]!==c?(n=(0,i.jsx)(x,{isViewingSharedThread:c,isSharedMessage:d,isLatestMessage:u}),r[3]=u,r[4]=d,r[5]=c,r[6]=n):n=r[6],r[7]!==t||r[8]!==n?(s=(0,i.jsxs)(i.Fragment,{children:[t,n]}),r[7]=t,r[8]=n,r[9]=s):s=r[9],s}function y(e){let t,n,r,h,f,g,y,x=(0,a.c)(24),{message:b,messageIndex:_}=e,{updateItem:j}=(0,u.xx)();if(x[0]!==b.createdAt||x[1]!==b.id||x[2]!==b.references||x[3]!==_||x[4]!==j?(t=()=>{if(b.references)for(let e of b.references){let t=(0,d.oR)({ref:e,messageIndex:_,messageId:b.id,timestamp:b.createdAt});null!=t&&j(t)}},n=[b.references,b.id,_,b.createdAt,j],x[0]=b.createdAt,x[1]=b.id,x[2]=b.references,x[3]=_,x[4]=j,x[5]=t,x[6]=n):(t=x[5],n=x[6]),(0,l.useEffect)(t,n),x[7]!==b.references){r=Symbol.for("react.early_return_sentinel");e:{let e=b.references?.filter(v);if(!e){r=void 0;break e}for(let t of(h=[],e)){let e=JSON.parse(t.name.replace("timeline-event: ","")),n=t.icon||o.CheckIcon;h.push({type:e.type,markdownContent:e.markdownContent,icon:n})}}x[7]=b.references,x[8]=r,x[9]=h}else r=x[8],h=x[9];return r!==Symbol.for("react.early_return_sentinel")?r:(x[10]!==b.createdAt||x[11]!==b.id||x[12]!==b.references||x[13]!==_?(f=b.references&&b.references.length>0&&(0,i.jsx)(c.K,{className:p.references,messageId:b.id,messageTimestamp:b.createdAt,messageIndex:_,references:b.references,size:"medium"}),x[10]=b.createdAt,x[11]=b.id,x[12]=b.references,x[13]=_,x[14]=f):f=x[14],x[15]!==b.content||x[16]!==b.createdAt||x[17]!==b.id||x[18]!==_||x[19]!==h?(g=h.map(e=>{let{type:t,markdownContent:n,icon:a}=e;return(0,i.jsxs)("div",{className:p.timelineEvent,children:[(0,i.jsx)(a,{className:p.icon}),(0,i.jsx)(m.G,{autoOpenPreviewPane:!1,markdown:n,messageId:b.id,messageIndex:_,messageTimestamp:b.createdAt,accessibleHeader:(0,s.hV)("Timeline",b.content??"")})]},t)}),x[15]=b.content,x[16]=b.createdAt,x[17]=b.id,x[18]=_,x[19]=h,x[20]=g):g=x[20],x[21]!==f||x[22]!==g?(y=(0,i.jsxs)(i.Fragment,{children:[f,g]}),x[21]=f,x[22]=g,x[23]=y):y=x[23],y)}function v(e){return h(e)}function x(e){let t,n,s,l=(0,a.c)(9),{isSharedMessage:c,isViewingSharedThread:d,isLatestMessage:u}=e;return l[0]!==c||l[1]!==d?(t=c&&!d&&(0,i.jsxs)("div",{className:p.situationalTimelineEvent,children:[(0,i.jsx)(o.LinkIcon,{className:p.icon})," Messages up to this point are included in shared link"]}),l[0]=c,l[1]=d,l[2]=t):t=l[2],l[3]!==u||l[4]!==d?(n=u&&r.W.copilotDuplicateThread&&d&&(0,i.jsxs)("div",{className:p.situationalTimelineEvent,children:[(0,i.jsx)(o.RepoForkedIcon,{className:p.icon})," Messages beyond this point will start a new private chat"]}),l[3]=u,l[4]=d,l[5]=n):n=l[5],l[6]!==t||l[7]!==n?(s=(0,i.jsxs)(i.Fragment,{children:[t,n]}),l[6]=t,l[7]=n,l[8]=s):s=l[8],s}try{g.displayName||(g.displayName="TimelineEvents")}catch{}try{y.displayName||(y.displayName="UserMessageTimelineEvent")}catch{}try{x.displayName||(x.displayName="SituationalTimelineEvents")}catch{}},38598:(e,t,n)=>{n.d(t,{i:()=>a,t:()=>i});let i=400,a="/favicons/favicon-copilot.svg"},39029:(e,t,n)=>{n.d(t,{Zi:()=>l,og:()=>o});var i=n(40235),a=n(70170),s=n(70263),r=n(96540);function o(e,t,n,i){l(e,t,n,i)}function l(e,t,n,o){let l=(0,s.A)(),c=(0,r.useMemo)(()=>(0,a.n)(()=>{l()&&t()},o??2e3),[l,t,o]),d=(0,r.useCallback)(e=>{if(n&&e.event_updates)for(let[t,i]of Object.entries(n))!!e.event_updates[t]==!!i&&window.setTimeout(c,e.wait||0);else window.setTimeout(c,e.wait||0)},[c,n]);(0,i.x)(e,d)}},39087:(e,t,n)=>{n.d(t,{J:()=>r,j:()=>s});var i=n(38621),a=n(49851);let s={range:{name:"Range",description:"A numeric value within a specified range",icon:a.FD},text:{name:"Text",description:"Free form text input",icon:a.md},boolean:{name:"Boolean",description:"True or false value",icon:a.j6},select:{name:"Select",description:"Choose from a list of predefined options",icon:a.wB},date:{name:"Date",description:"Date or macro",icon:i.CalendarIcon}};function r(e,t){return(s[e.metadata.inputType]??s.text)[t]}},39111:(e,t,n)=>{n.d(t,{X:()=>a});var i=n(54571);function a(e){let t=e.join(","),[n]=(0,i.I)(()=>{let e=/Windows/.test(navigator.userAgent)?"windows":/Macintosh/.test(navigator.userAgent)?"mac":null;return!!e&&t.includes(e)},!1,[t]);return n}},39344:(e,t,n)=>{n.d(t,{K:()=>N});var i=n(74848),a=n(21728),s=n(38621),r=n(67955),o=n(57352),l=n(54070),c=n(34164),d=n(96540);let u={container:"IssueTree-module__container--kYTT7",subHeader:"IssueTree-module__subHeader--BDblp",tree:"IssueTree-module__tree--GQG9_",grid:"IssueTree-module__grid--hqjkj",description:"IssueTree-module__description--b8yCi",item:"IssueTree-module__item--th4vZ",rootItem:"IssueTree-module__rootItem--hxb6j",spacer:"IssueTree-module__spacer--Z4HHo",leadingVisual:"IssueTree-module__leadingVisual--e_q3O",content:"IssueTree-module__content--Ko11D",title:"IssueTree-module__title--v0mbM",blockedBy:"IssueTree-module__blockedBy--z0s4g",trailingVisual:"IssueTree-module__trailingVisual--SewMY"},m=d.createContext({hasTrailingVisuals:void 0}),p=d.createContext({level:0});function h(e){let t,n,s,o,l,c,p=(0,a.c)(16),{subIssueCount:h,subIssueHeaderText:y,hasTrailingVisuals:v,children:x}=e,b=void 0===y?"Sub-issues":y,_=void 0!==v&&v;if(p[0]!==x){let e=d.Children.toArray(x);t=e.find(g),n=e.filter(f),p[0]=x,p[1]=t,p[2]=n}else t=p[1],n=p[2];let j=n;p[3]!==_?(s={hasTrailingVisuals:_},p[3]=_,p[4]=s):s=p[4];let w=s,N=!!_||void 0;return p[5]!==j||p[6]!==h||p[7]!==b?(o=j.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:u.subHeader,children:[b,(0,i.jsx)(r.A,{children:h})]}),(0,i.jsx)("ul",{role:"tree",className:u.tree,children:j})]}),p[5]=j,p[6]=h,p[7]=b,p[8]=o):o=p[8],p[9]!==t||p[10]!==N||p[11]!==o?(l=(0,i.jsxs)("div",{className:u.container,"data-has-trailing-visual":N,children:[t,o]}),p[9]=t,p[10]=N,p[11]=o,p[12]=l):l=p[12],p[13]!==w||p[14]!==l?(c=(0,i.jsx)(m.Provider,{value:w,children:l}),p[13]=w,p[14]=l,p[15]=c):c=p[15],c}function f(e){return d.isValidElement(e)&&e.type===v}function g(e){return d.isValidElement(e)&&e.type===y}function y(e){let t,n,s,r=(0,a.c)(4);r[0]===Symbol.for("react.memo_cache_sentinel")?(t={level:0},r[0]=t):t=r[0];let o=t;return r[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,c.$)(u.item,u.rootItem),r[1]=n):n=r[1],r[2]!==e?(s=(0,i.jsx)(p.Provider,{value:o,children:(0,i.jsx)("div",{className:n,children:(0,i.jsx)(_,{...e})})}),r[2]=e,r[3]=s):s=r[3],s}function v(e){let t,n,s,r,o,l,c,m,h,f=(0,a.c)(19);if(f[0]!==e?({children:t,...n}=e,f[0]=e,f[1]=t,f[2]=n):(t=f[1],n=f[2]),f[3]!==t){let e=d.Children.toArray(t);s=e.filter(b),r=e.filter(x),f[3]=t,f[4]=s,f[5]=r}else s=f[4],r=f[5];let g=r,{level:y}=d.useContext(p),v=y+1;f[6]!==v?(o={level:v},f[6]=v,f[7]=o):o=f[7];let j=o;return f[8]!==g||f[9]!==n?(l=(0,i.jsx)(_,{...n,children:g}),f[8]=g,f[9]=n,f[10]=l):l=f[10],f[11]!==s?(c=s.length>0&&(0,i.jsx)("ul",{role:"group",className:u.tree,children:s}),f[11]=s,f[12]=c):c=f[12],f[13]!==l||f[14]!==c?(m=(0,i.jsxs)("li",{role:"treeitem","aria-selected":"false",className:u.item,children:[l,c]}),f[13]=l,f[14]=c,f[15]=m):m=f[15],f[16]!==j||f[17]!==m?(h=(0,i.jsx)(p.Provider,{value:j,children:m}),f[16]=j,f[17]=m,f[18]=h):h=f[18],h}function x(e){return!(d.isValidElement(e)&&e.type===v)}function b(e){return d.isValidElement(e)&&e.type===v}function _(e){let t,n,s,r,l,c,h,f,g=(0,a.c)(29),{leadingVisual:y,title:v,description:x,trailingBadge:b,trailingVisual:_,href:w,onClick:N,blockedBy:C}=e,{level:k}=d.useContext(p),{hasTrailingVisuals:S}=d.useContext(m),I=null!=C&&C.length>0;g[0]!==k?(t={"--level":k},g[0]=k,g[1]=t):t=g[1];let T=!!N||void 0;g[2]!==k?(n=k>0&&(0,i.jsx)("div",{className:u.spacer}),g[2]=k,g[3]=n):n=g[3],g[4]!==y?(s=(0,i.jsx)("div",{className:u.leadingVisual,children:y}),g[4]=y,g[5]=s):s=g[5];let E=w?"a":N?"button":"span";return g[6]!==w||g[7]!==N||g[8]!==E||g[9]!==v?(r=(0,i.jsx)(o.A,{as:E,className:u.title,href:w,onClick:N,children:v}),g[6]=w,g[7]=N,g[8]=E,g[9]=v,g[10]=r):r=g[10],g[11]!==r||g[12]!==b?(l=(0,i.jsxs)("div",{className:u.content,children:[r,b]}),g[11]=r,g[12]=b,g[13]=l):l=g[13],g[14]!==C||g[15]!==x||g[16]!==I?(c=(null!=x||I)&&(0,i.jsxs)("div",{className:u.description,children:[I&&(0,i.jsx)(j,{dependencyType:"Blocked by",blockedBy:C}),x]}),g[14]=C,g[15]=x,g[16]=I,g[17]=c):c=g[17],g[18]!==S||g[19]!==_?(h=S&&(0,i.jsx)("div",{className:u.trailingVisual,children:_}),g[18]=S,g[19]=_,g[20]=h):h=g[20],g[21]!==t||g[22]!==T||g[23]!==n||g[24]!==s||g[25]!==l||g[26]!==c||g[27]!==h?(f=(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:u.grid,style:t,"data-has-onclick":T,children:[n,s,l,c,h]})}),g[21]=t,g[22]=T,g[23]=n,g[24]=s,g[25]=l,g[26]=c,g[27]=h,g[28]=f):f=g[28],f}function j(e){let t,n,s=(0,a.c)(9),{dependencyType:r,blockedBy:c}=e;if(!c.length)return null;let d=c[0]?.href?"a":c[0]?.onClick?"button":"span",m=c[0]?.href,p=c[0]?.onClick,h=c[0]?.title;s[0]!==d||s[1]!==m||s[2]!==p||s[3]!==h?(t=(0,i.jsx)(o.A,{"data-testid":"blocked-by-link",className:u.blockedBy,muted:!0,as:d,href:m,onClick:p,children:h}),s[0]=d,s[1]=m,s[2]=p,s[3]=h,s[4]=t):t=s[4];let f=t;return s[5]!==c.length||s[6]!==f||s[7]!==r?(n=(0,i.jsx)(l.A,{size:"medium",className:"mr-2",leadingVisual:w,text:c.length>1?(0,i.jsxs)(i.Fragment,{children:[r," ",c.length]}):(0,i.jsxs)(i.Fragment,{children:[r,": ",f]})}),s[5]=c.length,s[6]=f,s[7]=r,s[8]=n):n=s[8],n}function w(){return(0,i.jsx)(s.BlockedIcon,{"data-testid":"blocked-by-icon",className:"fgColor-danger",size:14})}let N=Object.assign(h,{RootItem:y,Item:v});try{h.displayName||(h.displayName="Tree")}catch{}try{y.displayName||(y.displayName="TreeRootItem")}catch{}try{v.displayName||(v.displayName="TreeItem")}catch{}try{_.displayName||(_.displayName="TreeItemContent")}catch{}try{j.displayName||(j.displayName="IssueDependencies")}catch{}try{N.displayName||(N.displayName="IssueTree")}catch{}},40683:(e,t,n)=>{n.d(t,{p:()=>L,V:()=>E});var i=n(74848),a=n(21728),s=n(53419),r=n(79634),o=n(97286),l=n(38621),c=n(5524),d=n(24990),u=n(86877),m=n(99511),p=n(15220),h=n(96540),f=n(84802),g=n(25641),y=n(35247),v=n(2635),x=n(33592);let b={hideOnDesktop:"ConversationActions-module__hideOnDesktop--J5K5t"};var _=n(40260),j=n(71315),w=n(21373),N=n(69726),C=n(98552),k=n(46251),S=n(20139);let I={container:"ConversationSharingDialog-module__container--wNKq6",innerContainer:"ConversationSharingDialog-module__innerContainer--OaIjU",sharedLinkContainer:"ConversationSharingDialog-module__sharedLinkContainer--jDnVn",textInputContainer:"ConversationSharingDialog-module__textInputContainer--jHhX6",textInput:"ConversationSharingDialog-module__textInput--DymUf",success:"ConversationSharingDialog-module__success--zCOcd",spinner:"ConversationSharingDialog-module__spinner--KpY5f",successIcon:"ConversationSharingDialog-module__successIcon--z1nhd",mutedText:"ConversationSharingDialog-module__mutedText--r3ZSy",warningText:"ConversationSharingDialog-module__warningText--t4nnB",snapshotText:"ConversationSharingDialog-module__snapshotText--XNu1W",buttonStack:"ConversationSharingDialog-module__buttonStack--gWe8E",lockIcon:"ConversationSharingDialog-module__lockIcon--yCWzZ",cancelButton:"ConversationSharingDialog-module__cancelButton--CL34L",quickFadeUp:"ConversationSharingDialog-module__quickFadeUp--_qvsX"},T=e=>{let t,n,r,o,c,d,f,g,b,T,E,L,R,A,D,P,O,B,F,M,$,V,U,q,W,H,G,K,z,Q=(0,a.c)(94),{closeDialog:Y,threadId:J,returnFocusRef:X,showThirdPartyMcpWarning:Z}=e,ee=void 0!==Z&&Z,et=(0,v.Pk)(),en=(0,x.b)(),[ei,ea]=(0,h.useState)(!1),[es,er]=(0,h.useState)(!1),[eo,el]=(0,h.useState)(!1),[ec,ed]=(0,h.useState)(!1),{selectedThreadID:eu,ssoOrganizations:em,apiUrl:ep,threads:eh}=et;Q[0]!==eu||Q[1]!==J||Q[2]!==eh?(t=eh.get(J||eu),Q[0]=eu,Q[1]=J,Q[2]=eh,Q[3]=t):t=Q[3];let ef=t;Q[4]!==ef?.sharedID?(n=()=>ef?.sharedID||"",Q[4]=ef?.sharedID,Q[5]=n):n=Q[5];let[eg,ey]=(0,h.useState)(n);Q[6]!==ef?(r=()=>ef?.sharedMessageID?ef.sharedMessageID:"",Q[6]=ef,Q[7]=r):r=Q[7];let[ev,ex]=(0,h.useState)(r),eb=j.fV.origin,e_=`${eb}/copilot/share/${eg}`;Q[8]!==ei?(o=()=>{if(ei){let e=setTimeout(()=>ea(!1),1500);return()=>clearTimeout(e)}},c=[ei],Q[8]=ei,Q[9]=o,Q[10]=c):(o=Q[9],c=Q[10]),(0,h.useEffect)(o,c),Q[11]!==eo?(d=()=>{if(eo){let e=setTimeout(()=>el(!1),1500);return()=>clearTimeout(e)}},f=[eo],Q[11]=eo,Q[12]=d,Q[13]=f):(d=Q[12],f=Q[13]),(0,h.useEffect)(d,f),Q[14]!==e_?(g=async()=>{try{await (0,_.D)(e_),ea(!0),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})}catch{}},Q[14]=e_,Q[15]=g):g=Q[15];let ej=g;Q[16]!==ef?.sharedID||Q[17]!==eu||Q[18]!==J?(b=()=>{(J||eu)&&ey(ef?.sharedID||"")},Q[16]=ef?.sharedID,Q[17]=eu,Q[18]=J,Q[19]=b):b=Q[19];let ew=ef?.sharedID;Q[20]!==eu||Q[21]!==ew||Q[22]!==J?(T=[ew,eu,J],Q[20]=eu,Q[21]=ew,Q[22]=J,Q[23]=T):T=Q[23],(0,h.useEffect)(b,T),Q[24]!==ep||Q[25]!==en||Q[26]!==eu||Q[27]!==em||Q[28]!==J?(E=async()=>{er(!0);let e=J||eu,t=new S.k(ep,em),n=await t.shareThread(e,y.W.copilotShareActiveSubthread&&e===eu?en.FindLastMessageID():"");if(n.ok){er(!1);let{sharedAt:t,sharedID:i,sharedMessageID:a}=n.payload;ey(i),el(!0),ex(a),en.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:i,sharedAt:t,sharedMessageID:a}}),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_CREATE_SHARED_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:i})}else er(!1)},Q[24]=ep,Q[25]=en,Q[26]=eu,Q[27]=em,Q[28]=J,Q[29]=E):E=Q[29];let eN=E;Q[30]!==ep||Q[31]!==en||Q[32]!==eu||Q[33]!==eg||Q[34]!==ec||Q[35]!==em||Q[36]!==J?(L=async()=>{if(!ec)return void ed(!0);ed(!1),er(!0);let e=J||eu,t=new S.k(ep,em),n=await t.unshareThread(e);if(n.ok){er(!1),ex("");let{sharedID:t,sharedAt:i,sharedMessageID:a}=n.payload;en.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:i,sharedMessageID:a}}),(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:eg})}else er(!1)},Q[30]=ep,Q[31]=en,Q[32]=eu,Q[33]=eg,Q[34]=ec,Q[35]=em,Q[36]=J,Q[37]=L):L=Q[37];let eC=L;Q[38]!==eN||Q[39]!==es||Q[40]!==eg?(R=()=>{if(!eg)return(0,i.jsx)(w.Q,{variant:"primary",disabled:es,onClick:eN,children:"Share"})},Q[38]=eN,Q[39]=es,Q[40]=eg,Q[41]=R):R=Q[41];let ek=R;Q[42]!==ej||Q[43]!==eg?(A=()=>{if(eg)return(0,i.jsx)(w.Q,{variant:"primary",autoFocus:!0,onClick:ej,children:"Copy link"})},Q[42]=ej,Q[43]=eg,Q[44]=A):A=Q[44];let eS=A;Q[45]!==eC||Q[46]!==es||Q[47]!==eg?(D=()=>{if(eg)return(0,i.jsx)(w.Q,{variant:"danger",disabled:es,onClick:eC,children:"Unshare"})},Q[45]=eC,Q[46]=es,Q[47]=eg,Q[48]=D):D=Q[48];let eI=D;Q[49]!==eg||Q[50]!==ec?(P=()=>{if(eg&&ec)return(0,i.jsx)(w.Q,{variant:"default",onClick:()=>ed(!1),className:I.cancelButton,children:"Cancel"})},Q[49]=eg,Q[50]=ec,Q[51]=P):P=Q[51];let eT=P;Q[52]!==ei||Q[53]!==es||Q[54]!==eg||Q[55]!==ec||Q[56]!==eo?(O=()=>es?(0,i.jsxs)("div",{className:I.quickFadeUp,children:[(0,i.jsx)(N.A,{size:"small",className:I.spinner}),eg?"Unsharing chat...":"Sharing chat..."]}):ec?(0,i.jsx)("div",{className:I.quickFadeUp,children:(0,i.jsx)(C.A,{size:"medium",className:I.warningText,children:"Confirm unsharing this chat?"})}):ei?(0,i.jsxs)("div",{className:I.quickFadeUp,children:[(0,i.jsx)(l.CheckIcon,{className:I.successIcon}),(0,i.jsx)(C.A,{size:"medium",className:I.success,children:"Copied to clipboard"})]}):eo?(0,i.jsxs)("div",{className:I.quickFadeUp,children:[(0,i.jsx)(l.CheckIcon,{className:I.successIcon}),(0,i.jsx)(C.A,{size:"medium",className:I.success,children:"Chat shared"})]}):eg?(0,i.jsxs)("div",{children:[(0,i.jsx)(l.UnlockIcon,{className:I.lockIcon}),(0,i.jsx)(C.A,{size:"medium",className:I.mutedText,children:"Visible to anyone with the link"})]}):(0,i.jsx)("div",{}),Q[52]=ei,Q[53]=es,Q[54]=eg,Q[55]=ec,Q[56]=eo,Q[57]=O):O=Q[57];let eE=O,eL=eg?"Chat shared":"Share chat";return Q[58]!==ev||Q[59]!==eg||Q[60]!==ee?(B=(0,i.jsx)(k.B,{direction:"horizontal",padding:"none",align:"center",justify:"start",gap:"condensed",children:ev?(0,i.jsx)("span",{children:(0,i.jsx)("span",{className:I.snapshotText,children:"This shared chat is a snapshot, accessible to anyone with the link. It will not update with new messages."})}):eg?(0,i.jsx)("span",{children:`This chat and future messages are visible to anyone with the link. If private repository content
                is included, repository access is required to view.${ee?" Third-party MCP tool calling is disabled while this thread is shared.":""}`}):(0,i.jsx)("span",{children:`When shared, this chat and future messages will be visible to anyone with the link. If private repository content is included, repository access is required to view.${ee?" Third-party MCP tool calling will be disabled if the thread is shared.":""}`})}),Q[58]=ev,Q[59]=eg,Q[60]=ee,Q[61]=B):B=Q[61],Q[62]!==e_||Q[63]!==eg?(F=eg&&(0,i.jsx)("div",{className:I.innerContainer,children:(0,i.jsx)("div",{className:I.sharedLinkContainer,children:(0,i.jsxs)(u.A,{id:"share-link",className:I.textInputContainer,children:[(0,i.jsx)(u.A.Label,{children:"Share link"}),(0,i.jsx)(m.A,{size:"large",readOnly:!0,value:eg&&e_,className:I.textInput})]})})}),Q[62]=e_,Q[63]=eg,Q[64]=F):F=Q[64],Q[65]!==B||Q[66]!==F?(M=(0,i.jsxs)(k.B,{direction:"vertical",gap:"condensed",children:[B,F]}),Q[65]=B,Q[66]=F,Q[67]=M):M=Q[67],Q[68]!==eE?($=(0,i.jsx)("div",{role:"status",children:eE()}),Q[68]=eE,Q[69]=$):$=Q[69],Q[70]!==ek?(V=ek(),Q[70]=ek,Q[71]=V):V=Q[71],Q[72]!==eT?(U=eT(),Q[72]=eT,Q[73]=U):U=Q[73],Q[74]!==eI?(q=eI(),Q[74]=eI,Q[75]=q):q=Q[75],Q[76]!==eS?(W=eS(),Q[76]=eS,Q[77]=W):W=Q[77],Q[78]!==V||Q[79]!==U||Q[80]!==q||Q[81]!==W?(H=(0,i.jsxs)(k.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"end",children:[V,U,q,W]}),Q[78]=V,Q[79]=U,Q[80]=q,Q[81]=W,Q[82]=H):H=Q[82],Q[83]!==$||Q[84]!==H?(G=(0,i.jsxs)(k.B,{direction:"horizontal",gap:"condensed",align:"center",justify:"space-between",className:I.buttonStack,children:[$,H]}),Q[83]=$,Q[84]=H,Q[85]=G):G=Q[85],Q[86]!==M||Q[87]!==G?(K=(0,i.jsxs)("div",{className:I.container,children:[M,G]}),Q[86]=M,Q[87]=G,Q[88]=K):K=Q[88],Q[89]!==Y||Q[90]!==X||Q[91]!==eL||Q[92]!==K?(z=(0,i.jsx)(p.l,{title:eL,onClose:Y,width:"large",returnFocusRef:X,children:K}),Q[89]=Y,Q[90]=X,Q[91]=eL,Q[92]=K,Q[93]=z):z=Q[93],z};try{T.displayName||(T.displayName="ConversationSharingDialog")}catch{}function E(e){let t,n,o,d,u,m,p,h,f,y,x=(0,a.c)(25),{onOpenDialog:_,showShare:j,hideShareOnDesktop:w,isShared:N}=e,C=void 0===j||j,k=void 0!==w&&w,S=void 0!==N&&N,{canShareThread:I}=(0,r.X)(),{isWaitingOnCopilot:T,messages:E}=(0,v.Pk)();x[0]!==E?(t=(0,g.Q7)(E),x[0]=E,x[1]=t):t=x[1];let L=t;x[2]!==E?(n=(0,g.UM)(E),x[2]=E,x[3]=n):n=x[3];let R=n,A=L.length>0||T||R;return x[4]!==_?(o=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_RENAME",mode:"immersive"}),_("rename")},x[4]=_,x[5]=o):o=x[5],x[6]===Symbol.for("react.memo_cache_sentinel")?(d=(0,i.jsx)(c.l.LeadingVisual,{children:(0,i.jsx)(l.PencilIcon,{})}),x[6]=d):d=x[6],x[7]!==o?(u=(0,i.jsxs)(c.l.Item,{onSelect:o,children:[d,"Rename"]}),x[7]=o,x[8]=u):u=x[8],x[9]!==I||x[10]!==k||x[11]!==S||x[12]!==_||x[13]!==A||x[14]!==C?(m=C&&I&&(0,i.jsxs)(c.l.Item,{className:k?b.hideOnDesktop:void 0,disabled:A,onSelect:()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_SHARE",mode:"immersive"}),_("share")},children:[(0,i.jsx)(c.l.LeadingVisual,{children:S?(0,i.jsx)(l.UnlockIcon,{}):(0,i.jsx)(l.LockIcon,{})}),"Share"]}),x[9]=I,x[10]=k,x[11]=S,x[12]=_,x[13]=A,x[14]=C,x[15]=m):m=x[15],x[16]!==_?(p=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU_DELETE",mode:"immersive"}),_("delete")},x[16]=_,x[17]=p):p=x[17],x[18]===Symbol.for("react.memo_cache_sentinel")?(h=(0,i.jsx)(c.l.LeadingVisual,{children:(0,i.jsx)(l.TrashIcon,{})}),x[18]=h):h=x[18],x[19]!==p?(f=(0,i.jsxs)(c.l.Item,{variant:"danger",onSelect:p,children:[h,"Delete"]}),x[19]=p,x[20]=f):f=x[20],x[21]!==f||x[22]!==u||x[23]!==m?(y=(0,i.jsxs)(i.Fragment,{children:[u,m,f]}),x[21]=f,x[22]=u,x[23]=m,x[24]=y):y=x[24],y}function L(e){let t,n,r,l,c,d,u,m,p=(0,a.c)(35),{visibleDialog:h,onClose:g,threadName:b,threadId:_,selectedThreadId:j,onStartLoading:w,onFinishLoading:N,returnFocusRef:C}=e,{threads:k}=(0,v.Pk)(),S=(0,x.b)(),I=(0,f.G)();p[0]===Symbol.for("react.memo_cache_sentinel")?(t=["copilot-chat-mcps"],p[0]=t):t=p[0],p[1]!==S?(n={queryKey:t,queryFn:async()=>S.service.fetchMCPServers(),placeholderData:R},p[1]=S,p[2]=n):n=p[2];let{data:E}=(0,o.I)(n);p[3]!==E?(r=E||[],p[3]=E,p[4]=r):r=p[4];let L=r,P=y.W.copilotThirdPartyMcp&&L.length>0;p[5]!==g?(l=()=>{(0,s.BI)("dotcom_chat.activate",{target:"COPILOT_SHARE_DIALOG_CLOSE",mode:"immersive"}),g()},p[5]=g,p[6]=l):l=p[6];let O=l;p[7]!==S||p[8]!==I||p[9]!==g||p[10]!==N||p[11]!==w||p[12]!==j||p[13]!==_||p[14]!==k?(c=async()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_DELETE",mode:"immersive"}),w();let e=k.get(_);e&&(_===j&&await I({clearTopic:!0,includeThreads:!1}),await S.deleteThread(e)),N(),g()},p[7]=S,p[8]=I,p[9]=g,p[10]=N,p[11]=w,p[12]=j,p[13]=_,p[14]=k,p[15]=c):c=p[15];let B=c;p[16]!==S||p[17]!==g||p[18]!==N||p[19]!==w||p[20]!==_||p[21]!==k?(d=async e=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_LIST_ACTION_RENAME",mode:"immersive"}),w();let t=k.get(_);t&&await S.renameThread(t,e),N(),g()},p[16]=S,p[17]=g,p[18]=N,p[19]=w,p[20]=_,p[21]=k,p[22]=d):d=p[22];let F=d;return p[23]!==O||p[24]!==B||p[25]!==g||p[26]!==C||p[27]!==P||p[28]!==F||p[29]!==_||p[30]!==b||p[31]!==h?(u="delete"===h?(0,i.jsx)(A,{onCancel:g,onConfirm:B,returnFocusRef:C}):"rename"===h?(0,i.jsx)(D,{onCancel:g,currentName:b,onSubmit:F,returnFocusRef:C}):"share"===h?(0,i.jsx)(T,{closeDialog:O,threadId:_,returnFocusRef:C,showThirdPartyMcpWarning:P}):null,p[23]=O,p[24]=B,p[25]=g,p[26]=C,p[27]=P,p[28]=F,p[29]=_,p[30]=b,p[31]=h,p[32]=u):u=p[32],p[33]!==u?(m=(0,i.jsx)(i.Fragment,{children:u}),p[33]=u,p[34]=m):m=p[34],m}function R(e){return e}let A=e=>{let t,n=(0,a.c)(4),{onConfirm:r,onCancel:o,returnFocusRef:l}=e;return n[0]!==o||n[1]!==r||n[2]!==l?(t=(0,i.jsx)(d.K,{title:"Delete chat",onClose:e=>{if("confirm"===e){(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CONFIRM",mode:"immersive"});let e=l.current?.closest("nav,aside,section");r(),window.setTimeout(()=>{e instanceof HTMLElement&&e.focus()},0)}else(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_DELETE_CANCEL",mode:"immersive"}),o(),window.setTimeout(()=>l.current?.focus(),0)},confirmButtonContent:"Delete",confirmButtonType:"danger",children:"Are you sure you want to delete this chat? This action cannot be undone."}),n[0]=o,n[1]=r,n[2]=l,n[3]=t):t=n[3],t},D=e=>{let t,n,r,o,l,c,d,f,g,y,v,x,b=(0,a.c)(34),{currentName:_,onCancel:j,onSubmit:w,returnFocusRef:N}=e,[C,k]=(0,h.useState)(void 0),S=(0,h.useRef)(null),I=(0,h.useId)(),T=(0,h.useId)();b[0]!==w?(t=e=>{e.preventDefault();let t=S.current?.value?.trim()??"";t?t.length>100?(k("max_length"),S.current?.focus()):(k(void 0),w(t)):(k("required"),S.current?.focus())},b[0]=w,b[1]=t):t=b[1];let E=t;b[2]!==j?(n=()=>{(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CANCEL",mode:"immersive"}),j()},b[2]=j,b[3]=n):n=b[3];let L=n;b[4]!==T?(r=(0,i.jsx)("span",{id:T,children:"Rename chat"}),b[4]=T,b[5]=r):r=b[5],b[6]!==L?(o={content:"Cancel",onClick:L},b[6]=L,b[7]=o):o=b[7],b[8]!==I?(l={content:"Update",buttonType:"primary",type:"submit",form:I,onClick:P},b[8]=I,b[9]=l):l=b[9],b[10]!==o||b[11]!==l?(c=[o,l],b[10]=o,b[11]=l,b[12]=c):c=b[12],b[13]===Symbol.for("react.memo_cache_sentinel")?(d=(0,i.jsx)(u.A.Label,{visuallyHidden:!0,children:"Rename chat"}),b[13]=d):d=b[13];let R=C?"error-message":void 0,A=C?"true":void 0;return b[14]!==_||b[15]!==T||b[16]!==R||b[17]!==A?(f=(0,i.jsx)(m.A,{"aria-labelledby":T,"aria-describedby":R,"aria-invalid":A,ref:S,defaultValue:_,block:!0}),b[14]=_,b[15]=T,b[16]=R,b[17]=A,b[18]=f):f=b[18],b[19]!==C?(g=C&&(0,i.jsx)(u.A.Validation,{id:"error-message",variant:"error",children:"required"===C?"Enter a name":"Name cannot exceed 100 characters"}),b[19]=C,b[20]=g):g=b[20],b[21]!==f||b[22]!==g?(y=(0,i.jsxs)(u.A,{required:!0,children:[d,f,g]}),b[21]=f,b[22]=g,b[23]=y):y=b[23],b[24]!==I||b[25]!==E||b[26]!==y?(v=(0,i.jsx)("form",{id:I,onSubmit:E,children:y}),b[24]=I,b[25]=E,b[26]=y,b[27]=v):v=b[27],b[28]!==L||b[29]!==N||b[30]!==v||b[31]!==r||b[32]!==c?(x=(0,i.jsx)(p.l,{title:r,onClose:L,width:"small",footerButtons:c,initialFocusRef:S,returnFocusRef:N,children:v}),b[28]=L,b[29]=N,b[30]=v,b[31]=r,b[32]=c,b[33]=x):x=b[33],x};try{E.displayName||(E.displayName="ConversationActions")}catch{}try{L.displayName||(L.displayName="ConversationActionDialogs")}catch{}try{A.displayName||(A.displayName="DeleteDialog")}catch{}try{D.displayName||(D.displayName="RenameDialog")}catch{}function P(){return(0,s.BI)("dotcom_chat.activate",{target:"CONVERSATION_DIALOG_RENAME_CONFIRM",mode:"immersive"})}},41649:(e,t,n)=>{n.d(t,{K:()=>r});var i=n(21728),a=n(88431),s=n(96540);let r=e=>{let t,n,r,o=(0,i.c)(4),l=(0,s.useRef)(e);return o[0]!==e?(t=()=>{l.current=e},n=[e],o[0]=e,o[1]=t,o[2]=n):(t=o[1],n=o[2]),(0,a.N)(t,n),o[3]===Symbol.for("react.memo_cache_sentinel")?(r=(...e)=>l.current?.(...e),o[3]=r):r=o[3],r}},42312:(e,t,n)=>{n.d(t,{KL:()=>l,U:()=>m});var i=n(74848),a=n(21728),s=n(71315),r=n(96540);let o=(0,r.createContext)({registerNavigableRef:()=>{},unregisterNavigableRef:()=>{}});function l(e){let t,n,l,m,p,h,f,g=(0,a.c)(9),{children:y}=e;g[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],g[0]=t):t=g[0];let[v,x]=r.useState(t);g[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{x(t=>t.some(t=>t===e)?t:[...t,e])},g[1]=n):n=g[1];let b=n;g[2]===Symbol.for("react.memo_cache_sentinel")?(l=e=>{x(t=>t.filter(t=>t!==e))},g[2]=l):l=g[2];let _=l;g[3]!==v?(m=()=>{let e=e=>{if(e.ctrlKey&&"F6"===e.key){let t=v.filter(u).sort(d);if(0===t.length)return;let n=t.findIndex(c),i=(!e.shiftKey?t[n+1]??t[0]:t[n-1]??t[t.length-1])?.current;if(i){if(!["A","BUTTON","INPUT","SELECT","TEXTAREA"].includes(i.tagName)&&!i.hasAttribute("tabindex")){i.setAttribute("tabindex","-1");let e=()=>{i.removeAttribute("tabindex"),i.removeEventListener("blur",e)};i.addEventListener("blur",e,{once:!0})}i.focus()}}};return s.XC?.addEventListener("keydown",e),()=>{s.XC?.removeEventListener("keydown",e)}},p=[v],g[3]=v,g[4]=m,g[5]=p):(m=g[4],p=g[5]),(0,r.useEffect)(m,p),g[6]===Symbol.for("react.memo_cache_sentinel")?(h={registerNavigableRef:b,unregisterNavigableRef:_},g[6]=h):h=g[6];let j=h;return g[7]!==y?(f=(0,i.jsx)(o.Provider,{value:j,children:y}),g[7]=y,g[8]=f):f=g[8],f}function c(e){return e.current?.contains(s.XC?.activeElement||null)}function d(e,t){let n=e.current,i=t.current;return n===i?0:n.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}function u(e){return null!==e.current}function m(){let e,t,n=(0,a.c)(4),i=(0,r.useRef)(null),{registerNavigableRef:s,unregisterNavigableRef:l}=(0,r.useContext)(o);return n[0]!==s||n[1]!==l?(e=()=>(s(i),()=>{l(i)}),t=[s,l],n[0]=s,n[1]=l,n[2]=e,n[3]=t):(e=n[2],t=n[3]),(0,r.useEffect)(e,t),i}try{o.displayName||(o.displayName="NavigableRefContext")}catch{}try{l.displayName||(l.displayName="NavigableRefProvider")}catch{}},42518:(e,t,n)=>{n.d(t,{C:()=>a});var i=n(91348);function a(e,t){let n=(0,i.FT)(e).map(e=>({nodeID:e.id,type:e.type,title:e.title,value:t.nodes[e.id]?.value}));return{type:"loop-execution",loopID:e.id,loopTitle:e.title,createdAt:t.createdAt,version:t.loopVersion,executionID:t.id,output:n}}},43134:(e,t,n)=>{n.d(t,{_T:()=>c,aq:()=>l,qU:()=>o});var i=n(82075),a=n(21046);let s=(0,i.A)("localStorage"),r="copilot-loops-thread-";function o(e){try{let t=`${r}${e}`;return s.getItem(t)}catch(e){return(0,a.FF)("Failed to read loop thread ID from localStorage:",e),null}}function l(e,t){if(null!==t)try{let n=`${r}${e}`;s.setItem(n,t)}catch(e){(0,a.FF)("Failed to store loop thread ID in localStorage:",e)}}function c(e){try{let t=`${r}${e}`;s.removeItem(t)}catch(e){(0,a.FF)("Failed to remove loop thread ID from localStorage:",e)}}},44095:(e,t,n)=>{n.d(t,{_:()=>b,m:()=>_});var i=n(74848),a=n(21728),s=n(26100),r=n(2635),o=n(4817),l=n(53419),c=n(38621),d=n(69726),u=n(5524),m=n(96540),p=n(7812),h=n(1747),f=n(48881),g=n(13974),y=n(7026);let v={container:"PlanningSpecBlock-module__container--UW6_s",item:"PlanningSpecBlock-module__item--lxgT1",title:"PlanningSpecBlock-module__title--d0IjJ"};var x=n(20382);function b(e){let t,n,s,u,p,v,b,j,w,N,C=(0,a.c)(36),{yaml:k,isStreaming:S}=e,I=(0,g.p)(S),{selectedThreadID:T}=(0,r.Pk)(),{updateItem:E,openItem:L,openPreviewPane:R}=(0,h.xx)(),{messageId:A,messageIndex:D,messageTimestamp:P,setHasAutoOpenedPreviewPane:O}=(0,f.H)();C[0]!==T?(t=e=>((e,t)=>{try{var n;let t;return n=(0,x.Hh)(e),"object"!=typeof n||null==n?null:(t=n,"object"==typeof t&&null!==t&&"tag"in t&&"string"==typeof t.tag&&"name"in t&&"string"==typeof t.name&&"content"in t&&"string"==typeof t.content&&(!("repository"in t)||null==t.repository||"string"==typeof t.repository)&&1)?n:null}catch{return(0,l.BI)("copilot.planning_spec",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(e,T),C[0]=T,C[1]=t):t=C[1];let B=t,F=(0,y.M)(k,B,null);e:{let e,t;if(!F){n=null;break e}let i=`planning-spec:${F.tag}#${D}`;C[2]!==P?(e=new Date(P),C[2]=P,C[3]=e):e=C[3],C[4]!==i||C[5]!==S||C[6]!==A||C[7]!==F.content||C[8]!==F.name||C[9]!==F.repository||C[10]!==F.tag||C[11]!==e?(t={name:F.name,tag:F.tag,repository:F.repository,content:F.content,messageId:A,id:i,type:"planning-spec",isUserEdited:!1,isStreaming:S,timestamp:e},C[4]=i,C[5]=S,C[6]=A,C[7]=F.content,C[8]=F.name,C[9]=F.repository,C[10]=F.tag,C[11]=e,C[12]=t):t=C[12],n=t}let M=n;C[13]!==L||C[14]!==R||C[15]!==O?(s=(e,t)=>{let{selectItem:n}=void 0===t?{}:t;L(e.id,n),R(),O(!0)},C[13]=L,C[14]=R,C[15]=O,C[16]=s):s=C[16];let $=s;C[17]!==S||C[18]!==I||C[19]!==$||C[20]!==M||C[21]!==E?(u=()=>{M&&(E(M),(S||I)&&$(M,{selectItem:!0}))},p=[S,I,$,M,E],C[17]=S,C[18]=I,C[19]=$,C[20]=M,C[21]=E,C[22]=u,C[23]=p):(u=C[22],p=C[23]),(0,m.useEffect)(u,p),C[24]!==$||C[25]!==M?(v=()=>{M&&$(M)},C[24]=$,C[25]=M,C[26]=v):v=C[26];let V=v;C[27]!==T?(b=()=>(0,l.BI)("copilot.planning_spec",{type:"BLOCK_RENDERED",mode:"immersive",threadId:T}),j=[T],C[27]=T,C[28]=b,C[29]=j):(b=C[28],j=C[29]),(0,m.useEffect)(b,j),C[30]!==S?(w=()=>S?(0,i.jsx)(d.A,{size:"small",className:o.sX}):(0,i.jsx)(c.NoteIcon,{}),C[30]=S,C[31]=w):w=C[31];let U=w;return C[32]!==U||C[33]!==V||C[34]!==M?(N=(0,i.jsx)(_,{previewItem:M,onClick:V,getIcon:U}),C[32]=U,C[33]=V,C[34]=M,C[35]=N):N=C[35],N}function _(e){let t,n,r,o,l,d,m=(0,a.c)(16),{previewItem:f,onClick:g,getIcon:y}=e,{versionedItems:x}=(0,h.xx)();m[0]!==f||m[1]!==x?(t=f?(0,p.LU)(f.id,x):null,m[0]=f,m[1]=x,m[2]=t):t=m[2];let b=t;m[3]!==y?(n=y?.()||(0,i.jsx)(c.NoteIcon,{}),m[3]=y,m[4]=n):n=m[4],m[5]!==n?(r=(0,i.jsx)(u.l.LeadingVisual,{children:n}),m[5]=n,m[6]=r):r=m[6];let _=f?.name??"";return m[7]!==_?(o=(0,i.jsx)("div",{className:v.title,children:_}),m[7]=_,m[8]=o):o=m[8],m[9]!==b?(l=null!==b&&(0,i.jsx)(u.l.TrailingVisual,{children:(0,i.jsx)(s.g,{version:b})}),m[9]=b,m[10]=l):l=m[10],m[11]!==g||m[12]!==r||m[13]!==o||m[14]!==l?(d=(0,i.jsx)("div",{className:v.container,children:(0,i.jsx)(u.l,{variant:"full",showDividers:!0,children:(0,i.jsxs)(u.l.Item,{onSelect:g,className:v.item,children:[r,o,l]})})}),m[11]=g,m[12]=r,m[13]=o,m[14]=l,m[15]=d):d=m[15],d}try{b.displayName||(b.displayName="PlanningSpecBlock")}catch{}try{_.displayName||(_.displayName="PlanningSpecBlockDisplay")}catch{}},45363:(e,t,n)=>{n.d(t,{C:()=>y});var i=n(35750),a=n(18150),s=n(61872),r=n(50467),o=n(38621);function l(e){return e.content}var c=n(90122),d=n(31629),u=n(39087),m=n(59370),p=n(53419),h=n(13647),f=n(49851);let PromptNodeHandler=class PromptNodeHandler{logTokenUsage(e,t,n){(0,p.BI)("loops.prompt_node.token_usage",{model:n,token_type:e,token_value:t})}async execute(e,t){let n,i=await (0,c.Vq)(e),a="";for await(let s of t.chatClient.getChatCompletion(i,e.metadata?.model,t.signal))a+=s.content,s.usage&&(n=s.usage),t.onPartialResult?.(a);return n&&(this.logTokenUsage("TOTAL_TOKEN",n.total_tokens,n.model),this.logTokenUsage("PROMPT_TOKEN",n.prompt_tokens,n.model),this.logTokenUsage("COMPLETION_TOKEN",n.completion_tokens,n.model)),{value:a}}validate(e){return[]}constructor(){(0,r._)(this,"type","prompt"),(0,r._)(this,"metadata",{contentFields:["content"],icon:()=>o.CopilotIcon,description:()=>"Use AI to process a node",label:()=>"Prompt",color:"purple",type:"prompt",outputLabel:"Markdown",isExecutable:!0,enabled:()=>!0})}};let GitHubGraphQLNodeHandler=class GitHubGraphQLNodeHandler{async execute(e,t){let n={nodeId:e.id,loopId:t.execution.loopID,version:t.execution.loopVersion,executionId:t.execution.id},i=await t.graphQLClient.getGraphQLResponse(e.content,n,{signal:t.signal});return i?{value:i.data??null}:{value:null}}validate(e){return[]}constructor(){(0,r._)(this,"type","github-graphql"),(0,r._)(this,"metadata",{type:"github-graphql",contentFields:["content"],icon:()=>o.MarkGithubIcon,description:()=>"Retrieve data from GitHub",label:()=>"GitHub GraphQL",color:"gray",enabled:h.Ve,outputLabel:"JSON",isExecutable:!0})}};let CodeNodeHandler=class CodeNodeHandler{async execute(e,t){let n=await t.codeExecutor.execute(e.content);if(n.success)return{value:n.result??""};throw Error(n.error??"Code execution failed")}validate(e){return[]}constructor(){(0,r._)(this,"type","code"),(0,r._)(this,"metadata",{type:"code",color:"pink",contentFields:["content"],icon:()=>o.CodeIcon,description:()=>"Use classic code to process a node",label:()=>"Code",enabled:h.Ch,outputLabel:"Code output",isExecutable:!0,requiresCodeEvaluation:!0})}};let VisualizeNodeHandler=class VisualizeNodeHandler{async execute(e,t){return{value:l(e)}}validate(e){return[]}constructor(){(0,r._)(this,"type","visualize"),(0,r._)(this,"metadata",{type:"visualize",contentFields:["content"],icon:()=>o.GitBranchIcon,description:()=>"Use HTML and CSS to view output",label:()=>"Visualize",color:"olive",enabled:h.a1})}};let TextNodeHandler=class TextNodeHandler{async execute(e,t){let n=t.execution.inputValues?.[e.id],i=void 0!==n?n:l(e);if("date"===e.metadata.inputType&&"string"==typeof i&&(0,m.nS)(i)){let e=(0,m.Qf)(i);if(e)return{value:(0,m.O2)(e)}}return{value:i}}validate(e){let t=[],n=e.metadata;if("object"!=typeof n||!n)return t.push({error:"metadata is required for text nodes",errorType:s.T.MissingProperty,involvedNodes:[e.id]}),t;switch(n.inputType){case"boolean":["true","false"].includes(e.content)||t.push({error:'A boolean input must have a value of either "true" or "false"',errorType:s.T.InvalidBooleanValue,involvedNodes:[e.id]});break;case"range":"number"!=typeof n.min&&t.push({error:"A range input must have a min",errorType:s.T.InvalidRangeValue,involvedNodes:[e.id]}),"number"!=typeof n.max&&t.push({error:"A range input must have a max",errorType:s.T.InvalidRangeValue,involvedNodes:[e.id]});break;case"select":Array.isArray(n.options)&&0!==n.options.length?n.options.includes(e.content)||t.push({error:"A select node must have content equal to one of its options",errorType:s.T.InvalidSelectValue,involvedNodes:[e.id]}):t.push({error:"A select input must have options",errorType:s.T.InvalidSelectValue,involvedNodes:[e.id]});break;case"date":e.content?(0,m.Yj)(e.content)||t.push({error:"Date input must be a valid date (YYYY-MM-DD) or date macro (e.g., @today, @today+1d, @today-2w)",errorType:s.T.InvalidDateValue,involvedNodes:[e.id]}):t.push({error:"Date input needs a value",errorType:s.T.EmptyInputValue,involvedNodes:[e.id]});break;case"text":e.content||t.push({error:"Input needs a value",errorType:s.T.EmptyInputValue,involvedNodes:[e.id]})}return t}constructor(){(0,r._)(this,"type","text"),(0,r._)(this,"metadata",{type:"text",contentFields:["content"],icon:e=>{if(e&&(0,d.ir)(e)){if("boolean"===e.metadata.inputType)if("true"===e.content)return f.j6;else return f.hO;return(0,u.J)(e,"icon")}return o.TypographyIcon},description:e=>e&&(0,d.ir)(e)?(0,u.J)(e,"description"):"Input for nodes",label:e=>e&&(0,d.ir)(e)?(0,u.J)(e,"name"):"Input",color:"blue",enabled:()=>!0})}};let LoopNodeHandler=class LoopNodeHandler{async execute(e,t){return{value:l(e)}}validate(e){return[]}constructor(){(0,r._)(this,"type","loop"),(0,r._)(this,"metadata",{type:"loop",contentFields:["content"],icon:()=>o.GitPullRequestIcon,description:()=>"Use an existing pipeline as a node",label:()=>"Pipeline",color:"coral",enabled:h.V2,outputLabel:"Pipeline output",isExecutable:!0})}};var g=new WeakMap;let NodeHandlerRegistry=class NodeHandlerRegistry{registerHandler(e){(0,i._)(this,g).set(e.type,e)}async executeNode(e,t){let n=(0,i._)(this,g).get(e.type);if(!n)throw Error(`No handler registered for node type: ${e.type}`);return n.execute(e,t)}validateNode(e){let t=(0,i._)(this,g).get(e.type);return t?t.validate(e):[{error:`Unknown node type: ${e.type}`,errorType:s.T.MissingProperty,involvedNodes:[e.id]}]}getMetadata(e){let t=(0,i._)(this,g).get(e);return t?.metadata}getAllMetadata(){return Array.from((0,i._)(this,g).values()).map(e=>e.metadata)}getAllNodeTypes(){return Array.from((0,i._)(this,g).keys())}isExecutable(e){let t=this.getMetadata(e);return t?.isExecutable??!1}requiresCodeEvaluation(e){let t=this.getMetadata(e);return t?.requiresCodeEvaluation??!1}constructor(){(0,a._)(this,g,{writable:!0,value:new Map}),this.registerHandler(new PromptNodeHandler),this.registerHandler(new GitHubGraphQLNodeHandler),this.registerHandler(new CodeNodeHandler),this.registerHandler(new VisualizeNodeHandler),this.registerHandler(new TextNodeHandler),this.registerHandler(new LoopNodeHandler)}};let y=new NodeHandlerRegistry},46461:(e,t,n)=>{n.d(t,{G9:()=>r,Pq:()=>s,Pt:()=>function e(t,n,i=new Set){if(!i.has(t)){for(let a of(i.add(t),n(t),t.children))e(a,n,i);for(let a of t.blockedBy)e(a,n,i);for(let a of t.isBlocking)e(a,n,i)}},YR:()=>function e(t,n){for(let i of(n(t),t.children))e(i,n)},u0:()=>o});var i=n(21728),a=n(1747);async function s(e,t,n=new Set){if(!n.has(e)){for(let i of(n.add(e),await t(e),e.children))await s(i,t,n);for(let i of e.blockedBy)await s(i,t,n);for(let i of e.isBlocking)await s(i,t,n)}}function r(e,t,n,i,a){let s=e.reduce((e,n)=>(e.set(t(n),{item:n,parent:null,children:[],blockedBy:[],isBlocking:[]}),e),new Map);for(let r of e){let e=s.get(t(r)),o=n(r);if(null!=o){let t=s.get(o);t&&e&&(e.parent=t,t.children.push(e))}for(let t of i?.(r)??[]){let n=s.get(t);n&&e&&!n.blockedBy.includes(e)&&(e.blockedBy.includes(n)||e.blockedBy.push(n),n.isBlocking.includes(e)||n.isBlocking.push(e))}for(let t of a?.(r)??[]){let n=s.get(t);n&&e&&!n.isBlocking.includes(e)&&(e.isBlocking.includes(n)||e.isBlocking.push(n),n.blockedBy.includes(e)||n.blockedBy.push(e))}}return s}function o(){let e,t,n=(0,i.c)(6),{items:s,allOpenItems:o,versionedItems:h}=(0,a.xx)();n[0]!==o?(e=new Set(o),n[0]=o,n[1]=e):e=n[1];let f=e;return n[2]!==s||n[3]!==f||n[4]!==h?(t=r([...h.entries()].filter(p).map(e=>{let[,t]=e,n=t.find(e=>f.has(e));if(n)return s.get(n);let i=t.at(-1);return i?s.get(i):void 0}).filter(m),u,d,c,l),n[2]=s,n[3]=f,n[4]=h,n[5]=t):t=n[5],t}function l(e){return e.isBlockingTags}function c(e){return e.blockedByTags}function d(e){return e.parentTag}function u(e){return e.tag}function m(e){return!!e}function p(e){let[t]=e;return t.startsWith("new-issue:")||t.startsWith("existing-issue:")}},46857:(e,t,n)=>{n.d(t,{I:()=>r,O:()=>s});var i=n(91348),a=n(82590);function s(e){for(let n of e.references??[]){var t;if(n.type===a.km&&(t=n)&&"object"==typeof t&&"title"in t&&"nodes"in t){let t={description:n.description,id:n.id,title:n.title,owned:!0,nodes:n.nodes,updatedAt:new Date(e.createdAt).getTime(),visibility:"private"},a=(0,i.kX)(t,[]);return{messageId:e.id,pipeline:a}}}}function r(e,t=!1){for(let n of[...e].reverse()){if("assistant"!==n.role&&!t)continue;let e=s(n);if(e)return e}}},48057:(e,t,n)=>{n.d(t,{Cv:()=>u,Qk:()=>y,vx:()=>f,wu:()=>h});var i=n(21728),a=n(97286),s=n(99519),r=n(5533),o=n(33026),l=n(50050),c=n(99993);let d=[400,401,403,404];function u(){let{data:e}=(0,c._N)(p,"latest"),t=(0,l.Ud)(m);return t===o.qD||t===o.kj?e:t}function m(e){return e.version}function p(e){return e?.version}function h(e,t){return["execution",e,t]}function f(){let e,t=(0,i.c)(3),{data:n}=(0,c._N)(g),a=u(),s=n??"",r=a??"";return t[0]!==s||t[1]!==r?(e=h(s,r),t[0]=s,t[1]=r,t[2]=e):e=t[2],e}function g(e){return e?.id}function y(e){let t,n,l,d,m=(0,i.c)(14),{data:p}=(0,c._N)(x),f=u(),g=(0,s.EY)(),y=p??"",b=f??"";m[0]!==y||m[1]!==b?(t=h(y,b),m[0]=y,m[1]=b,m[2]=t):t=m[2],m[3]!==p||m[4]!==g||m[5]!==f?(n=async()=>{if(!p||!f)return null;let e=await g.getExecution(p,f,o.qD);if(!e.success){let t=Error("Error fetching execution.");throw t.cause=e.httpStatus,t}let t=e.data;return g.isExecutionRunning(t.id)!==(0,r.y)(t)?null:t},m[3]=p,m[4]=g,m[5]=f,m[6]=n):n=m[6];let _=!!p&&!!f;return m[7]!==e?(l=e&&{select:e},m[7]=e,m[8]=l):l=m[8],m[9]!==t||m[10]!==n||m[11]!==_||m[12]!==l?(d={queryKey:t,queryFn:n,enabled:_,...l,staleTime:3e5,retry:v},m[9]=t,m[10]=n,m[11]=_,m[12]=l,m[13]=d):d=m[13],(0,a.I)(d)}function v(e,t){return!("number"==typeof t.cause&&d.includes(t.cause))&&e<3}function x(e){return e?.id}},48881:(e,t,n)=>{n.d(t,{A:()=>a,H:()=>s});var i=n(96540);let a=(0,i.createContext)(null),s=()=>{let e=(0,i.useContext)(a);if(!e)throw Error("Missing required ContentPreviewBlockContext provider.");return e};try{a.displayName||(a.displayName="ContentPreviewBlockContext")}catch{}},49912:(e,t,n)=>{n.d(t,{j:()=>s});var i=n(54908),a=n(82590);function s(e){return e.id===a.S$&&"service"in e&&e.service instanceof i.J}},50050:(e,t,n)=>{n.d(t,{Mr:()=>g,NY:()=>v,Ud:()=>y});var i=n(74848),a=n(49835),s=n(96540),r=n(33535),o=n(88431),l=n(96868),c=n(21728),d=n(96459),u=n(53380);function m(e,t){switch(t.type){case"FOCUS_NODE":return{...e,focusedNodeId:t.nodeId};case"HOVER_NODE":return{...e,hoveredNodeId:t.nodeId};case"SET_VIEW":return{...e,view:t.view};case"SET_SIDE_PANEL_VIEW":return{...e,sidePanelView:t.view};case"SET_VERSION":return{...e,version:t.version};case"SET_STATE":return{...e,...t.state};case"SHOW_LINK_COPIED_BANNER":return{...e,showLinkCopiedBanner:!0};case"HIDE_LINK_COPIED_BANNER":return{...e,showLinkCopiedBanner:!1};case"SHOW_DUPLICATED_BANNER":return{...e,showDuplicatedBanner:!0};case"HIDE_DUPLICATED_BANNER":return{...e,showDuplicatedBanner:!1};default:return e}}var p=n(53627);let h=(0,s.createContext)(new a.Lj(l.qB)),f=(0,s.createContext)(()=>{});function g({children:e}){let[t,n]=function(){let e,t,n,i,a=(0,c.c)(9),[r]=(0,d.o)();a[0]!==r?(e=(0,u.hW)(r),a[0]=r,a[1]=e):e=a[1];let[o,l]=(0,s.useReducer)(m,e);return a[2]!==o?(t=()=>{let e=(0,u.Ts)(o);(0,p.MM)(e)},a[2]=o,a[3]=t):t=a[3],a[4]!==r||a[5]!==o?(n=[o,r],a[4]=r,a[5]=o,a[6]=n):n=a[6],(0,s.useEffect)(t,n),a[7]!==o?(i=[o,l],a[7]=o,a[8]=i):i=a[8],i}(),a=(0,r.AI)(t);(0,o.N)(()=>{a.value=t},[t,a]);let l=(0,s.useCallback)(e=>{n(e)},[n]);return(0,i.jsx)(h.Provider,{value:a,children:(0,i.jsx)(f.Provider,{value:l,children:e})})}function y(e){let t=(0,s.useContext)(h);if(!t)throw Error("useLoopsStateLens can only be used inside a PipesProvider");let n=(0,r.Sk)(t,e);return(0,r.HN)(n)}function v(){return(0,s.useContext)(f)}try{h.displayName||(h.displayName="LoopsStateContext")}catch{}try{f.displayName||(f.displayName="LoopsDispatchContext")}catch{}try{g.displayName||(g.displayName="LoopsStateProvider")}catch{}},50393:(e,t,n)=>{n.d(t,{M:()=>s});let i=JSON.parse('{"Create issues":{"id":"create-issues-group","name":"Create issue","color":"var(--display-gray-fgColor)","icon":"issue-draft","entries":[{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"create-issue-with-subissues","message":"First, create an issue with sub issues. Then ask for additional information to fill out these issues.","titleHtml":"Create an issue with sub-issues"}]},"Write code":{"id":"write-code-group","name":"Write code","color":"var(--display-gray-fgColor)","icon":"file","entries":[{"id":"create-profile-readme","message":"First, create an outstanding README for my GitHub profile using only Markdown. Then ask for key details (such as profession, top skills, favorite projects, or social links) to further refine and personalize it.","titleHtml":"Create a profile README"},{"id":"generate-html-calculator","message":"Generate a simple calculator using HTML, CSS, and JavaScript.","titleHtml":"Generate a simple calculator"},{"id":"make-pong","message":"Create a simple Pong game using HTML, CSS, and JavaScript. The player should control the left paddle with their mouse and arrow keys up/down, the right paddle is the computer. Make sure the game includes a bouncing ball, a scoreboard and collision detection for paddles and walls.","titleHtml":"Make a Pong game"},{"id":"mermaid-architecture","message":"Create a Markdown file with a Mermaid diagram showing an architecture overview.","titleHtml":"Design a Mermaid architecture overview"}]},"Git":{"id":"git-group","name":"Git","color":"var(--display-gray-fgColor)","icon":"git-branch","entries":[{"id":"basic-git-commands","message":"Explain what basic Git commands are and how to use them. Include commands like `git status`, `git init`, `git clone`, `git add`, `git commit`, `git push`, and `git pull`. Provide examples for each command.","titleHtml":"Basic Git commands"},{"id":"git-branching","message":"Explain how to create and manage branches in Git. Include commands like `git branch`, `git checkout`, `git merge`, and `git rebase`. Provide examples for each command.","titleHtml":"Git branching"},{"id":"advanced-git-commands","message":"Explain advanced Git commands and their usage. Include commands like `git stash`, `git cherry-pick`, `git revert`, and `git reset`. Provide examples for each command.","titleHtml":"Advanced Git commands"}]},"Issues":{"id":"issues-group","name":"Issues","color":"var(--display-gray-fgColor)","icon":"issue-opened","entries":[{"id":"list-open-issues","message":"List the latest open issues assigned to me.","titleHtml":"Issues assigned to me"},{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"summarize-issue","message":"Summarize the latest issue that I\'ve opened including all comments.","titleHtml":"Summarize my latest issue"}]},"Pull requests":{"id":"pull-requests-group","name":"Pull requests","color":"var(--display-gray-fgColor)","icon":"git-pull-request","entries":[{"id":"list-open-prs","message":"List my latest open pull requests.","titleHtml":"My open pull requests"},{"id":"summarize-pr","message":"Search for my latest merged PR and summarize it. What was the purpose and the key changes made?","titleHtml":"Summarize my latest PR"}]}}'),a=JSON.parse('{"Write code":{"id":"write-code-group","name":"Write code","color":"var(--display-gray-fgColor)","icon":"file","entries":[{"id":"create-profile-readme","message":"First, create an outstanding README for my GitHub profile using only Markdown. Then ask for key details (such as profession, top skills, favorite projects, or social links) to further refine and personalize it.","titleHtml":"Create a profile README"},{"id":"generate-html-calculator","message":"Generate a simple calculator using HTML, CSS, and JavaScript.","titleHtml":"Generate a simple calculator"},{"id":"make-pong","message":"Create a simple Pong game using HTML, CSS, and JavaScript. The player should control the left paddle with their mouse and arrow keys up/down, the right paddle is the computer. Make sure the game includes a bouncing ball, a scoreboard and collision detection for paddles and walls.","titleHtml":"Make a Pong game"},{"id":"mermaid-architecture","message":"Create a Markdown file with a Mermaid diagram showing an architecture overview.","titleHtml":"Design a Mermaid architecture overview"}]},"Git":{"id":"git-group","name":"Git","color":"var(--display-gray-fgColor)","icon":"git-branch","entries":[{"id":"basic-git-commands","message":"Explain what basic Git commands are and how to use them. Include commands like `git status`, `git init`, `git clone`, `git add`, `git commit`, `git push`, and `git pull`. Provide examples for each command.","titleHtml":"Basic Git commands"},{"id":"git-branching","message":"Explain how to create and manage branches in Git. Include commands like `git branch`, `git checkout`, `git merge`, and `git rebase`. Provide examples for each command.","titleHtml":"Git branching"},{"id":"advanced-git-commands","message":"Explain advanced Git commands and their usage. Include commands like `git stash`, `git cherry-pick`, `git revert`, and `git reset`. Provide examples for each command.","titleHtml":"Advanced Git commands"}]},"Issues":{"id":"issues-group","name":"Issues","color":"var(--display-gray-fgColor)","icon":"issue-opened","entries":[{"id":"list-open-issues","message":"List the latest open issues assigned to me.","titleHtml":"Issues assigned to me"},{"id":"create-issue","message":"First, create a new draft issue. Then ask for additional information to fill out the issue.","titleHtml":"Create a new issue"},{"id":"create-issue-with-subissues","message":"First, create an issue with sub issues. Then ask for additional information to fill out these issues.","titleHtml":"Create an issue with sub-issues"},{"id":"summarize-issue","message":"Summarize the latest issue that I\'ve opened including all comments.","titleHtml":"Summarize my latest issue"}]},"Pull requests":{"id":"pull-requests-group","name":"Pull requests","color":"var(--display-gray-fgColor)","icon":"git-pull-request","entries":[{"id":"list-open-prs","message":"List my latest open pull requests.","titleHtml":"My open pull requests"},{"id":"summarize-pr","message":"Search for my latest merged PR and summarize it. What was the purpose and the key changes made?","titleHtml":"Summarize my latest PR"}]}}');function s(e=!1){return Object.values(e?a:i)}},51587:(e,t,n)=>{n.d(t,{N:()=>s});var i=n(79634),a=n(96540);let s=()=>{let e=(0,i.X)();return(0,a.useMemo)(()=>({ssoOrgs:e?.sso_organizations??[],baseAvatarUrl:e?.base_avatar_url??"https://avatars.githubusercontent.com"}),[e?.sso_organizations,e?.base_avatar_url])}},51625:(e,t,n)=>{n.d(t,{_x:()=>a,cP:()=>s,eu:()=>i,pI:()=>r});let i="spark",a="Spark",s="/spark",r="Create web apps with React and TypeScript to prototype ideas, build tools, and more"},53380:(e,t,n)=>{n.d(t,{Ts:()=>s,_A:()=>a,hW:()=>r});var i=n(96868);function a(e){let t={},n=e.get("focusedNode");n&&(t.focusedNodeId=n);let a=e.get("view");a&&Object.values(i.Kh).includes(a)&&(t.view=a);let s=e.get("sidePanel");s&&Object.values(i.Fj).includes(s)&&(t.sidePanelView=s);let r=e.get("version");return r&&(t.version=r),t}function s(e){let t=new URLSearchParams;return e.focusedNodeId&&t.set("focusedNode",e.focusedNodeId),e.view!==i.qB.view&&t.set("view",e.view),e.sidePanelView!==i.qB.sidePanelView&&t.set("sidePanel",e.sidePanelView),e.version!==i.qB.version&&t.set("version",e.version),t}function r(e){return{...i.qB,...a(e)}}},54556:(e,t,n)=>{n.d(t,{E:()=>i});let i=n(24774).Lz.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{border:0,backgroundColor:"transparent"},".cm-tooltip.cm-tooltip-autocomplete > ul":{fontFamily:"var(--fontStack-monospace)",fontSize:"12px",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",border:"1px solid var(--borderColor-default, var(--color-border-default))",borderRadius:"var(--borderRadius-medium)",boxShadow:"var(--shadow-resting-medium, var(--color-shadow-medium))",minWidth:"auto"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]':{padding:"2px 8px",margin:0,color:"var(--fgColor-default, var(--color-fg-default))",whiteSpace:"pre"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:first-child':{borderTopLeftRadius:"var(--borderRadius-medium)",borderTopRightRadius:"var(--borderRadius-medium)"},'.cm-tooltip.cm-tooltip-autocomplete li[role="option"]:last-child':{borderBottomLeftRadius:"var(--borderRadius-medium)",borderBottomRightRadius:"var(--borderRadius-medium)"},".cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected], .cm-tooltip.cm-tooltip-autocomplete ul li[aria-selected] .cm-completionDetail":{color:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",background:"var(--bgColor-accent-emphasis, var(--color-accent-emphasis))"},".cm-completionDetail":{paddingLeft:"8px",color:"var(--fgColor-muted, var(--color-fg-muted))",fontSize:"var(--fontSize-small)",fontStyle:"normal"}})},54908:(e,t,n)=>{n.d(t,{J:()=>LoopsService});var i=n(35750),a=n(18150),s=n(85242),r=n(88243),o=n(16213),l=n(91348),c=n(45363),d=n(21046),u=n(90122),m=new WeakMap,p=new WeakMap,h=new WeakMap,f=new WeakMap;let NodeRunner=class NodeRunner{async run(e,t,n){let a={graphQLClient:(0,i._)(this,p),chatClient:(0,i._)(this,h),codeExecutor:(0,i._)(this,f),signal:t,onPartialResult:n,execution:e};return c.C.executeNode((0,i._)(this,m),a)}constructor(e,t,n,i){(0,a._)(this,m,{writable:!0,value:void 0}),(0,a._)(this,p,{writable:!0,value:void 0}),(0,a._)(this,h,{writable:!0,value:void 0}),(0,a._)(this,f,{writable:!0,value:void 0}),(0,s._)(this,m,e),(0,s._)(this,p,t),(0,s._)(this,h,n),(0,s._)(this,f,i)}};var g=n(33026),y=new WeakMap,v=new WeakMap,x=new WeakMap,b=new WeakMap,_=new WeakMap,j=new WeakMap,w=new WeakMap,N=new WeakMap,C=new WeakSet,k=new WeakSet,S=new WeakSet;let LoopRunner=class LoopRunner{async run(e,t){let n=(0,l.FT)((0,i._)(this,b));if(0===n.length)throw Error("No output node");await Promise.all(n.map(n=>(0,r._)(this,k,T).call(this,n,e,t)))}stop(e){(0,i._)(this,N).abort(),e((0,i._)(this,_))}constructor(e,t,n,i,r){(0,o._)(this,C),(0,o._)(this,k),(0,o._)(this,S),(0,a._)(this,y,{writable:!0,value:void 0}),(0,a._)(this,v,{writable:!0,value:void 0}),(0,a._)(this,x,{writable:!0,value:void 0}),(0,a._)(this,b,{writable:!0,value:void 0}),(0,a._)(this,_,{writable:!0,value:void 0}),(0,a._)(this,j,{writable:!0,value:void 0}),(0,a._)(this,w,{writable:!0,value:void 0}),(0,a._)(this,N,{writable:!0,value:void 0}),(0,s._)(this,y,n),(0,s._)(this,v,i),(0,s._)(this,x,r),(0,s._)(this,b,e),(0,s._)(this,_,t),(0,s._)(this,j,(0,l.f0)(e.nodes)),(0,s._)(this,w,new Map),(0,s._)(this,N,new AbortController)}};function I(){return(0,i._)(this,N).signal.aborted}async function T(e,t,n){let a=(0,i._)(this,w).get(e.id);if(a)return a;let s=(0,r._)(this,S,E).call(this,e,t,n);return(0,i._)(this,w).set(e.id,s),s}async function E(e,t,n){if((0,r._)(this,C,I).call(this))return null;let a=await n((0,i._)(this,b).id,(0,i._)(this,b).version||g.kj,(0,i._)(this,_));if(!a.success)throw Error("Unable to load execution");let s=a.data,o=s.nodes[e.id]?.value;if(o)return o;let l=[...new Set((0,i._)(this,j).edges.filter(t=>t.to===e.id).map(e=>e.from))].map(e=>(0,i._)(this,b).nodes.find(t=>t.id===e)).filter(e=>!!e),m=await Promise.all(l.map(async e=>[e.id,await (0,r._)(this,k,T).call(this,e,t,n)]));if(m.some(([e,t])=>null===t)||(0,r._)(this,C,I).call(this))return null;let p=Object.fromEntries(m);try{let n=((e,t)=>{let n={...e},i=n.content;return"string"==typeof i&&(n.content=function(e,t,n=!1){let i=(0,u.ZP)();return e.replace(i,(e,i,a,s)=>{let r=t[i];if(void 0===r)return(0,d.vV)(`Node with ID "${i}" not found in node map`),e;let o=r;if(a){let e=function e(t){if(!t)return null;if("object"==typeof t)return t;if("string"==typeof t)try{return e(JSON.parse(t))}catch{}return null}(r);if(e){let t=function(e,t){if(!t||!e)return null;let n=t.split("."),i=e;for(let e of n){if(null==i||"object"!=typeof i||null===i)return null;i=i[e]}return i}(e,a);if(null!==t)o=t;else throw Error(`Path "${a}" on node with ID "${i}" does not have a value`)}else throw Error(`Cannot access path "${a}" on non-object node with ID "${i}"`)}return String(("string"!=typeof o||n?JSON.stringify(o):o)??e)})}(i,t,c.C.requiresCodeEvaluation(e.type))),n})(e,p),a=new NodeRunner(n,(0,i._)(this,y),(0,i._)(this,v),(0,i._)(this,x));t({type:"SET_RUNNING",nodeID:e.id});let o=n=>{(0,r._)(this,C,I).call(this)||t({type:"UPDATE_NODE_VALUE_PARTIAL",nodeID:e.id,value:n})},{value:l}=await a.run(s,(0,i._)(this,N).signal,o);return(0,r._)(this,C,I).call(this)||t({type:"UPDATE_NODE_VALUE",nodeID:e.id,value:l}),l}catch(n){var h;return(0,r._)(this,C,I).call(this)||t({type:"UPDATE_NODE_ERROR",nodeID:e.id,error:(h=n)instanceof Error?h.message:"string"==typeof h?h:"object"==typeof h?JSON.stringify(h):""}),null}}var L=n(43134),R=n(76746),A=n(53419),D=new WeakMap,P=new WeakMap,O=new WeakMap,B=new WeakMap,F=new WeakMap,M=new WeakSet;let LoopsService=class LoopsService{getLoop(e,t=g.kj){return(0,i._)(this,D).getLoop(e,t)}getAllLoops(){return(0,i._)(this,D).listLoops()}getLoopVersions(e){return(0,i._)(this,D).listLoopVersions(e)}createLoop(e){return(0,i._)(this,D).createLoop("string"==typeof e?{id:e}:e)}async updateLoop(e,t){let n=await (0,i._)(this,D).getLoop(e,g.kj);if(!n.success)return n;let a=t(n.data);return await (0,i._)(this,D).updateLoop(e,g.kj,a)}async deleteLoop(e){return(0,L._T)(e),(0,i._)(this,D).deleteLoop(e)}async saveLoop(e){let t="string"==typeof e?{id:e}:e;return await (0,i._)(this,D).updateLoop(t.id,g.qD,t)}async restoreLoopVersion(e){return await (0,i._)(this,D).updateLoop(e.id,g.qD,e)}async revertLoop(e){let t=await (0,i._)(this,D).getLoop(e,g.qD);return t.success?(0,i._)(this,D).updateLoop(e,"draft",t.data):t}getExecution(e,t,n){return(0,i._)(this,D).getExecution(e,t,n)}async createExecution(e,t,n){return(0,i._)(this,D).createExecution(e,t,n?.nodes,n?.inputValues)}updateNodeExecution(e,t,n,a,s){return(0,i._)(this,D).updateNodeExecution(e,t,n,a,s)}async updateExecution(e,t,n,a){let s=await (0,i._)(this,D).getExecution(e,t,n);if(!s.success)return s;let r=s.data;for(let[s,o]of Object.entries(a.nodes))r.nodes[s]&&r.nodes[s].value===o.value&&r.nodes[s].error===o.error||await (0,i._)(this,D).updateNodeExecution(e,t,n,s,o);return await (0,i._)(this,D).getExecution(e,t,n)}isExecutionRunning(e){return!!(0,i._)(this,F).get(e)}async runPipeline(e,t,n,a){if((0,R.v)(e).length>0)return;let s=new LoopRunner(e,t,(0,i._)(this,P),(0,i._)(this,O),(0,i._)(this,B));(0,i._)(this,F).set(t,s);try{await s.run(n,a),(0,A.BI)("dotcom_chat.loops_execution",{execution_id:t,loop_id:e.id,node_count:e.nodes.length,status:"success"})}catch(n){throw(0,A.BI)("dotcom_chat.loops_execution",{execution_id:t,loop_id:e.id,node_count:e.nodes.length,status:"error"}),n}finally{(0,i._)(this,F).delete(t)}}stopPipeline(e,t){let n=(0,i._)(this,F).get(e);n&&(n.stop(t),(0,i._)(this,F).delete(e),(0,A.BI)("dotcom_chat.loops_execution",{execution_id:e,status:"canceled"}))}async shareLoop(e){return await (0,i._)(this,D).shareLoop(e)}async unshareLoop(e){return await (0,i._)(this,D).unshareLoop(e)}constructor(e,t,n,i){(0,o._)(this,M),(0,a._)(this,D,{writable:!0,value:void 0}),(0,a._)(this,P,{writable:!0,value:void 0}),(0,a._)(this,O,{writable:!0,value:void 0}),(0,a._)(this,B,{writable:!0,value:void 0}),(0,a._)(this,F,{writable:!0,value:new Map}),(0,r._)(this,M,$).call(this),(0,s._)(this,D,e),(0,s._)(this,P,t),(0,s._)(this,O,n),(0,s._)(this,B,i)}};function $(){indexedDB.deleteDatabase("copilot-pipes")}},59370:(e,t,n)=>{function i(e){return/^@today([+-]\d+[dwmy])?$/.test(e)}function a(e){if(e.startsWith("@"))return!1;let t=new Date(e);return!isNaN(t.getTime())&&(!e.match(/^\d{4}-\d{2}-\d{2}$/)||o(t)===e)}function s(e){return i(e)||a(e)}function r(e){return e.startsWith("@")&&!i(e)?null:i(e)?function(e){if(!i(e))return{date:null,error:`Invalid macro format: ${e}`};let t=new Date;if("@today"===e)return{date:t};let n=e.match(/^@today([+-])(\d+)([dwmy])$/);if(!n)return{date:null,error:`Invalid macro format: ${e}`};let[,a,s,r]=n;if(!a||!s||!r)return{date:null,error:`Invalid macro format: ${e}`};let o=parseInt(s,10),l="+"===a,c=new Date(t);switch(r){case"d":c.setDate(c.getDate()+(l?o:-o));break;case"w":c.setDate(c.getDate()+(l?7*o:-(7*o)));break;case"m":c.setMonth(c.getMonth()+(l?o:-o));break;case"y":c.setFullYear(c.getFullYear()+(l?o:-o));break;default:return{date:null,error:`Invalid unit: ${r}`}}return{date:c}}(e).date:a(e)?new Date(e):null}function o(e){let t=e.toISOString();return t.split("T")[0]??t.substring(0,10)}n.d(t,{O2:()=>o,Qf:()=>r,Yj:()=>s,nS:()=>i})},61872:(e,t,n)=>{n.d(t,{T:()=>i});let i={MissingProperty:"MissingProperty",CycleDetected:"CycleDetected",NonexistentNode:"NonexistentNode",DisconnectedNode:"DisconnectedNode",InvalidBooleanValue:"InvalidBooleanValue",InvalidRangeValue:"InvalidRangeValue",InvalidSelectValue:"InvalidSelectValue",InvalidFileType:"InvalidFileType",EmptyInputValue:"EmptyInputValue",InvalidDateValue:"InvalidDateValue"}},62828:(e,t,n)=>{n.d(t,{I:()=>l});var i=n(21728),a=n(47789),s=n(35247),r=n(7812),o=n(1747);function l(e){let t,n=(0,i.c)(8),{messageId:l,messageIndex:c,messageTimestamp:d}=e,{openPreviewPane:u,openItem:m,updateItem:p}=(0,o.xx)(),h=(0,a.qw)();return n[0]!==l||n[1]!==c||n[2]!==d||n[3]!==m||n[4]!==u||n[5]!==h||n[6]!==p?(t=(e,t)=>{let n=null;switch(e.type){case"file":n=(0,r.by)(e,l,d);break;case"file-diff":n=(0,r.g)(e,l,d);break;case"thread-scoped-file":n=(0,r.oR)({ref:e,messageIndex:c,messageId:l,timestamp:d});break;case"draft-issue":case"draft-update-issue":n=(0,r.oR)({ref:e,messageIndex:c,messageId:l});break;case"issue":n=(0,r.SI)(e,l);break;case"job":s.W.immersiveJobResultPreview&&(n=(0,r.wN)(e,l));break;default:for(let t of h)if(t.previewComponents?.[e.type]){n=(0,r.Bx)(e,l);break}}n&&(t?.preventDefault(),p(n),m(n.id),u())},n[0]=l,n[1]=c,n[2]=d,n[3]=m,n[4]=u,n[5]=h,n[6]=p,n[7]=t):t=n[7],t}},64917:(e,t,n)=>{n.d(t,{I:()=>s});var i=n(21728),a=n(99993);function s(e,t){let n=(0,i.c)(2),{data:s}=(0,a._N)(e,t);if(void 0===s){let t;return n[0]!==e?(t=e(void 0),n[0]=e,n[1]=t):t=n[1],t}return s}},65529:(e,t,n)=>{n.d(t,{as:()=>p,fp:()=>m,vQ:()=>u});var i=n(47865),a=n(76977),s=n(93654),r=n(2635),o=n(53419),l=n(96540);let c="copilot-chat-spec-task";function d(e,t){if(e&&t)return`${c}::${e}::${t}`}function u(e){let{selectedThreadID:t}=(0,r.Pk)(),n=d((0,r.Pk)().selectedThreadID,e.tag),[a,s]=(0,l.useState)(null);(0,l.useEffect)(()=>{s(null)},[e.id]);let u=(0,l.useCallback)(e=>{let n;e instanceof i.c||(e=Error("An unexpected error occurred. Please try again.",{cause:e})),s(e),e&&"status"in e&&"number"==typeof e.status&&(n=e.status),(0,o.BI)("copilot.spec_mode.pr_creation.failure",{http_status:n,error_message:e.message,mode:"immersive",threadId:t})},[t]),{createTask:m,isCreating:p}=(0,i.Z)({onError:u}),h=e.name,f=(0,l.useMemo)(()=>((e.name?`${e.name}

${e.description}`:e.description)||e.tag).trim(),[e.name,e.description,e.tag]);return{start:(0,l.useCallback)(i=>{if(p)return;s(null),(0,o.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_START",mode:"immersive",threadId:t});let a=i?.nameWithOwner??e.repository;if(!a)return void u(Error("Repository is required to start a task"));let r=a.split("/");return 2===r.length&&r[0]&&r[1]?n?void m({nwo:a,baseRef:i?.branch,customAgent:i?.subAgent||void 0,problemStatement:f,title:h,eventType:c},n):void u(Error("Unable to generate task ID - thread or task tag missing")):void u(Error('Invalid repository format. Expected "owner/repo"'))},[m,n,u,p,f,e.repository,t,h]),isStarting:p,error:a}}function m(e){let t=(0,r.Pk)(),n=e.map(e=>d(t.selectedThreadID,e.tag));(0,a._)();let{tasks:i,isLoading:o}=(0,s.si)({});return(0,l.useMemo)(()=>n.map(e=>!e||o||0===i.length?{isLoading:!!e&&o,pullRequest:void 0}:function(e){if(0===e.length)return{isLoading:!1,pullRequest:void 0};let t={isLoading:!1,pullRequest:void 0};for(let n of e){if(n.isLoading)return{isLoading:!0,pullRequest:void 0};if(n.pullRequest?.state==="closed")continue;let e=n.pullRequest?.created_at,i=t.pullRequest?.created_at;e&&(!i||new Date(e).getTime()>new Date(i).getTime())&&(t=n)}return t}(i.filter(t=>t.event_identifiers?.includes(e)).map(e=>({isLoading:!!e?.isOptimistic,pullRequest:e.pull})))),[n,i,o])}function p(e){return m(e?[e]:[])[0]??{isLoading:!1,pullRequest:void 0}}},68605:(e,t,n)=>{n.d(t,{BE:()=>o,Cw:()=>N,I6:()=>_,Lo:()=>d,Md:()=>f,TB:()=>j,TC:()=>b,TU:()=>m,YH:()=>g,Z3:()=>p,eO:()=>v,e_:()=>x,f9:()=>l,fJ:()=>C,fV:()=>h,tJ:()=>y,td:()=>u,w0:()=>c,ye:()=>w});var i=n(15874),a=n(54528),s=n(53839),r=n(24774);let o=e=>e.state.selection.main,l=(e,t)=>{e.dispatch({selection:{anchor:t}})},c=e=>e.state.selection.ranges.some(e=>!e.empty),d=e=>e.sliceDoc(e.selection.main.from,e.selection.main.to),u=(e,t,n)=>{e.dispatch({selection:{anchor:t,head:n}})};function m(e,t){return e.state.doc.line(t.line+1).from+t.ch}function p(e,t){let n=e.state.doc.lineAt(t);return{line:n.number-1,ch:t-n.from}}let h=(e,t)=>e.state.doc.line(t),f=(e,t,n)=>{let i=h(e,t);x(e,i.from,i.from,n)},g=(e,t,n)=>{let i=h(e,t);x(e,i.from,i.from+n.length,"")},y=(e,t)=>{e.dispatch(e.state.replaceSelection(t))},v=(e,t,n)=>e.sliceDoc(t,n),x=(e,t,n,i)=>{e.dispatch({changes:{from:t,to:n,insert:i}})},b=(e,t)=>{let n=o(e);x(e,n.from,n.to,t)},_=(e,t)=>new a.ZX(e.state.doc,t).next(),j=(e,t,n)=>{let i=new a.ZX(e.state.doc,t).next();e.dispatch({changes:{from:i.value.from,to:i.value.to,insert:n}})},w=(e,t,n,i,a)=>{if(void 0!==n)try{let o=h(e,t),l=h(e,n);if(o&&l){e.focus();let t=a?l.from+a:l.to;u(e,o.from+(i??0),t),e.dispatch({effects:[r.Lz.scrollIntoView(s.OF.range(o.from,l.to),{y:"center"})]})}}catch{}else try{let n=h(e,t);n&&(e.focus(),l(e,n.from+(i??0)),e.dispatch({effects:[r.Lz.scrollIntoView(n.from,{y:"center"})]}))}catch{}};function N(e){return e.state.facet(i.Xt)}function C(e,t){if(e===t)return[];let n=0,i=Math.min(e.length,t.length);for(;n<i&&e[n]===t[n];)n++;let a=e.length,s=t.length;for(;a>n&&s>n&&e[a-1]===t[s-1];)a--,s--;return[{from:n,to:a,insert:t.slice(n,s)}]}},70324:(e,t,n)=>{n.d(t,{c:()=>u});var i=n(74848),a=n(21728),s=n(38621),r=n(21373),o=n(94236),l=n(5524),c=n(73783),d=n(26108);function u(e){let t,n,u,m,p=(0,a.c)(37),{value:h,isLoading:f,onClick:g,onStop:y,variant:v,disabled:x,iconOnly:b,showPickInputsOption:_,onRunWithInputs:j,leadingVisual:w}=e,N=void 0===v?"invisible":v;p[0]!==f||p[1]!==h?(t=()=>f?"Loading...":h?"Run node":"Run loop",p[0]=f,p[1]=h,p[2]=t):t=p[2];let C=t;p[3]!==f||p[4]!==g||p[5]!==y?(n=e=>{f?y?.(e):g(e)},p[3]=f,p[4]=g,p[5]=y,p[6]=n):n=p[6];let k=n;p[7]!==j?(u=()=>{j?.()},p[7]=j,p[8]=u):u=p[8];let S=u;if(void 0!==_&&_&&!f&&!b){let e,t,n,a,d;return p[9]!==x||p[10]!==k||p[11]!==w||p[12]!==N?(e=(0,i.jsx)(r.Q,{disabled:x,variant:N,onClick:k,leadingVisual:w,children:"Run"}),p[9]=x,p[10]=k,p[11]=w,p[12]=N,p[13]=e):e=p[13],p[14]!==x||p[15]!==N?(t=(0,i.jsx)(o.W.Button,{disabled:x,variant:N,icon:s.TriangleDownIcon,"aria-label":"More run options"}),p[14]=x,p[15]=N,p[16]=t):t=p[16],p[17]!==S?(n=(0,i.jsx)(o.W.Overlay,{children:(0,i.jsx)(l.l,{children:(0,i.jsx)(l.l.Item,{onSelect:S,children:"Run with custom inputs"})})}),p[17]=S,p[18]=n):n=p[18],p[19]!==t||p[20]!==n?(a=(0,i.jsxs)(o.W,{children:[t,n]}),p[19]=t,p[20]=n,p[21]=a):a=p[21],p[22]!==e||p[23]!==a?(d=(0,i.jsxs)(c.A,{children:[e,a]}),p[22]=e,p[23]=a,p[24]=d):d=p[24],d}if(!b){let e,t=f?"danger":N,n=f?"Stop":"Run";return p[25]!==x||p[26]!==k||p[27]!==w||p[28]!==t||p[29]!==n?(e=(0,i.jsx)(r.Q,{disabled:x,variant:t,onClick:k,leadingVisual:w,children:n}),p[25]=x,p[26]=k,p[27]=w,p[28]=t,p[29]=n,p[30]=e):e=p[30],e}let I=C(),T=f?s.SquareFillIcon:s.SyncIcon,E=f?"danger":N;return p[31]!==x||p[32]!==k||p[33]!==I||p[34]!==T||p[35]!==E?(m=(0,i.jsx)(d.K,{disabled:x,"aria-label":I,icon:T,onClick:k,variant:E}),p[31]=x,p[32]=k,p[33]=I,p[34]=T,p[35]=E,p[36]=m):m=p[36],m}try{u.displayName||(u.displayName="ExecuteButton")}catch{}},70840:(e,t,n)=>{n.d(t,{G:()=>x});var i=n(74848),a=n(21728),s=n(34522),r=n(73189),o=n(97286),l=n(24880),c=n(73017),d=n(96379),u=n(38621),m=n(69726),p=n(40090),h=n(34164),f=n(74022),g=n(96540),y=n(25506);let v={markdownPreview:"MarkdownPreview-module__markdownPreview--KrJBX",spinner:"MarkdownPreview-module__spinner--rHtSt",error:"MarkdownPreview-module__error--Kjmwv",errorIcon:"MarkdownPreview-module__errorIcon--msbkW",errorHeader:"MarkdownPreview-module__errorHeader--yOGh9",hideHeadingAnchors:"MarkdownPreview-module__hideHeadingAnchors--wU3US"};function x({content:e,className:t,fallbackToRaw:n=!1,hideHeadingAnchors:s=!1,useLoadingSkeletonWithOptions:r}){let y=function(e,t,n){let i,s,r,o=(0,a.c)(8),[l,c]=(0,g.useState)(e),[d,u]=(0,g.useState)(t);2e3!==o[0]?(i=(0,f.A)(c,n),o[0]=n,o[1]=i):i=o[1];let m=i;return o[2]!==d||o[3]!==t||o[4]!==m||o[5]!==e?(s=()=>{t!==d?(m.cancel(),c(e),u(t)):m(e)},r=[m,e,t,d],o[2]=d,o[3]=t,o[4]=m,o[5]=e,o[6]=s,o[7]=r):(s=o[6],r=o[7]),(0,g.useEffect)(s,r),l}(e.value,e.name,2e3),{status:x,data:_}=(0,o.I)({queryKey:["copilot-immersive","MarkdownPreview",y,e.name],queryFn:async()=>{let t=await (0,d.lS)("/copilot/immersive/markdown",{method:"POST",body:{content:y,filename:e.name}});if(!t.ok)throw Error(`Failed to load rendered markdown (${t.status} on ${t.url})`);return await t.json()},placeholderData:l.rX,staleTime:1/0});return(0,i.jsx)("div",{className:(0,h.$)("readme html-blob blob",v.markdownPreview,s&&v.hideHeadingAnchors,t),children:"pending"===x?r?(0,i.jsx)("div",{"aria-label":"Loading Markdown preview\u2026",role:"status","aria-live":"polite",children:r.map((e,t)=>(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsx)(p.r,{size:e.size,lines:e.lines})},t))}):(0,i.jsx)("div",{className:v.spinner,children:(0,i.jsx)(m.A,{srText:"Loading Markdown preview\u2026"})}):"error"===x?n?(0,i.jsx)(b,{content:e}):(0,i.jsxs)("div",{className:v.error,children:[(0,i.jsx)("span",{className:v.errorIcon,children:(0,i.jsx)(u.StopIcon,{size:24})}),(0,i.jsx)("h2",{className:v.errorHeader,children:"Markdown rendering failed"}),(0,i.jsx)("p",{children:"Refresh the page or check the markdown code"})]}):(0,i.jsx)(c.$6,{className:"markdown-body",html:_.html})})}function b(e){let t,n,o,l,c=(0,a.c)(13),{content:d}=e,u=(0,g.useId)();c[0]!==d.value?(t={value:d.value,language:"markdown"},c[0]=d.value,c[1]=t):t=c[1];let m=(0,y.a)(t);return c[2]!==d.name||c[3]!==u?(n=(0,i.jsxs)("span",{id:u,className:"sr-only",children:[d.name," raw markdown contents"]}),c[2]=d.name,c[3]=u,c[4]=n):n=c[4],c[5]!==m||c[6]!==d.name||c[7]!==d.value||c[8]!==u?(o=(0,i.jsx)(s.default,{ariaLabelledBy:u,fileName:d.name,isReadOnly:!0,spacing:m,value:d.value,onChange:r.l,hideHelp:!0}),c[5]=m,c[6]=d.name,c[7]=d.value,c[8]=u,c[9]=o):o=c[9],c[10]!==n||c[11]!==o?(l=(0,i.jsxs)(i.Fragment,{children:[n,o]}),c[10]=n,c[11]=o,c[12]=l):l=c[12],l}try{x.displayName||(x.displayName="MarkdownPreview")}catch{}try{b.displayName||(b.displayName="RawMarkdownPreview")}catch{}},76219:(e,t,n)=>{n.d(t,{Q:()=>o,U:()=>l});var i=n(74848),a=n(21728),s=n(96540);let r=(0,s.createContext)(null);function o(e){let t,n,s=(0,a.c)(7),{availableModels:o,previewUrl:l,sendChatMessage:c,children:d}=e;s[0]!==o||s[1]!==l||s[2]!==c?(t={availableModels:o,previewUrl:l,sendChatMessage:c},s[0]=o,s[1]=l,s[2]=c,s[3]=t):t=s[3];let u=t;return s[4]!==d||s[5]!==u?(n=(0,i.jsx)(r.Provider,{value:u,children:d}),s[4]=d,s[5]=u,s[6]=n):n=s[6],n}function l(){let e=(0,s.useContext)(r);if(!e)throw Error("useAppContext must be used within an AppContextProvider");return e}try{r.displayName||(r.displayName="AppContext")}catch{}try{o.displayName||(o.displayName="AppContextProvider")}catch{}},76746:(e,t,n)=>{n.d(t,{v:()=>r});var i=n(61872);n(39087);var a=n(91348),s=n(45363);function r(e){if(!Array.isArray(e.nodes))return[{error:"Loop has no nodes",errorType:i.T.MissingProperty,involvedNodes:[]}];let t=function(e){let t=[];for(let n of("string"!=typeof e.title&&t.push({error:"Loop is missing a title",errorType:i.T.MissingProperty,involvedNodes:[]}),0===e.nodes.length&&t.push({error:"Loop has no nodes",errorType:i.T.MissingProperty,involvedNodes:[]}),e.nodes))t=t.concat(function(e){let t=[];return("string"!=typeof e.title||0===e.title.length)&&t.push({error:"Node is missing a title",errorType:i.T.MissingProperty,involvedNodes:[e.id]}),t.concat(s.C.validateNode(e))}(n));return t}(e),n=(0,a.f0)(e.nodes);for(let a of n.edges){let n=e.nodes.find(e=>e.id===a.from),s=e.nodes.find(e=>e.id===a.to);n&&s||t.push({error:`Node ${a.to} references a nonexistent node {{${a.from}}}`,errorType:i.T.NonexistentNode,involvedNodes:[a.to]})}let r=function(e){let t=new Set,n=new Set,i=[],a=s=>{if(n.has(s)){let e=i.indexOf(s);return i.slice(e)}if(t.has(s))return null;for(let r of(t.add(s),n.add(s),i.push(s),e.edges))if(r.from===s){let e=a(r.to);if(e)return e}return n.delete(s),i.pop(),null};for(let n of e.nodes.values())if(!t.has(n.id)){let e=a(n.id);if(e)return e}return null}(n);if(r&&r.length>0){let e=[...r,r[0]];t.push({error:`Loop contains a cycle: ${e.join(" \u2192 ")}`,errorType:i.T.CycleDetected,involvedNodes:r})}let o=function(e){let t=[...e.nodes.values()];if(0===t.length)return[];let n=[],i=new Set,a=(t,n)=>{for(let s of(i.add(t),n.add(t),e.edges))s.from!==t||i.has(s.to)||a(s.to,n),s.to!==t||i.has(s.from)||a(s.from,n)};for(let e of t)if(!i.has(e.id)){let t=new Set;a(e.id,t),n.push(t)}if(n.length<=1)return[];let s=n.reduce((e,t)=>t.size>e.size?t:e,new Set),r=[];for(let e of t)s.has(e.id)||r.push(e.id);return r}(n);return o.length>0&&t.push({error:`Loop contains unreachable nodes: ${o.join(", ")}`,errorType:i.T.DisconnectedNode,involvedNodes:o}),t}},77999:(e,t,n)=>{n.d(t,{m:()=>d});var i=n(74848),a=n(34164),s=n(37367),r=n(34743),o=n(71988),l=n(96540);let c={tooltip:"Tooltip-module__tooltip--hAat9"},d=(0,l.forwardRef)(({text:e,position:t,children:n,relationship:d="description",offset:u=8,...m},p)=>{let[h,f]=(0,l.useState)(!1),g=(0,l.useRef)(null),{refs:y,floatingStyles:v,context:x,isPositioned:b}=(0,s.we)({open:h,onOpenChange:f,placement:t,middleware:[(0,r.cY)(u),...t?[]:[(0,r.RK)()]],whileElementsMounted:o.ll}),_=(0,s.Mk)(x,{move:!1,delay:{open:100,close:0}}),j=(0,s.iQ)(x),w=(0,s.s9)(x),N=(0,s.It)(x,{role:"tooltip",enabled:"description"===d}),{getReferenceProps:C,getFloatingProps:k}=(0,s.bv)([_,j,w,N]),S=C();"label"===d?m["aria-label"]=e:"description"===d&&(m["aria-describedby"]=x.floatingId);let I=(0,s.SV)([y.setReference,p]),T=(0,l.cloneElement)(n,{...S,...m,onTouchEnd:e=>{n.props.onTouchEnd&&n.props.onTouchEnd(e),setTimeout(()=>f(!1),10)},onMouseEnter:e=>{n.props.onMouseEnter&&n.props.onMouseEnter(e),g.current&&(clearTimeout(g.current),g.current=null)},ref:I});return(0,i.jsxs)(i.Fragment,{children:[T,h&&(0,i.jsx)(s.XF,{children:(0,i.jsx)("div",{ref:y.setFloating,id:x.floatingId,style:{...v,visibility:b?"visible":"hidden"},className:(0,a.$)(c.tooltip),...k(),children:e})})]})});d.displayName="Tooltip"},78456:(e,t,n)=>{n.d(t,{Io:()=>i});let i=[{id:"dummy-1",dummy:!0,owned:!0,title:"Edit writing",description:"Update writing to make it more engaging",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1a",title:"Your writing",description:"The writing you want to edit",type:"text",metadata:{inputType:"text"},content:`There is huge potential in building complex, repeatable pipelines that take advantage of LLM capabilities. A way for anyone to create and share tools. A few examples:

- Scientists sharing workflows for turning conference notes into a queryable artifact
- Scientists creating a pipeline for polishing a draft to adhere to proposal writing requirements
- Developers building a \u{201C}check for security flaws\u{201D} pipeline, accessible via API / vscode extension
- Library maintainers creating a \u{201C}make a new codebase with Next.js" or \u{201C}add Tailwind to your codebase\u{201D} pipeline
- Artists building a pipeline to generate images of a certain style. Or process a sketch into a branded image.
- Generating a customized analysis of all of a lawyer\u{2019}s cases
- Summarize medical research on a topic, using only the most trustable sources

I wager there\u{2019}s a huge market in building and discovering pipelines, and a good implementation will look a bit like ChatGPT with people of many stripes building and using them.

GitHub is the right place for this kind of ecosystem for a few reasons:

- It ties into the spirit of Open Source
- It already has a huge audience to help with the cold start problem
- It mirror\u{2019}s GitHub\u{2019}s mission to make \u{201C}code\u{201D} accessible to a larger audience and the platform valuable to more than just developers. The future will look like people of any occupation \u{201C}writing code\u{201D} (really, just building things with logic)`},{id:"2a",title:"Edit guide",description:"The guide on how to edit writing",type:"text",metadata:{inputType:"text"},content:`# Academish Voice

pvh / Aug 2022

Our publications follow what we call \u{201C}*academish*\u{201D} voice. We follow a largely academic style in our writing but avoid certain academic tendencies.

## Academic Style

- **Make no claims without support.** If you have made an unsupported claim consider its centrality to your argument. If \u{201C}many developers agree\u{201D}, we should be able to link to a source or describe how we know that. If you can\u{2019}t defend it, you should get rid of it.
- **Avoid absolutist language.** It\u{2019}s not \u{201C}the main problem\u{201D}, it\u{2019}s \u{201C}a problem\u{201D}. (Unless, of course, you can defend the claim.)
- **Be precise and specific with your descriptions.** Instead of saying something \u{201C}feels great\u{201D}, describe how it feels. Don\u{2019}t say something \u{201C}is a problem\u{201D} unless you describe what the problem is or to whom. If you\u{2019}re tempted to say something vague because you\u{2019}re not sure, either do enough research until you\u{2019}re sure, or don\u{2019}t say it.
- **Avoid hyperbole.** Use adjectives to add precision, not to persuade. Claiming \u{201C}immense benefits\u{201D} is only appropriate if you have developed a commercially viable fusion power plant. Delete words that are only for emphasis, and keep only those that add substance (e.g. quantify).
- **Structure your writing for incremental reading.** Don\u{2019}t bury the lede. A reader should be able to understand the goals and conclusions of an essay by reading the first couple of paragraphs. Individual sections should briefly reiterate any important material and/or link back to where it is introduced. This may feel repetitive at times but aids readers who take several sessions to read a piece or who jump straight to the sections that interest them.
- **Give credit to others.** Cite earlier work. Link to sources for terms and ideas. Give thanks to contributors, reviewers, and advisors.
- **Be humble and transparent about shortcomings and problems.** We want readers to build on our work, not buy our product.

## Ink & Switch Style

- **Assume the reader is an interested generalist.** Explain jargon. Academic writing is dense with domain terminology because it assumes readers are \u{201C}up to date on the field.\u{201D}  Ink & Switch Essays make use of marginalia in what we call \u{201C}asides\u{201D} to define uncommon terminology. Concretely, you don\u{2019}t need to gloss \u{201C}HTML\u{201D}, but you should probably gloss \u{201C}CRDT\u{201D}.
- **Carefully consider section headings.** Headings should legibly communicate the shape of the essay and serve as a roadmap for a reader to skip to the part of an essay that\u{2019}s most interesting to them. Similarly, avoid including unrelated material in a section with a particular title. If a user already knows \u{201C}How CRDTs Work\u{201D} then they shouldn\u{2019}t miss (much) important information about the project by skipping reading that section.
- **Embrace interactive demonstrations, animations, illustration, and videos.** Sometimes an illustration or demo can offer more clarity on a topic than text alone. As long as the content is self-contained and doesn\u{2019}t rely on external sources, it should be legible for many years to come and viewable offline.
- **It\u{2019}s okay to share hunches and beliefs as long as they\u{2019}re appropriately labeled.** Don\u{2019}t be shy about drawing conclusions, just be clear about the degree of confidence you have and where it comes from.
- **Ensure content looks good in PDF / printed form.** Obviously you lose the elements above, but the PDF version of a paper shouldn\u{2019}t have giant \u{25B6}\u{FE0F} icons obscuring an image. Interactive figures should display a meaningful static view.
- **Use \u{201C}asides\u{201D} for supportive content and marginalia.** Asides can expand on references to other work, link out to related projects, or just share interesting context or historical tidbits.
- **Deploy persuasive or emotional writing appropriately.** You can be enthusiastic in describing your goals but be modest in how you describe your solutions.
- **Keep it classy.** We don\u{2019}t dismiss other people\u{2019}s work or insult their products. Everything around you was made by someone working really hard on it. If we have found a better way, we should show gratitude to those who helped us realize the path forward and humility about our contributions.
- **Sweat the details.** Make sure your colors are carefully chosen. Images should be clear and at the right bit rate. Choose your words carefully. Interactions should be delightful.

The result of these elements should be an essay that is confident, accurate, and readable to almost anyone with a background in technology. Our essays are often long (probably too long) but should consistently reward patient reading and serve as a reference to their readers for many years to come.

---

## About this page

This document aims to articulate the stylistic elements and voice of Ink & Switch Essays.

### **September 1, 2022**

@Martin Kleppmann added some details on academic style.

### **August 17, 2022**

@Todd Matthews made some formatting edits for continuity and scanability.

### **August 16, 2022**

@Peter van Hardenberg created this document. Began with @Adam Wiggins\u{2019} "Essay Playbook" and added notes about Academish Voice, which aim to capture the stylistic elements he looks for when I reading essay drafts. Many of these elements came from @Martin Kleppmann  and @Adam Wiggins reviews of my past writing, so credit to them. This is probably quite useful for everyone working on an essay right now, but is probably not comprehensive. If I've missed anything or anything here is controversial or unclear please feel free to inquire.`},{id:"3a",title:"Edited writing",description:"Writing with suggested changes",type:"prompt",content:"You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}. You're a helpful writing tutor here to suggest changes to the writing. Use this guide: {{2a}}. Respond with a full, edited version of {{1a}}."}]},{id:"dummy-2",dummy:!0,title:"Document this function",owned:!0,description:"Document this function so it's easy to understand",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1b",title:"Function to document",description:"The function to document",content:`export function createNodePrompt(node: Node, nodeMap: Record<string, Node>): string {
  let content = node.content;
  const regex = /{{([\\w-]+)}}/g;
  let match;

  while ((match = regex.exec(content)) !== null) {
    const id = match[1];
    const referencedNode = nodeMap[id];
    if (referencedNode) {
      const replacementContent = createNodePrompt(referencedNode, nodeMap);
      content = content.replace(match[0], replacementContent);
    }
  }

  return content;
}`,type:"code"},{id:"2b",title:"Documentation guide",description:"The documentation for the function",content:`Minimum Viable Documentation
A small set of fresh and accurate docs is better than a large assembly of \u{201C}documentation\u{201D} in various states of disrepair.

Write short and useful documents. Cut out everything unnecessary, including out-of-date, incorrect, or redundant information. Also make a habit of continually massaging and improving every doc to suit your changing needs. Docs work best when they are alive but frequently trimmed, like a bonsai tree.

See also these Agile Documentation best practices.

Update Docs with Code
Change your documentation in the same CL as the code change. This keeps your docs fresh, and is also a good place to explain to your reviewer what you\u{2019}re doing.

A good reviewer can at least insist that docstrings, header files, README.md files, and any other docs get updated alongside the CL.

Delete Dead Documentation
Dead docs are bad. They misinform, they slow down, they incite despair in engineers and laziness in team leads. They set a precedent for leaving behind messes in a code base. If your home is clean, most guests will be clean without being asked.

Just like any big cleaning project, it\u{2019}s easy to be overwhelmed. If your docs are in bad shape:

Take it slow, doc health is a gradual accumulation.
First delete what you\u{2019}re certain is wrong, ignore what\u{2019}s unclear.
Get your whole team involved. Devote time to quickly scan every doc and make a simple decision: Keep or delete?
Default to delete or leave behind if migrating. Stragglers can always be recovered.
Iterate.
Prefer the Good Over the Perfect
Documentation is an art. There is no perfect document, there are only proven methods and prudent guidelines. See Better is better than best.

Documentation is the Story of Your Code
Writing excellent code doesn\u{2019}t end when your code compiles or even if your test coverage reaches 100%. It\u{2019}s easy to write something a computer understands, it\u{2019}s much harder to write something both a human and a computer understand. Your mission as a Code Health-conscious engineer is to write for humans first, computers second. Documentation is an important part of this skill.

There\u{2019}s a spectrum of engineering documentation that ranges from terse comments to detailed prose:

Meaningful names: Good naming allows the code to convey information that would otherwise be relegated to comments or documentation. This includes nameable entities at all levels, from local variables to classes, files, and directories.

Inline comments: The primary purpose of inline comments is to provide information that the code itself cannot contain, such as why the code is there.

Method and class comments:

Method API documentation: The header / Javadoc / docstring comments that say what methods do and how to use them. This documentation is the contract of how your code must behave. The intended audience is future programmers who will use and modify your code.

It is often reasonable to say that any behavior documented here should have a test verifying it. This documentation details what arguments the method takes, what it returns, any \u{201C}gotchas\u{201D} or restrictions, and what exceptions it can throw or errors it can return. It does not usually explain why code behaves a particular way unless that\u{2019}s relevant to a developer\u{2019}s understanding of how to use the method. \u{201C}Why\u{201D} explanations are for inline comments. Think in practical terms when writing method documentation: \u{201C}This is a hammer. You use it to pound nails.\u{201D}

Class / Module API documentation: The header / Javadoc / docstring comments for a class or a whole file. This documentation gives a brief overview of what the class / file does and often gives a few short examples of how you might use the class / file.

Examples are particularly relevant when there\u{2019}s several distinct ways to use the class (some advanced, some simple). Always list the simplest use case first.

README.md: A good README.md orients the new user to the directory and points to more detailed explanation and user guides:

What is this directory intended to hold?
Which files should the developer look at first? Are some files an API?
Who maintains this directory and where I can learn more?
See the README.md guidelines.

docs: The contents of a good docs directory explain how to:

Get started using the relevant API, library, or tool.
Run its tests.
Debug its output.
Release the binary.
Design docs, PRDs: A good design doc or PRD discusses the proposed implementation at length for the purpose of collecting feedback on that design. However, once the code is implemented, design docs should serve as archives of these decisions, not as half-correct docs (they are often misused).

Other external docs: Some teams maintain documentation in other locations, separate from the code, such as Google Sites, Drive, or wiki. If you do maintain documentation in other locations, you should clearly point to those locations from your project directory (for example, by adding an obvious link to the location from your project\u{2019}s README.md).

Duplication is Evil
Do not write your own guide to a common Google technology or process. Link to it instead. If the guide doesn\u{2019}t exist or it\u{2019}s badly out of date, submit your updates to the appropriate directory or create a package-level README.md. Take ownership and don\u{2019}t be shy: Other teams will usually welcome your contributions.`,type:"text",metadata:{inputType:"text"}},{id:"3b",title:"My personal skillset",description:"",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"4b",title:"Documented code",description:"The code with documentation",content:`You're documenting your code for your team.

Update this code: {{1b}}

Using this guide: {{2b}}]

And incorporate {{3b}}`,type:"prompt"},{id:"5b",title:"Function tests",description:"Generate a test for the code",content:"You're generating a Jest test for {{4b}}. Our testing guidelines: {{6b}}",type:"prompt"},{id:"6b",title:"Testing guidelines",description:"The guidelines for testing",content:`The Test Anatomy

\u{26AA} \u{FE0F} 1.1 Include 3 parts in each test name
\u{2705} Do: A test report should tell whether the current application revision satisfies the requirements for the people who are not necessarily familiar with the code: the tester, the DevOps engineer who is deploying and the future you two years from now. This can be achieved best if the tests speak at the requirements level and include 3 parts:

(1) What is being tested? For example, the ProductsService.addNewProduct method

(2) Under what circumstances and scenario? For example, no price is passed to the method

(3) What is the expected result? For example, the new product is not approved


\u{274C} Otherwise: A deployment just failed, a test named \u{201C}Add product\u{201D} failed. Does this tell you what exactly is malfunctioning?


\u{1F447} Note: Each bullet has code examples and sometime also an image illustration. Click to expand



\u{26AA} \u{FE0F} 1.2 Structure tests by the AAA pattern
\u{2705} Do: Structure your tests with 3 well-separated sections Arrange, Act & Assert (AAA). Following this structure guarantees that the reader spends no brain-CPU on understanding the test plan:

1st A - Arrange: All the setup code to bring the system to the scenario the test aims to simulate. This might include instantiating the unit under test constructor, adding DB records, mocking/stubbing on objects, and any other preparation code

2nd A - Act: Execute the unit under test. Usually 1 line of code

3rd A - Assert: Ensure that the received value satisfies the expectation. Usually 1 line of code


\u{274C} Otherwise: Not only do you spend hours understanding the main code but what should have been the simplest part of the day (testing) stretches your brain


\u{26AA} \u{FE0F}1.3 Describe expectations in a product language: use BDD-style assertions
\u{2705} Do: Coding your tests in a declarative-style allows the reader to get the grab instantly without spending even a single brain-CPU cycle. When you write imperative code that is packed with conditional logic, the reader is forced to exert more brain-CPU cycles. In that case, code the expectation in a human-like language, declarative BDD style using expect or should and not using custom code. If Chai & Jest doesn't include the desired assertion and it\u{2019}s highly repeatable, consider extending Jest matcher (Jest) or writing a custom Chai plugin

\u{274C} Otherwise: The team will write less tests and decorate the annoying ones with .skip()


\u{26AA}  1.4 Stick to black-box testing: Test only public methods
\u{2705} Do: Testing the internals brings huge overhead for almost nothing. If your code/API delivers the right results, should you really invest your next 3 hours in testing HOW it worked internally and then maintain these fragile tests? Whenever a public behavior is checked, the private implementation is also implicitly tested and your tests will break only if there is a certain problem (e.g. wrong output). This approach is also referred to as behavioral testing. On the other side, should you test the internals (white box approach) \u{2014} your focus shifts from planning the component outcome to nitty-gritty details and your test might break because of minor code refactors although the results are fine - this dramatically increases the maintenance burden

\u{274C} Otherwise: Your tests behave like the boy who cried wolf: shouting false-positive cries (e.g., A test fails because a private variable name was changed). Unsurprisingly, people will soon start to ignore the CI notifications until someday, a real bug gets ignored\u{2026}


\u{26AA}  1.5 Choose the right test doubles: Avoid mocks in favor of stubs and spies
\u{2705} Do: Test doubles are a necessary evil because they are coupled to the application internals, yet some provide immense value (Read here a reminder about test doubles: mocks vs stubs vs spies).

Before using test doubles, ask a very simple question: Do I use it to test functionality that appears, or could appear, in the requirements document? If not, it\u{2019}s a white-box testing smell.

For example, if you want to test that your app behaves reasonably when the payment service is down, you might stub the payment service and trigger some \u{2018}No Response\u{2019} return to ensure that the unit under test returns the right value. This checks our application behavior/response/outcome under certain scenarios. You might also use a spy to assert that an email was sent when that service is down \u{2014} this is again a behavioral check which is likely to appear in a requirements doc (\u{201C}Send an email if payment couldn\u{2019}t be saved\u{201D}). On the flip side, if you mock the Payment service and ensure that it was called with the right JavaScript types \u{2014} then your test is focused on internal things that have nothing to do with the application functionality and are likely to change frequently

\u{274C} Otherwise: Any refactoring of code mandates searching for all the mocks in the code and updating accordingly. Tests become a burden rather than a helpful friend



\u{26AA} 1.6 Don\u{2019}t \u{201C}foo\u{201D}, use realistic input data
\u{2705} Do: Often production bugs are revealed under some very specific and surprising input \u{2014} the more realistic the test input is, the greater the chances are to catch bugs early. Use dedicated libraries like Chance or Faker to generate pseudo-real data that resembles the variety and form of production data. For example, such libraries can generate realistic phone numbers, usernames, credit cards, company names, and even \u{2018}lorem ipsum\u{2019} text. You may also create some tests (on top of unit tests, not as a replacement) that randomize fakers' data to stretch your unit under test or even import real data from your production environment. Want to take it to the next level? See the next bullet (property-based testing).

\u{274C} Otherwise: All your development testing will falsely show green when you use synthetic inputs like \u{201C}Foo\u{201D}, but then production might turn red when a hacker passes-in a nasty string like \u{201C}@3e2ddsf . ##\u{2019} 1 fdsfds . fds432 AAAA\u{201D}

`,type:"text",metadata:{inputType:"text"}},{id:"7b",title:"Test results",description:"Run the test for the code",content:"You're running tests for {{5b}}. Respond with the results of the tests.",type:"prompt"},{id:"8",title:"Documented and tested code",description:"The code with documentation and test",content:`Here's the documented code: {{4b}}.

Here's the {{5b}} and the {{7b}}.

Respond with "\u{2705} OK" if the tests all pass, and show a code block with the documented code and tests.`,type:"prompt"}]},{id:"dummy-3",dummy:!0,title:"Generate a course teaching me how this code works",owned:!0,description:"Generate a course teaching me how this code works",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1c",title:"Code to explain",description:"The code to explain",content:`import {ticks, tickIncrement} from "d3-array";
import continuous, {copy} from "./continuous.js";
import {initRange} from "./init.js";
import tickFormat from "./tickFormat.js";

export function linearish(scale) {
  var domain = scale.domain;

  scale.ticks = function(count) {
    var d = domain();
    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);
  };

  scale.tickFormat = function(count, specifier) {
    var d = domain();
    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);
  };

  scale.nice = function(count) {
    if (count == null) count = 10;

    var d = domain();
    var i0 = 0;
    var i1 = d.length - 1;
    var start = d[i0];
    var stop = d[i1];
    var prestep;
    var step;
    var maxIter = 10;

    if (stop < start) {
      step = start, start = stop, stop = step;
      step = i0, i0 = i1, i1 = step;
    }

    while (maxIter-- > 0) {
      step = tickIncrement(start, stop, count);
      if (step === prestep) {
        d[i0] = start
        d[i1] = stop
        return domain(d);
      } else if (step > 0) {
        start = Math.floor(start / step) * step;
        stop = Math.ceil(stop / step) * step;
      } else if (step < 0) {
        start = Math.ceil(start * step) / step;
        stop = Math.floor(stop * step) / step;
      } else {
        break;
      }
      prestep = step;
    }

    return scale;
  };

  return scale;
}

export default function linear() {
  var scale = continuous();

  scale.copy = function() {
    return copy(scale, linear());
  };

  initRange.apply(scale, arguments);

  return linearish(scale);
}`,type:"code"},{id:"2c",title:"My skillset",description:"My skillset",content:"I'm a software engineer with 5 years of experience in building web applications. I'm skilled in JavaScript, TypeScript, React, and Node.js. I'm also familiar with Python and have experience with machine learning frameworks like TensorFlow and PyTorch. I'm comfortable with SQL and NoSQL databases, and have experience with Docker and Kubernetes. I'm a quick learner and I'm always looking to improve my skills.",type:"text",metadata:{inputType:"text"}},{id:"3c",title:"Course outline",description:"The outline of the course",content:"You're generating a course teaching me how to understand {{1c}}. I have the following skillset: {{2c}}. Keep it short and concise, with 2-3 sections.",type:"prompt"},{id:"4c",title:"Course content",description:"The content of the course",content:`Generate a short walkthrough that teaches me how to understand {{1c}}. I have the following skillset: {{2c}}.

Flesh out the {{3c}}. Respond with a short walkthrough, using code blocks for code samples.`,type:"prompt"}]},{id:"dummy-4",dummy:!0,title:"Generate app name",owned:!0,description:"Generate and validate potential names for your app",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1d",title:"App description",description:"Describe your app's purpose and target audience",type:"text",metadata:{inputType:"text"},content:"An email app that uses AI to help you write emails faster."},{id:"2d",title:"Generate names",description:"Generate potential names based on description",type:"prompt",content:`You're a creative app naming expert. Generate 10 potential names for an app based on this description: {{1d}}

Rules for the names:
- Keep them short and memorable
- Make sure they're easy to spell
- Consider domain name availability
- Avoid trademarked terms

Format: a JSON array with one name per line`},{id:"3d",title:"Check domain availability",description:"Check if domains are available for the generated names",type:"code",content:`// This code checks domain availability using DNS lookup
  const nameList = {{2d}}

  const results = [];

  for (const name of nameList) {
    const cleanName = name.toLowerCase().replace(/[^a-z0-9]/g, '');
    const domain = cleanName + '.com';

    try {
      // Try to resolve the domain - if it fails, domain might be available
      const response = await fetch(\`https://dns.google/resolve?name=\${domain}\`);
      const data = await response.json();

      results.push({
        name: name,
        domain: domain,
        available: data.Status === 3 || !data.Answer // NXDOMAIN status or no answer means likely available
      });
    } catch (error) {
      results.push({
        name: name,
        domain: domain,
        error: 'Failed to check availability'
      });
    }
  }

  return results;
`}]},{id:"dummy-5",dummy:!0,title:"Wikipedia",owned:!0,description:"Generate a wiki article on a topic or question",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1e",title:"Topic or question",description:"The topic or question to generate a wiki article on",type:"text",metadata:{inputType:"text"},content:"When do babies start to crawl?"},{id:"2e",title:"Split into topics",description:"Split the topic or question into topics",type:"text",metadata:{inputType:"text"},content:`You're creating a write-up on a concept. You need to split it into 5-6 sections that cover interesting aspects of the concept. Respond with a JSON array with one string per topic.

For example:
Concept: Dogs as pets
Topics:
["Dog breeds", "Dog training", "Dog costs", "Dog health", "Dog accessories"]


Concept: {{1e}}
Topics:`},{id:"3e",title:"Generate article",description:"Generate a wiki article on the concept",type:"prompt",content:"You're a wiki article generator. Generate a wiki article on the concept: {{1e}}. Split it into sections: {{2e}} with a title, a bolded key statement, and a list or 2 paragraphs."},{id:"4e",title:"Image",description:"An image for the article",type:"prompt",content:"Generate an ascii art image for the article: {{3e}}"}]},{id:"dummy-6",dummy:!0,title:"Compare two prompts",owned:!0,description:"Compare the performance of two prompts",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1f",title:"Prompt 1",description:"The first prompt to compare",type:"prompt",content:"Make me a haiku about the color blue"},{id:"2f",title:"Prompt 2",description:"The second prompt to compare",type:"prompt",content:"You are a haiku generator. Make a haiku about the color blue. Your job depends on it."},{id:"3f",title:"Important metrics",description:"The important metrics to compare the prompts on",type:"text",metadata:{inputType:"text"},content:"Relevance, creativity, accuracy, completeness, and style"},{id:"4f",title:"Compare",description:"Compare the performance of the two prompts",type:"prompt",content:"For each of the {{3f}}, compare the two prompts: {{1f}} and {{2f}}. Respond with a JSON array with one object per metric, with the metric name and a winner key that says which prompt is better (just say 1 or 2)."}]},{id:"dummy-7",dummy:!0,title:"testing node with offset",owned:!0,description:"Test the edge render behavior for diagram with node offset",updatedAt:0x19814ddb7a4,visibility:"private",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"lichin-lin",metadata:{inputType:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-7d",metadata:{inputType:"date"}},{id:"repos",type:"text",title:"Repositories",description:"List of repositories to include in the report (one per line, e.g. primer/react)",content:`primer/react
primer/css
primer/components`,metadata:{inputType:"text"}},{id:"repo_query",type:"prompt",title:"Repository Query Builder",description:"Builds the repository query string for GitHub search",content:`Convert this list of repositories into a GitHub search query format. For each repository on a new line in {{repos}}, add 'repo:' prefix and combine with OR operators.

For example:
- If input is 'primer/react\\nprimer/css'
- Output should be 'repo:primer/react OR repo:primer/css'

Only return the query string, nothing else.`},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) author:{{1}} is:issue created:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          repository {
            nameWithOwner
          }
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) is:pr reviewed-by:{{1}} updated:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          repository {
            nameWithOwner
          }
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week across all repositories",content:`query {
  search(query: "({{repo_query}}) involves:{{1}} is:issue updated:>={{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          repository {
            nameWithOwner
          }
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Combined Activity Summary",description:"Summary report of the first responder's activity across all repositories",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity across multiple repositories over the past week. The repositories included are: {{repos}}

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers across all repositories)
2. Repository Breakdown (activity summary per repository)
3. Issue Activity
   - Created Issues (grouped by repository)
   - Issue Involvement (comments, assignments, grouped by repository)
4. PR Review Activity (highlight significant reviews, grouped by repository)
5. Key Observations (patterns across repositories, areas needing attention)

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift. Pay special attention to cross-repository patterns and any repositories that may need extra attention.`}]}]},79684:(e,t,n)=>{n.d(t,{B:()=>m});var i=n(74848),a=n(21728),s=n(96540),r=n(88934),o=n(94236),l=n(5524);let c={container:"Breadcrumbs-module__container--bnnIp",list:"Breadcrumbs-module__list--hG7n1",item:"Breadcrumbs-module__item--fekY7",textOnly:"Breadcrumbs-module__textOnly--v7ypW",link:"Breadcrumbs-module__link--A48Bt",skeleton:"Breadcrumbs-module__skeleton--_d2ba",text:"Breadcrumbs-module__text--yZS1N",icon:"Breadcrumbs-module__icon--CWnGJ",condensed:"Breadcrumbs-module__condensed--l60Z1",condensedList:"Breadcrumbs-module__condensedList--vpMXO",alwaysVisible:"Breadcrumbs-module__alwaysVisible--dK_nL",fullList:"Breadcrumbs-module__fullList--aHVvT"};var d=n(38621),u=n(40090);let m=e=>{let t,n,r,d,u,m=(0,a.c)(31),{children:y,"aria-label":v,condensed:x}=e,b=void 0===v?"Breadcrumbs":v;if(m[0]!==y){t=[];let e=(n,i)=>{let a=void 0===i?"":i;for(let[i,r]of s.Children.toArray(n).entries())(0,s.isValidElement)(r)&&(r.type===s.Fragment||"Symbol(react.fragment)"===r.type.toString()?e(r.props.children,`${a}fragment-${i}-`):r.type===p?t.push({key:r.key?.toString()||`${a}item-${i}`,href:r.props.href,children:r.props.children,hasMenu:!1}):r.type===h&&t.push({key:r.key?.toString()||`${a}item-${i}`,children:r.props.children,hasMenu:!0,menuOverlay:r.props.menuOverlay}))};e(y),m[0]=y,m[1]=t}else t=m[1];let _=t[t.length-1];m[2]!==t?(n=t.slice(0,-1),m[2]=t,m[3]=n):n=m[3];let j=n,w=t.length>=3,N=void 0!==x&&x&&w,C=s.useRef(null);if(void 0!==x)if(N){let e,t,n,a,s;return m[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(o.W.Button,{ref:C,className:c.link,children:"..."}),m[4]=e):e=m[4],m[5]!==j?(t=(0,i.jsx)("li",{className:c.item,children:(0,i.jsxs)(o.W,{children:[e,(0,i.jsx)(o.W.Overlay,{children:(0,i.jsx)(l.l,{children:j.map(f)})})]})}),m[5]=j,m[6]=t):t=m[6],m[7]!==_?(n=_&&(_.hasMenu&&_.menuOverlay?(0,i.jsx)(h,{menuOverlay:_.menuOverlay,children:_.children}):_.href?(0,i.jsx)(p,{href:_.href,children:_.children}):null),m[7]=_,m[8]=n):n=m[8],m[9]!==t||m[10]!==n?(a=(0,i.jsxs)("ol",{className:c.list,children:[t,n]}),m[9]=t,m[10]=n,m[11]=a):a=m[11],m[12]!==b||m[13]!==a?(s=(0,i.jsx)("nav",{className:`${c.container} ${c.condensed}`,"aria-label":b,children:a}),m[12]=b,m[13]=a,m[14]=s):s=m[14],s}else{let e,t;return m[15]!==y?(e=(0,i.jsx)("ol",{className:c.list,children:y}),m[15]=y,m[16]=e):e=m[16],m[17]!==b||m[18]!==e?(t=(0,i.jsx)("nav",{className:c.container,"aria-label":b,children:e}),m[17]=b,m[18]=e,m[19]=t):t=m[19],t}let k=`${c.list} ${w?c.fullList:c.alwaysVisible}`;return m[20]!==y||m[21]!==k?(r=(0,i.jsx)("ol",{className:k,children:y}),m[20]=y,m[21]=k,m[22]=r):r=m[22],m[23]!==w||m[24]!==_||m[25]!==j?(d=w&&(0,i.jsxs)("ol",{className:`${c.list} ${c.condensedList}`,children:[(0,i.jsx)("li",{className:c.item,children:(0,i.jsxs)(o.W,{children:[(0,i.jsx)(o.W.Button,{ref:C,className:c.link,children:"..."}),(0,i.jsx)(o.W.Overlay,{children:(0,i.jsx)(l.l,{children:j.map(g)})})]})}),_&&(_.hasMenu&&_.menuOverlay?(0,i.jsx)(h,{menuOverlay:_.menuOverlay,children:_.children}):_.href?(0,i.jsx)(p,{href:_.href,children:_.children}):null)]}),m[23]=w,m[24]=_,m[25]=j,m[26]=d):d=m[26],m[27]!==b||m[28]!==r||m[29]!==d?(u=(0,i.jsxs)("nav",{className:c.container,"aria-label":b,children:[r,d]}),m[27]=b,m[28]=r,m[29]=d,m[30]=u):u=m[30],u},p=e=>{let t,n,s,o,l,d=(0,a.c)(14);if(d[0]!==e?({href:n,loading:s,children:t,...o}=e,d[0]=e,d[1]=t,d[2]=n,d[3]=s,d[4]=o):(t=d[1],n=d[2],s=d[3],o=d[4]),s){let e;return d[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("li",{className:c.item,children:(0,i.jsx)(u.r,{className:c.skeleton})}),d[5]=e):e=d[5],e}if(n){let e,a;return d[6]!==t?(e=(0,i.jsx)("span",{className:c.text,children:t}),d[6]=t,d[7]=e):e=d[7],d[8]!==n||d[9]!==o||d[10]!==e?(a=(0,i.jsx)("li",{className:c.item,children:(0,i.jsx)(r.N_,{...o,to:n,className:c.link,"aria-current":"page",children:e})}),d[8]=n,d[9]=o,d[10]=e,d[11]=a):a=d[11],a}return d[12]!==t?(l=(0,i.jsx)("li",{className:c.item,children:(0,i.jsx)("span",{className:c.textOnly,children:t})}),d[12]=t,d[13]=l):l=d[13],l},h=e=>{let t,n,s,r,l=(0,a.c)(9),{buttonRef:u,children:m,menuOverlay:p}=e;return l[0]!==m?(t=(0,i.jsx)("span",{className:c.text,children:m}),l[0]=m,l[1]=t):t=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("span",{className:c.icon,children:(0,i.jsx)(d.TriangleDownIcon,{})}),l[2]=n):n=l[2],l[3]!==t?(s=(0,i.jsx)(o.W.Anchor,{children:(0,i.jsxs)("button",{className:c.link,"aria-current":"page","aria-haspopup":"true",children:[t,n]})}),l[3]=t,l[4]=s):s=l[4],l[5]!==u||l[6]!==p||l[7]!==s?(r=(0,i.jsx)("li",{className:c.item,children:(0,i.jsxs)(o.W,{anchorRef:u,children:[s,p]})}),l[5]=u,l[6]=p,l[7]=s,l[8]=r):r=l[8],r};m.Item=p,m.ItemWithMenu=h;try{m.displayName||(m.displayName="Breadcrumbs")}catch{}try{p.displayName||(p.displayName="Item")}catch{}try{h.displayName||(h.displayName="ItemWithMenu")}catch{}function f(e){return(0,i.jsx)(l.l.LinkItem,{href:e.href,children:e.children},e.key)}function g(e){return(0,i.jsx)(l.l.LinkItem,{href:e.href,children:e.children},e.key)}},79988:(e,t,n)=>{n.d(t,{c$:()=>i,n5:()=>a,z4:()=>s});let i="global_sso_banner",a=3,s="dismissed_sso_orgs"},80770:(e,t,n)=>{n.d(t,{C:()=>o,n:()=>r});var i=n(21728),a=n(97286),s=n(99519);let r="all-loops";function o(){let e,t,n=(0,i.c)(3),o=(0,s.EY)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=[r],n[0]=e):e=n[0],n[1]!==o?(t={queryKey:e,queryFn:async()=>{let e=await o.getAllLoops();if(!e.success)throw Error(e.error);return e.data.sort(l)},refetchOnMount:!0},n[1]=o,n[2]=t):t=n[2],(0,a.I)(t)}function l(e,t){return t.updatedAt-e.updatedAt}},80947:(e,t,n)=>{n.d(t,{G:()=>tf,o:()=>tg});var i=n(74848),a=n(4817),s=n(96540),r=n(48881),o=n(85094),l=n(47970),c=n(21728),d=n(46665),u=n(26100),m=n(39876),p=n(51213),h=n(35247),f=n(23967),g=n(22072),y=n(53419),v=n(38621),x=n(69726),b=n(26108),_=n(34164),j=n(1747);function w(e){let t,n,a,s=(0,c.c)(4),{className:r}=e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("g",{clipPath:"url(#clip0_6911_7629)",fill:"currentColor",children:(0,i.jsx)("path",{d:"M14.722 6.047a.75.75 0 11-1.5 0V3.615L10.2 6.638a.75.75 0 01-1.06-1.06l3.023-3.024H9.729a.75.75 0 010-1.499h4.243a.75.75 0 01.75.75v4.242zM1.278 9.953a.75.75 0 111.5 0v2.432L5.8 9.362a.75.75 0 011.06 1.06l-3.023 3.024h2.433a.75.75 0 010 1.499H2.028a.75.75 0 01-.75-.75V9.953z"})}),s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_6911_7629",children:(0,i.jsx)("path",{fill:"#fff",d:"M0 0H16V16H0z"})})}),s[1]=n):n=s[1],s[2]!==r?(a=(0,i.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"presentation",className:r,children:[t,n]}),s[2]=r,s[3]=a):a=s[3],a}try{w.displayName||(w.displayName="ExpandIcon")}catch{}let N={container:"FileBlock-module__container--Dzsqa",header:"FileBlock-module__header--AdNd3",language:"FileBlock-module__language--hjnkp",name:"FileBlock-module__name--PRLLi",previewCode:"FileBlock-module__previewCode--xp45Y",isClipped:"FileBlock-module__isClipped--g6E0E",expandIconContainer:"FileBlock-module__expandIconContainer--re33w",insightsButtonContainer:"FileBlock-module__insightsButtonContainer--QtzBn"};function C(e){return e.replace(/#L\d+(-L\d+)?$/,"")}function k(e){let t,n,o,l,k,I,T,E,L,R,A,D,P,O,B,F,M,$,V,U,q,W,H=(0,c.c)(94),{language:G,name:K,url:z,code:Q,line:Y,children:J,isClipped:X,isStreaming:Z,index:ee,startOffset:et,endOffset:en}=e,{message:ei}=(0,d.V)(),{updateItem:ea,openItem:es,openPreviewPane:er,versionedItems:eo,getOpenItems:el}=(0,j.xx)(),{messageIndex:ec,messageId:ed,messageTimestamp:eu,autoOpenPreviewPane:em,markdown:ep,hasAutoOpenedPreviewPaneRef:eh,setHasAutoOpenedPreviewPane:ef}=(0,r.H)(),{name:eg}=(0,f.vL)(G),ey=`file:${K}`,ev=`${ey}#${ec}.${Y}`,ex=!!Q;H[0]!==ey||H[1]!==ev||H[2]!==eo?(t=(n=eo.get(ey)??[]).indexOf(ev),H[0]=ey,H[1]=ev,H[2]=eo,H[3]=t,H[4]=n):(t=H[3],n=H[4]);let eb=t,e_=n.length>1&&-1!==eb?eb+1:null,ej=(0,s.useRef)(null);H[5]!==ei.references||H[6]!==z?(o=function(e,t){if(!h.W.fileBlockRefMatching||!e||!t)return;let n=C(e);return t.find(e=>C(e.url)===n)}(z,ei.references?.filter(S)),H[5]=ei.references,H[6]=z,H[7]=o):o=H[7];let ew=o;H[8]!==ew||H[9]!==el||H[10]!==ev||H[11]!==ee||H[12]!==es||H[13]!==er?(l=(e,t)=>{(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_OPENED",mode:"immersive",...h.W.fileBlockRefMatching?{isRepoFile:!!ew}:{}}),es(ev,void 0===t||t||el().length<1||0===ee),e&&er(ej.current)},H[8]=ew,H[9]=el,H[10]=ev,H[11]=ee,H[12]=es,H[13]=er,H[14]=l):l=H[14];let eN=l;H[15]!==Q||H[16]!==ew||H[17]!==ev||H[18]!==Z||H[19]!==G||H[20]!==ep||H[21]!==ed||H[22]!==eu||H[23]!==K||H[24]!==ex||H[25]!==ea?(k=()=>{let e=Q?.trimEnd();ex&&ed!==p.Wp&&-1!==ep.indexOf(e)&&(h.W.fileBlockRefMatching?ea({messageId:ed,id:ev,language:G,name:K,value:Q,type:"file",timestamp:new Date(eu),isStreaming:Z,isUserEdited:!1,reference:(()=>{if(!ew)return;let e=function(e){if(!h.W.fileBlockRefMatching||!e)return null;let t=/^https?:\/\/(?:github|.*\.ghe)\.com\/([^/]+)\/([^/]+)/.exec(e);return t&&t[1]&&t[2]?{owner:t[1],name:t[2]}:null}(ew.url);return{type:"file",url:C(ew.url),path:ew.path,repoID:ew.repoID,repoOwner:e?.owner??ew.repoOwner??"",repoName:e?.name??ew.repoName??"",ref:ew.ref,commitOID:ew.commitOID}})()}):ea({messageId:ed,id:ev,language:G,name:K,value:Q,type:"file",timestamp:new Date(eu),isStreaming:Z,isUserEdited:!1}))},H[15]=Q,H[16]=ew,H[17]=ev,H[18]=Z,H[19]=G,H[20]=ep,H[21]=ed,H[22]=eu,H[23]=K,H[24]=ex,H[25]=ea,H[26]=k):k=H[26],H[27]!==Q||H[28]!==ew||H[29]!==ev||H[30]!==ee||H[31]!==Z||H[32]!==G||H[33]!==ep||H[34]!==ed||H[35]!==eu||H[36]!==K||H[37]!==ex||H[38]!==ea||H[39]!==z?(I=[Q,G,ed,K,z,ea,ev,ex,eu,Z,ep,ew,ee],H[27]=Q,H[28]=ew,H[29]=ev,H[30]=ee,H[31]=Z,H[32]=G,H[33]=ep,H[34]=ed,H[35]=eu,H[36]=K,H[37]=ex,H[38]=ea,H[39]=z,H[40]=I):I=H[40],(0,s.useEffect)(k,I),H[41]!==em||H[42]!==eh||H[43]!==Z||H[44]!==ed||H[45]!==eN||H[46]!==ex||H[47]!==ef?(T=()=>{Z&&ex&&ed!==p.Wp&&(eN(em&&!eh.current,!1),ef(!0))},E=[Z,ex,eN,em,ed,eh,ef],H[41]=em,H[42]=eh,H[43]=Z,H[44]=ed,H[45]=eN,H[46]=ex,H[47]=ef,H[48]=T,H[49]=E):(T=H[48],E=H[49]),(0,s.useEffect)(T,E);let[eC,ek]=(0,s.useState)(!1),{publicCodeReferences:eS,codeVulnerabilities:eI}=(0,m.R)(ei.copilotAnnotations,et,en);H[50]!==eN?(L=()=>eN(!0),H[50]=eN,H[51]=L):L=H[51];let eT=`View file: ${K}`,eE=`chat-message-view-file-${K}`,eL=Z?(0,i.jsx)(x.A,{size:"small",className:a.sX}):f.Yr.has(eg)?(0,i.jsx)(v.MarkdownIcon,{className:a.sX}):(0,i.jsx)(v.CodeIcon,{className:a.sX});H[52]!==K?(R=(0,i.jsx)("span",{className:N.name,children:K}),H[52]=K,H[53]=R):R=H[53],H[54]!==e_?(A=null!==e_&&(0,i.jsx)(u.g,{version:e_}),H[54]=e_,H[55]=A):A=H[55],H[56]!==N.language||H[57]!==eL||H[58]!==R||H[59]!==A?(D=(0,i.jsxs)("div",{className:N.language,children:[eL,R,A]}),H[56]=N.language,H[57]=eL,H[58]=R,H[59]=A,H[60]=D):D=H[60],H[61]===Symbol.for("react.memo_cache_sentinel")?(P=(0,i.jsx)("div",{className:N.expandIconContainer,children:(0,i.jsx)(w,{})}),H[61]=P):P=H[61],H[62]!==N.header||H[63]!==D?(O=(0,i.jsxs)("div",{className:N.header,children:[D,P]}),H[62]=N.header,H[63]=D,H[64]=O):O=H[64];let eR=X&&N.isClipped;return H[65]!==eR?(B=(0,_.$)(N.previewCode,eR),H[65]=eR,H[66]=B):B=H[66],H[67]!==J?(F=(0,i.jsx)("code",{children:J}),H[67]=J,H[68]=F):F=H[68],H[69]!==B||H[70]!==F?(M=(0,i.jsx)("pre",{className:B,"aria-hidden":!0,children:F}),H[69]=B,H[70]=F,H[71]=M):M=H[71],H[72]!==L||H[73]!==eT||H[74]!==eE||H[75]!==O||H[76]!==M||H[77]!==N.container?($=(0,i.jsxs)("button",{ref:ej,className:N.container,onClick:L,"aria-label":eT,"data-testid":eE,children:[O,M]}),H[72]=L,H[73]=eT,H[74]=eE,H[75]=O,H[76]=M,H[77]=N.container,H[78]=$):$=H[78],H[79]!==eI||H[80]!==eS.length||H[81]!==ek?(V=(eS.length>0||eI.length>0)&&(0,i.jsx)("div",{className:N.insightsButtonContainer,children:(0,i.jsx)(b.K,{variant:"invisible",size:"small",icon:v.ShieldIcon,"aria-label":"Code insights",onClick:()=>ek(!0)})}),H[79]=eI,H[80]=eS.length,H[81]=ek,H[82]=V):V=H[82],H[83]!==$||H[84]!==V?(U=(0,i.jsxs)("div",{className:"position-relative",children:[$,V]}),H[83]=$,H[84]=V,H[85]=U):U=H[85],H[86]!==eI||H[87]!==eC||H[88]!==eS||H[89]!==ek?(q=eC&&(0,i.jsx)(g.t,{publicCodeReferences:eS,codeVulnerabilities:eI,onClose:()=>ek(!1)}),H[86]=eI,H[87]=eC,H[88]=eS,H[89]=ek,H[90]=q):q=H[90],H[91]!==U||H[92]!==q?(W=(0,i.jsxs)(i.Fragment,{children:[U,q]}),H[91]=U,H[92]=q,H[93]=W):W=H[93],W}function S(e){return"file"===e.type||"file-v2"===e.type||"snippet"===e.type}try{k.displayName||(k.displayName="FileBlock")}catch{}let I="data-fileblock-props",T=(0,o.F)(I),E=/^name=(?<name>[^\s]+)/,L=/^name=(?<name>[^\s]+)\n?/,R=/url=(?<url>[^\s]+)/,A={code:(e,t)=>{let n=(0,o.k)(e,I);return n?(0,i.jsx)(k,{...n,children:e.children}):t}};var D=n(50467);let P=/^type=(?<type>[^\s]+)\n?/;let YamlBlockExtension=class YamlBlockExtension{get dataProperty(){return(0,o.F)(this.dataAttribute)}constructor(){(0,D._)(this,"transformMarkdown",e=>{(0,l.YR)(e,"code",e=>{let t=e.lang;if(!t)return;let n=(e=>e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.slice(1,-1):e)(P.exec(e.meta??"")?.groups?.type??"");if(!n)return;let i={lang:t,type:n,value:e.value,isStreaming:e.isStreaming};if(!this.isSupported(i))return;let a=this.extractProps(i);e.data={hName:"div",hProperties:{[this.dataProperty]:JSON.stringify(a)},hChildren:[]}})}),(0,D._)(this,"transformHtml",e=>{(0,l.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&null!=t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&this.dataProperty in i.properties&&n.children.splice(t,1,i)})}),(0,D._)(this,"reactComponents",{div:(e,t)=>{let n=(0,o.k)(e,this.dataAttribute);return n?this.createComponent(n):t}})}};var O=n(20382),B=n(7812),F=n(28177),M=n(39344),$=n(2635),V=n(73952);function U(e){let{messages:t}=(0,$.Pk)(),n=(0,V.B)(t);return function(e,t){if(!e)return"";let n=e.match(/(!\[.*?\]\(image\d+\))/g);if(null==n)return e;for(let i of n){let n=/\(image(\d+)\)/,a=parseInt(i.match(n)[1],10),s=t.length-a,r=t[s]?.chatAttachmentUrl||t[s]?.url;if(r){let t=i.replace(n,`(${r})`);e=e.replace(i,t)}}return e}(e,(0,s.useMemo)(()=>n.flatMap(e=>e.mediaContent||[]),[n]))}var q=n(7026),W=n(69599),H=n(46996),G=n(99852);let K=e=>e.replace(/\\n/g,`
`).replace(/^\s+|\s+$/g,""),z=(e,t)=>{let n=(e||[]).map(e=>K(e)),i=(t||[]).map(e=>K(e));return n.length===i.length&&(0,H.A)((0,G.A)(n),(0,G.A)(i))},Q=e=>null==e?"":K(e),Y=e=>{if(Array.isArray(e)){let t=e.map(e=>"string"==typeof e?K(e):String(e));return`[${t.join(",")}]`}return"string"==typeof e||null==e?Q(e):JSON.stringify(e)},J=(e,t)=>{let n=[],i={};return Q(e.title)!==Q(t.title)&&(n.push("title"),i.title={expected:Y(t.title),actual:Y(e.title)}),Q(e.body)!==Q(t.description)&&(n.push("body"),i.body={expected:Y(t.description),actual:Y(e.body)}),Q(e.repository)!==Q(t.repository)&&(n.push("repository"),i.repository={expected:Y(t.repository),actual:Y(e.repository)}),Q(e.template)!==Q(t.template)&&(n.push("template"),i.template={expected:Y(t.template),actual:Y(e.template)}),Q(e.issueType)!==Q(t.issueType)&&(n.push("issueType"),i.issueType={expected:Y(t.issueType),actual:Y(e.issueType)}),Q(e.milestone)!==Q(t.milestone)&&(n.push("milestone"),i.milestone={expected:Y(t.milestone),actual:Y(e.milestone)}),z(e.assignees,t.assignees)||(n.push("assignees"),i.assignees={expected:Y(t.assignees),actual:Y(e.assignees)}),z(e.labels,t.labels)||(n.push("labels"),i.labels={expected:Y(t.labels),actual:Y(e.labels)}),((e,t)=>{let n=(e||[]).map(e=>K(e)),i=(t||[]).map(e=>K(e));return n.length===i.length&&(0,H.A)((0,G.A)(n),(0,G.A)(i))})(e.projects,t.projects)||(n.push("projects"),i.projects={expected:Y(t.projects),actual:Y(e.projects)}),(0,H.A)(e.templateFormValues,t.templateFormValuesById)||(n.push("templateFormValues"),i.templateFormValues={expected:Y(t.templateFormValuesById),actual:Y(e.templateFormValues)}),z(e.blockedByTags,t.blockedByTags)||(n.push("blockedByTags"),i.blockedByTags={expected:Y(t.blockedByTags),actual:Y(e.blockedByTags)}),z(e.isBlockingTags,t.isBlockingTags)||(n.push("isBlockingTags"),i.isBlockingTags={expected:Y(t.isBlockingTags),actual:Y(e.isBlockingTags)}),{isEqual:0===n.length,mismatchedFields:n,fieldComparisons:i}};function X(e){let t,n,i=(0,c.c)(8),{issues:a,isStreaming:o,isIssueTree:l}=e,d=void 0!==l&&l,{messages:u,threadSelectedAt:m}=(0,$.Pk)(),{messageId:p}=(0,r.H)();i[0]!==d||i[1]!==o||i[2]!==a||i[3]!==p||i[4]!==u||i[5]!==m?(t=()=>{let e=(0,V.B)(u),t=e[e.length-1],n=e.find(e=>e.id===p);if(!o&&n&&"assistant"===n.role&&n.id===t?.id&&new Date(n.createdAt)>=m&&n.references&&a.length>0){let e=n.references.filter(Z);for(let t of a)if(t.tag){let n=e.find(e=>e.tag===t.tag);if(n){let e=J(t,n);if(!e.isEqual)return void(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_DRAFT_ISSUE_REFERENCE_MISMATCH",mode:"immersive",messageId:p,issueTree:d,mismatchedFields:e.mismatchedFields.join(","),fieldComparisons:JSON.stringify(e.fieldComparisons),yamlMarshaled:(0,W.G7)("copilot_api_agentic_issue_marshal_yaml")})}}}},n=[o,a,u,m,d,p],i[0]=d,i[1]=o,i[2]=a,i[3]=p,i[4]=u,i[5]=m,i[6]=t,i[7]=n):(t=i[6],n=i[7]),(0,s.useEffect)(t,n)}function Z(e){return"draft-issue"===e.type||"draft-update-issue"===e.type}let ee={fromUnknown:e=>{if("object"!=typeof e||null==e)return null;let t={};return"title"in e&&"string"==typeof e.title&&(t.title=e.title),"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"template-form-values"in e&&"object"==typeof e["template-form-values"]&&null!=e["template-form-values"]&&(t.templateFormValues=Object.fromEntries(Object.entries(e["template-form-values"]).map(([e,t])=>[e,"string"==typeof t?t.trim():t]))),"description"in e&&"string"==typeof e.description&&(t.body=e.description),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"assignees"in e&&Array.isArray(e.assignees)&&(t.assignees=e.assignees.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"template"in e&&"string"==typeof e.template&&(t.template=e.template),"projects"in e&&Array.isArray(e.projects)&&(t.projects=e.projects.filter(e=>"string"==typeof e)),"milestone"in e&&"string"==typeof e.milestone&&(t.milestone=e.milestone),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),"issueNumber"in e&&"number"==typeof e.issueNumber&&(t.issueNumber=e.issueNumber),"blockedByTags"in e&&Array.isArray(e.blockedByTags)&&(t.blockedByTags=e.blockedByTags.filter(e=>"string"==typeof e)),"isBlockingTags"in e&&Array.isArray(e.isBlockingTags)&&(t.isBlockingTags=e.isBlockingTags.filter(e=>"string"==typeof e)),"bodyVersion"in e&&"string"==typeof e.bodyVersion&&(t.bodyVersion=e.bodyVersion),"issueType"in e&&"string"==typeof e.issueType&&(t.issueType=e.issueType),"type"in e&&"string"==typeof e.type&&(t.type=e.type),t}},et=e=>{try{let t=(0,O.Hh)(e);return ee.fromUnknown(t)}catch{return null}};function en(e){let t,n,o,l,d,m,p,f,g,v,b,_,w,N,C,k,S,I,T,E,L=(0,c.c)(89),{yaml:R,isStreaming:A}=e,[D,P]=(0,s.useState)(A);L[0]!==A?(t=()=>{A&&P(!0)},n=[A],L[0]=A,L[1]=t,L[2]=n):(t=L[1],n=L[2]),(0,s.useEffect)(t,n);let{updateItem:O,openItem:$,openPreviewPane:V,closeItem:W,versionedItems:H,items:G}=(0,j.xx)(),{messageId:K,messageIndex:z,autoOpenPreviewPane:Q,hasAutoOpenedPreviewPaneRef:Y,setHasAutoOpenedPreviewPane:J}=(0,r.H)();R=U(R),L[3]===Symbol.for("react.memo_cache_sentinel")?(o={},L[3]=o):o=L[3];let Z=(0,q.M)(R,et,o);L[4]!==Z?(l=[Z],L[4]=Z,L[5]=l):l=L[5],L[6]!==A||L[7]!==l?(d={issues:l,isStreaming:A,isIssueTree:!1},L[6]=A,L[7]=l,L[8]=d):d=L[8],X(d),L[9]===Symbol.for("react.memo_cache_sentinel")?(m=[],L[9]=m):m=L[9],(0,s.useEffect)(es,m),L[10]!==A||L[11]!==Z.type?(p="new-issue",h.W.draftUpdateIssue&&(p=null==Z.type&&A?void 0:"draft-update-issue"===Z.type?"update-issue":"new-issue"),L[10]=A,L[11]=Z.type,L[12]=p):p=L[12];let ee=null!=Z.tag&&null!=p?`${p}:${Z.tag}#${z}`:void 0;L[13]!==ee||L[14]!==H?(f=null!=ee?(0,B.LU)(ee,H):null,L[13]=ee,L[14]=H,L[15]=f):f=L[15];let en=f;L[16]!==ee||L[17]!==G?(g=null!=ee?G.get(ee):void 0,L[16]=ee,L[17]=G,L[18]=g):g=L[18];let er=g,eo=Z.repository||null==p||er?.type!==p?Z.repository:er.repository||"";L[19]!==Q||L[20]!==Y||L[21]!==ee||L[22]!==$||L[23]!==V||L[24]!==J?(v=e=>{let{selectItem:t,event:n}=e;null!=ee&&($(ee,t),(t||Q&&!Y.current)&&(V(n?.currentTarget),J(!0)),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},L[19]=Q,L[20]=Y,L[21]=ee,L[22]=$,L[23]=V,L[24]=J,L[25]=v):v=L[25];let el=v;L[26]!==Z.projects?(b=Z.projects??[],L[26]=Z.projects,L[27]=b):b=L[27],L[28]!==b?(_=b.map(ea),L[28]=b,L[29]=_):_=L[29];let ec=_;L[30]!==W||L[31]!==p||L[32]!==ee||L[33]!==A||L[34]!==Z.assignees||L[35]!==Z.body||L[36]!==Z.bodyVersion||L[37]!==Z.issueNumber||L[38]!==Z.issueType||L[39]!==Z.labels||L[40]!==Z.milestone||L[41]!==Z.parentTag||L[42]!==Z.tag||L[43]!==Z.template||L[44]!==Z.templateFormValues||L[45]!==Z.title||L[46]!==K||L[47]!==ec||L[48]!==eo||L[49]!==O?(w=()=>{null!=ee&&("update-issue"===p&&eo&&Z.issueNumber&&W(`issue:${eo}/${Z.issueNumber}`),O({messageId:K,name:Z.title??"",body:Z.body,bodyVersion:Z.bodyVersion,repository:eo,id:ee,type:p,tag:Z.tag??"",parentTag:Z.parentTag,isStreaming:A,template:Z.template,issueType:Z.issueType,milestone:Z.milestone,assignees:Z.assignees?.sort(),labels:Z.labels?.sort(),projects:ec,rawProjectsInput:ec.map(ei).sort(),isUserEdited:!1,defaultValuesById:Z.templateFormValues??{},issueNumber:Z.issueNumber}))},L[30]=W,L[31]=p,L[32]=ee,L[33]=A,L[34]=Z.assignees,L[35]=Z.body,L[36]=Z.bodyVersion,L[37]=Z.issueNumber,L[38]=Z.issueType,L[39]=Z.labels,L[40]=Z.milestone,L[41]=Z.parentTag,L[42]=Z.tag,L[43]=Z.template,L[44]=Z.templateFormValues,L[45]=Z.title,L[46]=K,L[47]=ec,L[48]=eo,L[49]=O,L[50]=w):w=L[50],L[51]!==W||L[52]!==p||L[53]!==ee||L[54]!==A||L[55]!==Z.assignees||L[56]!==Z.body||L[57]!==Z.bodyVersion||L[58]!==Z.issueNumber||L[59]!==Z.issueType||L[60]!==Z.labels||L[61]!==Z.milestone||L[62]!==Z.parentTag||L[63]!==Z.projects||L[64]!==Z.tag||L[65]!==Z.template||L[66]!==Z.templateFormValues||L[67]!==Z.title||L[68]!==K||L[69]!==ec||L[70]!==eo||L[71]!==O?(N=[W,p,ee,A,Z.assignees,Z.body,Z.bodyVersion,Z.issueNumber,Z.issueType,Z.labels,Z.milestone,Z.parentTag,Z.projects,Z.tag,Z.template,Z.templateFormValues,Z.title,K,ec,eo,O],L[51]=W,L[52]=p,L[53]=ee,L[54]=A,L[55]=Z.assignees,L[56]=Z.body,L[57]=Z.bodyVersion,L[58]=Z.issueNumber,L[59]=Z.issueType,L[60]=Z.labels,L[61]=Z.milestone,L[62]=Z.parentTag,L[63]=Z.projects,L[64]=Z.tag,L[65]=Z.template,L[66]=Z.templateFormValues,L[67]=Z.title,L[68]=K,L[69]=ec,L[70]=eo,L[71]=O,L[72]=N):N=L[72],(0,s.useEffect)(w,N),L[73]!==D||L[74]!==ee||L[75]!==el?(C=()=>{null!=ee&&D&&el({selectItem:!0})},k=[ee,el,D],L[73]=D,L[74]=ee,L[75]=el,L[76]=C,L[77]=k):(C=L[76],k=L[77]),(0,s.useEffect)(C,k);let ed=Z.title??"";return L[78]!==A?(S=A?(0,i.jsx)(x.A,{size:"small",className:a.sX}):(0,i.jsx)(F.n,{type:"new-issue"}),L[78]=A,L[79]=S):S=L[79],L[80]!==en?(I=null!=en&&(0,i.jsx)(u.g,{"data-testid":"version-label",version:en}),L[80]=en,L[81]=I):I=L[81],L[82]!==el?(T=e=>el({selectItem:!0,event:e}),L[82]=el,L[83]=T):T=L[83],L[84]!==ed||L[85]!==S||L[86]!==I||L[87]!==T?(E=(0,i.jsx)(M.K,{subIssueCount:0,children:(0,i.jsx)(M.K.RootItem,{title:ed,leadingVisual:S,trailingBadge:I,onClick:T})}),L[84]=ed,L[85]=S,L[86]=I,L[87]=T,L[88]=E):E=L[88],E}function ei(e){return e.title}function ea(e){return{title:e}}function es(){return(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_DRAFT_BLOCK_RENDERED",mode:"immersive"})}try{en.displayName||(en.displayName="DraftIssueBlock")}catch{}let er=new class extends YamlBlockExtension{get dataAttribute(){return"data-draft-issue-block"}isSupported(e){return"yaml"===e.lang&&"draft-issue"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(en,{...e})}};var eo=n(46461),el=n(13974);let ec={container:"DraftIssueTreeBlock-module__container--framP"},ed={fromUnknown:e=>{if("object"!=typeof e||null===e)return null;let t={};return"tag"in e&&"string"==typeof e.tag&&(t.tag=e.tag),"parentTag"in e&&"string"==typeof e.parentTag&&(t.parentTag=e.parentTag),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"url"in e&&"string"==typeof e.url&&(t.url=e.url),"blockedByTags"in e&&Array.isArray(e.blockedByTags)&&(t.blockedByTags=e.blockedByTags.filter(e=>"string"==typeof e)),"isBlockingTags"in e&&Array.isArray(e.isBlockingTags)&&(t.isBlockingTags=e.isBlockingTags.filter(e=>"string"==typeof e)),t}};function eu(e){try{let t=(0,O.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(ed.fromUnknown).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}function em({data:e}){let t=(0,q.M)(e,eu,[]),{messageId:n}=(0,r.H)(),{updateItem:a,openItem:o,openPreviewPane:l}=(0,j.xx)(),c=(0,s.useMemo)(()=>Array.from((0,eo.G9)(t,e=>e.tag,e=>e.parentTag,e=>e.blockedByTags,e=>e.isBlockingTags).values()).filter(e=>!e.parent),[t]);function d(e,t){if(!e.url)return;let[i,s]=e.repository?.split("/")??[];if(!i||!s||!e.number)return;let r=`issue:${i}/${s}/${e.number}`;a({messageId:n,name:e.title??"",number:e.number,owner:i,repo:s,id:r,href:e.url,type:"issue"}),o(r),l(t?.currentTarget)}let u=e=>{if(h.W.draftIssuesWithDependencies)return e.blockedBy.map(e=>({title:e.item.title??"",href:e.item.url,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),d(e.item,t))}}))};function m(e){return(0,i.jsx)(M.K.Item,{title:e.item.title??"",leadingVisual:(0,i.jsx)(ep,{item:e.item}),trailingBadge:(0,i.jsx)(eh,{node:e}),href:e.item.url,onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),d(e.item,t)},blockedBy:u(e),children:e.children.map(m)},e.item.tag)}return(0,i.jsx)("div",{className:ec.container,children:c.map(e=>{let t=-1;return(0,eo.YR)(e,()=>t++),(0,i.jsxs)(M.K,{subIssueCount:t,children:[(0,i.jsx)(M.K.RootItem,{leadingVisual:(0,i.jsx)(ep,{item:e.item}),title:e.item.title??"",trailingBadge:(0,i.jsx)(eh,{node:e}),href:e.item.url,onClick:t=>{if(!t.metaKey&&!t.ctrlKey)return t.preventDefault(),d(e.item,t)},blockedBy:u(e)}),e.children.map(m)]},e.item.tag)})})}function ep(e){let t=(0,c.c)(2),{item:n}=e;if("open"===n.state){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(v.IssueOpenedIcon,{className:"fgColor-open"}),t[0]=e):e=t[0],e}if("closed"===n.state){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(v.IssueClosedIcon,{className:"fgColor-done"}),t[1]=e):e=t[1],e}}function eh(e){let t,n=(0,c.c)(5),{node:a}=e;if(!a.item.repository||!a.item.number)return null;if(a.item.repository===a.parent?.item.repository){let e;return n[0]!==a.item.number?(e=(0,i.jsxs)("span",{className:"fgColor-muted no-wrap",children:["#",a.item.number]}),n[0]=a.item.number,n[1]=e):e=n[1],e}return n[2]!==a.item.number||n[3]!==a.item.repository?(t=(0,i.jsxs)("span",{className:"fgColor-muted no-wrap",children:[a.item.repository,"#",a.item.number]}),n[2]=a.item.number,n[3]=a.item.repository,n[4]=t):t=n[4],t}try{em.displayName||(em.displayName="IssueTreeBlock")}catch{}try{ep.displayName||(ep.displayName="LeadingVisual")}catch{}try{eh.displayName||(eh.displayName="IssueLocation")}catch{}function ef(e){return"state"in e?"draft"===e.state:"assignees"in e||"labels"in e||"issueType"in e||"projects"in e||"milestone"in e||"template"in e||"templateFormValues"in e||"body"in e}function eg(e){return"state"in e&&("open"===e.state||"closed"===e.state)}function ey(e){try{let t=(0,O.gh)(e);if(Array.isArray(t))return t.filter(e=>"object"==typeof e&&null!=e).map(e=>{switch("state"in e?e.state:void 0){case void 0:case"draft":return ee.fromUnknown(e);case"open":case"closed":return ed.fromUnknown(e)}}).filter(e=>!!e).filter(e=>!!e.tag);return null}catch{return null}}function ev({data:e,isStreaming:t}){e=U(e);let n=(0,q.M)(e,ey,[]),{items:a,updateItem:o,openItem:l,openPreviewPane:c,closeItem:d,versionedItems:m}=(0,j.xx)(),{messageId:p,messageIndex:f,autoOpenPreviewPane:g,hasAutoOpenedPreviewPaneRef:v,setHasAutoOpenedPreviewPane:x}=(0,r.H)(),b=(0,s.useCallback)(e=>ef(e)&&e.tag?`new-issue:${e.tag}#${f}`:eg(e)&&e.repository&&e.number?`existing-issue:${e.repository}/${e.number}`:void 0,[f]);X({issues:n,isStreaming:t,isIssueTree:!0}),(0,s.useEffect)(()=>{for(let e of n)e.tag&&b(e)&&(ef(e)&&o({messageId:p,type:"new-issue",id:`new-issue:${e.tag}#${f}`,tag:e.tag,parentTag:e.parentTag,name:e.title??"",body:e.body,repository:e.repository,template:e.template,issueType:e.issueType,milestone:e.milestone,assignees:e.assignees?.sort(),labels:e.labels?.sort(),projects:e.projects?.map(e=>({title:e})).sort((e,t)=>e.title.localeCompare(t.title)),defaultValuesById:e.templateFormValues??{},isUserEdited:!1,isStreaming:t,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]}),eg(e)&&e.repository&&e.number&&e.url&&(d(`issue:${e.repository}/${e.number}`),o({messageId:p,type:"existing-issue",id:`existing-issue:${e.repository}/${e.number}`,tag:e.tag,parentTag:e.parentTag,repository:e.repository,number:e.number,name:e.title??"",state:e.state??"open",href:e.url,blockedByTags:e.blockedByTags??[],isBlockingTags:e.isBlockingTags??[]})))},[b,t,n,p,f,o,d]);let _=(0,s.useCallback)((e,{selectItem:t,event:n})=>{let i=b(e);i&&(l(i,t),(t||g&&!v.current)&&(c(n?.currentTarget),x(!0)),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_DRAFT_ISSUE_OPENED",mode:"immersive"}))},[b,l,g,v,c,x]),w=(0,s.useCallback)(e=>{let t=[...a.entries()].find(([t,n])=>(t.startsWith("new-issue:")||t.startsWith("existing-issue:"))&&("new-issue"===n.type||"existing-issue"===n.type)&&n.tag===e);if(!t)return;let[n]=t,i=(0,B.oy)(n),s=m.get(i),r=s?.at(-1);if(!r)return;let o=a.get(r);if(o)switch(o?.type){case"new-issue":return ee.fromUnknown(o);case"existing-issue":return ed.fromUnknown(o);default:return}},[a,m]),N=(0,s.useMemo)(()=>{let e=new Set(n.map(e=>e.tag)),t=new Set(n.filter(e=>null!=e.parentTag).map(e=>e.parentTag)),i=Array.from(new Set([...t,...new Set(n.flatMap(e=>null!=e.blockedByTags?e.blockedByTags:[]).filter(e=>null!=e)),...new Set(n.flatMap(e=>null!=e.isBlockingTags?e.isBlockingTags:[]).filter(e=>null!=e))])).filter(t=>null!=t&&!e.has(t)).map(e=>w(e)).filter(e=>null!=e),a=[...n,...i];return Array.from((0,eo.G9)(a,e=>e.tag,e=>e.parentTag,e=>e.blockedByTags,e=>e.isBlockingTags).values()).filter(e=>!e.parent)},[n,w]),C=(0,el.p)(t);(0,s.useEffect)(()=>{if(!C)return;let e=!0;for(let t of N.values()){if(ef(t.item)){_(t.item,{selectItem:e}),e=!1;continue}for(let n of t.children)ef(n.item)&&(_(n.item,{selectItem:e}),e=!1)}},[C,N,_]);let k=e=>{if(h.W.draftIssuesWithDependencies)return e.blockedBy.map(e=>({title:e.item.title??"",href:eg(e.item)?e.item.url:void 0,onClick:t=>{_(e.item,{selectItem:!0,event:t})}}))},S=e=>{let n=b(e.item),a=n?(0,B.LU)(n,m):null;return(0,i.jsx)(M.K.Item,{title:e.item.title??"",leadingVisual:(0,i.jsx)(ex,{isStreaming:t,item:e.item}),trailingBadge:null!=a?(0,i.jsx)(u.g,{version:a}):void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),_(e.item,{selectItem:!0,event:t}))},href:eg(e.item)?e.item.url:void 0,blockedBy:k(e),children:e.children.map(S)},e.item.tag)};return(0,i.jsx)("div",{className:ec.container,children:N.map(e=>{let n=b(e.item),a=n?(0,B.LU)(n,m):null,s=-1;return(0,eo.YR)(e,()=>s++),(0,i.jsxs)(M.K,{subIssueHeaderText:eg(e.item)?"New sub-issues":void 0,subIssueCount:s,children:[(0,i.jsx)(M.K.RootItem,{title:e.item.title??"",leadingVisual:(0,i.jsx)(ex,{isStreaming:t,item:e.item}),trailingBadge:null!=a?(0,i.jsx)(u.g,{"data-testid":"version-label",version:a}):void 0,onClick:t=>{t.metaKey||t.ctrlKey||(t.preventDefault(),_(e.item,{selectItem:!0,event:t}))},href:eg(e.item)?e.item.url:void 0,blockedBy:k(e)}),e.children.map(S)]},e.item.tag)})})}function ex(e){let t=(0,c.c)(4),{isStreaming:n,item:s}=e;if(n){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(x.A,{size:"small",className:`${a.sX} mt-1`}),t[0]=e):e=t[0],e}if(ef(s)){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(F.n,{type:"new-issue"}),t[1]=e):e=t[1],e}if(eg(s)){let e;return t[2]!==s.state?(e=(0,i.jsx)(F.n,{type:"existing-issue",state:s.state}),t[2]=s.state,t[3]=e):e=t[3],e}}try{ev.displayName||(ev.displayName="DraftIssueTreeBlock")}catch{}try{ex.displayName||(ex.displayName="LeadingVisual")}catch{}let eb=new class extends YamlBlockExtension{get dataAttribute(){return"data-draft-tree-issue-block"}isSupported(e){return"yaml"===e.lang&&"draft-issue-tree"===e.type}extractProps(e){return{data:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(ev,{...e})}};var e_=n(72534),ej=n(57352);function ew(e){let t,n,a,o,l,d,u=(0,c.c)(28),{owner:m,repo:p,issueNumber:h,href:f,children:g}=e,{updateItem:v,openItem:x,openPreviewPane:b,items:_}=(0,j.xx)(),{messageId:w}=(0,r.H)(),N=(0,$.A3)("messages"),C=(0,s.useRef)(null),k=Number(h),S=`issue:${m}/${p}/${k}`;u[0]!==S||u[1]!==_?(t=_.get(S),u[0]=S,u[1]=_,u[2]=t):t=u[2];let I=t;u[3]!==I?.name||u[4]!==w||u[5]!==N||u[6]!==k||u[7]!==m||u[8]!==p?(n=function(e,t,n,i,a){if(!n||!i||!a||isNaN(a))return;let s=e.find(e=>e.id===t),r=s?.references,o=r?.find(e=>"issue"===e.type&&e.number===a&&e.repository.name===i&&e.repository.owner===n),l=o?.title;if(l)return l;let c=r?.find(e=>"api-response"===e.type&&"Issue"===e.resourceType&&e.repo===`${n}/${i}`&&e.data.number===a),d=c?.data;return d?.title}(N,w,m,p,k)??I?.name??`Issue #${k}`,u[3]=I?.name,u[4]=w,u[5]=N,u[6]=k,u[7]=m,u[8]=p,u[9]=n):n=u[9];let T=n;return u[10]!==f||u[11]!==S||u[12]!==w||u[13]!==k||u[14]!==m||u[15]!==p||u[16]!==T||u[17]!==v?(a=()=>{m&&p&&v({messageId:w,name:T,number:k,owner:m,repo:p,id:S,href:f,type:"issue"})},o=[S,w,f,k,m,p,T,v],u[10]=f,u[11]=S,u[12]=w,u[13]=k,u[14]=m,u[15]=p,u[16]=T,u[17]=v,u[18]=a,u[19]=o):(a=u[18],o=u[19]),(0,s.useEffect)(a,o),u[20]!==S||u[21]!==x||u[22]!==b?(l=e=>{e.metaKey||e.ctrlKey||(x(S),b(C.current),(0,y.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_OPENED",mode:"immersive"}),e.preventDefault())},u[20]=S,u[21]=x,u[22]=b,u[23]=l):l=u[23],u[24]!==g||u[25]!==f||u[26]!==l?(d=(0,i.jsx)(ej.A,{ref:C,href:f,onClick:l,target:"_blank",rel:"noreferrer",children:g}),u[24]=g,u[25]=f,u[26]=l,u[27]=d):d=u[27],d}try{ew.displayName||(ew.displayName="IssueLinkBlock")}catch{}let eN="data-issuelink-props",eC=(0,o.F)(eN),ek=/\/(?<owner>[^/]+)\/(?<repo>[^/]+)\/issues\/(?<number>\d+)/,eS={span:(e,t)=>{let n=(0,o.k)(e,eN);return n?(0,i.jsx)(ew,{...n}):t}};var eI=n(77430),eT=n(10422),eE=n(29731),eL=n(62935),eR=n(26607),eA=n(94602),eD=n(69497),eP=n(91865),eO=n(93654),eB=n(97286);function eF(){return{}}function eM(){return[]}let e$={list:"IssueListBlock-module__list--hU3Jz",streaming:"IssueListBlock-module__streaming--sTYSD",toggleContent:"IssueListBlock-module__toggleContent--NWbi1",item:"IssueListBlock-module__item--gmkkY",link:"IssueListBlock-module__link--fc5wy",content:"IssueListBlock-module__content--bNFq8",metadata:"IssueListBlock-module__metadata--W4tCj",header:"IssueListBlock-module__header--NtmSe",title:"IssueListBlock-module__title--Di3wj",unknownTitle:"IssueListBlock-module__unknownTitle--JszGm",number:"IssueListBlock-module__number--vsvJy",labels:"IssueListBlock-module__labels--xeeTb",label:"IssueListBlock-module__label--tGgUZ",labelIcon:"IssueListBlock-module__labelIcon--g4B1V",description:"IssueListBlock-module__description--Uf86U",icon:"IssueListBlock-module__icon--qAaLP",open:"IssueListBlock-module__open--CQmwr",draft:"IssueListBlock-module__draft--ymDJ6",done:"IssueListBlock-module__done--bWmcu",closed:"IssueListBlock-module__closed--Iuz7v",checkCircleIcon:"IssueListBlock-module__checkCircleIcon--ZHYse",stopIcon:"IssueListBlock-module__stopIcon--u2wRE",clockIcon:"IssueListBlock-module__clockIcon--yllN9",dotFillIcon:"IssueListBlock-module__dotFillIcon--jW2uo",skipIcon:"IssueListBlock-module__skipIcon--glgzv",unassignedAvatar:"IssueListBlock-module__unassignedAvatar--RB1C7",toggleButton:"IssueListBlock-module__toggleButton--C9dbQ",shimmer:"IssueListBlock-module__shimmer--xZ0Bt",toggleIcon:"IssueListBlock-module__toggleIcon--hynWs"},eV={fromUnknown:e=>{if("object"!=typeof e||null===e)return{};let t={};return"url"in e&&"string"==typeof e.url&&(t.url=e.url),"state"in e&&"string"==typeof e.state&&(t.state=e.state),"draft"in e&&"boolean"==typeof e.draft&&(t.draft=e.draft),"created_at"in e&&"string"==typeof e.created_at&&(t.created_at=e.created_at),"closed_at"in e&&"string"==typeof e.closed_at&&(t.closed_at=e.closed_at),"merged_at"in e&&"string"==typeof e.merged_at&&(t.merged_at=e.merged_at),"title"in e&&"string"==typeof e.title&&(t.title=e.title),"number"in e&&"number"==typeof e.number&&(t.number=e.number),"labels"in e&&Array.isArray(e.labels)&&(t.labels=e.labels.filter(e=>"string"==typeof e)),"author"in e&&"string"==typeof e.author&&(t.author=e.author),"comments"in e&&"number"==typeof e.comments&&(t.comments=e.comments),"assignees_avatar_urls"in e&&Array.isArray(e.assignees_avatar_urls)&&(t.assignees_avatar_urls=e.assignees_avatar_urls.filter(e=>"string"==typeof e)),"repository"in e&&"string"==typeof e.repository&&(t.repository=e.repository),t}};function eU(e){let t,n,a,s,r,o=(0,c.c)(8),{item:l,isStreaming:d}=e,u=l.author;return l.merged_at?(s=l.merged_at,r="Merged"):l.closed_at?(s=l.closed_at,r="Closed"):l.created_at&&(s=l.created_at,r="Opened"),o[0]!==s?(n=(t=s?new Date(s):null)&&isNaN(t.getTime()),o[0]=s,o[1]=t,o[2]=n):(t=o[1],n=o[2]),n&&(t=null),o[3]!==r||o[4]!==u||o[5]!==d||o[6]!==t?(a=u&&t||!d?(0,i.jsxs)("span",{className:e$.description,children:[u," ",u?r?.toLowerCase():r," ",t&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(eL.A,{date:t,format:"relative"})})]}):null,o[3]=r,o[4]=u,o[5]=d,o[6]=t,o[7]=a):a=o[7],a}let eq=e=>{try{let t=(0,O.Hh)(e);if("object"==typeof t&&null!==t&&"data"in t&&Array.isArray(t.data))return t.data.map(eV.fromUnknown);return null}catch{return null}};function eW(e){let t,n,a,o,l,d,u,m=(0,c.c)(17),{data:p,type:h,isStreaming:f}=e;m[0]!==p?(t=()=>eq(p)??[],m[0]=p,m[1]=t):t=m[1];let[g,x]=(0,s.useState)(t),{updateItem:b,openItem:w,openPreviewPane:N}=(0,j.xx)(),{messageId:C}=(0,r.H)(),[k,S]=(0,s.useState)(!0);m[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,W.G7)("copilot_issue_list_show_more"),m[2]=n):n=m[2];let I=n,T=(0,W.G7)("copilot_coding_agent_task_response"),E=function(){let e,t,n,i,a,s,r,o=(0,c.c)(13);o[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:eO.ZL,queryFn:eM,enabled:!1,notifyOnChangeProps:["data"]},o[0]=e):e=o[0];let{data:l}=(0,eB.I)(e);o[1]!==l?(t=l||[],o[1]=l,o[2]=t):t=o[2],o[3]!==t?(n=(0,eP.ms)(t),o[3]=t,o[4]=n):n=o[4];let d=n;o[5]!==d?(i=["agent-sessions-pull-requests",d],o[5]=d,o[6]=i):i=o[6],o[7]===Symbol.for("react.memo_cache_sentinel")?(a=["data"],o[7]=a):a=o[7],o[8]!==i?(s={queryKey:i,queryFn:eF,enabled:!1,notifyOnChangeProps:a},o[8]=i,o[9]=s):s=o[9];let{data:u}=(0,eB.I)(s);if(o[10]!==l||o[11]!==u){if(r=new Map,l&&l.length>0)for(let e of l){if(!e.resource_global_id)continue;let t=`https://github.com/copilot/tasks/pull/${e.resource_global_id}`,n=e.resource_id&&u?u[e.resource_id]:void 0,i={state:e.latest_session_state,title:n?.title};r.set(t,i)}o[10]=l,o[11]=u,o[12]=r}else r=o[12];return r}(),L=I&&k?g.slice(0,10):g,R=I&&g.length>10;m[3]!==p?(a=()=>x(e=>eq(p)??e),o=[p],m[3]=p,m[4]=a,m[5]=o):(a=m[4],o=m[5]),(0,s.useEffect)(a,o),(0,s.useEffect)(()=>{"issue"===h?(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_RENDERED",mode:"immersive"}):"pr"===h?(0,y.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_RENDERED",mode:"immersive"}):"task"===h&&T&&(0,y.BI)("dotcom_chat.activate",{target:"TASK_LIST_BLOCK_RENDERED",mode:"immersive"})},[h,T]);let A=f&&e$.streaming;m[6]!==A?(l=(0,_.$)(e$.list,A),m[6]=A,m[7]=l):l=m[7];let D=L.map((e,t)=>{let n={...e,type:h};if("task"===h&&T&&e.url){let t=E.get(e.url);t&&(n={...n,state:t.state,title:t.title??n.title})}let a=f&&t===L.length-1,{icon:s,colorClass:r}=function(e,t){let n,a=null;if("issue"===e.type)"open"!==e.state||e.draft?"closed"!==e.state||e.draft?"open"===e.state&&e.draft?(a=(0,i.jsx)(v.IssueDraftIcon,{"aria-label":"Draft issue"}),n=e$.draft):"closed"===e.state&&e.draft&&(a=(0,i.jsx)(v.SkipIcon,{"aria-label":"Closed draft issue"}),n=e$.draft):(a=(0,i.jsx)(v.IssueClosedIcon,{"aria-label":"Closed issue"}),n=e$.done):(a=(0,i.jsx)(v.IssueOpenedIcon,{"aria-label":"Open issue"}),n=e$.open);else if("pr"===e.type){let t="string"==typeof e.merged_at&&e.merged_at.length>0;"open"===e.state&&!t&&e.draft?(a=(0,i.jsx)(v.GitPullRequestDraftIcon,{"aria-label":"Draft pull request"}),n=e$.draft):"open"!==e.state||t||e.draft?"closed"!==e.state||t?"closed"===e.state&&t&&(a=(0,i.jsx)(v.GitMergeIcon,{"aria-label":"Merged pull request"}),n=e$.done):(a=(0,i.jsx)(v.GitPullRequestClosedIcon,{"aria-label":"Closed pull request"}),n=e$.closed):(a=(0,i.jsx)(v.GitPullRequestIcon,{"aria-label":"Pull request"}),n=e$.open)}else"task"===e.type&&t&&("queued"===e.state?(a=(0,i.jsx)(v.ClockIcon,{"aria-label":"Task queued",className:e$.clockIcon}),n=e$.open):"pending"===e.state||"idle"===e.state?(a=(0,i.jsx)(v.DotFillIcon,{"aria-label":"Task pending",className:e$.dotFillIcon}),n=e$.open):"running"===e.state||"in_progress"===e.state?(a=(0,i.jsx)(eT.gX,{animated:!0}),n=e$.open):"completed"===e.state||"waiting_for_user"===e.state?(a=(0,i.jsx)(v.CheckCircleFillIcon,{"aria-label":"Task completed",className:e$.checkCircleIcon}),n=e$.done):"failed"===e.state||"timed_out"===e.state?(a=(0,i.jsx)(v.XCircleFillIcon,{"aria-label":"Task failed",className:e$.stopIcon}),n=e$.closed):"cancelled"===e.state&&(a=(0,i.jsx)(v.SkipIcon,{"aria-label":"Task cancelled",className:e$.skipIcon}),n=e$.closed));return{icon:a,colorClass:n}}(n,T);return(0,i.jsx)("li",{className:e$.item,children:(0,i.jsxs)("div",{className:e$.content,children:[(0,i.jsx)("div",{className:(0,_.$)(r,e$.icon),children:s}),(0,i.jsxs)("div",{className:e$.header,children:[a&&!n.title?null:(0,i.jsx)("a",{...(0,eE.G)("issue-list-item-link"),href:n.url??"#",className:e$.link,onClick:e=>{if(e.metaKey||e.ctrlKey)return;e.preventDefault();let t=n.url;if(t)if("issue"===n.type){(0,y.BI)("dotcom_chat.activate",{target:"ISSUE_LIST_BLOCK_ITEM_OPEN",mode:"immersive"});let{owner:i,repo:a,number:s}=function(e){let t=/^https?:\/\/[^/]+\/([^/]+)\/([^/]+)\/issues\/(\d+)(\/.*)?$/.exec(e);if(!t)return{};let n=parseInt(t[3]??"0",10);return{owner:t[1],repo:t[2],number:n}}(t);if(i&&a&&s){let r=`issue:${i}/${a}/${s}`;b({messageId:C,name:n.title??`Issue #${s}`,number:s,owner:i,repo:a,id:r,href:t,type:"issue"}),w(r),N(e.currentTarget)}}else"task"===n.type&&T?(0,y.BI)("dotcom_chat.activate",{target:"TASK_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}):(0,y.BI)("dotcom_chat.activate",{target:"PR_LIST_BLOCK_ITEM_OPEN",mode:"immersive"}),window.open(t,"_self")},target:"_blank",rel:"noreferrer",children:n.title?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:e$.title,children:n.title}),void 0!==n.number&&"task"!==n.type&&(0,i.jsxs)("span",{className:e$.number,children:["#",n.number]})]}):void 0!==n.number?(0,i.jsxs)("span",{className:e$.title,children:["#",n.number]}):(0,i.jsx)("span",{className:(0,_.$)(e$.title,e$.unknownTitle),children:"task"===n.type?"Unknown task":"Unknown issue"})}),"task"!==n.type&&(0,i.jsxs)("div",{className:e$.labels,children:[n.labels?.length?n.labels.map(eG):null,0!==n.comments&&void 0!==n.comments&&(0,i.jsxs)(eR.A,{size:"small",variant:"secondary",children:[(0,i.jsx)(v.CommentIcon,{className:e$.labelIcon,size:12}),n.comments]})]})]}),"task"===n.type&&T?n.repository?(0,i.jsx)("div",{className:e$.description,children:n.repository}):null:(0,i.jsx)(eU,{item:n,isStreaming:a}),("task"!==n.type||!T)&&(0,i.jsx)("div",{className:e$.metadata,children:void 0===n.assignees_avatar_urls?null:0===n.assignees_avatar_urls.length?(0,i.jsx)("div",{className:e$.unassignedAvatar,role:"img","aria-label":"Unassigned",children:(0,i.jsx)(v.PersonIcon,{size:12})}):(0,i.jsx)("div",{role:"img","aria-label":`${n.assignees_avatar_urls.length} ${1===n.assignees_avatar_urls.length?"assignee":"assignees"}`,children:(0,i.jsx)(eA.A,{disableExpand:!0,children:n.assignees_avatar_urls.map(eH)})})})]})},t)});return m[8]!==k||m[9]!==R||m[10]!==f||m[11]!==g?(d=R&&(0,i.jsx)("li",{className:e$.item,children:(0,i.jsx)("div",{className:(0,_.$)(e$.content,e$.toggleContent),children:(0,i.jsxs)("button",{type:"button",className:(0,_.$)(e$.toggleButton,f&&e$.shimmer),onClick:()=>S(!k),"aria-expanded":!k,"aria-controls":"issue-list",children:[(0,i.jsx)("span",{className:e$.toggleIcon,children:k?(0,i.jsx)(v.UnfoldIcon,{size:16}):(0,i.jsx)(v.FoldIcon,{size:16})}),k?`Show ${g.length-10} more`:"Show less"]})})}),m[8]=k,m[9]=R,m[10]=f,m[11]=g,m[12]=d):d=m[12],m[13]!==l||m[14]!==D||m[15]!==d?(u=(0,i.jsx)("div",{children:(0,i.jsxs)("ul",{id:"issue-list",className:l,children:[D,d]})}),m[13]=l,m[14]=D,m[15]=d,m[16]=u):u=m[16],u}function eH(e){return(0,i.jsx)(eI.r,{src:e,alt:"Assignee avatar"},e)}function eG(e){return(0,i.jsx)(eR.A,{size:"small",variant:"secondary",className:e$.label,children:(0,i.jsx)(eD.A,{inline:!0,maxWidth:"100%",title:e,children:e})},e)}try{eU.displayName||(eU.displayName="Description")}catch{}try{eW.displayName||(eW.displayName="ListBlock")}catch{}let eK=new class extends YamlBlockExtension{get dataAttribute(){return"data-issues-list-block"}isSupported(e){return"list"===e.lang&&("issue"===e.type||"pr"===e.type||"task"===e.type)}extractProps(e){return{data:e.value,type:e.type,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(eW,{...e})}},ez=new class extends YamlBlockExtension{get dataAttribute(){return"data-tree-issue-block"}isSupported(e){return"yaml"===e.lang&&"issue-tree"===e.type}extractProps(e){return{data:e.value}}createComponent(e){return(0,i.jsx)(em,{...e})}};var eQ=n(5524),eY=n(35104);let eJ={container:"PlanningTasklistBlock-module__container--Vl4PK"};function eX(e){let t,n=(0,c.c)(3),{children:a,isStreaming:s,taskCount:r}=e;if(!s&&0===r){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("span",{children:"No tasks were created, please retry."}),n[0]=e):e=n[0],e}return n[1]!==a?(t=(0,i.jsx)(i.Fragment,{children:a}),n[1]=a,n[2]=t):t=n[2],t}try{eX.displayName||(eX.displayName="SubtasksGroup")}catch{}var eZ=n(35673),e0=n(67955),e1=n(94236);function e2(e){let t,n,a,s=(0,c.c)(10),{onConvertAllToDraftIssues:r,taskCount:o,title:l}=e;return s[0]!==o?(t=(0,i.jsx)(e0.A,{className:"ml-2 pb-1",children:o}),s[0]=o,s[1]=t):t=s[1],s[2]!==r||s[3]!==o||s[4]!==l?(n=o>0&&(0,i.jsx)("div",{className:"flex-justify-end d-flex flex-1",children:(0,i.jsxs)(e1.W,{children:[(0,i.jsx)(e1.W.Anchor,{children:(0,i.jsx)(b.K,{"aria-label":`Tasklist '${l}' options`,icon:v.KebabHorizontalIcon,variant:"invisible"})}),(0,i.jsx)(eZ.UJ,{children:(0,i.jsx)(eQ.l,{children:(0,i.jsx)(eQ.l.Item,{onSelect:r,children:"Draft all as issues"})})})]})}),s[2]=r,s[3]=o,s[4]=l,s[5]=n):n=s[5],s[6]!==t||s[7]!==n||s[8]!==l?(a=(0,i.jsxs)(eQ.l.Heading,{as:"h4",className:"mx-3 mt-3 mb-1 d-flex flex-items-center",children:[l,t,n]}),s[6]=t,s[7]=n,s[8]=l,s[9]=a):a=s[9],a}try{e2.displayName||(e2.displayName="TasklistHeader")}catch{}var e3=n(97189),e4=n(65529);function e5(e){let t,n=(0,c.c)(4),{isStreaming:a,onClick:s,task:r}=e;return n[0]!==a||n[1]!==s||n[2]!==r?(t=(0,i.jsx)(e3.Fn,{children:(0,i.jsx)(e6,{isStreaming:a,onClick:s,task:r})}),n[0]=a,n[1]=s,n[2]=r,n[3]=t):t=n[3],t}function e6(e){let t,n,s,r,o,l,d=(0,c.c)(19),{isStreaming:m,onClick:p,task:h}=e,{pullRequest:f,isLoading:g}=(0,e4.as)(h),{versionedItems:y}=(0,j.xx)();d[0]!==h.id||d[1]!==y?(t=(0,B.LU)(h.id,y),d[0]=h.id,d[1]=y,d[2]=t):t=d[2];let b=t;d[3]!==g||d[4]!==m||d[5]!==f?(n=()=>m||g?(0,i.jsx)(x.A,{size:"small",className:a.sX}):f?.state==="merged"?(0,i.jsx)(v.CheckIcon,{}):f?(0,i.jsx)(v.GitPullRequestIcon,{}):(0,i.jsx)(v.TasklistIcon,{}),d[3]=g,d[4]=m,d[5]=f,d[6]=n):n=d[6];let _=n;return d[7]!==_?(s=(0,i.jsx)(eQ.l.LeadingVisual,{children:_()}),d[7]=_,d[8]=s):s=d[8],d[9]!==b?(r=null!=b&&(0,i.jsx)(u.g,{version:b}),d[9]=b,d[10]=r):r=d[10],d[11]!==r?(o=(0,i.jsx)(eQ.l.TrailingVisual,{children:r}),d[11]=r,d[12]=o):o=d[12],d[13]!==p||d[14]!==s||d[15]!==o||d[16]!==h.id||d[17]!==h.name?(l=(0,i.jsxs)(eQ.l.Item,{onSelect:p,children:[s,h.name,o]},h.id),d[13]=p,d[14]=s,d[15]=o,d[16]=h.id,d[17]=h.name,d[18]=l):l=d[18],l}try{e5.displayName||(e5.displayName="TasklistItem")}catch{}try{e6.displayName||(e6.displayName="TasklistItemImpl")}catch{}let e7=e=>"object"==typeof e&&null!==e&&"tag"in e&&"string"==typeof e.tag&&"title"in e&&"string"==typeof e.title&&"description"in e&&"string"==typeof e.description&&(!("dependencyTags"in e)||!!Array.isArray(e.dependencyTags))&&(!("repository"in e)||"string"==typeof e.repository)&&!0;function e8({yaml:e,isStreaming:t}){let n=(0,el.p)(t),a=(0,s.useRef)(new Set),{selectedThreadID:o}=(0,$.Pk)(),{updateItem:l,openItem:c,openPreviewPane:d}=(0,j.xx)(),{messageId:u,messageIndex:m,setHasAutoOpenedPreviewPane:p}=(0,r.H)(),h=(0,s.useRef)({name:"Tasklist",tasks:[]}),f=(0,s.useMemo)(()=>{let t=((e,t)=>{try{var n=(0,O.Hh)(e);if("object"!=typeof n||null==n)return null;let t={name:"name"in n&&"string"==typeof n.name?n.name:"Tasklist",tasks:[]};if("tasks"in n&&Array.isArray(n.tasks))for(let e of n.tasks)"object"==typeof e&&null!=e&&e7(e)&&t.tasks.push(e);return t}catch{return(0,y.BI)("copilot.planning_tasklist",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(e,o);return null!=t?(h.current=t,t):h.current},[e,o]),g=(0,s.useMemo)(()=>f.tasks.map(e=>{let n=`planning-task:${e.tag}#${m}`,{title:i,...a}=e;return{...a,name:i,messageId:u,id:n,type:"planning-task",isUserEdited:!1,isStreaming:t,subtaskTags:[]}}),[f,m,u,t]),{convertAllToDraftIssues:v}=(0,eY.W)(g.map(e=>e.tag)),x=(0,s.useCallback)((e,t={})=>{let{selectItem:n,event:i}=t;c(e.id,n),d(i?.currentTarget),p(!0)},[c,d,p]);(0,s.useEffect)(()=>{for(let e=0;e<g.length;e++){let i=g[e];l(i),(t||n)&&!a.current.has(i.id)&&(a.current.add(i.id),x(i,{selectItem:0===e}))}},[t,n,x,g,l]);let b=(0,s.useCallback)((e,t)=>x(e,{event:t}),[x]);(0,s.useEffect)(()=>(0,y.BI)("copilot.planning_tasklist",{type:"BLOCK_RENDERED",mode:"immersive",threadId:o}),[o]),(0,s.useEffect)(()=>{n&&0===g.length&&(0,y.BI)("copilot.planning_tasklist",{type:"NO_TASKS",mode:"immersive",threadId:o})},[n,g.length,o]);let _=g.map(e=>(0,i.jsx)(e5,{isStreaming:!!t,onClick:t=>b(e,t),task:e},e.id));return(0,i.jsx)("div",{className:eJ.container,children:(0,i.jsxs)(eQ.l,{variant:"full",showDividers:!0,children:[(0,i.jsx)(e2,{onConvertAllToDraftIssues:v,taskCount:g.length,title:f?.name??"Tasklist"}),(0,i.jsx)(eX,{isStreaming:!!t,taskCount:g.length,children:_})]})})}try{e8.displayName||(e8.displayName="PlanningTasklistBlock")}catch{}let e9=new class extends YamlBlockExtension{get dataAttribute(){return"data-planning-tasklist-block"}isSupported(e){return"yaml"===e.lang&&"planning-tasklist"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(e8,{...e})}};var te=n(33592),tt=n(86877),tn=n(4175),ti=n(1903),ta=n(54070),ts=n(21373),tr=n(40090);let to={container:"PlanningQuestionsForm-module__container--Xi24c",headerContainer:"PlanningQuestionsForm-module__headerContainer--td62h",headerSection:"PlanningQuestionsForm-module__headerSection--pbytI",outlineSection:"PlanningQuestionsForm-module__outlineSection--Tx0yi",title1:"PlanningQuestionsForm-module__title1--TtN_9",title2:"PlanningQuestionsForm-module__title2--Xmt0r",outlineList:"PlanningQuestionsForm-module__outlineList--dnB7B",questionContainer:"PlanningQuestionsForm-module__questionContainer--Wr4q2",suggestionsContainer:"PlanningQuestionsForm-module__suggestionsContainer--GZd8T",suggestions:"PlanningQuestionsForm-module__suggestions--rKk1X",footerContainer:"PlanningQuestionsForm-module__footerContainer--Xpj2v"};function tl({questions:e,isStreaming:t=!1,isReadOnly:n=!1,onSubmitAnswers:a,className:r}){let o=(0,s.useMemo)(()=>{let t={},n={};for(let[i,a]of e.questions.entries()){if(!a.suggestions||0===a.suggestions.length)continue;let e=a.suggestions[0];t[i]=e,n[i]=0}return{initialAnswers:t,initialSelectedSuggestions:n}},[e.questions]),[l,c]=(0,s.useState)(o.initialAnswers),[d,u]=(0,s.useState)(o.initialSelectedSuggestions),[m,p]=(0,s.useState)(""),h=(0,s.useCallback)((e,t)=>{u(t=>{let{[e]:n,...i}=t;return i}),c(n=>({...n,[e]:t}))},[]),f=(0,s.useCallback)((e,t,n)=>{u(n=>({...n,[e]:t})),c(t=>({...t,[e]:n}))},[]),g=(0,s.useMemo)(()=>e.questions.some((e,t)=>l[t]?.trim())||m.trim(),[l,e.questions,m]),y=(0,s.useCallback)(t=>{t.preventDefault();let n=[];for(let[t,i]of e.questions.entries()){let e=l[t]?.trim();e&&n.push(`Question: ${i.question.trim()}
Answer: ${e}`)}let i=m.trim();i&&n.push(`Additional comments: ${i}`),0!==n.length&&a(n.join(`

`))},[l,e.questions,m,a]);return n?e.questions.length>0?(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:"Open questions:"}),(0,i.jsx)("ul",{style:{listStyleType:"none"},children:e.questions.map(e=>(0,i.jsx)("li",{children:e.question},e.question))})]}):null:t?(0,i.jsxs)("div",{className:(0,_.$)(to.container,r),children:[(0,i.jsx)("div",{className:to.headerContainer,children:(0,i.jsxs)("div",{className:to.headerSection,children:[(0,i.jsx)(tr.r,{maxWidth:"50%",size:"titleLarge"}),(0,i.jsxs)("div",{className:to.outlineSection,children:[(0,i.jsx)(tr.r,{maxWidth:"10%",size:"subtitle"}),(0,i.jsx)(tr.r,{maxWidth:"25%"}),(0,i.jsx)(tr.r,{maxWidth:"25%"}),(0,i.jsx)(tr.r,{maxWidth:"25%"})]})]})}),(0,i.jsxs)("div",{className:"pl-3 pt-3 width-full",children:[(0,i.jsx)(tr.r,{maxWidth:"10%",size:"subtitle"}),[1,2,3].map(e=>(0,i.jsxs)("div",{className:to.questionContainer,children:[(0,i.jsx)(tr.r,{maxWidth:"80%",size:"subtitle"}),(0,i.jsx)(tr.r,{maxWidth:"70%",size:"bodyLarge"}),(0,i.jsx)(tr.r,{maxWidth:"50%",size:"bodySmall"})]},e))]}),(0,i.jsxs)("div",{className:to.footerContainer,children:[(0,i.jsx)(tr.r,{maxWidth:"15%",size:"titleLarge"}),(0,i.jsx)(tr.r,{maxWidth:"15%",size:"titleLarge"})]})]}):(0,i.jsxs)("form",{className:(0,_.$)(to.container,r),onSubmit:y,children:[(0,i.jsx)("div",{className:to.headerContainer,children:(0,i.jsxs)("div",{className:to.headerSection,children:[(0,i.jsx)("div",{className:to.title1,children:e.name}),e.outline.length>0&&(0,i.jsxs)("div",{className:to.outlineSection,children:[(0,i.jsx)("div",{className:to.title2,children:"Outline"}),(0,i.jsx)("ul",{className:to.outlineList,children:e.outline.map(e=>(0,i.jsx)("li",{children:e},e))})]})]})}),e.questions.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"pt-3",children:(0,i.jsx)("div",{className:to.title2,children:"Open questions"})}),e.questions.map(t=>{let n=e.questions.indexOf(t),a=t.suggestions||[];return(0,i.jsx)("div",{className:to.questionContainer,children:(0,i.jsxs)(tt.A,{className:"flex-self-stretch",children:[(0,i.jsx)(tt.A.Label,{children:t.question}),(0,i.jsx)(tn.Ay,{block:!0,onChange:e=>h(n,e.target.value),rows:1,value:l[n]||""}),a.length>0&&(0,i.jsxs)(tt.A.Caption,{className:to.suggestionsContainer,children:["Suggestions",(0,i.jsx)(ti.A,{className:to.suggestions,children:a.map(e=>{let t=a.indexOf(e),s=d[n]===t;return(0,i.jsx)(ta.A,{as:"button",isSelected:s,onClick:()=>f(n,t,e),text:e,type:"button"},e)})})]})]})},t.question)})]}),(0,i.jsxs)(tt.A,{className:"flex-self-stretch",children:[(0,i.jsx)(tt.A.Label,{children:"Additional comments"}),(0,i.jsx)(tn.Ay,{block:!0,onChange:e=>p(e.target.value),rows:3,value:m})]}),(0,i.jsx)("div",{className:to.footerContainer,children:(0,i.jsx)(ts.Q,{type:"submit",variant:"primary",disabled:!g,children:"Submit"})})]})}try{tl.displayName||(tl.displayName="PlanningQuestionsForm")}catch{}let tc=e=>"object"==typeof e&&null!==e&&"question"in e&&"string"==typeof e.question&&(!("suggestions"in e)||!!Array.isArray(e.suggestions)&&e.suggestions.every(e=>"string"==typeof e));function td(e){let t,n,a,o,l,d,u=(0,c.c)(18),{yaml:m,isStreaming:p}=e,{selectedThreadID:h,messages:f,currentReferences:g}=(0,$.Pk)(),{messageIndex:v}=(0,r.H)(),x=(0,te.b)();u[0]!==h||u[1]!==m?(t=((e,t)=>{try{var n=(0,O.Hh)(e);if("object"!=typeof n||null==n)return null;let t={name:"name"in n&&"string"==typeof n.name?n.name:"Brainstorm Questions",outline:[],questions:[]};if("outline"in n&&Array.isArray(n.outline))for(let e of n.outline)"string"==typeof e&&t.outline.push(e);if("questions"in n&&Array.isArray(n.questions))for(let e of n.questions)"object"==typeof e&&null!=e&&tc(e)&&t.questions.push(e);return t}catch{return(0,y.BI)("copilot.planning_questions",{type:"MALFORMED_YAML",mode:"immersive",threadId:t}),null}})(m,h),u[0]=h,u[1]=m,u[2]=t):t=u[2];let b=t;u[3]!==b?(n=b??{name:"Brainstorm Questions",outline:[],questions:[]},u[3]=b,u[4]=n):n=u[4];let _=n,j=f.length>v+1;u[5]!==g||u[6]!==x||u[7]!==_.questions.length||u[8]!==h?(a=e=>{(0,y.BI)("copilot.planning_questions",{type:"SUBMIT_ANSWERS_CLICKED",mode:"immersive",threadId:h,totalQuestionsCount:_.questions.length});let t=x.getThreadById(h);x.sendChatMessage({thread:t,content:e,references:g})},u[5]=g,u[6]=x,u[7]=_.questions.length,u[8]=h,u[9]=a):a=u[9];let w=a;return u[10]!==h?(o=()=>(0,y.BI)("copilot.planning_questions",{type:"BLOCK_RENDERED",mode:"immersive",threadId:h}),l=[h],u[10]=h,u[11]=o,u[12]=l):(o=u[11],l=u[12]),(0,s.useEffect)(o,l),u[13]!==w||u[14]!==j||u[15]!==p||u[16]!==_?(d=(0,i.jsx)(tl,{className:"mb-3",questions:_,isStreaming:p,isReadOnly:j,onSubmitAnswers:w}),u[13]=w,u[14]=j,u[15]=p,u[16]=_,u[17]=d):d=u[17],d}try{td.displayName||(td.displayName="PlanningQuestionsBlock")}catch{}let tu=new class extends YamlBlockExtension{get dataAttribute(){return"data-planning-questions-block"}isSupported(e){return"yaml"===e.lang&&"planning-questions"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(td,{...e})}};var tm=n(44095);let tp=new class extends YamlBlockExtension{get dataAttribute(){return"data-planning-spec-block"}isSupported(e){return"yaml"===e.lang&&"planning-spec"===e.type}extractProps(e){return{yaml:e.value,isStreaming:e.isStreaming??!1}}createComponent(e){return(0,i.jsx)(tm._,{...e})}},th={markdownOverrides:"MarkdownViewer-module__markdownOverrides--xtpOl"},tf=({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:o,markdown:c,...d})=>{let u=(0,s.useRef)(!1),m=(0,s.useCallback)(e=>{u.current=e},[]),p=(0,s.useMemo)(()=>[...d.extensions??[],function(e){return{transformMarkdown:t=>(0,l.YR)(t,"code",t=>{let n=t.lang??"",{name:i,code:a}=function(e,t){let n=e&&E.exec(e);if(n)return{name:n.groups?.name,code:t};let i=L.exec(t);return i?{name:i.groups?.name,code:t.replace(L,"")}:{code:t}}(t.meta??void 0,t.value);if(!i)return;e.includes(i)||e.push(i);let s=function(e){if(!e)return;let t=R.exec(e);return t?.groups?.url}(t.meta??void 0),r=a.split(`
`,6),o=6===r.length,l=o?r.join(`
`):`${r.join(`
`)}
`,c=t.position?.start.line??0;t.value=l,t.data={...t.data,hName:"code",hProperties:{[T]:JSON.stringify({language:n,name:i,url:s,code:a,line:c,isStreaming:t.isStreaming??!1,isClipped:o,index:e.indexOf(i),startOffset:t.position?.start.offset??-1,endOffset:t.position?.end.offset??-1})}}}),transformHtml:e=>(0,l.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&"code"===i.tagName&&T in i.properties&&n.children.splice(t,1,i)}),reactComponents:A}}([]),{transformMarkdown:e=>(0,l.YR)(e,"link",e=>{try{if(new URL(e.url,window.location.origin).origin!==window.location.origin)return}catch{return}let t=ek.exec(e.url);if(!t?.groups)return;let{owner:n="",repo:i="",number:a=""}=t.groups;e.data={hName:"span",hProperties:{[eC]:JSON.stringify({owner:n,repo:i,issueNumber:a,href:e.url,children:(0,e_.d)(e)})}}}),reactComponents:eS},eK,ez,er,eb,e9,tu,tp],[d.extensions]);return(0,i.jsx)(r.A.Provider,{value:(0,s.useMemo)(()=>({messageId:e,messageIndex:t,messageTimestamp:n,autoOpenPreviewPane:o,markdown:c,hasAutoOpenedPreviewPaneRef:u,setHasAutoOpenedPreviewPane:m}),[e,t,n,o,c,u,m]),children:(0,i.jsx)(a.To,{...d,markdown:c,extensions:p,chatMode:"immersive",className:th.markdownOverrides})})},tg=s.memo(tf);try{tf.displayName||(tf.displayName="MarkdownViewer")}catch{}try{tg.displayName||(tg.displayName="MemoizedMarkdownViewer")}catch{}},82590:(e,t,n)=>{n.d(t,{J1:()=>c,Os:()=>o,QK:()=>l,S$:()=>a,bW:()=>u,km:()=>r,lh:()=>s,qe:()=>d});var i=n(25641);let a="loops",s="loops",r="loop",o="Loops",l=`${i.Jz}/loops`,c=`${i.Jz}/l`,d=/\/copilot\/loops/,u=/\/copilot\/l\/([a-zA-Z0-9-]+)/},84802:(e,t,n)=>{n.d(t,{G:()=>o});var i=n(21728),a=n(96459),s=n(25641),r=n(33592);function o(){let e,t=(0,i.c)(3),n=(0,r.b)(),o=(0,a.Z)();return t[0]!==n||t[1]!==o?(e=async e=>{window.location.pathname!==s.Jz&&(o(s.Jz),await n.selectThread(null,e))},t[0]=n,t[1]=o,t[2]=e):e=t[2],e}},87255:(e,t,n)=>{n.d(t,{Y:()=>k});var i,a=n(74848),s=n(21728),r=n(70170),o=n(53419),l=n(29731),c=n(83494),d=n(88431),u=n(96379),m=n(56149),p=n(86877),h=n(4175),f=n(21373),g=n(15220),y=n(96540),v=n(40961),x=n(2635),b=n(33592);let _={footerContainer:"PersonalInstructionsDialog-module__footerContainer--T9wxr"};var j=n(38621),w=n(5524);let N={Role:{tooltip:"Role, domain, style, and focus areas",body:`Your role:
- {role_type} expert in {domain}
- Focus on {key_skill_area}
`},Communication:{tooltip:"Language, tone and format",body:`Communication:
- Write in {tone/language}
- Reference {source_type} documentation
- Structure responses as {format}
`},"Code preferences":{tooltip:"Code style, patterns, and conventions",body:`Code guidelines:
- Use {language} conventions
- Follow {pattern/code_guidelines}
- Optimize for {goal}
`}},C=(0,y.forwardRef)(function(e,t){let n,i,r,o,l,c,d,u,m=(0,s.c)(19),{onSelect:p}=e,[h,f]=(0,y.useState)(!1);m[0]!==h?(n=()=>f(!h),m[0]=h,m[1]=n):n=m[1];let g=n;m[2]===Symbol.for("react.memo_cache_sentinel")?(i={marginBottom:"1px"},m[2]=i):i=m[2],m[3]!==p||m[4]!==h?(r=h&&Object.entries(N)?.map(e=>{let[t,n]=e;return(0,a.jsxs)(w.l.Item,{"aria-label":`${n.tooltip}`,className:"mx-0 border fgColor-muted d-inline-block width-auto",onSelect:()=>p(t,n.body),children:[(0,a.jsx)(j.PlusIcon,{}),t]},t)}),m[3]=p,m[4]=h,m[5]=r):r=m[5],m[6]!==r?(o=(0,a.jsx)(w.l,{className:"d-inline-flex flex-wrap gap-2 rounded-2",children:r}),m[6]=r,m[7]=o):o=m[7];let v=h?"Hide templates":"Show templates";return m[8]===Symbol.for("react.memo_cache_sentinel")?(l={border:"1px solid transparent"},m[8]=l):l=m[8],m[9]!==h?(c=h?(0,a.jsx)(j.XIcon,{}):(0,a.jsx)(j.LightBulbIcon,{}),m[9]=h,m[10]=c):c=m[10],m[11]!==v||m[12]!==c||m[13]!==g?(d=(0,a.jsx)(w.l,{className:"d-flex flex-column flex-justify-end",children:(0,a.jsx)(w.l.Item,{"aria-label":v,"data-testid":"toggle-templates",className:"fgColor-muted d-inline-block width-auto flex-justify-end mx-0",style:l,onSelect:g,children:c})}),m[11]=v,m[12]=c,m[13]=g,m[14]=d):d=m[14],m[15]!==t||m[16]!==o||m[17]!==d?(u=(0,a.jsxs)("div",{ref:t,className:"d-inline-flex flex-justify-between position-absolute bgColor-default right-0 left-0 bottom-0 ml-2 mr-3",style:i,children:[o,d]}),m[15]=t,m[16]=o,m[17]=d,m[18]=u):u=m[18],u});try{C.displayName||(C.displayName="PersonalInstructionsTemplates")}catch{}try{(i=PersonalInstructionsTemplatesWithRef).displayName||(i.displayName="PersonalInstructionsTemplatesWithRef")}catch{}let k=({onDismiss:e,returnFocusRef:t})=>{let n=(0,x.Pk)(),i=(0,b.b)(),[j,w]=(0,y.useState)(n.personalInstructions??""),[N,k]=(0,y.useState)(void 0),[I,T]=(0,y.useState)(!1),E=(0,y.useRef)(null),L=(0,y.useRef)(null),[R,A]=(0,y.useState)(""),D=((e,t)=>{let n,i,a=(0,s.c)(4),[o,l]=(0,y.useState)(48);return a[0]!==e||500!==a[1]?(n=()=>{let t=(0,r.s)(()=>{e?.current&&l(e.current.clientHeight??48)},500),n=new ResizeObserver(t);return e?.current&&n.observe(e.current),()=>{t.cancel(),n?.disconnect?.()}},i=[e,500],a[0]=e,a[1]=500,a[2]=n,a[3]=i):(n=a[2],i=a[3]),(0,y.useEffect)(n,i),o})(L);(0,d.N)(()=>{E?.current&&(E.current.scrollTop=E.current.scrollHeight)},[j]);let P=(0,y.useCallback)(async()=>{if(!I){T(!0),R&&(0,o.BI)("copilot_personal_instruction_template_usage",{content:R});try{let t=await (0,u.lS)("/copilot/personal_instructions",{method:"POST",body:{prompt:j}});if(t.ok)(0,o.BI)("dotcom_chat.activate",{target:"PERSONAL_INSTRUCTIONS_SAVE",mode:"immersive"}),i.dispatch({type:"SET_PERSONAL_INSTRUCTIONS",personalInstructions:j}),(0,v.flushSync)(()=>e());else{let e=await t.json();k(String(e.errorMessage))}}catch{k("An error occurred while saving your personal instructions.")}finally{T(!1)}}},[I,j,i,e,R]),O=(e,t)=>{t&&(w(j?`${j}
${t}`:t),A(e),E?.current?.focus())},B=()=>{P()},F=(0,y.useCallback)(()=>{(0,o.BI)("dotcom_chat.dismiss",{target:"PERSONAL_INSTRUCTIONS_DISMISS",mode:"immersive"}),(0,v.flushSync)(()=>e())},[e]);return(0,a.jsx)(m.ZL,{children:(0,a.jsx)(g.l,{onClose:F,title:"Personal instructions",subtitle:"Set up Copilot to align with your workflows and preferences. These instructions will only impact your personal conversation.",width:"large",returnFocusRef:t,renderBody:()=>(0,a.jsx)(g.l.Body,{children:(0,a.jsx)("form",{onSubmit:P,children:(0,a.jsxs)(p.A,{children:[(0,a.jsx)(p.A.Label,{visuallyHidden:!0,children:"Instructions"}),(0,a.jsx)("div",{className:"width-full position-relative",children:(0,a.jsxs)(c.tL,{commands:{"github:submit-form":B},children:[(0,a.jsx)(h.Ay,{ref:E,className:"width-full",style:{paddingBottom:`${D}px`},"aria-label":"Prompt",rows:7,name:"prompt",placeholder:"Your instructions",value:j,validationStatus:N||j.length>4e3?"error":void 0,...(0,l.G)("prompt-input"),onChange:e=>{w(e.target.value),k(void 0)}}),(0,a.jsx)(C,{ref:L,onSelect:O})]})}),(0,a.jsx)(S,{text:j,promptCharLimit:4e3}),N&&(0,a.jsx)(p.A.Validation,{variant:"error",children:(0,a.jsx)("span",{...(0,l.G)("error-message"),children:N})})]})})}),renderFooter:()=>(0,a.jsxs)("div",{className:_.footerContainer,children:[(0,a.jsx)(f.Q,{variant:"default",onClick:F,children:"Cancel"}),(0,a.jsx)(f.Q,{loading:I,loadingAnnouncement:"Saving personal instructions",variant:"primary",onClick:P,children:"Save"})]})})})};function S(e){let t,n,i,r,o=(0,s.c)(10),{text:c,promptCharLimit:d}=e;o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.G)("current-character-count"),o[0]=t):t=o[0],o[1]!==c.length?(n=(0,a.jsx)("span",{className:"text-tabular-nums",...t,children:c.length}),o[1]=c.length,o[2]=n):n=o[2],o[3]!==d||o[4]!==n?(i=(0,a.jsxs)(a.Fragment,{children:[n," ","/ ",d," characters"]}),o[3]=d,o[4]=n,o[5]=i):i=o[5];let u=i;return o[6]!==u||o[7]!==d||o[8]!==c.length?(r=(0,a.jsx)(a.Fragment,{children:c.length>d?(0,a.jsx)(p.A.Validation,{variant:"error",children:u}):(0,a.jsx)(p.A.Caption,{children:u})}),o[6]=u,o[7]=d,o[8]=c.length,o[9]=r):r=o[9],r}try{k.displayName||(k.displayName="PersonalInstructionsDialog")}catch{}try{S.displayName||(S.displayName="CharacterCount")}catch{}},87687:(e,t,n)=>{n.d(t,{U:()=>eF});var i=n(74848),a=n(21728),s=n(82595),r=n(894),o=n(75202),l=n(91747),c=n(88934),d=n(38621),u=n(94236),m=n(5524),p=n(34164),h=n(96540),f=n(2635),g=n(33592),y=n(53419),v=n(26108),x=n(81960),b=n(40090),_=n(40961),j=n(25641),w=n(40683);let N={container:"ConversationListV2-module__container--DfLLE",condensed:"ConversationListV2-module__condensed--vCbJZ",empty:"ConversationListV2-module__empty--4TgQY",list:"ConversationListV2-module__list--N8p2i",section:"ConversationListV2-module__section--G3Lm1",title:"ConversationListV2-module__title--VKD9S",item:"ConversationListV2-module__item--cPXI6",link:"ConversationListV2-module__link--J46j6",text:"ConversationListV2-module__text--IsNRP",context:"ConversationListV2-module__context--a0pCE",emptyStateHeading:"ConversationListV2-module__emptyStateHeading--KkuQU",emptyStateText:"ConversationListV2-module__emptyStateText--LsdKG"};function C({selectedItemID:e,loadingState:t,onConversationSelect:n,isSidebarCondensed:a}){let s=(0,g.b)(),{threads:r}=(0,f.Pk)(),o=(0,h.useMemo)(()=>s.sortAndFilterThreads(r).map(e=>({id:e.id,text:(0,j.CB)(e),href:`${j.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[r,s]),l=function(e){let t=new Date,n=new Date(t);n.setDate(t.getDate()-1);let i=new Date(t);i.setDate(t.getDate()-7);let a=new Date(t);a.setDate(t.getDate()-30);let s=[],r=[],o=[],l=[];for(let c of e)c.date.toDateString()===t.toDateString()?s.push(c):c.date.toDateString()===n.toDateString()?r.push(c):c.date>i?o.push(c):c.date>a&&l.push(c);return{Today:s,Yesterday:r,"Last 7 days":o,"Last 30 days":l}}(o),c=0===o.length,d=(0,h.useId)();return(0,i.jsx)("nav",{"aria-labelledby":`${d}-conversations`,id:`${d}-conversation-list`,tabIndex:-1,className:(0,p.$)(N.container,a&&N.condensed),children:c&&("loading"===t||"pending"===t)?(0,i.jsx)(b.r,{lines:5}):c?(0,i.jsx)(S,{}):(0,i.jsxs)("div",{className:N.section,children:[(0,i.jsx)("h3",{id:`${d}-conversations`,className:"sr-only",children:"Chats"}),Object.entries(l).map(([t,a])=>a.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h4",{id:`${d}_${t}`,className:N.title,children:t}),(0,i.jsx)("ul",{className:N.list,children:a.map(t=>(0,i.jsx)(k,{item:t,selectedItemId:e??void 0,onSelect:n,threads:r},t.id))})]},t))]})})}function k({item:e,selectedItemId:t,onSelect:n,threads:a}){let s=e.id===t,[r,o]=(0,h.useState)(null),[l,p]=(0,h.useState)(!1),f=(0,h.useCallback)(()=>p(!0),[]),g=(0,h.useCallback)(()=>p(!1),[]),x=a.get(t),b=!!x?.customCopilotID,j=(0,h.useRef)(null),C=(0,h.useCallback)(()=>{(0,_.flushSync)(()=>o(null)),j.current?.focus()},[j]);return e.href&&(0,i.jsxs)("li",{className:N.item,children:[(0,i.jsx)(c.N_,{className:N.link,to:e.href,"aria-current":s?"page":void 0,onClick:()=>{n(),(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:e.id,mode:"immersive"})},children:(0,i.jsx)("span",{className:N.text,children:e.text})}),(0,i.jsx)("span",{className:N.context,children:(0,i.jsxs)(u.W,{anchorRef:j,children:[(0,i.jsx)(u.W.Anchor,{children:(0,i.jsx)(v.K,{loading:l,icon:d.KebabHorizontalIcon,"aria-label":"Manage chat",variant:"invisible",onClick:()=>(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})})}),(0,i.jsx)(u.W.Overlay,{children:(0,i.jsx)(m.l,{children:(0,i.jsx)(w.V,{onOpenDialog:o,isShared:!!a.get(e.id)?.sharedID,showShare:!b})})})]})}),(0,i.jsx)(w.p,{visibleDialog:r,onClose:C,threadName:e.text,threadId:e.id,selectedThreadId:t,onStartLoading:f,onFinishLoading:g,returnFocusRef:j})]},e.id)}function S(){return(0,i.jsxs)("div",{className:N.empty,children:[(0,i.jsx)(x.A,{as:"h3",className:N.emptyStateHeading,children:"No chats yet"}),(0,i.jsx)("span",{className:N.emptyStateText,children:"Ask Copilot anything on the right to start your first chat."})]})}try{C.displayName||(C.displayName="ConversationList")}catch{}try{k.displayName||(k.displayName="ConversationListEntry")}catch{}try{S.displayName||(S.displayName="EmptyState")}catch{}var I=n(69599),T=n(10422);let E={item:"SidebarListItem-module__item--x3BBP",link:"SidebarListItem-module__link--_g1X4",linkWithSecondaryText:"SidebarListItem-module__linkWithSecondaryText--dmh3S",statusIcon:"SidebarListItem-module__statusIcon--Oc8Sk",content:"SidebarListItem-module__content--sAGuS",topLine:"SidebarListItem-module__topLine--ATLSE",secondaryText:"SidebarListItem-module__secondaryText--ZgXnc",trailingAction:"SidebarListItem-module__trailingAction--S8yi9"};function L(e){let t,n,s,r,o,l,d,u,m,h=(0,a.c)(27),{href:f,text:g,isSelected:y,trailingAction:v,onClick:x,className:b,leadingVisual:_,secondaryText:j}=e,w=!!j;h[0]!==_?(t=_&&(0,i.jsx)("span",{className:(0,p.$)(E.statusIcon),children:(0,i.jsx)(_,{})}),h[0]=_,h[1]=t):t=h[1],h[2]!==g?(n=(0,i.jsx)("span",{children:g}),h[2]=g,h[3]=n):n=h[3],h[4]!==t||h[5]!==n?(s=(0,i.jsxs)("div",{className:E.topLine,children:[t,n]}),h[4]=t,h[5]=n,h[6]=s):s=h[6],h[7]!==j?(r=!!j&&(0,i.jsxs)("p",{className:E.secondaryText,children:[j," "]}),h[7]=j,h[8]=r):r=h[8],h[9]!==s||h[10]!==r?(o=(0,i.jsxs)("div",{className:E.content,children:[s,r]}),h[9]=s,h[10]=r,h[11]=o):o=h[11];let N=o;return h[12]!==b?(l=(0,p.$)(E.item,b),h[12]=b,h[13]=l):l=h[13],h[14]!==N||h[15]!==w||h[16]!==f||h[17]!==y||h[18]!==x?(d=""===f?(0,i.jsx)("div",{className:(0,p.$)(E.link,{[E.linkWithSecondaryText]:w}),children:N}):(0,i.jsx)(c.N_,{className:(0,p.$)(E.link,{[E.linkWithSecondaryText]:w}),to:f,"aria-current":y?"page":void 0,onClick:x,children:N}),h[14]=N,h[15]=w,h[16]=f,h[17]=y,h[18]=x,h[19]=d):d=h[19],h[20]!==v?(u=v?(0,i.jsx)("span",{className:E.trailingAction,children:v}):null,h[20]=v,h[21]=u):u=h[21],h[22]!==y||h[23]!==l||h[24]!==d||h[25]!==u?(m=(0,i.jsxs)("li",{className:l,"data-selected":y,children:[d,u]}),h[22]=y,h[23]=l,h[24]=d,h[25]=u,h[26]=m):m=h[26],m}try{L.displayName||(L.displayName="SidebarListItem")}catch{}let R={container:"SidebarNavigation-module__container--XJoVm",condensed:"SidebarNavigation-module__condensed--FtKTo",sectionContainer:"SidebarNavigation-module__sectionContainer--KRNn6",list:"SidebarNavigation-module__list--bB1nv",section:"SidebarNavigation-module__section--IspfT",titleContainer:"SidebarNavigation-module__titleContainer--oAM2L",title:"SidebarNavigation-module__title--aV4qO",empty:"SidebarNavigation-module__empty--Bbzym",emptyStateHeading:"SidebarNavigation-module__emptyStateHeading--MBsqt",emptyStateText:"SidebarNavigation-module__emptyStateText--nQR_F"};function A(e){let t,n,s,r=(0,a.c)(10),{children:o,isCondensed:l,"aria-label":c,className:d}=e,u=void 0===c?"Navigation":c,m=(0,h.useId)(),f=`${m}-navigation`,g=l&&R.condensed;return r[0]!==d||r[1]!==g?(t=(0,p.$)(R.container,g,d),r[0]=d,r[1]=g,r[2]=t):t=r[2],r[3]!==o?(n=(0,i.jsx)("div",{className:R.section,children:o}),r[3]=o,r[4]=n):n=r[4],r[5]!==u||r[6]!==f||r[7]!==t||r[8]!==n?(s=(0,i.jsx)("nav",{"aria-label":u,id:f,tabIndex:-1,className:t,children:n}),r[5]=u,r[6]=f,r[7]=t,r[8]=n,r[9]=s):s=r[9],s}function D(e){let t,n,s,r=(0,a.c)(14),{title:o,children:l,isLoading:c,isEmpty:d,emptyStateTitle:u,emptyStateText:m,viewMoreLink:p,trailingAction:f}=e,g=void 0===u?"No items":u,y=void 0===m?"No items to display.":m,v=(0,h.useId)();return r[0]!==v||r[1]!==o||r[2]!==f?(t=o&&(0,i.jsxs)("div",{className:R.titleContainer,children:[(0,i.jsx)("h4",{id:v,className:R.title,children:o}),f||null]}),r[0]=v,r[1]=o,r[2]=f,r[3]=t):t=r[3],r[4]!==l||r[5]!==y||r[6]!==g||r[7]!==d||r[8]!==c||r[9]!==p?(n=d&&c?(0,i.jsx)(b.r,{lines:5}):d?(0,i.jsx)(P,{title:g,text:y}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("ul",{className:R.list,children:l}),p]}),r[4]=l,r[5]=y,r[6]=g,r[7]=d,r[8]=c,r[9]=p,r[10]=n):n=r[10],r[11]!==t||r[12]!==n?(s=(0,i.jsxs)("div",{className:R.sectionContainer,children:[t,n]}),r[11]=t,r[12]=n,r[13]=s):s=r[13],s}function P(e){let t,n,s,r=(0,a.c)(7),{title:o,text:l}=e;return r[0]!==o?(t=(0,i.jsx)(x.A,{as:"h3",className:R.emptyStateHeading,children:o}),r[0]=o,r[1]=t):t=r[1],r[2]!==l?(n=(0,i.jsx)("span",{className:R.emptyStateText,children:l}),r[2]=l,r[3]=n):n=r[3],r[4]!==t||r[5]!==n?(s=(0,i.jsxs)("div",{className:R.empty,children:[t,n]}),r[4]=t,r[5]=n,r[6]=s):s=r[6],s}try{A.displayName||(A.displayName="SidebarNavigation")}catch{}try{D.displayName||(D.displayName="SidebarSection")}catch{}try{P.displayName||(P.displayName="EmptyState")}catch{}var O=n(97189),B=n(76977),F=n(93654),M=n(47723),$=n(95254),V=n(62189);let U={clockIcon:"TaskList-module__clockIcon--kx3d1",stopIcon:"TaskList-module__stopIcon--O5nlX",checkCircleIcon:"TaskList-module__checkCircleIcon--fj_E_",dotFillIcon:"TaskList-module__dotFillIcon--x5Tte",skipIcon:"TaskList-module__skipIcon--niuIE"};function q(e){let t,n=(0,a.c)(4),{viewAllLink:s,showTitle:r,trailingAction:o}=e;return n[0]!==r||n[1]!==o||n[2]!==s?(t=(0,i.jsx)(O.Fn,{children:(0,i.jsx)(W,{viewAllLink:s,showTitle:r,trailingAction:o})}),n[0]=r,n[1]=o,n[2]=s,n[3]=t):t=n[3],t}function W(e){let t,n,s,r,o,l,d,u,m,p,h,f=(0,a.c)(28),{viewAllLink:g,showTitle:y,trailingAction:v}=e,x=(0,c.zy)(),{tasks:b,isLoading:_}=(0,F.si)();if((0,B._)(),f[0]!==_||f[1]!==x||f[2]!==y||f[3]!==b||f[4]!==v){let e,a=b.filter(H).slice(0,5);n=0===a.length,t=D,s=y?"Agent sessions":void 0,r=n,o=_,l="No agents running",d="You can now ask Copilot to work on a task for you in the background, creating a pull request which you can review.",u=v,f[14]!==x?(e=e=>{let t=(0,V.U)(e.resource_global_id),n=x.pathname===t;return(0,i.jsx)(G,{task:e,href:t,isSelected:n,secondaryText:e.nwo??e.pull?.repository_nwo??"Initializing..."},e.resource_id)},f[14]=x,f[15]=e):e=f[15],m=a.map(e),f[0]=_,f[1]=x,f[2]=y,f[3]=b,f[4]=v,f[5]=t,f[6]=n,f[7]=s,f[8]=r,f[9]=o,f[10]=l,f[11]=d,f[12]=u,f[13]=m}else t=f[5],n=f[6],s=f[7],r=f[8],o=f[9],l=f[10],d=f[11],u=f[12],m=f[13];f[16]!==t||f[17]!==s||f[18]!==r||f[19]!==o||f[20]!==l||f[21]!==d||f[22]!==u||f[23]!==m?(p=(0,i.jsx)(t,{title:s,isEmpty:r,isLoading:o,emptyStateTitle:l,emptyStateText:d,trailingAction:u,children:m}),f[16]=t,f[17]=s,f[18]=r,f[19]=o,f[20]=l,f[21]=d,f[22]=u,f[23]=m,f[24]=p):p=f[24];let j=!n&&g;return f[25]!==p||f[26]!==j?(h=(0,i.jsxs)(i.Fragment,{children:[p,j]}),f[25]=p,f[26]=j,f[27]=h):h=f[27],h}function H(e){var t;return!(t=e).pull||"merged"!==t.pull.state&&"closed"!==t.pull.state}function G(e){let t,n,s,r,o,l,c,p,f,g=(0,a.c)(23),{task:x,href:b,isSelected:_,secondaryText:j}=e,w=(0,h.useRef)(null);g[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,I.G7)("copilot_immersive_task_hyperlinking"),g[0]=t):t=g[0];let N=t;g[1]!==x.pull?(n=()=>{(0,y.BI)("dotcom_chat.activate",{target:"TASK_ACTION_VIEW_PR",mode:"immersive"}),x.pull?.url&&(window.location.href=x.pull.url)},g[1]=x.pull,g[2]=n):n=g[2];let C=n;g[3]!==x.event_identifiers?(s=()=>{(0,y.BI)("dotcom_chat.activate",{target:"TASK_ACTION_GO_TO_CONVERSATION",mode:"immersive"});let e=(0,$.L)(x.event_identifiers);e&&(window.location.href=`/copilot/c/${e}`)},g[3]=x.event_identifiers,g[4]=s):s=g[4];let k=s;g[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,i.jsx)(u.W.Anchor,{children:(0,i.jsx)(v.K,{icon:d.KebabHorizontalIcon,"aria-label":"Manage session",variant:"invisible",onClick:K})}),g[5]=r):r=g[5],g[6]!==C?(o=(0,i.jsx)(m.l.Item,{onSelect:C,children:"View pull request"}),g[6]=C,g[7]=o):o=g[7],g[8]!==k||g[9]!==x.event_type?(l=x.event_type===M.qY&&N&&(0,i.jsx)(m.l.Item,{onSelect:k,children:"Go to parent conversation"}),g[8]=k,g[9]=x.event_type,g[10]=l):l=g[10],g[11]!==o||g[12]!==l?(c=(0,i.jsxs)(u.W,{anchorRef:w,children:[r,(0,i.jsx)(u.W.Overlay,{children:(0,i.jsxs)(m.l,{children:[o,l]})})]}),g[11]=o,g[12]=l,g[13]=c):c=g[13];let S=c,E=x.isOptimistic?x.problemStatement:x.pull.title;return g[14]!==x?(p=()=>(function(e){let t=e.latest_session_state,n=e.pull?.state??"unknown";if("queued"===t)return(0,i.jsx)(d.ClockIcon,{className:U.clockIcon});if("open"===n){if("waiting_for_user"===t||"completed"===t)return(0,i.jsx)(d.CheckCircleFillIcon,{className:U.checkCircleIcon});if("failed"===t||"timed_out"===t)return(0,i.jsx)(d.StopIcon,{className:U.stopIcon});if("in_progress"===t)return(0,i.jsx)(T.gX,{animated:!0});if("idle"===t)return(0,i.jsx)(d.DotFillIcon,{className:U.dotFillIcon});if("cancelled"===t)return(0,i.jsx)(d.SkipIcon,{className:U.skipIcon})}return(0,i.jsx)(d.DotFillIcon,{className:U.dotFillIcon})})(x),g[14]=x,g[15]=p):p=g[15],g[16]!==b||g[17]!==_||g[18]!==j||g[19]!==E||g[20]!==p||g[21]!==S?(f=(0,i.jsx)(L,{href:b,text:E,leadingVisual:p,isSelected:_,trailingAction:S,secondaryText:j}),g[16]=b,g[17]=_,g[18]=j,g[19]=E,g[20]=p,g[21]=S,g[22]=f):f=g[22],f}function K(){return(0,y.BI)("dotcom_chat.activate",{target:"TASK_CONTEXT_MENU",mode:"immersive"})}try{q.displayName||(q.displayName="TasksListWrapper")}catch{}try{W.displayName||(W.displayName="TasksList")}catch{}try{G.displayName||(G.displayName="TaskListEntry")}catch{}var z=n(11607),Q=n(77999);let Y={compactContainer:"ActivityPanel-module__compactContainer--KLMAT",overlay:"ActivityPanel-module__overlay--OZPYs"};var J=n(47865),X=n(39345),Z=n(15220);function ee(e){let t,n,s,r,o,l,c,u,m,p,f,g=(0,a.c)(20);g[0]!==e?(t=void 0===e?{}:e,g[0]=e,g[1]=t):t=g[1],g[2]!==t?({onTaskCreated:s,...n}=t,g[2]=t,g[3]=n,g[4]=s):(n=g[3],s=g[4]);let[x,b]=(0,h.useState)(!1);g[5]===Symbol.for("react.memo_cache_sentinel")?(r={},g[5]=r):r=g[5];let{createTask:_}=(0,J.Z)(r);g[6]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{b(!0)},g[6]=o):o=g[6];let j=o;g[7]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{b(!1)},g[7]=l):l=g[7];let w=l;g[8]!==s?(c=()=>{s?.(),w()},g[8]=s,g[9]=c):c=g[9];let N=c,C=(0,h.useRef)(null);return g[10]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{j(),(0,y.BI)("agent_sessions.task_view",{target:"CREATE_TASK_FROM_CHAT_BUTTON"})},g[10]=u):u=g[10],g[11]!==n?(m=(0,i.jsx)(Q.m,{text:"New agent session",children:(0,i.jsx)(v.K,{...n,"aria-label":"New agent session",icon:d.PlusIcon,onClick:u})}),g[11]=n,g[12]=m):m=g[12],g[13]!==_||g[14]!==N||g[15]!==x?(p=x&&(0,i.jsx)(Z.l,{height:"auto",initialFocusRef:C,onClose:w,title:"Create task",renderBody:()=>(0,i.jsx)(O.Fn,{children:(0,i.jsx)(X.T,{createTask:_,eventType:"activity_panel",isInPortal:!0,onCreate:N,showHeader:!1,textAreaRef:C})})}),g[13]=_,g[14]=N,g[15]=x,g[16]=p):p=g[16],g[17]!==m||g[18]!==p?(f=(0,i.jsxs)(i.Fragment,{children:[m,p]}),g[17]=m,g[18]=p,g[19]=f):f=g[19],f}try{ee.displayName||(ee.displayName="CreateTaskButton")}catch{}function et({handleSidebarClick:e,title:t}){let n=(0,c.zy)().pathname.includes("/share/"),{threadsLoading:a,selectedThreadID:s,threads:r}=(0,f.bP)("threadsLoading","selectedThreadID","threads"),o=(0,g.b)(),l=(0,h.useMemo)(()=>o.sortAndFilterThreads(r).map(e=>({id:e.id,text:(0,j.CB)(e),href:`${j.Jz}/c/${e.id}`,date:new Date(e.updatedAt)})),[r,o]),d=0===l.length,u="loading"===a.state||"pending"===a.state;return(0,i.jsx)(D,{title:t,isEmpty:d,isLoading:u,emptyStateTitle:"No chats yet",emptyStateText:"Ask Copilot anything on the right to start your first chat.",children:l.map(t=>(0,i.jsx)(en,{item:t,selectedItemId:n?void 0:s??void 0,onSelect:e,threads:r},t.id))})}function en({item:e,selectedItemId:t,onSelect:n,threads:a}){let s=e.id===t,[r,o]=(0,h.useState)(null),[l,c]=(0,h.useState)(!1),p=(0,h.useCallback)(()=>c(!0),[]),f=(0,h.useCallback)(()=>c(!1),[]),g=a.get(t),x=!!g?.customCopilotID,b=(0,h.useRef)(null),j=(0,h.useCallback)(()=>{(0,_.flushSync)(()=>o(null)),b.current?.focus()},[b]),N=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.W,{anchorRef:b,children:[(0,i.jsx)(u.W.Anchor,{children:(0,i.jsx)(v.K,{loading:l,icon:d.KebabHorizontalIcon,"aria-label":"Manage chat",variant:"invisible",onClick:()=>(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_CONTEXT_MENU",mode:"immersive"})})}),(0,i.jsx)(u.W.Overlay,{children:(0,i.jsx)(m.l,{children:(0,i.jsx)(w.V,{onOpenDialog:o,isShared:!!a.get(e.id)?.sharedID,showShare:!x})})})]}),(0,i.jsx)(w.p,{visibleDialog:r,onClose:j,threadName:e.text,threadId:e.id,selectedThreadId:t,onStartLoading:p,onFinishLoading:f,returnFocusRef:b})]});return(0,i.jsx)(L,{href:e.href,text:e.text,isSelected:s,trailingAction:N,onClick:()=>{n(),(0,y.BI)("dotcom_chat.activate",{target:"CONVERSATION_SELECT",threadId:e.id,mode:"immersive"})}})}function ei({handleSidebarClick:e,isCondensed:t,onToggleSidebar:n}){let a=(0,h.useCallback)(()=>{t&&n()},[t,n]),s=()=>(0,i.jsx)(ee,{className:"fgColor-muted",onTaskCreated:a,variant:"invisible"}),r=()=>(0,i.jsxs)(A,{isCondensed:!1,"aria-label":"Navigation",children:[(0,i.jsx)(q,{showTitle:!0,trailingAction:s()}),(0,i.jsx)(et,{title:"Chats",handleSidebarClick:e})]});return t?(0,i.jsxs)("div",{className:Y.compactContainer,children:[(0,i.jsxs)(u.W,{children:[(0,i.jsx)(u.W.Anchor,{children:(0,i.jsx)(Q.m,{text:"Agent sessions and chats",children:(0,i.jsx)(z.$,{"aria-label":"Agent sessions and chats",icon:(0,i.jsx)(d.HistoryIcon,{}),iconOnly:!0,size:"medium",variant:"invisible"})})}),(0,i.jsx)(u.W.Overlay,{width:"medium",side:"outside-right",align:"start",maxHeight:"xlarge",className:Y.overlay,children:(0,i.jsx)("div",{children:r()})})]}),s()]}):r()}try{et.displayName||(et.displayName="ConversationListWrapper")}catch{}try{en.displayName||(en.displayName="ConversationListEntry")}catch{}try{ei.displayName||(ei.displayName="ActivityPanel")}catch{}let ea={quicklinks:"CopilotNavigation-module__quicklinks--y91ru",footer:"CopilotNavigation-module__footer--WE0C5",blankslateContainer:"CopilotNavigation-module__blankslateContainer--nuX9Y",ssoButton:"CopilotNavigation-module__ssoButton--cAcPq",ssoContent:"CopilotNavigation-module__ssoContent--sQStD",condensed:"CopilotNavigation-module__condensed--TzlR_"};var es=n(84646),er=n(49851),eo=n(26607),el=n(27359),ec=n(84802),ed=n(47789),eu=n(23657);let em={list:"ServiceList-module__list--nR74A",section:"ServiceList-module__section--k1uLc",item:"ServiceList-module__item--fn806",link:"ServiceList-module__link--VJdHH",content:"ServiceList-module__content--k6BSj",textWrapper:"ServiceList-module__textWrapper--jtpsQ",text:"ServiceList-module__text--DxTKY",label:"ServiceList-module__label--eTRas",externalLabel:"ServiceList-module__externalLabel--P9mcb",condensed:"ServiceList-module__condensed--x5s6A",previewLabel:"ServiceList-module__previewLabel--JWC5Z",externalIcon:"ServiceList-module__externalIcon--lTFBq"};function ep({"aria-current":e,"data-analytics-event":t,href:n,icon:a,onLinkClick:r,id:o,displayName:l,condensed:u,label:m,external:h}){let f={"aria-current":e,"data-analytics-event":t,className:em.link,onClick:e=>{r?.(e,o)}},g=h?(0,i.jsxs)("a",{href:n,className:em.link,"aria-label":l,rel:"noopener noreferrer",children:[(0,i.jsx)(s.I,{size:16,icon:a}),(0,i.jsxs)("div",{className:(0,p.$)(em.content,u&&em.condensed),children:[(0,i.jsx)("div",{className:em.textWrapper,children:(0,i.jsx)("div",{className:em.text,children:l})}),(0,i.jsx)("div",{className:em.label,children:(0,i.jsxs)("div",{className:em.externalLabel,children:[(0,i.jsx)("span",{className:em.previewLabel,children:m}),(0,i.jsx)(d.ArrowUpRightIcon,{className:em.externalIcon})]})})]})]}):(0,i.jsxs)(c.N_,{to:n,...f,"aria-label":l,children:[(0,i.jsx)(s.I,{size:16,icon:a}),(0,i.jsxs)("div",{className:(0,p.$)(em.content,u&&em.condensed),children:[(0,i.jsx)("div",{className:em.textWrapper,children:(0,i.jsx)("div",{className:em.text,children:l})}),(0,i.jsx)("div",{className:em.label,children:m})]})]});return(0,i.jsx)("li",{className:em.section,children:(0,i.jsx)("div",{className:em.item,children:(0,i.jsx)(Q.m,{text:u?l:"",children:g})})})}let eh=JSON.stringify({source:"ServiceList"});function ef({toggleFloatingSidebar:e,isSidebarCondensed:t}){let{selectedThreadID:n}=(0,f.Pk)(),a=(0,el.v)()?.id,s=(0,ed.qw)(),r=(0,ec.G)(),o=(0,es.BV)(),l=(0,eu.mM)(),c=!n&&!a&&!l,d=async t=>{t.metaKey||t.ctrlKey||(e(),await r({clearTopic:!0,includeThreads:!1}),(0,y.BI)("dotcom_chat.activate",{target:"SIDEBAR_CONVERSATION_NEW",mode:"immersive"}))},u=(0,h.useCallback)(t=>{t.metaKey||t.ctrlKey||e()},[e]),m=(0,h.useCallback)(t=>{t.metaKey||t.ctrlKey||e()},[e]),p=!(0,I.G7)("copilot_spaces_ga"),g=(0,h.useMemo)(()=>[...o?[{type:"spaces",component:(0,i.jsx)(ep,{"aria-current":l?"page":void 0,"data-analytics-event":eh,displayName:"Spaces",href:j.VR,icon:er.Dy,condensed:t,id:"spaces",onLinkClick:u,label:p&&(0,i.jsx)(eo.A,{variant:"success",children:"Preview"})},"spaces"),displayName:"Spaces"}]:[],...s.flatMap(e=>e.navigationItems&&e.navigationItems.length>0?e.navigationItems.map(n=>({type:"plugin",component:(0,i.jsx)(ep,{"aria-current":a===e.id?"page":void 0,"data-analytics-event":eh,displayName:n.displayName,href:n.href,icon:n.icon,condensed:t,id:n.id,onLinkClick:n.external?void 0:m,label:n.label,external:n.external},`${e.id}-${n.id}`),displayName:n.displayName})):[])].sort((e,t)=>e.displayName.localeCompare(t.displayName)),[o,l,t,u,p,s,a,m]);return(0,i.jsxs)("ul",{className:em.list,children:[(0,i.jsx)(ep,{"aria-current":c?"page":void 0,"data-analytics-event":eh,displayName:"New chat",href:j.Jz,icon:er.KJ,condensed:t,id:"home",onLinkClick:d}),g.map(e=>e.component)]})}try{ep.displayName||(ep.displayName="ServiceListItem")}catch{}try{ef.displayName||(ef.displayName="ServiceList")}catch{}var eg=n(77430),ey=n(51213),ev=n(98755),ex=n(71315),eb=n(46251),e_=n(69726),ej=n(57352),ew=n(26382),eN=n(10006),eC=n(3803);let ek={dialog:"ManageSharedConversationsDialog-module__dialog--_C8sX",actionButtons:"ManageSharedConversationsDialog-module__actionButtons--iuECd",alertIcon:"ManageSharedConversationsDialog-module__alertIcon--mA28C",footer:"ManageSharedConversationsDialog-module__footer--aTXFp",mutedText:"ManageSharedConversationsDialog-module__mutedText--_uOci",footerContent:"ManageSharedConversationsDialog-module__footerContent--yVU91",footerLeft:"ManageSharedConversationsDialog-module__footerLeft--eRZWV",footerRight:"ManageSharedConversationsDialog-module__footerRight--n1XJG",confirmationText:"ManageSharedConversationsDialog-module__confirmationText--tYQ41",quickFadeUp:"ManageSharedConversationsDialog-module__quickFadeUp--tiEAs",conversationLink:"ManageSharedConversationsDialog-module__conversationLink--JqMKE"};var eS=n(21373),eI=n(20139);let eT={container:"UnshareConversationDialog-module__container--Tc1R_",buttonStack:"UnshareConversationDialog-module__buttonStack--JvbNF",threadInfoStack:"UnshareConversationDialog-module__threadInfoStack--gcf6y",threadTitle:"UnshareConversationDialog-module__threadTitle--eBgrX",threadDescription:"UnshareConversationDialog-module__threadDescription--E1H0T"},eE=e=>{let t,n,s,r,o,l,c,d,u,m,p,v,x,b,_,j,w,N,C,k,S=(0,a.c)(60),{closeDialog:I,threadId:T}=e,E=(0,f.Pk)(),L=(0,g.b)(),{selectedThreadID:R,ssoOrganizations:A,apiUrl:D,threads:P}=E,[O,B]=(0,h.useState)(E.messages);S[0]!==T||S[1]!==P?(t=()=>{let e=P.get(T);return e?.sharedID||""},S[0]=T,S[1]=P,S[2]=t):t=S[2];let[F,M]=(0,h.useState)(t),$=(0,h.useRef)(""!==F),V=(0,h.useRef)("");S[3]!==O||S[4]!==F||S[5]!==E.apiUrl||S[6]!==E.ssoOrganizations||S[7]!==T?(n=()=>{let e=async()=>{if(0===O.filter(e=>e.threadID===T).length){let e=new eI.k(E.apiUrl,E.ssoOrganizations),t=await e.listSharedThreadMessages(F);t.ok&&B(t.payload.messages)}};V.current!==F&&F&&(V.current=F,e())},s=[F,T,O,E.apiUrl,E.ssoOrganizations],S[3]=O,S[4]=F,S[5]=E.apiUrl,S[6]=E.ssoOrganizations,S[7]=T,S[8]=n,S[9]=s):(n=S[8],s=S[9]),(0,h.useEffect)(n,s),S[10]!==R||S[11]!==T||S[12]!==P?(r=P.get(T||R),S[10]=R,S[11]=T,S[12]=P,S[13]=r):r=S[13];let U=r,q=O[O.length-1],W=q?.content||"";S[14]!==R||S[15]!==T||S[16]!==P?(o=()=>{let e=T||R;if(e){let t=P.get(e);M(t?.sharedID||"")}},S[14]=R,S[15]=T,S[16]=P,S[17]=o):o=S[17],S[18]!==L||S[19]!==R||S[20]!==T||S[21]!==P?(l=[L,M,R,P,T],S[18]=L,S[19]=R,S[20]=T,S[21]=P,S[22]=l):l=S[22],(0,h.useEffect)(o,l),S[23]!==D||S[24]!==I||S[25]!==L||S[26]!==R||S[27]!==F||S[28]!==A||S[29]!==T?(c=async()=>{let e=T||R,t=new eI.k(D,A),n=await t.unshareThread(e);if(n.ok){let{sharedID:t,sharedAt:i,sharedMessageID:a}=n.payload;L.dispatch({type:"SHARED_THREAD_UPDATED",thread:{id:e,sharedID:t,sharedAt:i,sharedMessageID:a}}),$.current=!1,I(),(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_UNSHARE_CONVERSATION",mode:"immersive",originalThreadId:e,sharedThreadId:F})}},S[23]=D,S[24]=I,S[25]=L,S[26]=R,S[27]=F,S[28]=A,S[29]=T,S[30]=c):c=S[30];let H=c;S[31]!==I?(d=()=>{I()},S[31]=I,S[32]=d):d=S[32];let G=d;S[33]!==H||S[34]!==F?(u=()=>{if(F)return(0,i.jsx)(eS.Q,{onClick:H,variant:"danger",children:"Unshare"})},S[33]=H,S[34]=F,S[35]=u):u=S[35];let K=u;S[36]!==I?(m=()=>(0,i.jsx)(eS.Q,{onClick:I,children:"Cancel"}),S[36]=I,S[37]=m):m=S[37];let z=m;S[38]===Symbol.for("react.memo_cache_sentinel")?(p=(0,i.jsx)("span",{children:"You're about to unshare the link for the following conversation:"}),S[38]=p):p=S[38];let Q=U?.name||"";return S[39]!==Q?(v=(0,i.jsx)("span",{className:eT.threadTitle,children:Q}),S[39]=Q,S[40]=v):v=S[40],S[41]!==W?(x=(0,i.jsx)("span",{className:eT.threadDescription,children:W}),S[41]=W,S[42]=x):x=S[42],S[43]!==v||S[44]!==x?(b=(0,i.jsxs)(eb.B,{direction:"vertical",className:eT.threadInfoStack,children:[v,x]}),S[43]=v,S[44]=x,S[45]=b):b=S[45],S[46]===Symbol.for("react.memo_cache_sentinel")?(_=(0,i.jsx)("span",{children:"Once unshared, the link will no longer be accessible."}),S[46]=_):_=S[46],S[47]!==z?(j=z(),S[47]=z,S[48]=j):j=S[48],S[49]!==K?(w=K(),S[49]=K,S[50]=w):w=S[50],S[51]!==j||S[52]!==w?(N=(0,i.jsxs)(eb.B,{direction:"horizontal",gap:"condensed",align:"end",justify:"end",className:eT.buttonStack,children:[j,w]}),S[51]=j,S[52]=w,S[53]=N):N=S[53],S[54]!==b||S[55]!==N?(C=(0,i.jsxs)("div",{className:eT.container,children:[p,b,_,N]}),S[54]=b,S[55]=N,S[56]=C):C=S[56],S[57]!==G||S[58]!==C?(k=(0,i.jsx)(Z.l,{title:"Unshare conversation",onClose:G,width:"large",children:C}),S[57]=G,S[58]=C,S[59]=k):k=S[59],k};try{eE.displayName||(eE.displayName="UnshareConversationDialog")}catch{}let eL=e=>{let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}).format(t)},eR=({closeDialog:e,returnFocusRef:t})=>{let n=(0,g.b)(),a=(0,f.Pk)(),[s,r]=(0,h.useState)(0),[o,l]=(0,h.useState)([]),[c,u]=(0,h.useState)(!0),[m,p]=(0,h.useState)(!1),[x,b]=(0,h.useState)(null),[_,j]=(0,h.useState)(!1),[w,N]=(0,h.useState)(5>o.length),C=5*s,k=o.slice(C,C+5);(0,h.useEffect)(()=>{(async()=>{let e=await n.fetchSharedThreads();e&&l(e.map(e=>({id:e.id,conversation:e.name||"New conversation",lastUpdated:eL(e.updatedAt),sharedUrl:`${ex.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${ex.fV.origin}/copilot/c/${e.id}`}))),u(!1)})()},[n]),(0,h.useEffect)(()=>{w&&s>0&&o.length<=5*s&&r(0);let e=5<o.length;e!==w&&N(e)},[o,s,5,w]);let S=(0,h.useCallback)(()=>{e()},[e]),I=(0,h.useCallback)(async()=>{if(!_)return void j(!0);j(!1),u(!0);try{(await n.unshareAllThreads()).ok&&(l([]),await n.fetchThreads())}finally{u(!1)}},[_,n]),T=async()=>{p(!1),b(null),u(!0);let e=await n.fetchSharedThreads();e&&l(e.map(e=>({id:e.id,conversation:e.name||"New chat",lastUpdated:eL(e.updatedAt),sharedUrl:`${ex.fV.origin}/copilot/share/${e.sharedID}`,threadUrl:`${ex.fV.origin}/copilot/c/${e.id}`}))),u(!1)},E=c||"error"===a.sharedThreadsLoading.state||0===o.length,L=(0,h.useMemo)(()=>{if(!o.length)return[];let e={buttonType:"danger",content:"Unshare all",onClick:()=>{_?I():j(!0)}};return _?[{buttonType:"default",content:"Cancel",onClick:()=>j(!1)},e]:[e]},[o.length,_,I]),R=(0,h.useMemo)(()=>c?{result:"loading",heading:"Loading shared conversations",description:"Your shared conversations will appear here.",isSpinner:!0}:"error"===a.sharedThreadsLoading.state?{result:"error",heading:"We couldn't load the shared conversations",description:"Try again or, if the problem persists, contact support."}:{result:"empty",heading:"No shared conversations",description:"Your shared conversations will appear here."},[c,a.sharedThreadsLoading.state]);return(0,i.jsxs)(Z.l,{title:"Manage shared conversations",width:"xlarge",className:ek.dialog,position:{narrow:"fullscreen",regular:"center"},onClose:S,returnFocusRef:t,renderFooter:()=>L?.length?(0,i.jsx)(Z.l.Footer,{className:ek.footer,children:(0,i.jsxs)("div",{className:ek.footerContent,children:[(0,i.jsx)("div",{className:ek.footerLeft,children:_&&(0,i.jsx)("div",{className:`${ek.confirmationText} ${ek.quickFadeUp}`,children:(e=>1===e?"Are you sure you want to unshare this conversation?":`Are you sure you want to unshare all ${e} conversations?`)(o.length)})}),(0,i.jsx)("div",{className:ek.footerRight,children:(0,i.jsx)(Z.l.Buttons,{buttons:L})})]})}):null,children:[E?(0,i.jsxs)(ew.E,{children:[(0,i.jsx)(ew.E.Visual,{children:R.isSpinner?(0,i.jsx)(eb.B,{direction:"horizontal",align:"center",children:(0,i.jsx)(e_.A,{size:"medium",srText:"Loading shared conversations\u2026"})}):(0,i.jsx)("div",{className:ek.mutedText,children:"error"===R.result?(0,i.jsx)(d.AlertIcon,{size:"medium",className:ek.alertIcon,"aria-label":"Error loading shared conversations"}):(0,i.jsx)(d.LinkIcon,{size:"medium","aria-label":"No shared conversations"})})}),(0,i.jsx)(ew.E.Heading,{children:R.heading}),(0,i.jsx)(ew.E.Description,{children:R.description})]}):(0,i.jsxs)(eN.X.Container,{children:[(0,i.jsx)(eC.b,{"aria-labelledby":"manage-shared-conversations",cellPadding:"normal",columns:[{header:"Chat",field:"conversation",width:"growCollapse",minWidth:"60%",rowHeader:!0,renderCell:e=>(0,i.jsx)(ej.A,{href:e.threadUrl,className:ek.conversationLink,children:e.conversation})},{header:"Last updated",field:"lastUpdated",width:"growCollapse",renderCell:e=>(0,i.jsx)("span",{className:ek.mutedText,children:e.lastUpdated})},{id:"actions",width:"growCollapse",align:"end",header:()=>(0,i.jsx)("div",{className:"sr-only",children:"Actions"}),renderCell:e=>(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:ek.actionButtons,children:[(0,i.jsx)(ev.T,{textToCopy:e.sharedUrl,onCopy:()=>{(0,y.BI)("dotcom_chat.activate",{target:"COPILOT_COPY_SHARED_CONVERSATION_LINK",mode:"immersive"})},ariaLabel:"Copy share link"}),(0,i.jsx)(v.K,{"aria-label":"Unshare chat",title:"Unshare chat",icon:d.UnlinkIcon,variant:"invisible",onClick:()=>{b(e),p(!0)}})]})})}],data:k}),o.length>5&&(0,i.jsx)(eN.X.Pagination,{"aria-label":"Shared chats pagination",pageSize:5,defaultPageIndex:s,totalCount:o.length,onChange:e=>{r(e.pageIndex)},showPages:!1})]}),m&&x&&(0,i.jsx)(eE,{threadId:x.id,closeDialog:T})]})};try{eR.displayName||(eR.displayName="ManageSharedConversationsDialog")}catch{}var eA=n(17005),eD=n(87255);let eP={userButton:"UserMenu-module__userButton--FuXsC",condensed:"UserMenu-module__condensed--rjzRR",userContent:"UserMenu-module__userContent--jXldm",userAvatar:"UserMenu-module__userAvatar--sp40T",menuItem:"UserMenu-module__menuItem--oXBxi",userDetails:"UserMenu-module__userDetails--mes1V",username:"UserMenu-module__username--n5Tln",description:"UserMenu-module__description--FvI5s"};function eO(e){let t,n,s,r,o,l,c,g,v,x,b,_,j,w,N,C,k,S,I,T,E,L,R,A,D=(0,a.c)(51),{isCondensed:P}=e,O=void 0!==P&&P,B=(0,h.useRef)(null),F=(0,h.useRef)(null),[M,$]=(0,h.useState)(!1),[V,U]=(0,h.useState)(!1),{currentUserLogin:q,plan:W}=(0,f.bP)("currentUserLogin","plan"),H=(0,eu.mM)(),G=O&&eP.condensed;D[0]!==G?(t=(0,p.$)(eP.userButton,G),D[0]=G,D[1]=t):t=D[1];let K=O?"user":void 0,z=`/${q}.png`;D[2]!==z?(n=(0,i.jsx)("div",{className:eP.userAvatar,children:(0,i.jsx)(eg.r,{src:z,size:20})}),D[2]=z,D[3]=n):n=D[3],D[4]!==q?(s=(0,i.jsx)("div",{className:eP.userContent,children:q}),D[4]=q,D[5]=s):s=D[5],D[6]!==t||D[7]!==K||D[8]!==n||D[9]!==s?(r=(0,i.jsx)(u.W.Anchor,{children:(0,i.jsxs)("button",{className:t,"aria-label":K,children:[n,s]})}),D[6]=t,D[7]=K,D[8]=n,D[9]=s,D[10]=r):r=D[10];let Q=`/${q}`,Y=`/${q}.png`;return D[11]!==Y?(o=(0,i.jsx)("div",{className:eP.userAvatar,children:(0,i.jsx)(eg.r,{src:Y,size:32})}),D[11]=Y,D[12]=o):o=D[12],D[13]!==q?(l=(0,i.jsx)("div",{className:eP.username,children:q}),D[13]=q,D[14]=l):l=D[14],D[15]!==W?(c=function(e){switch(e){case ey.UH.IndividualFree:return"Free";case ey.UH.IndividualPro:return"Pro";case ey.UH.IndividualProPlus:return"Pro+";case ey.UH.Business:return"Business";case ey.UH.Enterprise:return"Enterprise";default:return"Free"}}(W),D[15]=W,D[16]=c):c=D[16],D[17]!==c?(g=(0,i.jsxs)("span",{className:eP.description,children:["Copilot ",c]}),D[17]=c,D[18]=g):g=D[18],D[19]!==l||D[20]!==g?(v=(0,i.jsxs)("div",{className:eP.userDetails,children:[l,g]}),D[19]=l,D[20]=g,D[21]=v):v=D[21],D[22]!==o||D[23]!==v?(x=(0,i.jsxs)("div",{className:eP.menuItem,children:[o,v]}),D[22]=o,D[23]=v,D[24]=x):x=D[24],D[25]!==x||D[26]!==Q?(b=(0,i.jsx)(m.l.LinkItem,{href:Q,children:x}),D[25]=x,D[26]=Q,D[27]=b):b=D[27],D[28]===Symbol.for("react.memo_cache_sentinel")?(_=(0,i.jsx)(m.l.Divider,{}),D[28]=_):_=D[28],D[29]===Symbol.for("react.memo_cache_sentinel")?(j=()=>{U(!0),(0,y.BI)("dotcom_chat.activate",{target:"USER_MENU_PERSONAL_INSTRUCTIONS",mode:"immersive"})},D[29]=j):j=D[29],D[30]===Symbol.for("react.memo_cache_sentinel")?(w=(0,i.jsxs)(m.l.Item,{onSelect:j,children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(d.NoteIcon,{})}),"Personal instructions"]}),D[30]=w):w=D[30],D[31]!==H?(N=!H&&(0,i.jsxs)(m.l.Item,{onSelect:()=>{$(!0),(0,y.BI)("dotcom_chat.activate",{target:"USER_MENU_MANAGE_SHARED",mode:"immersive"})},children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(d.ListUnorderedIcon,{})}),"Manage shared conversations"]}),D[31]=H,D[32]=N):N=D[32],D[33]===Symbol.for("react.memo_cache_sentinel")?(C=()=>{F.current?.openDialog(),(0,y.BI)("dotcom_chat.activate",{target:"USER_MENU_GIVE_FEEDBACK",mode:"immersive"})},D[33]=C):C=D[33],D[34]===Symbol.for("react.memo_cache_sentinel")?(k=(0,i.jsxs)(m.l.Item,{onSelect:C,children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(d.CommentIcon,{})}),"Give feedback"]}),D[34]=k):k=D[34],D[35]===Symbol.for("react.memo_cache_sentinel")?(S=(0,i.jsxs)(m.l.LinkItem,{href:"/settings/copilot",onClick:eB,children:[(0,i.jsx)(m.l.LeadingVisual,{children:(0,i.jsx)(d.GearIcon,{})}),"Settings"]}),D[35]=S):S=D[35],D[36]!==b||D[37]!==N?(I=(0,i.jsx)(u.W.Overlay,{width:"small",align:"end",children:(0,i.jsxs)(m.l,{children:[b,_,w,N,k,S]})}),D[36]=b,D[37]=N,D[38]=I):I=D[38],D[39]!==I||D[40]!==r?(T=(0,i.jsxs)(u.W,{anchorRef:B,children:[r,I]}),D[39]=I,D[40]=r,D[41]=T):T=D[41],D[42]===Symbol.for("react.memo_cache_sentinel")?(E=(0,i.jsx)(eA.l,{ref:F,mode:"immersive",returnFocusRef:B}),D[42]=E):E=D[42],D[43]!==M?(L=M&&(0,i.jsx)(eR,{closeDialog:()=>{$(!1)},returnFocusRef:B}),D[43]=M,D[44]=L):L=D[44],D[45]!==V?(R=V&&(0,i.jsx)(eD.Y,{onDismiss:()=>U(!1),returnFocusRef:B}),D[45]=V,D[46]=R):R=D[46],D[47]!==T||D[48]!==L||D[49]!==R?(A=(0,i.jsxs)(i.Fragment,{children:[T,E,L,R]}),D[47]=T,D[48]=L,D[49]=R,D[50]=A):A=D[50],A}function eB(){return(0,y.BI)("dotcom_chat.activate",{target:"USER_MENU_SETTINGS",mode:"immersive"})}try{eO.displayName||(eO.displayName="UserMenu")}catch{}function eF(){let e,t=(0,a.c)(5),{sidebarExpanded:n,sidebarVisible:s,layoutBreakpoint:o,toggleSidebar:l}=(0,r.L)();return t[0]!==o||t[1]!==n||t[2]!==s||t[3]!==l?(e=(0,i.jsx)(eM,{sidebarExpanded:n,sidebarVisible:s,sidebarFloating:o,onToggleSidebar:l}),t[0]=o,t[1]=n,t[2]=s,t[3]=l,t[4]=e):e=t[4],e}function eM(e){let t,n,r,y,v,x,b,_,j,w,N,k,S,I,T=(0,a.c)(40),{onSidebarClick:E,onToggleSidebar:L,sidebarExpanded:R,sidebarFloating:A,sidebarVisible:D}=e,P=!A&&!R,O=(0,g.b)(),{threadsLoading:B,threads:F,selectedThreadID:M,ssoOrganizations:$,agentsEnabled:V}=(0,f.bP)("threadsLoading","threads","selectedThreadID","ssoOrganizations","agentsEnabled"),U=(0,c.zy)(),q=U.pathname.includes("/share/");T[0]!==O||T[1]!==F.size||T[2]!==B.state?(t=()=>{0===F.size&&"pending"===B.state&&O.fetchThreads()},n=[F.size,O,B.state],T[0]=O,T[1]=F.size,T[2]=B.state,T[3]=t,T[4]=n):(t=T[3],n=T[4]),(0,h.useEffect)(t,n),T[5]!==E||T[6]!==D||T[7]!==L?(r=()=>{E?.(),D&&L()},T[5]=E,T[6]=D,T[7]=L,T[8]=r):r=T[8];let W=r,H=(0,h.useId)();T[9]!==U.hash||T[10]!==U.pathname||T[11]!==U.search?(y=e=>{let t=`/orgs/${encodeURIComponent(e)}/sso`,n=U.pathname+U.search+U.hash;return`${t}?return_to=${encodeURIComponent(n)}`},T[9]=U.hash,T[10]=U.pathname,T[11]=U.search,T[12]=y):y=T[12];let G=y;T[13]!==G||T[14]!==P||T[15]!==$?(v=()=>{if(0===$.length)return null;if(1===$.length){let e=$[0];return(0,i.jsxs)("a",{href:G(e.login),className:ea.ssoButton,children:[(0,i.jsx)(d.ShieldLockIcon,{size:16}),(0,i.jsx)("span",{className:(0,p.$)(ea.ssoContent,P&&ea.condensed),children:"Single sign-on"})]})}return(0,i.jsxs)(u.W,{children:[(0,i.jsx)(u.W.Anchor,{children:(0,i.jsxs)("button",{className:ea.ssoButton,"aria-label":"Single sign on",children:[(0,i.jsx)(s.I,{icon:d.ShieldLockIcon,size:16}),(0,i.jsx)("div",{className:(0,p.$)(ea.ssoContent,P&&ea.condensed),children:"Single sign-on"})]})}),(0,i.jsx)(u.W.Overlay,{children:(0,i.jsx)(m.l,{children:$.map(e=>(0,i.jsx)(m.l.LinkItem,{href:G(e.login),children:e.login},e.login))})})]})},T[13]=G,T[14]=P,T[15]=$,T[16]=v):v=T[16];let K=v;T[17]===Symbol.for("react.memo_cache_sentinel")?(x=(0,i.jsx)(e$,{}),T[17]=x):x=T[17];let z=`${H}-quick-links`,Q=`${H}-quick-links`;T[18]!==Q?(b=(0,i.jsx)("h3",{id:Q,className:"sr-only",children:"Quick links"}),T[18]=Q,T[19]=b):b=T[19],T[20]!==W||T[21]!==P?(_=(0,i.jsx)(ef,{isSidebarCondensed:P,toggleFloatingSidebar:W}),T[20]=W,T[21]=P,T[22]=_):_=T[22],T[23]!==_||T[24]!==z||T[25]!==b?(j=(0,i.jsxs)("nav",{"aria-labelledby":z,className:ea.quicklinks,children:[b,_]}),T[23]=_,T[24]=z,T[25]=b,T[26]=j):j=T[26];let Y=(0,l.u)("copilot_swe_agent_progress_commands")&&V?(0,i.jsx)(ei,{handleSidebarClick:W,isCondensed:P,onToggleSidebar:L}):(0,i.jsx)(C,{selectedItemID:q?null:M,loadingState:B.state,onConversationSelect:W,isSidebarCondensed:P});return T[27]!==j||T[28]!==Y?(w=(0,i.jsxs)(o.t,{fallback:x,children:[j,Y]}),T[27]=j,T[28]=Y,T[29]=w):w=T[29],T[30]!==K?(N=K(),T[30]=K,T[31]=N):N=T[31],T[32]!==P?(k=(0,i.jsx)(eO,{isCondensed:P}),T[32]=P,T[33]=k):k=T[33],T[34]!==N||T[35]!==k?(S=(0,i.jsxs)("div",{className:ea.footer,children:[N,k]}),T[34]=N,T[35]=k,T[36]=S):S=T[36],T[37]!==w||T[38]!==S?(I=(0,i.jsxs)(i.Fragment,{children:[w,S]}),T[37]=w,T[38]=S,T[39]=I):I=T[39],I}function e$(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:ea.blankslateContainer,children:(0,i.jsx)("div",{children:"Error loading conversations"})}),t[0]=e):e=t[0],e}try{eF.displayName||(eF.displayName="CopilotNavigationWithContext")}catch{}try{eM.displayName||(eM.displayName="CopilotNavigation")}catch{}try{e$.displayName||(e$.displayName="SidebarContentsFallback")}catch{}},89155:(e,t,n)=>{n.d(t,{F:()=>s});var i=n(39029),a=n(34261);function s(e){let{refetch:t}=(0,a.W)();(0,i.og)(e,t,{git_updated:!0,title_updated:!0})}},90122:(e,t,n)=>{n.d(t,{DO:()=>r,Vq:()=>s,ZP:()=>i});let i=()=>/{{([\w-]+)(?:\.([.\w-]+))?(?:\|([\w-]+))?}}/g,a=`Respond with only the content \u{2014} no introductions, explanations, or extra text.
Only use code blocks when they add semantic value (e.g., mermaid diagrams, specific programming languages), not for general markdown formatting, unless the user explicitly asks for it.`;async function s(e){return[{role:"system",content:a},{role:"user",content:e.content}]}function r(e){return null==e?"":"string"==typeof e?e:e&&"object"==typeof e?JSON.stringify(e,null,2):Array.isArray(e)?e.map(r).join(`
`):String(e)}},90756:(e,t,n)=>{n.d(t,{R:()=>a,j:()=>LoopError});var i=n(50467);let LoopError=class LoopError extends Error{constructor(e,t){super(e),(0,i._)(this,"httpStatus",void 0),this.httpStatus=t,this.name="LoopError"}};function a(e){return e instanceof LoopError}},91095:(e,t,n)=>{n.d(t,{U:()=>aA});var i=n(74848),a=n(21728),s=n(2635),r=n(7730),o=n(35247),l=n(53419),c=n(11607),d=n(77999),u=n(75202),m=n(6551),p=n(11683),h=n(38621),f=n(45800),g=n(26108),y=n(94236),v=n(5524),x=n(71941),b=n(34164),_=n(96540),j=n(22116);let w={container:"ContentPreview-module__container--y5_MG",resourcePanelOpen:"ContentPreview-module__resourcePanelOpen--YIQql",toolbar:"ContentPreview-module__toolbar--_XWuB",rightActions:"ContentPreview-module__rightActions--Ed1c0",actions:"ContentPreview-module__actions--o_YRg",tabsContainer:"ContentPreview-module__tabsContainer--t0I1P",tabs:"ContentPreview-module__tabs--X2Pn9",rightDivider:"ContentPreview-module__rightDivider--LY__Z",leftDivider:"ContentPreview-module__leftDivider--FCyvC",content:"ContentPreview-module__content--FgZZL"};var N=n(1747),C=n(47789),k=n(90651),S=n(49246),I=n(66827),T=n(29731),E=n(46251),L=n(84078),R=n(43715),A=n(38598);let D={container:"FailureState-module__container--EliAz",icon:"FailureState-module__icon--TP632",heading:"FailureState-module__heading--ohXqD",subtitle:"FailureState-module__subtitle--VM7x1"};function P(e){let t,n,s,r,o,l=(0,a.c)(11),{title:c,description:d,icon:u}=e;return l[0]!==u?(t=(0,i.jsx)(u,{size:24,className:D.icon}),l[0]=u,l[1]=t):t=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),l[2]=n):n=l[2],l[3]!==c?(s=(0,i.jsx)("h2",{className:D.heading,children:c}),l[3]=c,l[4]=s):s=l[4],l[5]!==d?(r=(0,i.jsx)("p",{className:D.subtitle,children:d}),l[5]=d,l[6]=r):r=l[6],l[7]!==t||l[8]!==s||l[9]!==r?(o=(0,i.jsxs)("div",{className:D.container,children:[t,n,s,r]}),l[7]=t,l[8]=s,l[9]=r,l[10]=o):o=l[10],o}try{P.displayName||(P.displayName="FailureState")}catch{}var O=n(26100),B=n(7812);let F={anchor:"VersionSelector-module__anchor--Tx_UX"};function M(e){let t,n,s,r,o,l=(0,a.c)(16),{item:c,onVersionSelect:d}=e,{versionedItems:u,openItem:m}=(0,N.xx)(),p=(0,B.oy)(c.id),h=u.get(p)??[],f=h.indexOf(c.id);if((0,_.useEffect)(()=>{d&&h.length>1&&d(`Version${f+1}`)},[f,d,h.length]),h.length<=1)return null;let g=y.W,x=f+1;l[0]!==x?(t=(0,i.jsx)(y.W.Button,{variant:"invisible",className:F.anchor,children:(0,i.jsx)(O.g,{version:x,"data-testid":"version-selector"})}),l[0]=x,l[1]=t):t=l[1];let b=y.W,j=v.l;l[2]!==c.id||l[3]!==d||l[4]!==m?(n=(e,t)=>(0,i.jsxs)(v.l.Item,{onSelect:()=>{m(e),d&&d(`Version${t+1}`)},selected:e===c.id,children:[(0,i.jsx)(v.l.LeadingVisual,{children:(0,i.jsx)(O.g,{version:t+1})}),"Version ",t+1]},e),l[2]=c.id,l[3]=d,l[4]=m,l[5]=n):n=l[5];let w=h.map(n);return l[6]!==j||l[7]!==w?(s=(0,i.jsx)(j,{selectionVariant:"single",children:w}),l[6]=j,l[7]=w,l[8]=s):s=l[8],l[9]!==b.Overlay||l[10]!==s?(r=(0,i.jsx)(b.Overlay,{children:s}),l[9]=b.Overlay,l[10]=s,l[11]=r):r=l[11],l[12]!==g||l[13]!==t||l[14]!==r?(o=(0,i.jsxs)(g,{children:[t,r]}),l[12]=g,l[13]=t,l[14]=r,l[15]=o):o=l[15],o}try{M.displayName||(M.displayName="VersionSelector")}catch{}var $=n(17831),V=n(83494),U=n(15220),q=n(69726),W=n(21373),H=n(79431);let G={dialogFooter:"BulkCreateDialog-module__dialogFooter--aWAd9",dialogFooterStatus:"BulkCreateDialog-module__dialogFooterStatus--RMt1N",dialogFooterActions:"BulkCreateDialog-module__dialogFooterActions--BvuR4",loadingIndicator:"BulkCreateDialog-module__loadingIndicator--sRZcS"};var K=n(28177),z=n(39344),Q=n(62559),Y=n(81724),J=n(977),X=n(16654),Z=n(18501),ee=n(40961),et=n(5338),en=n(18312),ei=n(46461);let ea={kind:"InlineDataFragment",name:"useIssueQueryIssueContent"};ea.hash="a175c12fb4b38762491470789bca7dee";let es=function(){var e={defaultValue:null,kind:"LocalArgument",name:"name"},t={defaultValue:null,kind:"LocalArgument",name:"number"},n={defaultValue:null,kind:"LocalArgument",name:"owner"},i=[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"owner",variableName:"owner"}],a=[{kind:"Variable",name:"number",variableName:"number"}],s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"number",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},p=[m],h={alias:null,args:null,kind:"ScalarField",name:"isArchived",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"isCopilotAgentEnabled",storageKey:null},g=[u],y=[{kind:"Literal",name:"first",value:20}],v={alias:null,args:y,concreteType:"ProjectV2ItemConnection",kind:"LinkedField",name:"projectItems",plural:!1,selections:[{alias:null,args:null,concreteType:"ProjectV2Item",kind:"LinkedField",name:"nodes",plural:!0,selections:[s,{alias:null,args:null,concreteType:"ProjectV2",kind:"LinkedField",name:"project",plural:!1,selections:[s,l],storageKey:null}],storageKey:null}],storageKey:"projectItems(first:20)"},x={alias:null,args:[{kind:"Literal",name:"first",value:1}],concreteType:"IssueConnection",kind:"LinkedField",name:"subIssues",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"totalCount",storageKey:null}],storageKey:"subIssues(first:1)"},b=[u,s];return{fragment:{argumentDefinitions:[e,t,n],kind:"Fragment",metadata:null,name:"useIssueQueryQuery",selections:[{alias:null,args:i,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:a,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"useIssueQueryIssueContent",selections:[s,r,o,l,c,d,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[s,r,u,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:p,storageKey:null},h,f,{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:g,storageKey:null}],storageKey:null},{alias:null,args:y,concreteType:"UserConnection",kind:"LinkedField",name:"assignees",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nodes",plural:!0,selections:p,storageKey:null}],storageKey:"assignees(first:20)"},{alias:null,args:y,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:g,storageKey:null}],storageKey:"labels(first:20)"},{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"milestone",plural:!1,selections:[l],storageKey:null},{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"issueType",plural:!1,selections:g,storageKey:null},v,x],args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,e,t],kind:"Operation",name:"useIssueQueryQuery",selections:[{alias:null,args:i,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:a,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[s,r,o,l,c,d,{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[s,r,u,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},m,s],storageKey:null},h,f,{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:b,storageKey:null}],storageKey:null},{alias:null,args:y,concreteType:"UserConnection",kind:"LinkedField",name:"assignees",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nodes",plural:!0,selections:[m,s],storageKey:null}],storageKey:"assignees(first:20)"},{alias:null,args:y,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:b,storageKey:null}],storageKey:"labels(first:20)"},{alias:null,args:null,concreteType:"Milestone",kind:"LinkedField",name:"milestone",plural:!1,selections:[l,s],storageKey:null},{alias:null,args:null,concreteType:"IssueType",kind:"LinkedField",name:"issueType",plural:!1,selections:b,storageKey:null},v,x],storageKey:null},s],storageKey:null}]},params:{id:"74cdd586b6f12a28054626de37364e0a",metadata:{},name:"useIssueQueryQuery",operationKind:"query",text:null}}}();async function er(e,t,n,i,a=!1){try{var s;let r=await (0,en.fetchQuery)(e,es,{owner:t,name:n,number:i},{fetchPolicy:a?"network-only":"store-or-network"}).toPromise();if(r?.repository?.issue==null)return null;return s=r.repository.issue,(0,en.readInlineData)(ea,s)}catch(e){if("object"==typeof e&&null!=e&&"name"in e&&"ValidationError"===e.name&&"message"in e&&"string"==typeof e.message&&e.message.includes("NOT_FOUND"))return null;throw e}}es.hash="a1c6e44ba1445bc4d870fb9c11487d4d";var eo=n(72767),el=n(93997),ec=n(97286);function ed(e){let t,n,i,s,r=(0,a.c)(13),{repoId:o,filename:l}=e,c=(0,en.useRelayEnvironment)();return r[0]!==c?(t=JSON.stringify(c),r[0]=c,r[1]=t):t=r[1],r[2]!==l||r[3]!==o||r[4]!==t?(n=["copilot-immersive-template-payload",t,o,l],r[2]=l,r[3]=o,r[4]=t,r[5]=n):n=r[5],r[6]!==c||r[7]!==l||r[8]!==o?(i=async()=>o&&l?await eu(c,o,l):null,r[6]=c,r[7]=l,r[8]=o,r[9]=i):i=r[9],r[10]!==n||r[11]!==i?(s={queryKey:n,queryFn:i},r[10]=n,r[11]=i,r[12]=s):s=r[12],(0,ec.I)(s)}async function eu(e,t,n){let i=await (0,en.fetchQuery)(e,eo.F,{repoId:t,filename:n}).toPromise();return i&&i.node?(0,el.EV)(i.node)??null:null}let em=crypto.randomUUID();async function ep(e,t,n){let a={},s=new Map;if((0,ei.YR)(n,e=>s.set(e.item.tag,e)),s.size>60)return a[em]={errorMessages:["You cannot create more than 60 new issues at a time. Please remove some draft issues from the tree and try again."]},a;if(function e(t,n=0){if(n>7)return!0;if(!t.children||0===t.children.length)return!1;for(let i of t.children)if(e(i,n+1))return!0;return!1}(n))return a[em]={errorMessages:["You cannot add more than 7 levels of sub-issues. Please remove some issues from the tree and try again."]},a;for(let[n,r]of s){let o=r.item;if(a[n]={errorMessages:[]},"new-issue"===o.type&&(!o.repository&&o.parentTag&&(o.repository=s.get(o.parentTag)?.item?.repository),!o.repository)){a[n].errorMessages.push("Repository is required");continue}let[l,c]=o.repository?.split("/")||[];if(!l||!c){a[n].errorMessages.push('Repository must be in the format "owner/repo"');continue}let d=await (0,X.tZ)(e,l,c);if(!d){a[n].errorMessages.push("Repository not found");continue}if(d.isArchived){a[n].errorMessages.push("Repository is archived");continue}if(!d.hasIssuesEnabled){a[n].errorMessages.push("Repository does not have issues enabled");continue}if(d.viewerInteractionLimitReasonHTML){a[n].errorMessages.push(d.viewerInteractionLimitReasonHTML);continue}if(r.children.length>0&&(d.isLocked||!1===d.viewerCanPush&&d.viewerIssueCreationPermissions?.triageable===!1)){a[n].errorMessages.push("You do not have permission to create subissues in this repository");continue}if("existing-issue"===o.type){if(!o.number){a[n].errorMessages.push("Issue number is required");continue}let t=await er(e,l,c,o.number);if(!t){a[n].errorMessages.push("Issue not found");continue}if(r.children.length>0){let e=t.subIssues?.totalCount??0,i=r.children.length;e+i>100&&a[n].errorMessages.push(`This issue already has ${e} sub-issue${1===e?"":"s"}. Adding ${i} more would exceed the maximum of 100 sub-issues.`)}continue}let u=o.template?.split("/").findLast(Boolean),m=u?await eu(e,d.id,u):void 0;if(o.template&&!m){a[n].errorMessages.push("Issue template not found");continue}if(!d.isBlankIssuesEnabled&&!m){a[n].errorMessages.push("Issue template is required");continue}let p=(0,Q.O_)(o.name);if(p.isValid||a[n].errorMessages.push(p.errorMessage||"Issue title is invalid"),m&&(0,Y.GQ)(m.data)){t.current=null;let s=document.createElement("div"),r=(0,et.H)(s);if((0,ee.flushSync)(()=>{r.render((0,i.jsx)(Z.c,{partialName:"copilot-creates-issues-bulk-validation",wasServerRendered:!1,children:(0,i.jsx)(en.RelayEnvironmentProvider,{environment:e,children:(0,i.jsx)(eh,{repository:d,draftIssue:o,template:m,outputRef:t})})}))}),!t.current)throw Error("IssueFormRef is not set");let l=t.current;try{if(l.getInvalidInputs().length>0){a[n].errorMessages.push("Invalid form input");continue}o.body=l.markdown()}finally{l.clearSessionStorage(),r.unmount(),s.remove()}}let h=(0,Q.QK)(o.body??"");h.isValid||a[n].errorMessages.push(h.errorMessage||"Issue body is invalid")}return a}function eh(e){let t,n,s=(0,a.c)(10),{repository:r,draftIssue:o,template:l,outputRef:c}=e,d=`${r.owner.login}/${r.name}`;s[0]!==r.databaseId||s[1]!==r.slashCommandsEnabled||s[2]!==d?(t={type:"issue",repository:{databaseId:r.databaseId,nwo:d,slashCommandsEnabled:r.slashCommandsEnabled}},s[0]=r.databaseId,s[1]=r.slashCommandsEnabled,s[2]=d,s[3]=t):t=s[3];let u=t;if(!(0,Y.GQ)(l.data))return;let m=`copilot-creates-issues:${o.tag}`;return s[4]!==o.defaultValuesById||s[5]!==c||s[6]!==u||s[7]!==m||s[8]!==l.data?(n=(0,i.jsx)(J.Z,{outputRef:c,issueFormRef:l.data,subject:u,sessionStorageKey:m,defaultValuesById:o.defaultValuesById}),s[4]=o.defaultValuesById,s[5]=c,s[6]=u,s[7]=m,s[8]=l.data,s[9]=n):n=s[9],n}try{em.displayName||(em.displayName="TREE_ERROR_KEY")}catch{}try{eh.displayName||(eh.displayName="IssueFormWrapper")}catch{}var ef=n(50467),eg=n(94747),ey=n(96379),ev=n(16049),ex=n(73952);function eb(){let e,t,n=(0,a.c)(4),{messages:i}=(0,s.Pk)();n[0]!==i?(e=(0,ex.B)(i),n[0]=i,n[1]=e):e=n[1];let r=e;return n[2]!==r?(t=(e,t)=>null==e?Promise.resolve(t):e_(t,e.databaseId,r[0]?.threadID),n[2]=r,n[3]=t):t=n[3],t}async function e_(e,t,n){let i=e.match(/(!\[.*\]\(https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+\))/g),a=new Set;for(let e of i||[]){let t=e.match(/https:\/\/(?:.+\.)?github\.com\/github-copilot\/chat\/attachments\/[0-9a-fA-F-]+/)?.[0];t&&a.add(t)}if(a.size>0){let i=Array.from(a).map(async e=>{let t=await fetch(e),n=await t.blob(),i=n.type.split("/")[1],a=`copilot-image.${i}`,s=await createImageBitmap(n),r=s.width;return s.close(),{file:new File([n],a,{type:n.type}),url:e,width:r}}),s=await Promise.all(i);for(let n of(await Promise.all(s.map(async e=>{if(e)return{uploadedFile:await (0,ev.QM)(e.file,t?.toString()),originalUrl:e.url,width:e.width}}))))if(n){let{uploadedFile:t,originalUrl:i,width:a}=n,s=t.url;if(s){let t=RegExp(`!\\[(.*?)\\]\\(${i}\\)`,"g");e=e.replace(t,`<img alt="$1" width="${a}" src="${s}" />`)}}(0,l.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_CREATED_IMAGES",mode:"immersive",imageCount:a.size,threadId:n})}return e}function ej(e){return e.item.tag}function ew(e){return!!e}function eN(e){return e.title}function eC(e){return e.item.tag}function ek(e){return!e.state.error&&e.state.data?.job.state!=="success"&&e.state.data?.job.state!=="error"&&2e3}var eS=n(17855),eI=n(33592),eT=n(51213),eE=n(72303),eL=n(20382);let eR={project:"Project assignment errors",dependency:"Dependency errors",update:"Partial update errors",other:"Other errors"};function eA(){let e,t=(0,a.c)(8),n=(0,eI.b)(),i=(0,s.Pk)(),{closeItems:r,openItem:c,openPreviewPane:d,versionedItems:u,updateItem:m}=(0,N.xx)();return t[0]!==r||t[1]!==n||t[2]!==c||t[3]!==d||t[4]!==i||t[5]!==m||t[6]!==u?(e=async e=>{if(0===e.length)return;let t=e.find(eU)??e[0];(0,l.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUES_SAVED",mode:"immersive",threadId:(0,eE.W)(i)?.id,chatReferrer:document.referrer,repositoryId:t.repository.databaseId,draftType:t.draftType,issueTag:t.tag,issueNumber:t.number,templateType:t.template?t.template.endsWith(".md")?"markdown":"yaml":"none",issuesWithCopilotAssigned:e.filter(e$).length,savedIssuesCount:e.length});let a=[],s=[],p=[];for(let t of e){let n=t.repository.owner.login,i=t.repository.name,r=t.number;m({type:"issue",id:eH(t),messageId:eT.Wp,name:t.title,owner:n,repo:i,number:r,href:t.url});let l=e.find(e=>e.tag===t.parentTag),c=o.W.draftIssuesWithDependencies?t.blockedByTags?.map(t=>e.find(e=>e.tag===t)).filter(eM):void 0,d=o.W.draftIssuesWithDependencies?t.isBlockingTags?.map(t=>e.find(e=>e.tag===t)).filter(eF):void 0;s.push({tag:`${n}/${i}#${r}`,parentTag:l?eW(l):void 0,blockedByTags:c?.map(eB),isBlockingTags:d?.map(eO),title:t.title,repository:`${t.repository.owner.login}/${t.repository.name}`,number:t.number,state:"open",url:t.url}),a.push(eq(t)),p.push(t.tag)}r(e.map(eP).flatMap(e=>u.get(e)??[])),c(eH(t)),d();let h=[{type:"text",name:`timeline-event: {"type": "issue-saved", "markdownContent": "${function(e){if(e.length>1)return`Saved ${e.length} issues`;{let t=e[0],n=eq(t),i="new-issue"===t.draftType?"Created":"Updated";return`${i} issue ${n}`}}(e)}"}`,text:`${e.length>1?"Fetch the details for all saved issues and return them in a code block with YAML following this example format:":"Fetch the issue details and return them in a code block with YAML following this example format:"}
\`\`\`\`yaml type="issue-tree"
${(0,eL.Bh)({data:s},{forceQuotes:!0,noArrayIndent:!0,lineWidth:-1})}\`\`\`\``},{type:"text",name:"ignore-obsolete-drafts",text:`From now on, you should only interact with these newly saved issues and not their corresponding drafts. You MUST exclude the draft issues with the following tags from any future tree creation: ${p.join(", ")}`},...i.currentReferences],f=e.flatMap(eD);f.length&&h.push({type:"text",name:"summarize-continuable-errors",text:`These issues were saved with some errors. You MUST give a high-level summary of these errors at the end of your message in the language used in the conversation. Always prefix it with the word "Note:" in bold for visibility. Be clear but succinct. Here are the errors, grouped by type:
${function(e){let t={};for(let n of e){let e=eR[n.type]||"Other errors";t[e]||(t[e]=[]),t[e].push(n.message)}return Object.entries(t).map(([e,t])=>`${e}:
${t.map(e=>`- ${e}`).join(`
`)}
`).join(`
`)}(f)}`});let g=a.length>1?`Saved the issues: ${a.join(", ")}`:`Saved the issue: ${a[0]}`;await n.sendChatMessage({thread:(0,eE.W)(i),content:g,references:h,topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=r,t[1]=n,t[2]=c,t[3]=d,t[4]=i,t[5]=m,t[6]=u,t[7]=e):e=t[7],e}function eD(e){return e.errors||[]}function eP(e){return`${e.draftType}:${e.tag}`}function eO(e){return eW(e)}function eB(e){return eW(e)}function eF(e){return null!=e}function eM(e){return null!=e}function e$(e){return e.assignees.some(eV)}function eV(e){return(0,eS.v)(e)}function eU(e){return!e.parentTag}function eq(e){return`[${eW(e)}](${e.url})`}function eW(e){let t=e.repository.owner.login,n=e.repository.name,i=e.number;return`${t}/${n}#${i}`}function eH(e){let t=e.repository.owner.login,n=e.repository.name,i=e.number;return`issue:${t}/${n}/${i}`}let CreateError=class CreateError extends Error{constructor(e){super(e),(0,ef._)(this,"type",void 0),(0,ef._)(this,"bannerTitle",void 0),(0,ef._)(this,"bannerVariant",void 0),this.name="CreateError",this.type="creation",this.bannerTitle="Errors in issue creation",this.bannerVariant="critical"}};let ValidationError=class ValidationError extends Error{constructor(e){super(e),(0,ef._)(this,"type",void 0),(0,ef._)(this,"bannerTitle",void 0),(0,ef._)(this,"bannerVariant",void 0),this.name="ValidationError",this.type="validation",this.bannerTitle="Validation errors in issue content",this.bannerVariant="warning"}};function eG(e){let t,n,i,s,r,o,l,c,d=(0,a.c)(34),{issueNode:u,onComplete:m,onError:p,issueFormRef:h,issueTemplate:f}=e;d[0]!==h||d[1]!==u||d[2]!==f?(t={issueNode:u,issueFormRef:h,issueTemplate:f},d[0]=h,d[1]=u,d[2]=f,d[3]=t):t=d[3];let{mutate:g,isLoading:y,data:v,isComplete:x,isError:b,error:j}=function(e){let t,n,i,s=(0,a.c)(15),{issueNode:r,issueFormRef:o,issueTemplate:l}=e;s[0]!==o||s[1]!==r||s[2]!==l?(t={issueNode:r,issueFormRef:o,issueTemplate:l},s[0]=o,s[1]=r,s[2]=l,s[3]=t):t=s[3];let c=function(e){let t,n,i,s=(0,a.c)(12),{issueNode:r,issueFormRef:o,issueTemplate:l}=e,c=(0,en.useRelayEnvironment)(),d=eb(),u=!r.parent&&0===r.children.length;return s[0]!==r.item.tag?(t=["copilot-issues-bulk-create",r.item.tag],s[0]=r.item.tag,s[1]=t):t=s[1],s[2]!==c||s[3]!==u||s[4]!==o||s[5]!==r||s[6]!==l||s[7]!==d?(n=async()=>{let e=[],t=new Map;await (0,ei.Pq)(r,async n=>{let i=n.item;if("existing-issue"===i.type)return void e.push({tag:i.tag,parent_tag:i.parentTag,repository_nwo:i.repository,number:i.number,blocked_by_tags:n.blockedBy.length?n.blockedBy.map(eC):void 0});let a=i.body;if(u&&l&&(0,Y.GQ)(l.data)&&o?.current&&(a=o.current.markdown()??i.body),a&&i.repository){let e=t.get(i.repository);if(!e){let[n,a]=i.repository.split("/");null!=n&&null!=a&&(e=await (0,X.tZ)(c,n,a),t.set(i.repository,e))}a=await d(e,a)}e.push({title:i.name,tag:i.tag,repository_nwo:i.repository,body:a,parent_tag:i.parentTag,labels:i.labels,assignees:i.assignees,milestone:i.milestone,issue_type:i.issueType,template:l?.fileName,projects:i.projects?.map(eN).filter(ew),blocked_by_tags:n.blockedBy.length?n.blockedBy.map(ej):void 0})});let n=await (0,ey.Sr)("/copilot_issues/bulk_create",{method:"POST",body:{data:{issues:e}}});if(429===n.status)throw Error((await n.json()).error||"Rate limit exceeded. Please try again later.");if(!n.ok)throw Error((await n.json()).error.message||"Failed to create issues.");return await n.json()},s[2]=c,s[3]=u,s[4]=o,s[5]=r,s[6]=l,s[7]=d,s[8]=n):n=s[8],s[9]!==t||s[10]!==n?(i={mutationKey:t,mutationFn:n},s[9]=t,s[10]=n,s[11]=i):i=s[11],(0,eg.n)(i)}(t),d=function(e){let t,n,i,s=(0,a.c)(7),r=!!e;return s[0]!==e?(t=["copilot-issues-bulk-create-status",e],n=async t=>{let n=await (0,ey.Sr)(e);if(!n.ok){let e=await n.json();throw t.client.setQueryData(t.queryKey,e),Error(e?.job.error_message||"Failed to fetch job status")}return await n.json()},s[0]=e,s[1]=t,s[2]=n):(t=s[1],n=s[2]),s[3]!==r||s[4]!==t||s[5]!==n?(i={enabled:r,queryKey:t,queryFn:n,refetchInterval:ek},s[3]=r,s[4]=t,s[5]=n,s[6]=i):i=s[6],(0,ec.I)(i)}(c.data?.jobStatusUrl),u=c.error||d.error,m=c.isError||d.isError;s[4]!==c.isPending||s[5]!==d.data?.job.state||s[6]!==d.isLoading?(n=c.isPending||d.isLoading||["pending","queued","started"].includes(d.data?.job.state||""),s[4]=c.isPending,s[5]=d.data?.job.state,s[6]=d.isLoading,s[7]=n):n=s[7];let p=d.data?.job.state==="success";return s[8]!==c.mutate||s[9]!==d.data||s[10]!==u||s[11]!==m||s[12]!==n||s[13]!==p?(i={mutate:c.mutate,data:d.data,error:u,isError:m,isLoading:n,isComplete:p},s[8]=c.mutate,s[9]=d.data,s[10]=u,s[11]=m,s[12]=n,s[13]=p,s[14]=i):i=s[14],i}(t),w=eA();d[4]!==h||d[5]!==u||d[6]!==f||d[7]!==p?(n=()=>{let e;if(!u)return!1;let t=u.item;if("new-issue"!==t.type)return!0;let n=t.name||"",i=(0,Q.O_)(n);if(!i.isValid)return p?.(new ValidationError(i.errorMessage||"Issue title is invalid")),!1;let a=(0,Q.QK)(t.body||"");if(!a.isValid)return p?.(new ValidationError(a.errorMessage||"Issue body is invalid")),!1;if(f&&(0,Y.GQ)(f.data)&&h.current){let t=h.current.getInvalidInputs();if(t.length>0)return e=t[0],p?.(new ValidationError("Please fix the validation errors in the form")),e?.focus(),!1}return!0},d[4]=h,d[5]=u,d[6]=f,d[7]=p,d[8]=n):n=d[8];let N=n;d[9]!==x||d[10]!==y||d[11]!==u||d[12]!==g||d[13]!==N?(i=()=>{!y&&!x&&(u.parent||0!==u.children.length||N())&&g()},d[9]=x,d[10]=y,d[11]=u,d[12]=g,d[13]=N,d[14]=i):i=d[14];let C=i,k=eK;return d[15]!==j||d[16]!==b||d[17]!==p?(s=()=>{b&&j&&p?.(new CreateError(j.message))},r=[b,j,p],d[15]=j,d[16]=b,d[17]=p,d[18]=s,d[19]=r):(s=d[18],r=d[19]),(0,_.useEffect)(s,r),d[20]!==v||d[21]!==x||d[22]!==u||d[23]!==m||d[24]!==w?(o=()=>{if(!v||!x)return;let e=k(v,u);m(),w(e)},l=[v,x,u,m,w,k],d[20]=v,d[21]=x,d[22]=u,d[23]=m,d[24]=w,d[25]=o,d[26]=l):(o=d[25],l=d[26]),(0,_.useEffect)(o,l),d[27]!==v||d[28]!==j||d[29]!==C||d[30]!==x||d[31]!==b||d[32]!==y?(c={handleCreate:C,isLoading:y,isComplete:x,isError:b,error:j,data:v},d[27]=v,d[28]=j,d[29]=C,d[30]=x,d[31]=b,d[32]=y,d[33]=c):c=d[33],c}function eK(e,t){if(!e||0===e.job.completed_issues.length)return[];let n=new Map;return(0,ei.Pt)(t,e=>{n.set(e.item.tag,e.item)}),e.job.completed_issues.map(e=>{let t=n.get(e.tag),[i,a]=t.repository.split("/");return{draftType:t.type,tag:e.tag,parentTag:t.parentTag,blockedByTags:t.blockedByTags,isBlockingTags:t.isBlockingTags,template:"new-issue"===t.type?t.template:void 0,repository:{databaseId:e.repository_id,name:a,owner:{login:i}},number:e.number,title:t.name,url:e.href,assignees:"assignees"in t?t.assignees??[]:[],errors:e.errors||[]}})}function ez({issueNode:e,onComplete:t,onCancel:n}){let s=(0,_.useMemo)(()=>{let t=e;for(;t?.parent;)t=t.parent;return t},[e]),r=(0,_.useMemo)(()=>{let e=0;return(0,ei.YR)(s,t=>{"new-issue"===t.item.type&&e++}),e},[s]),{handleCreate:o,isLoading:l,isComplete:c,isError:d,error:u,data:m}=eG({issueNode:s,onComplete:t}),{loading:p,result:f}=function(e){let t,n,i,s,r=(0,a.c)(8),[o,l]=(0,_.useState)(!1);r[0]===Symbol.for("react.memo_cache_sentinel")?(t={},r[0]=t):t=r[0];let[c,d]=(0,_.useState)(t),u=(0,en.useRelayEnvironment)(),m=(0,_.useRef)(null);return r[1]!==u||r[2]!==e?(n=()=>{!async function(){l(!0),d(await ep(u,m,e)),l(!1)}()},i=[u,e],r[1]=u,r[2]=e,r[3]=n,r[4]=i):(n=r[3],i=r[4]),(0,_.useEffect)(n,i),r[5]!==o||r[6]!==c?(s={loading:o,result:c},r[5]=o,r[6]=c,r[7]=s):s=r[7],s}(s),g=(0,_.useMemo)(()=>f&&Object.values(f).some(e=>e.errorMessages.length>0),[f]),y=(0,_.useCallback)(()=>{l||c||n()},[l,c,n]),v=(0,_.useMemo)(()=>{let e=new Set;return((0,ei.YR)(s,t=>e.add(t.item.type)),1===e.size&&"existing-issue"===s.item.type)?{title:"Update existing issues?",description:"Clicking Update will update the relationships between the issues shown below.",button:"Update issues"}:e.size>1&&"existing-issue"===s.item.type?{title:"Create all linked draft issues?",description:"Clicking Create will publish all Copilot draft issues shown below. Existing sub-issues aren't displayed and remain unchanged.",button:1===r?"Create 1 issue":`Create ${r} issues`}:e.size>1&&"new-issue"===s.item.type?{title:"Create all linked draft issues?",description:"Clicking Create will publish the Copilot draft issues shown below.",button:1===r?"Create 1 issue":`Create ${r} issues`}:{title:"Create all linked draft issues?",description:"These drafts are linked. Creating a sub-issue automatically publishes its parent and any nested drafts.",button:1===r?"Create 1 issue":`Create ${r} issues`}},[s,r]),{openItem:x,openPreviewPane:b}=(0,N.xx)(),j=(0,_.useCallback)(e=>{l||c||(x(e.item.id,!0),b(),n())},[c,l,n,x,b]),w=(0,_.useMemo)(()=>f[em]?f[em]?.errorMessages[0]:"Fill out missing required fields to create all of these issues.",[f]);return(0,i.jsx)(U.l,{title:v.title,onClose:y,renderFooter:()=>p?null:(0,i.jsxs)(U.l.Footer,{className:G.dialogFooter,children:[(0,i.jsx)("div",{className:G.dialogFooterStatus,children:d&&(0,i.jsx)(H.v,{variant:"critical",children:u?.message})}),(0,i.jsxs)("div",{className:G.dialogFooterActions,children:[(0,i.jsx)(W.Q,{variant:"default",onClick:y,inactive:l||c,children:"Cancel"}),(0,i.jsx)(W.Q,{variant:"primary",onClick:o,loading:l||c,disabled:g||d,children:v.button})]})]}),children:p?(0,i.jsx)("div",{className:G.loadingIndicator,role:"status","aria-label":"Validating issues",children:(0,i.jsx)(q.A,{})}):g?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L.l,{variant:"warning",hideTitle:!0,title:"Validation errors",description:w,className:"mb-3"}),(0,i.jsx)(eQ,{issueNode:s,onNodeClick:j,statusSelector:e=>{let t=f[e.item.tag]?.errorMessages[0];if(t)return{trailingVisual:(0,i.jsx)(h.AlertIcon,{className:"fgColor-attention","data-testid":`warning-icon-${e.item.tag}`}),description:(0,i.jsx)("span",{className:"fgColor-attention",children:t})}}})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{children:v.description}),(0,i.jsx)(eQ,{issueNode:s,onNodeClick:j,statusSelector:e=>({trailingVisual:m?.job.completed_issues.some(t=>t.tag===e.item.tag)&&(0,i.jsx)(h.CheckIcon,{className:"fgColor-success","data-testid":`success-icon-${e.item.tag}`})})})]})})}function eQ({issueNode:e,onNodeClick:t,statusSelector:n}){let{versionedItems:a}=(0,N.xx)(),s=(0,_.useMemo)(()=>{let t=0;return(0,ei.YR)(e,e=>{e.parent&&t++}),t},[e]),r=e=>{if(o.W.draftIssuesWithDependencies)return e.blockedBy.map(e=>({title:e.item.name??"",onClick:()=>{t(e)}}))},l=e=>{let s=(0,B.LU)(e.item.id,a),o=n?.(e);return(0,i.jsx)(z.K.Item,{title:e.item.name,leadingVisual:(0,i.jsx)(K.n,{...e.item}),trailingBadge:(0,i.jsxs)(i.Fragment,{children:[null!=s?(0,i.jsx)(O.g,{version:s}):void 0,(0,i.jsx)(eY,{node:e})]}),trailingVisual:o?.trailingVisual,description:o?.description,onClick:()=>t(e),blockedBy:r(e),children:e.children.map(l)},e.item.tag)},c=(0,B.LU)(e.item.id,a),d=n?.(e);return(0,i.jsxs)(z.K,{subIssueHeaderText:"existing-issue"===e.item.type?"New sub-issues":void 0,subIssueCount:s,hasTrailingVisuals:!0,children:[(0,i.jsx)(z.K.RootItem,{title:e.item.name,leadingVisual:(0,i.jsx)(K.n,{...e.item}),trailingBadge:(0,i.jsxs)(i.Fragment,{children:[null!=c?(0,i.jsx)(O.g,{version:c}):void 0,(0,i.jsx)(eY,{node:e})]}),trailingVisual:d?.trailingVisual,description:d?.description,onClick:()=>t(e),blockedBy:r(e)}),e.children.map(l)]})}function eY(e){let t,n=(0,a.c)(2),{node:s}=e;if(s.item.repository&&s.item.repository!==s.parent?.item.repository)return n[0]!==s.item.repository?(t=(0,i.jsx)("span",{className:"fgColor-muted no-wrap",children:s.item.repository}),n[0]=s.item.repository,n[1]=t):t=n[1],t}try{ez.displayName||(ez.displayName="BulkCreateDialog")}catch{}try{eQ.displayName||(eQ.displayName="IssueTree")}catch{}try{eY.displayName||(eY.displayName="IssueLocation")}catch{}function eJ(e){let t,n,s,r,o,l=(0,a.c)(11),{issueNode:c,disabled:d,onSuccess:u}=e,m=void 0!==d&&d,[p,h]=(0,_.useState)(!1),f=c;for(;f?.parent;)f=f.parent;let g=f,y=new Set;(0,ei.YR)(g,e=>y.add(e.item.type));e:{if(1===y.size&&y.has("existing-issue")){t="Review and update";break e}t="Review and create"}let v=t;return y.size>1&&"existing-issue"===c.item.type?null:(l[0]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e.preventDefault(),h(!0)},l[0]=n):n=l[0],l[1]!==v||l[2]!==m?(s=(0,i.jsx)(V.cQ,{commandId:"github:submit-form",variant:"primary",disabled:m,"data-testid":"create-bulk-issue-dialog-button",showKeybindingHint:!0,onClick:n,children:v}),l[1]=v,l[2]=m,l[3]=s):s=l[3],l[4]!==u||l[5]!==g||l[6]!==p?(r=p&&(0,i.jsx)(ez,{issueNode:g,onComplete:()=>{h(!1),u()},onCancel:()=>{h(!1)}}),l[4]=u,l[5]=g,l[6]=p,l[7]=r):r=l[7],l[8]!==s||l[9]!==r?(o=(0,i.jsxs)(i.Fragment,{children:[s,r]}),l[8]=s,l[9]=r,l[10]=o):o=l[10],o)}try{eJ.displayName||(eJ.displayName="BulkCreateButton")}catch{}function eX(e){let t,n,s,r,o,l,c=(0,a.c)(29),{issueTemplate:d,issueNode:u,issueFormRef:m,noRepoAccess:p,onClose:h,onError:f,onClearError:g}=e,y=void 0!==p&&p,[v,x]=_.useState(!1),b=_.useRef(null),[j,w]=_.useState(!1),{repository:N}=(0,$.u)(),C=N&&!d&&!N.isBlankIssuesEnabled,{clearSessionData:k}=(0,$.u)();c[0]!==k||c[1]!==m?(t=()=>{k(),m.current?.clearSessionStorage()},c[0]=k,c[1]=m,c[2]=t):t=c[2];let S=t;c[3]!==S||c[4]!==h?(n=()=>{S(),h?.(),w(!1)},c[3]=S,c[4]=h,c[5]=n):n=c[5];let I=n;c[6]!==f?(s=e=>{f?.(e),w(!1)},c[6]=f,c[7]=s):s=c[7];let T=s;c[8]!==I||c[9]!==T||c[10]!==m||c[11]!==u||c[12]!==d?(r={issueNode:u,onComplete:I,onError:T,issueFormRef:m,issueTemplate:d},c[8]=I,c[9]=T,c[10]=m,c[11]=u,c[12]=d,c[13]=r):r=c[13];let{handleCreate:E}=eG(r);if(u?.parent||u?.children.length){let e;return c[14]!==I||c[15]!==u||c[16]!==y?(e=(0,i.jsx)(eJ,{issueNode:u,disabled:y,onSuccess:I}),c[14]=I,c[15]=u,c[16]=y,c[17]=e):e=c[17],e}if(!N||!N.hasIssuesEnabled)return null;if(C){let e,t,n;return c[18]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(V.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"create-issue-dialog-button",ref:b,showKeybindingHint:!0,onClick:e=>{e.preventDefault(),x(!0)},children:"Create"}),c[18]=e):e=c[18],c[19]!==v?(t=v&&(0,i.jsx)(U.l,{title:"Select a template",onClose:()=>x(!1),footerButtons:[{buttonType:"primary",content:"OK",onClick:()=>x(!1)}],returnFocusRef:b,children:"This repository requires all issues to have a template. To create this issue, first select the appropriate template from the template dropdown."}),c[19]=v,c[20]=t):t=c[20],c[21]!==t?(n=(0,i.jsxs)(i.Fragment,{children:[e,t]}),c[21]=t,c[22]=n):n=c[22],n}return c[23]!==E||c[24]!==g?(o=e=>{e.preventDefault(),g?.(),w(!0),E()},c[23]=E,c[24]=g,c[25]=o):o=c[25],c[26]!==j||c[27]!==o?(l=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(V.cQ,{commandId:"github:submit-form",variant:"primary","data-testid":"single-create-issue-button",ref:b,inactive:j,showKeybindingHint:!0,onClick:o,children:"Create"})}),c[26]=j,c[27]=o,c[28]=l):l=c[28],l}try{eX.displayName||(eX.displayName="CreateIssueButton")}catch{}var eZ=n(99726),e0=n(73189),e1=n(38447),e2=n(15106),e3=n(66457),e4=n(58321),e5=n(921),e6=n(85391),e7=n(97764),e8=n(46036),e9=n(43063),te=n(67955);let tt={container:"RelationshipList-module__container--djndN"};function tn(e){let t,n,s,r,o,l,c,d,u,m,p=(0,a.c)(32),{listItem:h,actions:f}=e,{openItem:g,versionedItems:y}=(0,N.xx)(),{item:x}=h;p[0]!==x.id||p[1]!==y?(t=(0,B.LU)(x.id,y),p[0]=x.id,p[1]=y,p[2]=t):t=p[2];let b=t,_=x.tag;if(p[3]!==x.id||p[4]!==g?(n=()=>g(x.id,!0),p[3]=x.id,p[4]=g,p[5]=n):n=p[5],p[6]!==x.tag||p[7]!==b?(s=null!=b?[(0,i.jsx)(O.g,{version:b},`${x.tag}#${b}`)]:void 0,p[6]=x.tag,p[7]=b,p[8]=s):s=p[8],p[9]!==x.name||p[10]!==n||p[11]!==s?(r=(0,i.jsx)(e7.T,{value:x.name,onClick:n,trailingBadges:s}),p[9]=x.name,p[10]=n,p[11]=s,p[12]=r):r=p[12],p[13]===Symbol.for("react.memo_cache_sentinel")?(o=[],p[13]=o):o=p[13],p[14]!==f||p[15]!==x){let e;p[17]!==x?(e=e=>({key:e.key,render:()=>(0,i.jsxs)(v.l.Item,{onSelect:()=>e.onSelect(x),children:[(0,i.jsx)(v.l.LeadingVisual,{children:e.icon}),e.label]},`${x.tag}-${e.key}`)}),p[17]=x,p[18]=e):e=p[18],l=f.map(e),p[14]=f,p[15]=x,p[16]=l}else l=p[16];return p[19]!==l?(c=(0,i.jsx)(e4.o,{actions:o,staticMenuActions:l}),p[19]=l,p[20]=c):c=p[20],p[21]!==f||p[22]!==h.children?(d=h.children?.length?h.children?.map(e=>(0,i.jsx)(tn,{listItem:e,actions:f},e.item.tag)):void 0,p[21]=f,p[22]=h.children,p[23]=d):d=p[23],p[24]!==x?(u=(0,i.jsx)(e5.Q,{children:(0,i.jsx)(e6.D,{children:(0,i.jsx)(K.n,{...x})})}),p[24]=x,p[25]=u):u=p[25],p[26]!==x.tag||p[27]!==u||p[28]!==r||p[29]!==c||p[30]!==d?(m=(0,i.jsx)(e3.r,{title:r,secondaryActions:c,subItems:d,defaultExpanded:!0,children:u},_),p[26]=x.tag,p[27]=u,p[28]=r,p[29]=c,p[30]=d,p[31]=m):m=p[31],m}function ti(e){let t,n,s,r,o,l=(0,a.c)(15),{title:c,items:d,totalCount:u,actions:m}=e;if(0===d.length)return null;if(l[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,b.$)(tt.container,"mt-2 pb-1 border rounded-2"),l[0]=t):t=l[0],l[1]!==u?(n=(0,i.jsx)(te.A,{children:u}),l[1]=u,l[2]=n):n=l[2],l[3]!==n||l[4]!==c?(s=(0,i.jsx)(e8.s,{title:(0,i.jsx)(e9.c,{title:c,className:"p-0",children:n}),className:"border-0 bgColor-default px-3"}),l[3]=n,l[4]=c,l[5]=s):s=l[5],l[6]!==m||l[7]!==d){let e;l[9]!==m?(e=e=>(0,i.jsx)(tn,{listItem:e,actions:m},e.item.tag),l[9]=m,l[10]=e):e=l[10],r=d.map(e),l[6]=m,l[7]=d,l[8]=r}else r=l[8];return l[11]!==s||l[12]!==r||l[13]!==c?(o=(0,i.jsx)("div",{className:t,children:(0,i.jsx)(e2.v,{title:c,header:s,children:r})}),l[11]=s,l[12]=r,l[13]=c,l[14]=o):o=l[14],o}try{tn.displayName||(tn.displayName="RelationshipListItemComponent")}catch{}try{ti.displayName||(ti.displayName="RelationshipList")}catch{}function ta(){let e,t=(0,a.c)(4),n=(0,eI.b)(),i=(0,s.Pk)(),{updateItem:r}=(0,N.xx)();return t[0]!==n||t[1]!==i||t[2]!==r?(e=async(e,t)=>{(0,l.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_REMOVE_DEPENDENCY",mode:"immersive",threadId:(0,eE.W)(i)?.id,chatReferrer:document.referrer,issueTag:e.tag,issueRepository:e.repository,blockingIssueTag:t.tag});let a={type:"text",name:`timeline-event: {"type": "remove-dependency", "markdownContent": "Removed dependency on '${t.name}'"}`,text:`Remove the dependency between '${e.tag}' and '${t.tag}'. Return the updated issues.`},s={...e,blockedByTags:e.blockedByTags?.filter(e=>e!==t.tag),isUserEdited:!1};r(s);let o={...t,isBlockingTags:t.isBlockingTags?.filter(t=>t!==e.tag),isUserEdited:!1};r(o);let c=[s,o].map(ts);await n.sendChatMessage({thread:(0,eE.W)(i),content:"Remove the blocking dependency from the issue",references:[a,...c],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=n,t[1]=i,t[2]=r,t[3]=e):e=t[3],e}function ts(e){return"existing-issue"===e.type?(0,B.yA)(e):(0,B.PO)(e)}function tr(e){let t,n,s,r,l,c=(0,a.c)(11),{issueNode:d}=e,u=ta();e:{if("existing-issue"===d.item.type){t="Newly blocked by";break e}t="Blocked by"}let m=t;return o.W.draftIssuesWithDependencies?(c[0]!==d.blockedBy?(n=d.blockedBy.map(to),c[0]=d.blockedBy,c[1]=n):n=c[1],c[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,i.jsx)(h.UnlinkIcon,{}),c[2]=s):s=c[2],c[3]!==d.item||c[4]!==u?(r=[{key:"unlink",label:"Remove dependency",icon:s,onSelect:e=>{u(d.item,e)}}],c[3]=d.item,c[4]=u,c[5]=r):r=c[5],c[6]!==d.blockedBy.length||c[7]!==n||c[8]!==r||c[9]!==m?(l=(0,i.jsx)(ti,{title:m,items:n,totalCount:d.blockedBy.length,actions:r}),c[6]=d.blockedBy.length,c[7]=n,c[8]=r,c[9]=m,c[10]=l):l=c[10],l):null}function to(e){return{item:e.item}}try{tr.displayName||(tr.displayName="BlockedByList")}catch{}function tl(e){let t,n,s,r,l,c=(0,a.c)(11),{issueNode:d}=e,u=ta();e:{if("existing-issue"===d.item.type){t="Newly blocking";break e}t="Is blocking"}let m=t;return o.W.draftIssuesWithDependencies?(c[0]!==d.isBlocking?(n=d.isBlocking.map(tc),c[0]=d.isBlocking,c[1]=n):n=c[1],c[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,i.jsx)(h.UnlinkIcon,{}),c[2]=s):s=c[2],c[3]!==d.item||c[4]!==u?(r=[{key:"unlink",label:"Remove dependency",icon:s,onSelect:e=>{u(e,d.item)}}],c[3]=d.item,c[4]=u,c[5]=r):r=c[5],c[6]!==d.isBlocking.length||c[7]!==n||c[8]!==r||c[9]!==m?(l=(0,i.jsx)(ti,{title:m,items:n,totalCount:d.isBlocking.length,actions:r}),c[6]=d.isBlocking.length,c[7]=n,c[8]=r,c[9]=m,c[10]=l):l=c[10],l):null}function tc(e){return{item:e.item}}try{tl.displayName||(tl.displayName="BlockingList")}catch{}function td({issueNode:e}){let t=function(){let e,t=(0,a.c)(4),n=(0,eI.b)(),i=(0,s.Pk)(),{updateItem:r}=(0,N.xx)();return t[0]!==n||t[1]!==i||t[2]!==r?(e=async e=>{(0,l.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_UNLINK_FROM_PARENT",mode:"immersive",threadId:(0,eE.W)(i)?.id,chatReferrer:document.referrer,issueRepository:e.repository,issueTab:e.tag,parentIssueTag:e.parentTag});let t={type:"text",name:`timeline-event: {"type": "unlink-sub-issue", "markdownContent": "Unlinked sub-issue '${e.name}'"}`,text:`Unlink the sub issue '${e.tag}' from its parent issue by removing the 'parentTag' field. Return the updated '${e.tag}' draft-issue.`},a={...e,parentTag:void 0,isUserEdited:!1};r(a);let s="existing-issue"===a.type?(0,B.yA)(a):(0,B.PO)(a);await n.sendChatMessage({thread:(0,eE.W)(i),content:"Unlink the sub-issue from its parent issue",references:[t,s],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=n,t[1]=i,t[2]=r,t[3]=e):e=t[3],e}(),n=(0,_.useMemo)(()=>"existing-issue"===e.item.type?"New sub-issues":"Sub-issues",[e]),r=(0,_.useMemo)(()=>{if(!e)return 0;let t=-1;return(0,ei.YR)(e,()=>t++),t},[e]);return(0,i.jsx)(ti,{title:n,items:function e(t){return t.map(t=>({item:t.item,children:e(t.children)}))}(e.children),totalCount:r,actions:[{key:"unlink",label:"Unlink sub-issue",icon:(0,i.jsx)(h.UnlinkIcon,{}),onSelect:e=>{t(e)}}]})}try{td.displayName||(td.displayName="SubissuesList")}catch{}function tu(e){let t,n=(0,a.c)(2),{issueNode:s}=e;return n[0]!==s?(t=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(td,{issueNode:s}),(0,i.jsx)(tr,{issueNode:s}),(0,i.jsx)(tl,{issueNode:s})]}),n[0]=s,n[1]=t):t=n[1],t}try{tu.displayName||(tu.displayName="RelationshipsSection")}catch{}var tm=n(33987),tp=n(46996),th=n(19720);function tf(e,t){let n,i,s,r,o,l,c,d,u,m,p,h=(0,a.c)(45),{draftValue:f,formValue:g,setFormValue:y,onChange:v,resolverResult:x,hasPermission:b,isEqual:j,defaultValue:w}=t,{repository:N}=(0,$.u)(),C=(0,_.useRef)(!0),k=(0,_.useRef)(void 0),S=(0,_.useRef)(e.id);h[0]!==e.id?(n=()=>{S.current!==e.id&&(C.current=!0,k.current=void 0,S.current=e.id)},h[0]=e.id,h[1]=n):n=h[1],h[2]!==e.id||h[3]!==g?(i=[e.id,g],h[2]=e.id,h[3]=g,h[4]=i):i=h[4],(0,_.useEffect)(n,i),N?.nameWithOwner;let I=e.repository&&N?.nameWithOwner===e.repository,{isLoading:T,data:E}=x,L=(null!=f||!e.isStreaming)&&!T;h[5]!==I||h[6]!==L?(s=()=>{I&&!L&&(C.current=!0)},r=[I,L],h[5]=I,h[6]=L,h[7]=s,h[8]=r):(s=h[7],r=h[8]),(0,_.useEffect)(s,r),h[9]!==j||h[10]!==v?(o=(e,t)=>{void 0!==k.current&&j(k.current,e)||(v(e,t),k.current=e)},h[9]=j,h[10]=v,h[11]=o):o=h[11];let R=o;h[12]!==w||h[13]!==I||h[14]!==b||h[15]!==L||h[16]!==R||h[17]!==N||h[18]!==E||h[19]!==y?(l=()=>{I&&L&&(b(N)?(y(E),R(E,!0)):null!=N&&(y(w),R(w,!0)))},c=[I,L,R,N,E,y,b,w],h[12]=w,h[13]=I,h[14]=b,h[15]=L,h[16]=R,h[17]=N,h[18]=E,h[19]=y,h[20]=l,h[21]=c):(l=h[20],c=h[21]),(0,_.useEffect)(l,c),h[22]!==w||h[23]!==g||h[24]!==I||h[25]!==b||h[26]!==j||h[27]!==L||h[28]!==N||h[29]!==E?(d=()=>{if(!C.current||void 0===k.current||!I||!L||!N)return;let e=b(N);e&&g===E?C.current=!1:!e&&j(g,w)&&(C.current=!1)},h[22]=w,h[23]=g,h[24]=I,h[25]=b,h[26]=j,h[27]=L,h[28]=N,h[29]=E,h[30]=d):d=h[30],h[31]!==w||h[32]!==e.id||h[33]!==g||h[34]!==I||h[35]!==b||h[36]!==j||h[37]!==L||h[38]!==N||h[39]!==E?(u=[e.id,I,L,E,N,g,b,w,j],h[31]=w,h[32]=e.id,h[33]=g,h[34]=I,h[35]=b,h[36]=j,h[37]=L,h[38]=N,h[39]=E,h[40]=u):u=h[40],(0,_.useEffect)(d,u),h[41]!==g||h[42]!==R?(p=()=>{C.current||R(g,!1)},m=[g,R],h[41]=g,h[42]=R,h[43]=m,h[44]=p):(m=h[43],p=h[44]),(0,_.useEffect)(p,m)}var tg=n(40104);function ty(e){let{openItem:t,updateItem:n}=(0,N.xx)(),{selectedThreadID:i}=(0,s.Pk)(),a=function(e){let{messages:t}=(0,s.Pk)(),{tag:n,issueNumber:i}=e,a=i&&o.W.draftUpdateIssue?"update-issue":"new-issue";return`${a}:${n}#${t.length}`}(e),r=`edited-${i}-${a}`,[c,d]=(0,tg.Fo)(r,void 0);return(0,_.useCallback)((s,r=!1)=>{let c,u=!1;for(c in s)(0,tp.A)(s[c],e[c])||(u=!0,"name"!==c&&"body"!==c&&"defaultValuesById"!==c&&(0,l.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_USER_CHANGED_FIELD",mode:"immersive",threadId:i,repository:e.repository,issueTag:e.tag,userChangedField:c,wasEmpty:function(e){switch(typeof e){case"string":return!e;case"object":if(Array.isArray(e))return!e||0===e.length;return null==e;default:return null==e}}(e[c])}));if(!u)return;let m={...e,...s};!r&&(m.id=a,m.isUserEdited=!0,o.W.copilotPersistEditedDraftIssues&&d(m)),n(m),t(m.id)},[e,n,t,i,a,d])}function tv(e){return e?.viewerIssueCreationPermissions?.assignable}function tx(e){return(0,tm.i)(e)}let tb=function(){var e={defaultValue:100,kind:"LocalArgument",name:"count"},t={defaultValue:"",kind:"LocalArgument",name:"labelNames"},n={defaultValue:null,kind:"LocalArgument",name:"owner"},i={defaultValue:null,kind:"LocalArgument",name:"repo"},a=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],s=[{kind:"Variable",name:"first",variableName:"count"},{kind:"Variable",name:"names",variableName:"labelNames"},{kind:"Literal",name:"orderBy",value:{direction:"ASC",field:"NAME"}}],r={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},o=[r,{alias:null,args:null,kind:"ScalarField",name:"color",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"nameHTML",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}];return{fragment:{argumentDefinitions:[e,t,n,i],kind:"Fragment",metadata:null,name:"useLabelsQueryQuery",selections:[{alias:null,args:a,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:s,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:[{kind:"InlineDataFragmentSpread",name:"LabelPickerLabel",selections:o,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,i,t,e],kind:"Operation",name:"useLabelsQueryQuery",selections:[{alias:null,args:a,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:s,concreteType:"LabelConnection",kind:"LinkedField",name:"labels",plural:!1,selections:[{alias:null,args:null,concreteType:"Label",kind:"LinkedField",name:"nodes",plural:!0,selections:o,storageKey:null}],storageKey:null},r],storageKey:null}]},params:{id:"b807cb351c9187646a1c1af734d12afb",metadata:{},name:"useLabelsQueryQuery",operationKind:"query",text:null}}}();tb.hash="e88ca04244b8cb67aad293081213c7ad";var t_=n(32050),tj=n(30721);function tw(e){return(0,t_.P5)(e)}function tN(e){return!!e}function tC(e){return e?.viewerIssueCreationPermissions?.labelable}function tk(e){return e.name}var tS=n(90921),tI=n(97665);function tT(e,t){var n,i;return n=e?.title,i=t?.title,n?.toLowerCase()===i?.toLowerCase()}function tE(e){return e?.viewerIssueCreationPermissions?.milestoneable}var tL=n(73580);function tR(e){return!1===e.hasReachedItemsLimit}function tA(e){return!1===e.closed}function tD(e,t){return e.set(t.id,t),e}function tP(e){return e.toLowerCase()}function tO(e){return!!e}function tB(e){return e.title}function tF(e){return e.id}function tM(e){return!!e.id}function t$(e){return e?.viewerIssueCreationPermissions?.triageable}function tV(e){return{id:e.id,title:e.title}}var tU=n(69599),tq=n(36202),tW=n(83001);function tH(e,t){return e?.toLowerCase()===t?.toLowerCase()}function tG(e,t){return tH(e?.name,t?.name)}function tK(e){return e?.viewerIssueCreationPermissions?.typeable}function tz(e){let t,n,r,o,c,d,u,m,p,f,g=(0,a.c)(44),{draftIssue:y,issueNode:v,template:x,issueFormRef:b,loadingDraftIssueRepo:j,onChange:w,onClose:N,onBeforeCreate:C,onFieldChange:k}=e,{name:S,body:T,defaultValuesById:E}=y,L=void 0===T?"":T,{repository:R,clearSessionData:A}=(0,$.u)(),[D,O]=(0,_.useState)(S),[B,F]=(0,_.useState)(L),M=function(){let e,t=(0,a.c)(3),n=(0,eI.b)(),i=(0,s.Pk)();return t[0]!==n||t[1]!==i?(e=async(e,t,a)=>{let s;if(e.parentMessageID&&(s=i.messages.findLast(t=>t.id===e.parentMessageID&&"root"!==t.id)),!s||!s.content)return;(0,l.BI)("dotcom_chat.activate",{target:"BROWSER_ISSUE_RETRY_MESSAGE",mode:"immersive",threadId:(0,eE.W)(i)?.id,customMessage:t});let r={type:"text",name:`timeline-event: {"type": "automatic-retry", "markdownContent": "${t??"Copilot failed to generate a response, retrying\u2026"}"}`,text:a,icon:h.XIcon};await n.sendChatMessage({thread:(0,eE.W)(i),content:s.content,references:[...s.references??[],r],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model,parentMessageId:e.id})},t[0]=n,t[1]=i,t[2]=e):e=t[2],e}(),V=(0,s.Pk)();g[0]!==A||g[1]!==b?(t=()=>{A(),b.current?.clearSessionStorage()},g[0]=A,g[1]=b,g[2]=t):t=g[2];let U=t;g[3]!==U||g[4]!==N?(n=()=>{U(),N?.()},g[3]=U,g[4]=N,g[5]=n):n=g[5];let q=n;if(g[6]!==L||g[7]!==S?(r=()=>{O(S),F(L)},o=[L,S],g[6]=L,g[7]=S,g[8]=r,g[9]=o):(r=g[8],o=g[9]),(0,_.useEffect)(r,o),!function(e){let t,n,i,s,r,o=(0,a.c)(15),{repository:l,assignees:c,setAssignees:d}=(0,$.u)(),u=ty(e),m=e.assignees;o[0]!==u?(t=(e,t)=>u({assignees:e.map(tx)},t),o[0]=u,o[1]=t):t=o[1];let p=l?.owner.login,h=l?.name;o[2]!==e.assignees?(n=e.assignees??[],o[2]=e.assignees,o[3]=n):n=o[3],o[4]!==p||o[5]!==h||o[6]!==n?(i={owner:p,repo:h,assignees:n},o[4]=p,o[5]=h,o[6]=n,o[7]=i):i=o[7];let f=function(e){let t,n,i,s,r,o=(0,a.c)(16),{owner:l,repo:c,assignees:d}=e,u=(0,en.useRelayEnvironment)();o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,tm.M)({includeAuthorableBots:!1,includeAssignableBots:!0}),o[0]=t):t=o[0];let m=t;return o[1]!==u?(n=JSON.stringify(u),o[1]=u,o[2]=n):n=o[2],o[3]!==d||o[4]!==l||o[5]!==c||o[6]!==n?(i=["copilot-immersive-assignees",n,m,l,c,d],o[3]=d,o[4]=l,o[5]=c,o[6]=n,o[7]=i):i=o[7],o[8]!==d||o[9]!==u||o[10]!==l||o[11]!==c?(s=async()=>l&&c&&d?await (0,th.fH)(u,{owner:l,repo:c,assignees:d,capabilities:m}):[],o[8]=d,o[9]=u,o[10]=l,o[11]=c,o[12]=s):s=o[12],o[13]!==i||o[14]!==s?(r={queryKey:i,queryFn:s},o[13]=i,o[14]=s,o[15]=r):r=o[15],(0,ec.I)(r)}(i);o[8]===Symbol.for("react.memo_cache_sentinel")?(s=[],o[8]=s):s=o[8],o[9]!==e.assignees||o[10]!==c||o[11]!==d||o[12]!==t||o[13]!==f?(r={draftValue:m,formValue:c,setFormValue:d,onChange:t,resolverResult:f,hasPermission:tv,isEqual:tp.A,defaultValue:s},o[9]=e.assignees,o[10]=c,o[11]=d,o[12]=t,o[13]=f,o[14]=r):r=o[14],tf(e,r)}(y),!function(e){let t,n,i,s,r,o=(0,a.c)(15),{repository:l,labels:c,setLabels:d}=(0,$.u)(),u=ty(e),m=e.labels;o[0]!==u?(t=(e,t)=>u({labels:e.map(tk)},t),o[0]=u,o[1]=t):t=o[1];let p=l?.owner.login,h=l?.name;o[2]!==e.labels?(n=e.labels??[],o[2]=e.labels,o[3]=n):n=o[3],o[4]!==p||o[5]!==h||o[6]!==n?(i={owner:p,repo:h,labels:n},o[4]=p,o[5]=h,o[6]=n,o[7]=i):i=o[7];let f=function(e){let t,n,i,s,r=(0,a.c)(15),{owner:o,repo:l,labels:c}=e,d=(0,en.useRelayEnvironment)();return r[0]!==d?(t=JSON.stringify(d),r[0]=d,r[1]=t):t=r[1],r[2]!==c||r[3]!==o||r[4]!==l||r[5]!==t?(n=["copilot-immersive-labels",t,o,l,c],r[2]=c,r[3]=o,r[4]=l,r[5]=t,r[6]=n):n=r[6],r[7]!==d||r[8]!==c||r[9]!==o||r[10]!==l?(i=async()=>{if(!o||!l||!c)return[];let e=await (0,tj.SD)({environment:d,query:tb,variables:{owner:o,repo:l,labelNames:c.join(","),count:c.length}}).toPromise();return(e?.repository?.labels?.nodes??[]).filter(tN).map(tw)},r[7]=d,r[8]=c,r[9]=o,r[10]=l,r[11]=i):i=r[11],r[12]!==n||r[13]!==i?(s={queryKey:n,queryFn:i},r[12]=n,r[13]=i,r[14]=s):s=r[14],(0,ec.I)(s)}(i);o[8]===Symbol.for("react.memo_cache_sentinel")?(s=[],o[8]=s):s=o[8],o[9]!==e.labels||o[10]!==c||o[11]!==d||o[12]!==t||o[13]!==f?(r={draftValue:m,formValue:c,setFormValue:d,onChange:t,resolverResult:f,hasPermission:tC,isEqual:tp.A,defaultValue:s},o[9]=e.labels,o[10]=c,o[11]=d,o[12]=t,o[13]=f,o[14]=r):r=o[14],tf(e,r)}(y),!function(e){let t,n,i,s,r,o=(0,a.c)(17),{repository:l,issueType:c,setIssueType:d}=(0,$.u)(),u=ty(e),m=l?.owner.login,p=l?.name;o[0]!==m||o[1]!==p?(t={owner:m,repo:p},o[0]=m,o[1]=p,o[2]=t):t=o[2];let h=function(e){let t,n,i,s,r=(0,a.c)(14),{owner:o,repo:l}=e,c=(0,en.useRelayEnvironment)(),d=(0,tI.jE)();r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,tU.G7)("item_picker_issue_type_tsq_migration"),r[0]=t):t=r[0];let u=t;r[1]!==c||r[2]!==o||r[3]!==d||r[4]!==l?(n=u?["copilot-immersive-issue-types",JSON.stringify(d),o,l]:["copilot-immersive-issue-types",JSON.stringify(c),o,l],r[1]=c,r[2]=o,r[3]=d,r[4]=l,r[5]=n):n=r[5];let m=n;r[6]!==c||r[7]!==o||r[8]!==d||r[9]!==l?(i=async()=>o&&l?u?(await (0,tW.R)(d,{owner:o,repo:l,query:"",count:25})).issueTypes:await (0,tq.RX)(c,{owner:o,repo:l,pageSize:25}):[],r[6]=c,r[7]=o,r[8]=d,r[9]=l,r[10]=i):i=r[10];let p=i;return r[11]!==p||r[12]!==m?(s={queryKey:m,queryFn:p},r[11]=p,r[12]=m,r[13]=s):s=r[13],(0,ec.I)(s)}(t);e:{let t;if(h.isLoading||!e.issueType){n=null;break e}o[3]!==e.issueType||o[4]!==h.data?(t=h.data?.find(t=>tH(t.name,e.issueType))||null,o[3]=e.issueType,o[4]=h.data,o[5]=t):t=o[5],n=t}let f=n;o[6]!==u?(i=(e,t)=>u({issueType:e?.name},t),o[6]=u,o[7]=i):i=o[7],o[8]!==f||o[9]!==h.isLoading?(s={isLoading:h.isLoading,data:f},o[8]=f,o[9]=h.isLoading,o[10]=s):s=o[10],o[11]!==e.issueType||o[12]!==c||o[13]!==d||o[14]!==i||o[15]!==s?(r={draftValue:e.issueType,formValue:c,setFormValue:d,onChange:i,resolverResult:s,hasPermission:tK,isEqual:tG,defaultValue:null},o[11]=e.issueType,o[12]=c,o[13]=d,o[14]=i,o[15]=s,o[16]=r):r=o[16],tf(e,r)}(y),!function(e){let t,n,i,s,r=(0,a.c)(15),{repository:o,milestone:l,setMilestone:c}=(0,$.u)(),d=ty(e),u=o?.owner.login,m=o?.name;r[0]!==e.milestone||r[1]!==u||r[2]!==m?(t={owner:u,repo:m,milestone:e.milestone},r[0]=e.milestone,r[1]=u,r[2]=m,r[3]=t):t=r[3];let p=function(e){let t,n,i,s,r=(0,a.c)(15),{owner:o,repo:l,milestone:c}=e,d=(0,tI.jE)();return r[0]!==d?(t=JSON.stringify(d),r[0]=d,r[1]=t):t=r[1],r[2]!==c||r[3]!==o||r[4]!==l||r[5]!==t?(n=["copilot-immersive-milestones",t,o,l,c],r[2]=c,r[3]=o,r[4]=l,r[5]=t,r[6]=n):n=r[6],r[7]!==c||r[8]!==o||r[9]!==d||r[10]!==l?(i=async()=>o&&l&&c?(await (0,tS.U)(d,{owner:o,repo:l,query:c,count:1})).milestones:[],r[7]=c,r[8]=o,r[9]=d,r[10]=l,r[11]=i):i=r[11],r[12]!==n||r[13]!==i?(s={queryKey:n,queryFn:i},r[12]=n,r[13]=i,r[14]=s):s=r[14],(0,ec.I)(s)}(t),h=p.data?.[0]??null;r[4]!==d?(n=(e,t)=>d({milestone:e?.title},t),r[4]=d,r[5]=n):n=r[5],r[6]!==h||r[7]!==p.isLoading?(i={isLoading:p.isLoading,data:h},r[6]=h,r[7]=p.isLoading,r[8]=i):i=r[8],r[9]!==e.milestone||r[10]!==l||r[11]!==c||r[12]!==n||r[13]!==i?(s={draftValue:e.milestone,formValue:l,setFormValue:c,onChange:n,resolverResult:i,hasPermission:tE,isEqual:tT,defaultValue:null},r[9]=e.milestone,r[10]=l,r[11]=c,r[12]=n,r[13]=i,r[14]=s):s=r[14],tf(e,s)}(y),!function(e){let t,n,i,s,r,o=(0,a.c)(15),{repository:l,projects:c,setProjects:d}=(0,$.u)(),u=ty(e),m=e.projects;o[0]!==u?(t=(e,t)=>u({projects:e.map(tV)},t),o[0]=u,o[1]=t):t=o[1];let p=l?.owner.login,h=l?.name;o[2]!==e.projects?(n=e.projects??[],o[2]=e.projects,o[3]=n):n=o[3],o[4]!==p||o[5]!==h||o[6]!==n?(i={owner:p,repo:h,projects:n},o[4]=p,o[5]=h,o[6]=n,o[7]=i):i=o[7];let f=function(e){let t,n,i,s,r=(0,a.c)(15),{owner:o,repo:l,projects:c}=e,d=(0,en.useRelayEnvironment)();return r[0]!==d?(t=JSON.stringify(d),r[0]=d,r[1]=t):t=r[1],r[2]!==o||r[3]!==c||r[4]!==l||r[5]!==t?(n=["copilot-immersive-projects",t,o,l,c],r[2]=o,r[3]=c,r[4]=l,r[5]=t,r[6]=n):n=r[6],r[7]!==d||r[8]!==o||r[9]!==c||r[10]!==l?(i=async()=>{if(!o||!l||!c||!c.length)return[];let e=new Set(c.filter(tM).map(tF)),t=c.map(tB).filter(tO),n=new Set(t.map(tP)),i=t.length>0?Array.from(new Set(t)).join(","):"",{repositoryProjects:a,recentRepositoryProjects:s,ownerProjects:r,recentOwnerProjects:u}=await (0,tL.vj)(d,{owner:o,repo:l,query:i}),m=[...[...a,...s,...r,...u].reduce(tD,new Map).values()].filter(tA).filter(tR).filter(t=>!!(t.id&&e.has(t.id))||n.has(t.title.toLowerCase())),p=new Set;return m.sort((t,n)=>{let i=e.has(t.id),a=e.has(n.id);return i&&!a?-1:!i&&a?1:0}).filter(e=>{let t=e.title.toLowerCase();return!p.has(t)&&(p.add(t),!0)})},r[7]=d,r[8]=o,r[9]=c,r[10]=l,r[11]=i):i=r[11],r[12]!==n||r[13]!==i?(s={queryKey:n,queryFn:i},r[12]=n,r[13]=i,r[14]=s):s=r[14],(0,ec.I)(s)}(i);o[8]===Symbol.for("react.memo_cache_sentinel")?(s=[],o[8]=s):s=o[8],o[9]!==e.projects||o[10]!==c||o[11]!==d||o[12]!==t||o[13]!==f?(r={draftValue:m,formValue:c,setFormValue:d,onChange:t,resolverResult:f,hasPermission:t$,isEqual:tp.A,defaultValue:s},o[9]=e.projects,o[10]=c,o[11]=d,o[12]=t,o[13]=f,o[14]=r):r=o[14],tf(e,r)}(y),null==R){let e;if(void 0===y.repository&&y.isStreaming||j){let e;return g[10]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(I.Q,{optionConfig:{useViewportQueries:!1}}),g[10]=e):e=g[10],e}return g[11]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(P,{title:"Repository required",description:"Please select a repository above to continue creating your issue.",icon:h.IssueDraftIcon}),g[11]=e):e=g[11],e}let W=V.messages.at(-1);if(W&&(0,e1.E)(W,["switch-issue-template","switch-issue-repo"])){let e;return g[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(I.Q,{optionConfig:{useViewportQueries:!1}}),g[12]=e):e=g[12],e}let H=V.messages;if(g[13]!==E||g[14]!==y.messageId||g[15]!==M||g[16]!==V.isWaitingOnCopilot||g[17]!==V.messages||g[18]!==x){c=Symbol.for("react.early_return_sentinel");e:{let e=H.find(e=>e.id===y.messageId),t=e?.parentMessageIndex!==void 0?V.messages[e.parentMessageIndex]:void 0;if(e&&t){let n=x&&(0,Y.GQ)(x.data),a=0===Object.keys(E||{}).length,s=!V.isWaitingOnCopilot,r=e.messageIndex===V.messages.length-1,o="assistant"===e.role,l=(0,e1.E)(t,["automatic-retry"]);if(n&&a)if(s)if(r&&o&&!l){let t;M(e,"Copilot failed to use the issue template, retrying\u2026","Force a retry of the user's request and make sure to generate template form values properly. Do not send the same response as the previous attempt."),g[21]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(I.Q,{optionConfig:{useViewportQueries:!1}}),g[21]=t):t=g[21],c=t;break e}else{let e;g[22]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(P,{title:"Copilot failed to create an issue",description:"Copilot failed to use the issue template. Please retry or choose a different template.",icon:h.IssueDraftIcon}),g[22]=e):e=g[22],c=e;break e}else{let e;g[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(I.Q,{optionConfig:{useViewportQueries:!1}}),g[20]=e):e=g[20],c=e;break e}}}g[13]=E,g[14]=y.messageId,g[15]=M,g[16]=V.isWaitingOnCopilot,g[17]=V.messages,g[18]=x,g[19]=c}else c=g[19];return c!==Symbol.for("react.early_return_sentinel")?c:(g[23]!==w?(d=e=>{O(e),w?.({name:e})},u=e=>{F(e),w?.({body:e})},g[23]=w,g[24]=d,g[25]=u):(d=g[24],u=g[25]),g[26]!==E||g[27]!==B||g[28]!==y.messageId||g[29]!==b||g[30]!==C||g[31]!==q||g[32]!==k||g[33]!==R||g[34]!==d||g[35]!==u||g[36]!==x||g[37]!==D?(m=(0,i.jsx)(eZ.e,{repository:R,title:D,body:B,setTitle:d,setBody:u,clearOnCreate:q,issueFormRef:b,onCreateSuccess:e0.l,onCreateError:e0.l,onCancel:q,onBeforeCreate:C,defaultValuesById:E,selectedTemplate:x,onFieldChange:k,clientMutationId:y.messageId}),g[26]=E,g[27]=B,g[28]=y.messageId,g[29]=b,g[30]=C,g[31]=q,g[32]=k,g[33]=R,g[34]=d,g[35]=u,g[36]=x,g[37]=D,g[38]=m):m=g[38],g[39]!==v?(p=v&&(0,i.jsx)(tu,{issueNode:v}),g[39]=v,g[40]=p):p=g[40],g[41]!==m||g[42]!==p?(f=(0,i.jsxs)(i.Fragment,{children:[m,p]}),g[41]=m,g[42]=p,g[43]=f):f=g[43],f)}try{tz.displayName||(tz.displayName="CreateIssueForm")}catch{}let tQ={container:"CreateIssuePreview-module__container--xRZfA IssuePreview-module__container--O4xBI",toolbar:"CreateIssuePreview-module__toolbar--DOlv4 FilePreview-module__toolbar--ZZWN1",toolbarLeft:"CreateIssuePreview-module__toolbarLeft--kUeFB FilePreview-module__toolbarLeft--RCKxW",toolbarActions:"CreateIssuePreview-module__toolbarActions--n_D57 FilePreview-module__toolbarActions--h04aW",parentSelectorAnchor:"CreateIssuePreview-module__parentSelectorAnchor--qiqro",truncateText:"CreateIssuePreview-module__truncateText--Cyrbf",form:"CreateIssuePreview-module__form--X4Vwp"};var tY=n(87448);function tJ({node:e,onItemSelected:t}){let n=(0,_.useMemo)(()=>{let t=[],n=e;for(;n;)t.push(n),n=n.parent;return t.reverse()},[e]);if(e.parent)return(0,i.jsxs)(y.W,{children:[(0,i.jsxs)(y.W.Button,{variant:"invisible",className:tQ.parentSelectorAnchor,children:[(0,i.jsx)("span",{className:"fgColor-muted",children:"Parent:"})," ",e?.parent?.item.name]}),(0,i.jsx)(y.W.Overlay,{width:"large",children:(0,i.jsx)(tY.lF,{children:n.map((n,a)=>(0,i.jsxs)(tY.lF.Item,{active:n.item.tag===e.item.tag,onSelect:()=>t(n),sx:{paddingLeft:`calc(${a} * var(--base-size-12))`},children:[(0,i.jsx)(tY.lF.LeadingVisual,{children:(0,i.jsx)(K.n,{...n.item})}),(0,i.jsx)("div",{className:tQ.truncateText,children:n.item.name})]},n.item.tag))})})]})}try{tJ.displayName||(tJ.displayName="ParentSelector")}catch{}var tX=n(3398),tZ=n(33544);let t0={container:"RepositoryPicker-module__container--codNO",label:"RepositoryPicker-module__label--WplGo",ssoBanner:"RepositoryPicker-module__ssoBanner--TbTWl"};function t1(e){let t,n,r,o,l,c,d,u,m=(0,a.c)(21),{draftIssue:p,resolvedDraftIssueRepo:h,loadingDraftIssueRepo:f,topRepos:g}=e,[y,v]=(0,_.useState)(void 0),{repository:x}=(0,$.u)(),j=function(e){let t,n=(0,a.c)(5),i=(0,eI.b)(),r=(0,s.Pk)(),{updateItem:o}=(0,N.xx)();return n[0]!==e||n[1]!==i||n[2]!==r||n[3]!==o?(t=async(t,n)=>{let a=`${n}/${t}`,s=[{type:"text",name:`timeline-event: {"type": "switch-issue-repo", "markdownContent": "Changing repository to ${a}\u{2026}"}`,text:`Update draft issue with tag \`${e.tag}\` to use the \`${a}\` repository. DO NOT ask the user for a template. If there is a template in the new repository that makes sense to use, use it. If you cannot find a template, draft a blank issue. Regenerate the title and description. Maintain all conversation context. Update the metadata to follow the new repository and template. DO NOT change the \`tag\` or \`parentTag\` fields.`}];if(e.isUserEdited){let t={...e,...a&&{repository:a},isUserEdited:!1};o(t),s.push((0,B.PO)(t))}await i.sendChatMessage({thread:(0,eE.W)(r),content:`Use the ${a} repository`,references:[...s,...r.currentReferences],topic:r.currentTopic,context:r.context,customInstructions:r.customInstructions,model:r.model})},n[0]=e,n[1]=i,n[2]=r,n[3]=o,n[4]=t):t=n[4],t}(p);m[0]!==j?(t=e=>{null!=e&&j(e.name,e.owner.login)},m[0]=j,m[1]=t):t=m[1];let w=t;!function(e,t,n,i){let s,r,o,l,c,d,u,m,p,h,f,g=(0,a.c)(32),{repository:y,setRepository:v}=(0,$.u)(),x=(0,_.useRef)(!0),b=(0,_.useRef)(null),j=(0,_.useRef)(void 0),w=ty(e);g[0]!==e.id?(s=()=>{b.current!==e.id&&(x.current=!0,j.current=void 0,b.current=e.id)},g[0]=e.id,g[1]=s):s=g[1],g[2]!==e.id||g[3]!==y?(r=[e.id,y],g[2]=e.id,g[3]=y,g[4]=r):r=g[4],(0,_.useEffect)(s,r);let N=(null!=e.repository||!e.isStreaming)&&!n;g[5]!==N?(o=()=>{N||(x.current=!0)},l=[N],g[5]=N,g[6]=o,g[7]=l):(o=g[6],l=g[7]),(0,_.useEffect)(o,l),g[8]!==w?(c=(e,t)=>{var n,i;(void 0===j.current||(n=j.current?.nameWithOwner,i=e?.nameWithOwner,n?.toLowerCase()!==i?.toLowerCase()))&&(w({repository:e?.nameWithOwner},t),j.current=e??null)},g[8]=w,g[9]=c):c=g[9];let C=c;g[10]!==N||g[11]!==C||g[12]!==t||g[13]!==v||g[14]!==i?(d=()=>{N&&(null!=t?(v(t),C(t,!0)):i.length>0?(v(i[0]),C(i[0],!0)):(v(void 0),C(void 0,!0)))},u=[N,C,t,v,i],g[10]=N,g[11]=C,g[12]=t,g[13]=v,g[14]=i,g[15]=d,g[16]=u):(d=g[15],u=g[16]),(0,_.useEffect)(d,u),g[17]!==y||g[18]!==N||g[19]!==t||g[20]!==i?(m=()=>{x.current&&void 0!==j.current&&N&&(null!=t&&t===y||null==t&&i.length>0&&y===i[0]?x.current=!1:null==t&&i.length<=0&&void 0===y&&(x.current=!1))},g[17]=y,g[18]=N,g[19]=t,g[20]=i,g[21]=m):m=g[21],g[22]!==e.id||g[23]!==y||g[24]!==N||g[25]!==t||g[26]!==i?(p=[e.id,N,t,i,y],g[22]=e.id,g[23]=y,g[24]=N,g[25]=t,g[26]=i,g[27]=p):p=g[27],(0,_.useEffect)(m,p),g[28]!==y||g[29]!==C?(f=()=>{x.current||C(y,!1)},h=[y,C],g[28]=y,g[29]=C,g[30]=h,g[31]=f):(h=g[30],f=g[31]),(0,_.useEffect)(f,h)}(p,h,f,g),m[2]!==x||m[3]!==f||m[4]!==g?(n=()=>{f||null==x||null==g||g.find(e=>e.id===x.id)||v(x.id)},r=[x,f,g],m[2]=x,m[3]=f,m[4]=g,m[5]=n,m[6]=r):(n=m[5],r=m[6]),(0,_.useEffect)(n,r);let{ssoOrganizations:C}=(0,s.Pk)();m[7]!==C?(o=C?.map(t3)??[],m[7]=C,m[8]=o):o=m[8];let k=o,S=x??g?.[0],I=p.isStreaming||f;return m[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,i.jsx)(tX.A,{className:(0,b.$)(t0.label,"sr-only"),required:!0,children:"Repository"}),m[9]=l):l=m[9],m[10]!==I?(c={hasIssuesEnabled:!0,readonly:I},m[10]=I,m[11]=c):c=m[11],m[12]!==k?(d=(0,tU.G7)("global_sso_banner")?void 0:(0,i.jsx)(tZ.x,{className:t0.ssoBanner,forceWrap:!0,protectedOrgs:k,maxVisibleOrgNames:0,redirectURI:t2}),m[12]=k,m[13]=d):d=m[13],m[14]!==y||m[15]!==w||m[16]!==S||m[17]!==c||m[18]!==d||m[19]!==g?(u=(0,i.jsxs)("div",{className:t0.container,children:[l,(0,i.jsx)(X.f0,{initialRepository:S,onSelect:w,options:c,topRepositories:g,enforceAtleastOneSelected:!0,subtitle:d},y)]}),m[14]=y,m[15]=w,m[16]=S,m[17]=c,m[18]=d,m[19]=g,m[20]=u):u=m[20],u}function t2(){return`/search/refresh_blackbird_caches?return_to=${location.href}`}function t3(e){return e.login}try{t1.displayName||(t1.displayName="RepositoryPicker")}catch{}let t4=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"owner"},{defaultValue:null,kind:"LocalArgument",name:"repo"}],t=[{kind:"Variable",name:"name",variableName:"repo"},{kind:"Variable",name:"owner",variableName:"owner"}],n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"filename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},s=[n,i,a,{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],r=[n,i,a,{alias:null,args:null,kind:"ScalarField",name:"about",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"TemplatePickerQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:[n,{kind:"InlineDataFragmentSpread",name:"TemplatePickerForm",selections:s,args:null,argumentDefinitions:[]}],storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:[n,{kind:"InlineDataFragmentSpread",name:"TemplatePickerTemplate",selections:r,args:null,argumentDefinitions:[]}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"TemplatePickerQuery",selections:[{alias:null,args:t,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"IssueForm",kind:"LinkedField",name:"issueForms",plural:!0,selections:s,storageKey:null},{alias:null,args:null,concreteType:"IssueTemplate",kind:"LinkedField",name:"issueTemplates",plural:!0,selections:r,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"453f03781d915408c3c338e5d346e0be",metadata:{},name:"TemplatePickerQuery",operationKind:"query",text:null}}}();t4.hash="582a468668cd62a5a95ad0f91f7ea5e5";let t5={kind:"InlineDataFragment",name:"TemplatePickerForm"};t5.hash="277026edd019ed6ef2c9d27b3d3d6c4a";let t6={kind:"InlineDataFragment",name:"TemplatePickerTemplate"};t6.hash="fa6038bb9389af7bff23ba3491dd0507";var t7=n(86391),t8=n(69487);function t9(e,t){return e.filename.localeCompare(t.filename)}function ne(e){return(0,t8.readInlineData)(t5,e)}function nt(e){return(0,t8.readInlineData)(t6,e)}function nn(e){let t,n,s,r,o=(0,a.c)(10),{draftIssue:l}=e,{repository:c}=(0,$.u)(),d=c?.owner.login,u=c?.name;o[0]!==d||o[1]!==u?(t={owner:d,repo:u},o[0]=d,o[1]=u,o[2]=t):t=o[2];let{data:m}=function(e){let t,n,i,s,r=(0,a.c)(13),{owner:o,repo:l}=e,c=(0,en.useRelayEnvironment)();return r[0]!==c?(t=JSON.stringify(c),r[0]=c,r[1]=t):t=r[1],r[2]!==o||r[3]!==l||r[4]!==t?(n=["copilot-immersive-templates",t,o,l],r[2]=o,r[3]=l,r[4]=t,r[5]=n):n=r[5],r[6]!==c||r[7]!==o||r[8]!==l?(i=async()=>{if(!o||!l)return[];let e=await (0,t8.fetchQuery)(c,t4,{owner:o,repo:l}).toPromise();return[...(e?.repository?.issueTemplates||[]).map(nt),...(e?.repository?.issueForms||[]).map(ne)].sort(t9)},r[6]=c,r[7]=o,r[8]=l,r[9]=i):i=r[9],r[10]!==n||r[11]!==i?(s={queryKey:n,queryFn:i},r[10]=n,r[11]=i,r[12]=s):s=r[12],(0,ec.I)(s)}(t);if(null==m||0===m.length)return null;o[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)("span",{children:"/"}),o[3]=n):n=o[3],o[4]===Symbol.for("react.memo_cache_sentinel")?(s=(0,i.jsx)(tX.A,{className:(0,b.$)(t0.label,"sr-only"),children:"Template"}),o[4]=s):s=o[4];let p=c?.nameWithOwner,h=c?.isBlankIssuesEnabled;return o[5]!==l||o[6]!==p||o[7]!==h||o[8]!==m?(r=(0,i.jsxs)(i.Fragment,{children:[n,(0,i.jsxs)("div",{className:t0.container,children:[s,(0,i.jsx)(ni,{templates:m,draftIssue:l,repositoryNwo:p,isBlankIssuesEnabled:h})]})]}),o[5]=l,o[6]=p,o[7]=h,o[8]=m,o[9]=r):r=o[9],r}function ni(e){let t,n,r,o,l,c,d,u,m=(0,a.c)(23),{templates:p,draftIssue:f,isBlankIssuesEnabled:g,repositoryNwo:y}=e,[v,x]=(0,_.useState)("");e:{let e;if(!v){t=p;break e}m[0]!==v||m[1]!==p?(e=p?.filter(e=>e.name?.toLowerCase().includes(v.toLowerCase())),m[0]=v,m[1]=p,m[2]=e):e=m[2],t=e}let b=t,[j,w]=(0,_.useState)(void 0);m[3]!==f.template||m[4]!==p?(n=()=>{if(!f.template)return void w(void 0);let e=f.template.split("/").findLast(Boolean);w(p?.find(t=>t.filename===e||t.name===e))},r=[p,f.template],m[3]=f.template,m[4]=p,m[5]=n,m[6]=r):(n=m[5],r=m[6]),(0,_.useEffect)(n,r);let C=function(){let e,t=(0,a.c)(4),n=(0,eI.b)(),i=(0,s.Pk)(),{updateItem:r}=(0,N.xx)();return t[0]!==n||t[1]!==i||t[2]!==r?(e=async(e,t,a)=>{let s=[{type:"text",name:`timeline-event: {"type": "switch-issue-template", "markdownContent": "${t?`Changing template to '${t.name}'\u{2026}`:"Removing template\u2026"}"}`,text:t?`Update the draft issue with tag \`${e.tag}\` with the \`${t.filename}\` template${a?` in the \`${a}\` repository`:""}. Regenerate the title and description following the new template. Maintain all conversation context. Update the metadata to follow the new template. DO NOT change the \`tag\` or \`parentTag\` fields.`:`Update draft issue with tag \`${e.tag}\` to remove the template formatting. Regenerate the title and description to follow a generic format. Maintain all conversation context. DO NOT change the \`tag\` or \`parentTag\` fields.`}];if(e.isUserEdited){let t={...e,...a&&{repository:a},isUserEdited:!1};r(t),s.push((0,B.PO)(t))}await n.sendChatMessage({thread:(0,eE.W)(i),content:t?`Use the '${t.name}' template`:"Remove the template",references:[...s,...i.currentReferences],topic:i.currentTopic,context:i.context,customInstructions:i.customInstructions,model:i.model})},t[0]=n,t[1]=i,t[2]=r,t[3]=e):e=t[3],e}(),k=(0,_.useRef)(null),S="new-issue"===f.type&&null!=g&&!g;return m[7]!==b?(o=b??[],m[7]=b,m[8]=o):o=m[8],m[9]!==j?(l=j?[j]:[],m[9]=j,m[10]=l):l=m[10],m[11]!==j||m[12]!==S?(c=e=>(0,i.jsxs)(W.Q,{trailingVisual:h.TriangleDownIcon,...e,ref:k,children:[j?(0,i.jsx)("span",{children:j.name}):"Select a template",S&&(0,i.jsx)("span",{style:{color:"red",marginLeft:4},children:"*"})]}),m[11]=j,m[12]=S,m[13]=c):c=m[13],m[14]!==f||m[15]!==C||m[16]!==y?(d=async e=>{let[t]=e;w(t),await C(f,t,y)},m[14]=f,m[15]=C,m[16]=y,m[17]=d):d=m[17],m[18]!==o||m[19]!==l||m[20]!==c||m[21]!==d?(u=(0,i.jsx)(t7.O,{items:o,initialSelectedItems:l,placeholderText:"Search",selectionVariant:"single",filterItems:x,title:"Select a template",renderAnchor:c,getItemKey:ns,convertToItemProps:na,onSelectionChange:d,selectPanelRef:k,height:"large",width:"medium"}),m[18]=o,m[19]=l,m[20]=c,m[21]=d,m[22]=u):u=m[22],u}function na(e){return{id:e.filename,text:e.name,description:("IssueTemplate"===e.__typename?e.about:e.description)||void 0,descriptionVariant:"block",source:e}}function ns(e){return e.filename}try{nn.displayName||(nn.displayName="TemplatePicker")}catch{}try{ni.displayName||(ni.displayName="TemplatePickerInternal")}catch{}var nr=n(10286);function no(e,t){return(0,_.useCallback)((n,i,a)=>{let s=n||`${nr.y}-${i}`;if(e.defaultValuesById&&e.defaultValuesById[s]===a)return;let r={...e,defaultValuesById:{...e.defaultValuesById}};r.defaultValuesById[s]=a,t(r,!1)},[e,t])}function nl(e){let t,n,i,s,r=(0,a.c)(13),{owner:o,repo:l}=e,c=(0,en.useRelayEnvironment)();return r[0]!==c?(t=JSON.stringify(c),r[0]=c,r[1]=t):t=r[1],r[2]!==o||r[3]!==l||r[4]!==t?(n=["copilot-immersive-current-repo",t,o,l],r[2]=o,r[3]=l,r[4]=t,r[5]=n):n=r[5],r[6]!==c||r[7]!==o||r[8]!==l?(i=async()=>o&&l?await (0,X.tZ)(c,o,l):null,r[6]=c,r[7]=o,r[8]=l,r[9]=i):i=r[9],r[10]!==n||r[11]!==i?(s={queryKey:n,queryFn:i},r[10]=n,r[11]=i,r[12]=s):s=r[12],(0,ec.I)(s)}function nc(e){var t;let n,r,o,l,c,d,u,m,p,f,g,y,v,x,b,j,w,C,D,O,B,F,$,V,U,q,W,H,G,K,z=(0,a.c)(84),{isPreviewOpening:Q,issue:Y,onClose:J}=e,{openItem:Z}=(0,N.xx)(),ee=(0,ei.u0)();z[0]!==Y.tag||z[1]!==ee?(n=ee.get(Y.tag),z[0]=Y.tag,z[1]=ee,z[2]=n):n=z[2];let et=n,[ea,es]=(0,_.useState)(Q);z[3]!==ea?(r=()=>{if(ea){let e=setTimeout(()=>es(!1),A.t);return()=>clearTimeout(e)}},o=[ea],z[3]=ea,z[4]=r,z[5]=o):(r=z[4],o=z[5]),(0,_.useEffect)(r,o);let[er,eo]=(0,_.useState)(null),el=(0,_.useRef)(null),{selectedThreadID:eu}=(0,s.Pk)(),{isLoading:em,data:ep}=function(){let e,t,n,i,s=(0,a.c)(9),r=(0,en.useRelayEnvironment)();return s[0]!==r?(e=JSON.stringify(r),s[0]=r,s[1]=e):e=s[1],s[2]!==e?(t=["copilot-immersive-top-repos",e],s[2]=e,s[3]=t):t=s[3],s[4]!==r?(n=async()=>await (0,X.St)(r,{first:10,hasIssuesEnabled:!0}),s[4]=r,s[5]=n):n=s[5],s[6]!==t||s[7]!==n?(i={queryKey:t,queryFn:n},s[6]=t,s[7]=n,s[8]=i):i=s[8],(0,ec.I)(i)}();z[6]!==Y.repository?(l=Y.repository?.split("/")??[],z[6]=Y.repository,z[7]=l):l=z[7];let[eh,ef]=l;z[8]!==eh||z[9]!==ef?(c={owner:eh,repo:ef},z[8]=eh,z[9]=ef,z[10]=c):c=z[10];let{isLoading:eg,data:ey}=nl(c),[ev,ex]=(0,_.useState)(ey);z[11]!==ey?(d=()=>{ey&&ex(ey)},u=[ey],z[11]=ey,z[12]=d,z[13]=u):(d=z[12],u=z[13]),(0,_.useEffect)(d,u);let eb=null!=ev&&(!ev.hasIssuesEnabled||null!=ev.viewerInteractionLimitReasonHTML&&ev.viewerInteractionLimitReasonHTML?.length>0);z[14]===Symbol.for("react.memo_cache_sentinel")?(m=e=>{eo(e)},z[14]=m):m=z[14];let e_=m;z[15]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{eo(null)},z[15]=p):p=z[15];let ej=p;z[16]!==er?(f=()=>{er&&el?.current&&el.current.focus()},g=[er],z[16]=er,z[17]=f,z[18]=g):(f=z[17],g=z[18]),(0,_.useEffect)(f,g);let ew=ty(Y),eN=no(Y,ew),eC=(0,_.useRef)(null),ek=function(e){let t,n=(0,a.c)(2);n[0]!==e?(t=()=>!e.current||e.current.clientWidth<1024,n[0]=e,n[1]=t):t=n[1];let i=t;return(0,_.useSyncExternalStore)(nd,i)}(eC),eS=et?.parent!=null,eI=(0,_.useRef)(null),eT=ey?.id??"",eE=Y.template||"";z[19]!==eT||z[20]!==eE?(y={repoId:eT,filename:eE},z[19]=eT,z[20]=eE,z[21]=y):y=z[21];let{isLoading:eL,data:eR}=ed(y),eA=ey??void 0;z[22]!==eA?(v={repository:eA},z[22]=eA,z[23]=v):v=z[23];let eD=v;if(ea||em||eL){let e;return z[24]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(I.Q,{optionConfig:{useViewportQueries:!1}}),z[24]=e):e=z[24],e}let eP=`${Y.id}@${eu}`;return z[25]!==ek||z[26]!==eP?(x=(0,k.S)({storageKeyPrefix:eP,insidePortal:ek}),z[25]=ek,z[26]=eP,z[27]=x):x=z[27],z[28]===Symbol.for("react.memo_cache_sentinel")?(b=(0,T.G)("create-issue-preview"),z[28]=b):b=z[28],z[29]!==Y?(j=(0,i.jsx)("div",{children:(0,i.jsx)(M,{item:Y})}),z[29]=Y,z[30]=j):j=z[30],z[31]!==et||z[32]!==Z||z[33]!==eS?(w=eS&&(0,i.jsx)("div",{children:(0,i.jsx)(tJ,{node:et,onItemSelected:e=>Z(e.item.id,!0)})}),z[31]=et,z[32]=Z,z[33]=eS,z[34]=w):w=z[34],z[35]!==j||z[36]!==w?(C=(0,i.jsxs)("div",{className:tQ.toolbarLeft,children:[j,w]}),z[35]=j,z[36]=w,z[37]=C):C=z[37],z[38]!==et||z[39]!==eb||z[40]!==J||z[41]!==eR?(D=(0,i.jsx)("div",{className:tQ.toolbarActions,children:(0,i.jsx)(eX,{issueTemplate:eR,issueNode:et,issueFormRef:eI,noRepoAccess:eb,onClose:J,onError:e_,onClearError:ej})}),z[38]=et,z[39]=eb,z[40]=J,z[41]=eR,z[42]=D):D=z[42],z[43]!==C||z[44]!==D?(O=(0,i.jsxs)("div",{className:tQ.toolbar,children:[C,D]}),z[43]=C,z[44]=D,z[45]=O):O=z[45],z[46]!==ep?(B=ep||[],z[46]=ep,z[47]=B):B=z[47],z[48]!==Y||z[49]!==ey||z[50]!==eg||z[51]!==B?(F=(0,i.jsx)(t1,{draftIssue:Y,resolvedDraftIssueRepo:ey,loadingDraftIssueRepo:eg,topRepos:B}),z[48]=Y,z[49]=ey,z[50]=eg,z[51]=B,z[52]=F):F=z[52],z[53]!==Y?($=(0,i.jsx)(nn,{draftIssue:Y}),z[53]=Y,z[54]=$):$=z[54],z[55]!==F||z[56]!==$?(V=(0,i.jsxs)(E.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[F,$]}),z[55]=F,z[56]=$,z[57]=V):V=z[57],z[58]!==er?(U=er&&(0,i.jsx)(L.l,{ref:el,hideTitle:!0,title:er.bannerTitle,description:(0,i.jsx)(R.o,{children:er.message}),variant:er.bannerVariant,role:"alert","data-testid":"create-issue-error-banner"}),z[58]=er,z[59]=U):U=z[59],z[60]!==ey||z[61]!==eb?(q=eb&&((t=ey)&&!t.hasIssuesEnabled?(0,i.jsx)(P,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue creating your issue.",icon:h.IssueDraftIcon}):t&&t.viewerInteractionLimitReasonHTML?(0,i.jsx)(P,{title:"You cannot create issues in this repository",description:t.viewerInteractionLimitReasonHTML,icon:h.IssueDraftIcon}):void 0),z[60]=ey,z[61]=eb,z[62]=q):q=z[62],z[63]!==et||z[64]!==Y||z[65]!==eg||z[66]!==eb||z[67]!==ew||z[68]!==J||z[69]!==eN||z[70]!==eR?(W=!eb&&(0,i.jsx)(tz,{draftIssue:Y,issueNode:et,template:eR??void 0,issueFormRef:eI,loadingDraftIssueRepo:eg,onChange:ew,onClose:J,onFieldChange:eN}),z[63]=et,z[64]=Y,z[65]=eg,z[66]=eb,z[67]=ew,z[68]=J,z[69]=eN,z[70]=eR,z[71]=W):W=z[71],z[72]!==V||z[73]!==U||z[74]!==q||z[75]!==W?(H=(0,i.jsxs)("div",{className:tQ.form,children:[V,U,q,W]}),z[72]=V,z[73]=U,z[74]=q,z[75]=W,z[76]=H):H=z[76],z[77]!==O||z[78]!==H?(G=(0,i.jsxs)("div",{className:tQ.container,ref:eC,children:[O,H]}),z[77]=O,z[78]=H,z[79]=G):G=z[79],z[80]!==eD||z[81]!==x||z[82]!==G?(K=(0,i.jsx)(S.S,{optionConfig:x,preselectedData:eD,...b,children:G}),z[80]=eD,z[81]=x,z[82]=G,z[83]=K):K=z[83],K}function nd(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}try{nc.displayName||(nc.displayName="CreateIssuePreview")}catch{}var nu=n(40741),nm=n(76158);let np={container:"ExistingIssuePreview-module__container--U4DdB CreateIssuePreview-module__container--xRZfA IssuePreview-module__container--O4xBI",toolbar:"ExistingIssuePreview-module__toolbar--wnxSx CreateIssuePreview-module__toolbar--DOlv4 FilePreview-module__toolbar--ZZWN1",toolbarLeft:"ExistingIssuePreview-module__toolbarLeft--NWSuI CreateIssuePreview-module__toolbarLeft--kUeFB FilePreview-module__toolbarLeft--RCKxW",toolbarActions:"ExistingIssuePreview-module__toolbarActions--ASiVq CreateIssuePreview-module__toolbarActions--n_D57 FilePreview-module__toolbarActions--h04aW",viewerContainer:"ExistingIssuePreview-module__viewerContainer--C5tZ7 CreateIssuePreview-module__viewerContainer--bRxNh",relationshipsContainer:"ExistingIssuePreview-module__relationshipsContainer--CHUGP"};function nh({isPreviewOpening:e,issue:t,onClose:n}){let[a,s]=(0,_.useState)(e),{openItem:r}=(0,N.xx)(),o=(0,ei.u0)().get(t.tag);(0,_.useEffect)(()=>{if(a){let e=setTimeout(()=>s(!1),A.t);return()=>clearTimeout(e)}},[a]);let l=(0,_.useMemo)(()=>(0,i.jsx)(g.K,{icon:h.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(t.href,"_blank")}}),[t.href]),c=(0,tU.G7)("copilot_immersive_issues_readonly_viewer"),d=(0,tU.G7)("copilot_immersive_issues_show_relationships"),u=(0,_.useMemo)(()=>({isReadonly:c,hideTimeline:c,navigate:e0.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,useViewportQueries:!1,onIssueDelete:n,additionalHeaderActions:l,showRepositoryPill:!0}),[n,l,c]),m=(0,_.useMemo)(()=>{let[e,n]=t.repository.split("/");if(e&&n)return{owner:e,repo:n,number:t.number,type:"Issue"}},[t.number,t.repository]);return a||!m?(0,i.jsx)(I.Q,{optionConfig:u}):(0,i.jsxs)("div",{className:np.container,children:[(0,i.jsxs)("div",{className:np.toolbar,children:[(0,i.jsx)("div",{className:np.toolbarLeft,children:o.parent&&(0,i.jsx)(tJ,{node:o,onItemSelected:e=>r(e.item.id,!0)})}),(0,i.jsx)("div",{className:np.toolbarActions,children:(0,i.jsx)(eJ,{issueNode:o,onSuccess:n})})]}),(0,i.jsxs)("div",{className:np.viewerContainer,children:[(0,i.jsx)(nm.e,{children:(0,i.jsx)(nu.cI,{itemIdentifier:m,optionConfig:u})}),d&&(0,i.jsx)("div",{className:np.relationshipsContainer,children:(0,i.jsx)(tu,{issueNode:o})})]})]})}try{nh.displayName||(nh.displayName="ExistingIssuePreview")}catch{}let nf=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"UpdateIssuePayload",kind:"LinkedField",name:"updateIssue",plural:!1,selections:[{alias:null,args:null,concreteType:"Issue",kind:"LinkedField",name:"issue",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"body",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"bodyVersion",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"updateIssueMutationContentOnlyMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"updateIssueMutationContentOnlyMutation",selections:t},params:{id:"d1d9840a47a7be6dd0ad285ce57f1c7f",metadata:{},name:"updateIssueMutationContentOnlyMutation",operationKind:"mutation",text:null}}}();nf.hash="470cf4272c31ec8565dec1240c55030a";let ng=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"DeleteProjectV2ItemPayload",kind:"LinkedField",name:"deleteProjectV2Item",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"deletedItemId",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"updateIssueMutationDeleteProjectMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"updateIssueMutationDeleteProjectMutation",selections:t},params:{id:"ad9e6eaf34525daacc17362653e63272",metadata:{},name:"updateIssueMutationDeleteProjectMutation",operationKind:"mutation",text:null}}}();ng.hash="f03ef95aad392077538992e2c84a9752";var ny=n(61491),nv=n(75908),nx=n(1667),nb=n(5547),n_=n(21052),nj=n(25779),nw=n(99892);async function nN({environment:e,currentIssue:t,draftIssue:n,proposedChanges:i,canUseCopilotAssignment:a,onCompleted:s}){let r=t.labels?.nodes?.filter(e=>null!=e).map(e=>e.name)||[],o=i.labels?.map(e=>e.name)||[],l=void 0!==i.labels&&!(0,tp.A)(r.sort(),o.sort()),c=void 0!==i.milestone&&(i.milestone?.title||null)!==(t.milestone?.title||null),d=void 0!==i.issueType&&i.issueType?.name!==t.issueType?.name,u=t.projectItems?.nodes?.filter(e=>null!=e).map(e=>e.project).filter(e=>null!=e).map(e=>e.id).filter(Boolean)||[],m=i.projects?.map(e=>e.id)||[],p=void 0!==i.projects&&!(0,tp.A)(u.sort(),m.sort()),h=n.name!==t.title,f=void 0!==i.body&&i.body!==(t.body||""),g=[];if(l){let a=new Promise((a,s)=>{(0,n_.N)({environment:e,input:{labelableId:t.id,labels:i.labels||[],labelableTypeName:"Issue"},clientMutationId:n.messageId,onCompleted:()=>{a()},onError:e=>{s(e)}})});g.push({operation:"labels",promise:a})}let y=t.assignees?.nodes?.filter(e=>null!=e),v=function({currentIssue:e,currentAssignees:t,selectedAssignees:n,canUseCopilotAssignment:i,environment:a,messageId:s}){if(void 0===n)return;let r=n.filter(e=>!(0,eS.v)(e.login))??[],o=i?r:n;if(!((e,t)=>{if(e.length!==t.length)return!1;let n=new Set(e.map(e=>e.login));return t.every(e=>n.has(e.login))})(o,t??[]))return new Promise((t,n)=>{(0,nx.j)({environment:a,input:{issueId:e.id,assignedActors:o,participants:[]},clientMutationId:s,onCompleted:()=>{t()},onError:e=>{n(e)}})})}({currentIssue:t,currentAssignees:y,selectedAssignees:i.assignees,canUseCopilotAssignment:a,environment:e,messageId:n.messageId});if(v&&g.push({operation:"assignees",promise:v}),c){let a=new Promise((a,s)=>{(0,nj.v)({environment:e,input:{issueId:t.id,milestone:i.milestone??null,clientMutationId:n.messageId},onCompleted:()=>{a()},onError:e=>{s(e)}})});g.push({operation:"milestone",promise:a})}if(d){let a=new Promise((a,s)=>{(0,nb._)({environment:e,input:{issueId:t.id,issueTypeId:i.issueType?.id||null,clientMutationId:n.messageId},onCompleted:()=>{a()},onError:e=>{s(e)}})});g.push({operation:"issueType",promise:a})}if(p){let a=new Promise((a,s)=>{let r=t.projectItems?.nodes||[];(async()=>{try{await nk(t.id,i.projects||[],r,e,n.messageId,i.hasInaccessibleProject),a()}catch(t){let e=t instanceof Error?t.message:"Project update failed";s(Error(`Project update failed: ${e}`))}})()});g.push({operation:"projects",promise:a})}if(h||f){let a=new Promise((a,s)=>{(0,en.commitMutation)(e,{mutation:nf,variables:{input:{id:t.id,clientMutationId:n.messageId,...h&&{title:n.name},...f&&{body:i.body,bodyVersion:n?.bodyVersion}}},onCompleted:()=>{a()},onError:e=>{s(e)}})});g.push({operation:"content",promise:a})}let x=[],b=[];if(g.length>0)for(let[e,t]of(await Promise.allSettled(g.map(e=>e.promise))).entries()){let n=g[e]?.operation;n&&("fulfilled"===t.status?x.push(n):b.push({operation:n,error:t.reason instanceof Error?t.reason:Error("Unknown error")}))}let _="assignCopilot";try{await nC({currentIssue:t,selectedAssignees:i.assignees,canUseCopilotAssignment:a,hasOtherUpdateErrors:b.length>0,onCompleted:()=>x.push(_)})}catch(e){b.push({operation:_,error:e instanceof Error?e:Error("Unknown error")})}if(0===x.length&&0===b.length){let e={draftType:"update-issue",tag:n?.tag||"",parentTag:n?.parentTag,blockedByTags:n?.blockedByTags,isBlockingTags:n?.isBlockingTags,title:t.title,number:n?.issueNumber||t.number||0,url:t.url||"",repository:{databaseId:t.repository?.databaseId||0,name:t.repository?.name||"",owner:{login:t.repository?.owner.login||""}},template:n?.template,assignees:t.assignees?.nodes?.map(e=>e?.login).filter(e=>!!e)||[]};s&&s({result:{successful:[],failed:[],issue:e}});return}let j=(e=>{let a=e.includes("content")?n.name:t.title,s=e.includes("assignees")&&void 0!==i.assignees?i.assignees.map(e=>e.login):t.assignees?.nodes?.map(e=>e?.login).filter(e=>!!e)||[];return{draftType:"update-issue",tag:n?.tag||"",parentTag:n?.parentTag,blockedByTags:n?.blockedByTags,isBlockingTags:n?.isBlockingTags,title:a,number:n?.issueNumber||t.number||0,url:t.url||"",repository:{databaseId:t.repository?.databaseId||0,name:t.repository?.name||"",owner:{login:t.repository?.owner.login||""}},template:n?.template,assignees:s}})(x);s&&s({result:{successful:x,failed:b,issue:j}})}async function nC({currentIssue:e,selectedAssignees:t,canUseCopilotAssignment:n,hasOtherUpdateErrors:i,onCompleted:a}){if(void 0!==t&&n&&t?.some(e=>(0,eS.v)(e.login)))return(async()=>{if(i)throw Error("Copilot assignment skipped due to other update error(s)");let t=e.repository.defaultBranchRef?.name??"";if(!t)throw Error("Cannot assign to Copilot: default branch not found");try{let n=await (0,ny.J)(e.repository.owner.login,e.repository.name,[e.number],{instructions:"",targetRepo:`${e.repository.owner.login}/${e.repository.name}`,targetBranch:t});if(!n.ok){let e=(0,nv.v0)(n,"Assignment failed");throw Error(e)}a?.()}catch(e){throw e instanceof Error?e:Error("Unknown error")}})()}async function nk(e,t,n,i,a,s){let r=n.filter(e=>null!=e&&null!=e.project),o=t.filter(e=>!r.some(t=>t?.project.id===e.id)),l=s?[]:r.filter(e=>!t.some(t=>t.id===e?.project.id));if(0===o.length&&0===l.length)return;let c=[],d=[];for(let t of o){let n=new Promise(n=>{(0,nw.Z)({environment:i,projectId:t.id,issueId:e,clientMutationId:a,onCompleted:()=>{n()},onError:e=>{c.push({projectId:t.id,projectTitle:t.title,operation:"add",error:e.message}),n()}})});d.push(n)}for(let e of l){let t=new Promise(t=>{(0,en.commitMutation)(i,{mutation:ng,variables:{input:{clientMutationId:a,itemId:e?.id,projectId:e?.project.id}},onCompleted:()=>{t()},onError:n=>{c.push({projectId:e?.project.id||"unknown",projectTitle:e?.project.title||"unknown",operation:"remove",error:n.message}),t()}})});d.push(t)}if(await Promise.all(d),c.length>0){let e=`Failed to update ${c.length} project(s): ${c.map(e=>`${e.operation} "${e.projectTitle}" (${e.error})`).join(", ")}`,t=Error("Unable to update issue projects");throw t.projectErrors=c,t.detailedMessage=e,t}}function nS({issueRepo:e,draftIssue:t,template:n,issueFormRef:a,onUpdate:s,onUpdateError:r,onClose:o}){let l=(0,en.useRelayEnvironment)(),[c,d]=(0,_.useState)(!1),{clearSessionData:u,assignees:m,labels:p,milestone:h,issueType:f,projects:g}=(0,$.u)(),y=(0,_.useCallback)(()=>{let n=e.viewerIssueCreationPermissions;return{assignees:n?.assignable?m:void 0,labels:n?.labelable?p:void 0,milestone:n?.milestoneable?h:void 0,issueType:n?.typeable?f||null:void 0,projects:n?.triageable?g:void 0,hasInaccessibleProject:n?.triageable?t.rawProjectsInput?.includes(""):void 0}},[m,t.rawProjectsInput,e.viewerIssueCreationPermissions,f,p,h,g]),v=(0,_.useCallback)(()=>{u(),a.current?.clearSessionStorage()},[u,a]),x=(0,_.useCallback)(()=>{v(),o?.()},[v,o]),b=eb(),j=(0,_.useCallback)(async i=>{i.preventDefault(),d(!0);try{let[i,c]=t.repository?.split("/")??[];if(!i||!c||!t.issueNumber){let e=Error("Invalid repository information");e.name="OTHER",r?.(e),d(!1);return}let u=await er(l,i,c,t.issueNumber,!0);if(!u){let e=Error("Issue not found or no longer accessible");e.name="ISSUE_NOT_FOUND",r?.(e),d(!1);return}let m=(0,Q.O_)(t.name);if(!m.isValid){let e=Error(m.errorMessage||"Invalid title");e.name="INVALID_TITLE",r?.(e);return}let p=t.body??"";if(n&&(0,Y.GQ)(n.data)&&a.current){let e=a.current.getInvalidInputs();if(e.length>0){let t=Error("Please fix the highlighted errors in the form.");t.name="INVALID_FORM_INPUTS",r?.(t),e[0]?.focus();return}p=a.current.markdown()??""}p=await b(e,p);let h=(0,tU.G7)("issues_copilot_cross_repo_assign"),f=(u.assignees?.nodes?.filter(e=>null!=e)??[]).some(e=>(0,eS.v)(e.login)),g=(e.viewerIssueCreationPermissions?.assignable??!1)&&!u.repository?.isArchived&&!!u.repository?.isCopilotAgentEnabled&&h&&!f,v=y(),_={body:p,assignees:v.assignees,labels:v.labels,milestone:v.milestone,issueType:v.issueType,projects:v.projects,hasInaccessibleProject:v.hasInaccessibleProject};await nN({environment:l,currentIssue:u,draftIssue:t,proposedChanges:_,canUseCopilotAssignment:g,onCompleted:e=>{e.result.failed.length>0?r?.(e):e.result.successful.length>0&&e.result.issue?(x(),o(),s?.(e.result.issue)):(x(),o())}})}catch{let e=Error("Update failed");e.name="OTHER",r?.(e)}finally{d(!1)}},[x,t,l,y,a,e,o,s,r,n,b]);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(W.Q,{variant:"primary","data-testid":"update-issue-button",onClick:j,disabled:c||!t.bodyVersion,children:c?"Updating...":"Update"})})}try{nS.displayName||(nS.displayName="UpdateIssueButton")}catch{}function nI(e){var t,n;let r,o,c,d,u,m,p,f,g,y,v,x,b,j,w,N,C,L,R,D,O,B,F,$=(0,a.c)(72),{isPreviewOpening:V,issue:U,onClose:q}=e,[W,H]=(0,_.useState)(V),[G,K]=(0,_.useState)(null),[z,Q]=(0,_.useState)(U.id);$[0]!==W?(r=()=>{if(W){let e=setTimeout(()=>H(!1),A.t);return()=>clearTimeout(e)}},o=[W],$[0]=W,$[1]=r,$[2]=o):(r=$[1],o=$[2]),(0,_.useEffect)(r,o),z!==U.id&&(Q(U.id),K(null));let{selectedThreadID:Y}=(0,s.Pk)(),J=null!=U.repository||!U.isStreaming,X=(null!=U.bodyVersion||!U.isStreaming)&&!U.bodyVersion;$[3]!==U.repository?(c=U.repository?.split("/")??[],$[3]=U.repository,$[4]=c):c=$[4];let[Z,ee]=c;$[5]!==Z||$[6]!==ee?(d={owner:Z,repo:ee},$[5]=Z,$[6]=ee,$[7]=d):d=$[7];let{isLoading:et,data:en}=nl(d),ei=en?.id??"",ea=U.template||"";$[8]!==ei||$[9]!==ea?(u={repoId:ei,filename:ea},$[8]=ei,$[9]=ea,$[10]=u):u=$[10];let{isLoading:es,data:er}=ed(u),eo=null!=en&&(!en.hasIssuesEnabled||null!=en.viewerInteractionLimitReasonHTML&&en.viewerInteractionLimitReasonHTML?.length>0),el=eb(),ec=eA();$[11]!==ec?(m=async e=>{await ec([e])},$[11]=ec,$[12]=m):m=$[12];let eu=m;$[13]!==ec||$[14]!==U.id||$[15]!==U.repository?(p=async e=>{if(e&&"object"==typeof e&&"result"in e){let{result:t}=e;if(void 0===t.issue){let e=Error("Issue data is unavailable");e.name="UNKNOWN_ERROR",K([e]);return}let n=t.issue?.repository?.databaseId;if(t.failed.length>0&&0===t.successful.length)(0,l.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_FAILED",mode:"immersive",message:`Issue update failed: ${t.failed.length} operations failed`,draftIssueId:U.id,sourceIssueId:n,repository:U.repository,errorType:"MULTIPLE_UPDATE_FAILURES",failedOperationCount:t.failed.length,failedOperations:JSON.stringify(t.failed.map(nF))}),K(t.failed.map(nB));else if(t.failed.length>0&&t.successful.length>0){let e=t.failed.map(nO).join(", ");t.issue.errors=t.failed.map(nP);let i=t.successful.join(", ");(0,l.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_PARTIAL_FAILURE",mode:"immersive",message:`Issue update partial failure. Failed: ${e}. Succeeded: ${i}`,draftIssueId:U.id,sourceIssueId:n,repository:U.repository,errorType:"PARTIAL_UPDATE_FAILURE",failedOperationCount:t.failed.length,failedOperations:JSON.stringify(t.failed.map(nD)),successfulOperations:JSON.stringify(t.successful)});try{await ec([t.issue])}catch{let t=Error(`Partial failure: ${e} failed`);t.name="PARTIAL_UPDATE_FAILURE",K([t])}}return}if(e instanceof Error){let t=Error(e.message);"name"in e?t.name=e.name:t.name="OTHER",(0,l.BI)("dotcom_chat.activate.error",{target:"ERROR_ISSUE_UPDATE_FAILED",mode:"immersive",message:e.message,issueId:U.id,errorType:"OTHER"}),K([t])}},$[13]=ec,$[14]=U.id,$[15]=U.repository,$[16]=p):p=$[16];let em=p,ep=ty(U),eh=no(U,ep),ef=(0,_.useRef)(null),eg=function(e){let t,n=(0,a.c)(2);n[0]!==e?(t=()=>!e.current||e.current.clientWidth<1024,n[0]=e,n[1]=t):t=n[1];let i=t;return(0,_.useSyncExternalStore)(nM,i)}(ef),ey=(0,_.useRef)(null);e:{let e;if(!G||0===G.length){f=null;break e}$[17]!==G?(e=G.map(nT),$[17]=G,$[18]=e):e=$[18],f=e}let ev=f,ex=en??void 0;$[19]!==ex?(g={repository:ex},$[19]=ex,$[20]=g):g=$[20];let e_=g;if(W||!J||et||es){let e;return $[21]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(I.Q,{optionConfig:{useViewportQueries:!1}}),$[21]=e):e=$[21],e}if(!en){let e;return $[22]!==U.repository?(e=(t=U.repository)?(0,i.jsx)(P,{title:`${t} is not found`,description:"Please verify if the repository exists and is accessible before trying again.",icon:h.IssueDraftIcon}):(0,i.jsx)(P,{title:"Malformed draft issue",description:"The drafted issue contains malformed data and the preview is not available. Please retry.",icon:h.IssueDraftIcon}),$[22]=U.repository,$[23]=e):e=$[23],e}if(eo){let e;return $[24]!==en?(e=(n=en).hasIssuesEnabled?n.viewerInteractionLimitReasonHTML?(0,i.jsx)(P,{title:"You cannot update issues in this repository",description:n.viewerInteractionLimitReasonHTML,icon:h.IssueDraftIcon}):void 0:(0,i.jsx)(P,{title:"Issues are disabled",description:"Issues are disabled on this repository. Please select a different repository above to continue updating your issue.",icon:h.IssueDraftIcon}),$[24]=en,$[25]=e):e=$[25],e}if(X){let e;return $[26]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(P,{title:"Malformed draft issue",description:"The drafted issue contains malformed data and the preview is not available. Please retry.",icon:h.IssueDraftIcon}),$[26]=e):e=$[26],e}let ej=`${U.id}@${Y}`;$[27]!==eg||$[28]!==ej?(y=(0,k.S)({storageKeyPrefix:ej,insidePortal:eg}),$[27]=eg,$[28]=ej,$[29]=y):y=$[29],$[30]===Symbol.for("react.memo_cache_sentinel")?(v=(0,T.G)("update-issue-preview"),$[30]=v):v=$[30],$[31]!==U?(x=(0,i.jsx)("div",{className:tQ.toolbarLeft,children:(0,i.jsx)(M,{item:U})}),$[31]=U,$[32]=x):x=$[32];let ew=er??void 0;$[33]!==en||$[34]!==q||$[35]!==eu||$[36]!==em||$[37]!==ew||$[38]!==U?(b=(0,i.jsx)("div",{className:tQ.toolbarActions,children:(0,i.jsx)(nS,{issueRepo:en,draftIssue:U,template:ew,issueFormRef:ey,onUpdate:eu,onUpdateError:em,onClose:q})}),$[33]=en,$[34]=q,$[35]=eu,$[36]=em,$[37]=ew,$[38]=U,$[39]=b):b=$[39],$[40]!==x||$[41]!==b?(j=(0,i.jsxs)("div",{className:tQ.toolbar,children:[x,b]}),$[40]=x,$[41]=b,$[42]=j):j=$[42];let eN=G&&ev;$[43]===Symbol.for("react.memo_cache_sentinel")?(w=(0,i.jsx)(h.RepoIcon,{}),$[43]=w):w=$[43];let eC=`${en.owner.login}/${en.name}`;$[44]!==eC?(N=(0,i.jsx)("b",{children:eC}),$[44]=eC,$[45]=N):N=$[45],$[46]!==U?(C=(0,i.jsx)(nn,{draftIssue:U}),$[46]=U,$[47]=C):C=$[47],$[48]!==N||$[49]!==C?(L=(0,i.jsxs)(E.B,{direction:"horizontal",align:"center",gap:"condensed",className:"py-2",children:[w,N,C]}),$[48]=N,$[49]=C,$[50]=L):L=$[50];let ek=er??void 0;return $[51]!==en||$[52]!==el?(R=e=>el(en,e),$[51]=en,$[52]=el,$[53]=R):R=$[53],$[54]!==ep||$[55]!==q||$[56]!==eh||$[57]!==ek||$[58]!==R||$[59]!==U?(D=(0,i.jsx)(tz,{draftIssue:U,template:ek,issueFormRef:ey,onChange:ep,onClose:q,onBeforeCreate:R,onFieldChange:eh}),$[54]=ep,$[55]=q,$[56]=eh,$[57]=ek,$[58]=R,$[59]=U,$[60]=D):D=$[60],$[61]!==eN||$[62]!==L||$[63]!==D?(O=(0,i.jsxs)("div",{className:tQ.form,children:[eN,L,D]}),$[61]=eN,$[62]=L,$[63]=D,$[64]=O):O=$[64],$[65]!==j||$[66]!==O?(B=(0,i.jsxs)("div",{className:tQ.container,ref:ef,children:[j,O]}),$[65]=j,$[66]=O,$[67]=B):B=$[67],$[68]!==e_||$[69]!==y||$[70]!==B?(F=(0,i.jsx)(S.S,{optionConfig:y,preselectedData:e_,...v,children:B}),$[68]=e_,$[69]=y,$[70]=B,$[71]=F):F=$[71],F}function nT(e){let t,n;switch(e.name){case"LABELS_UPDATE_FAILED":t="Failed to update labels",n="Could not update issue labels. Please try again.";break;case"ASSIGNEES_UPDATE_FAILED":t="Failed to update assignees",n="Could not update issue assignees. Please try again.";break;case"ASSIGNCOPILOT_UPDATE_FAILED":t="Failed to update assignees",n="Could not assign Copilot to the issue. Please try again.";break;case"MILESTONE_UPDATE_FAILED":t="Failed to update milestone",n="Could not update issue milestone. Please try again.";break;case"ISSUETYPE_UPDATE_FAILED":t="Failed to update issue type",n="Could not update issue type. Please try again.";break;case"PROJECTS_UPDATE_FAILED":t="Failed to update projects",n="Could not update project assignments. Please try again.";break;case"CONTENT_UPDATE_FAILED":t="Failed to update content",n="Could not update issue title or body. Please try again.";break;case"FORBIDDEN":t="Permission Denied",n="You don't have permission to update this issue. Please contact the repo owner.";break;case"NOT_FOUND":t="Issue Not Found",n="The issue you are trying to update could not be found or no longer exists.";break;case"INVALID_TITLE":t="Invalid issue title",n=e.message;break;case"INVALID_FORM_INPUTS":t="Invalid form inputs",n=e.message;break;case"STALE_DATA":t="Issue Outdated",n="The issue you are editing has changed. Please copy your edits and have Copilot draft a new update.";break;case"PROJECT_UPDATE_FAILED":{t="Failed to update project assignment";let i=e.projectErrors??[];if(i.length>0){let e=i.filter(nA),t=i.filter(nR),a=[];e.length>0&&a.push(`Failed to add to ${e.length} project(s): ${e.map(nL).join(", ")}`),t.length>0&&a.push(`Failed to remove ${t.length} project(s): ${t.map(nE).join(", ")}`),n=`The issue was updated successfully, but there were problems with project assignments. ${a.join(". ")}.`}else n="The issue was updated successfully, but there were problems with project assignments.";break}default:t="An error has occurred",n="Please try again later."}let a="PROJECT_UPDATE_FAILED"===e.name?"warning":"critical";return(0,i.jsx)(L.l,{variant:a,title:t,description:n},`error-${e.name}`)}function nE(e){return`"${e.projectTitle}"`}function nL(e){return`"${e.projectTitle}"`}function nR(e){return"remove"===e.operation}function nA(e){return"add"===e.operation}function nD(e){return{operation:e.operation,error:e.error.message}}function nP(e){return{message:e.error.message,type:"update"}}function nO(e){return e.operation}function nB(e){let t=Error(e.error.message);if(t.name=`${e.operation.toUpperCase()}_UPDATE_FAILED`,t.operation=e.operation,"projects"===e.operation){let n=e.error;n.projectErrors&&(t.projectErrors=n.projectErrors)}return t}function nF(e){return{operation:e.operation,error:e.error.message}}function nM(e){let t=new ResizeObserver(e);return t.observe(document.documentElement),()=>{t.unobserve(document.documentElement),t.disconnect()}}try{nI.displayName||(nI.displayName="UpdateIssuePreview")}catch{}var n$=n(98755),nV=n(25641);function nU(e,t,n){let i="head"===n?e.headFile:e.baseFile,a=i.reference,s=(0,eI.b)(),{isLoading:r,isError:o,data:l}=(0,ec.I)({queryKey:["copilot-reference-preview","copilot","references","file",a?(0,nV.Vb)(a):void 0,n],queryFn:async()=>{if(!a||"file"!==a.type||""!==i.value)return null;let r=await s.service.hydrateReference(a);return r.ok?(t({...e,["head"===n?"headFile":"baseFile"]:{...i,value:r.payload.contents,isStreaming:!1}}),r.payload):null},staleTime:1/0});return(0,_.useEffect)(()=>{l?.contents&&i.value!==l.contents&&t({...e,["head"===n?"headFile":"baseFile"]:{...i,value:l.contents,isStreaming:!1}})},[l?.contents,e,t,i,n]),{isLoading:r,isError:o,data:l}}function nq(e){let t,n,i,s,r=(0,a.c)(12);if(r[0]!==e.language||r[1]!==e.value){let a,s,o=new Blob([e.value]).size;r[5]===Symbol.for("react.memo_cache_sentinel")?(a=new Set(["markdown","html"]),r[5]=a):a=r[5];let l=a;r[6]!==e.value?(s=e.value.split(`
`),r[6]=e.value,r[7]=s):s=r[7],t=s.length,n=l.has(e.language),i=function(e){if(0===e)return"0 bytes";if(1===e)return"1 byte";let t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["bytes","KB","MB","GB","TB"][t]}`}(o),r[0]=e.language,r[1]=e.value,r[2]=t,r[3]=n,r[4]=i}else t=r[2],n=r[3],i=r[4];return r[8]!==t||r[9]!==n||r[10]!==i?(s={linesOfCode:t,isPreviewable:n,size:i},r[8]=t,r[9]=n,r[10]=i,r[11]=s):s=r[11],s}let nW={container:"DiffPreview-module__container--BN04s",toolbar:"DiffPreview-module__toolbar--RiBuK",toolbarLeft:"DiffPreview-module__toolbarLeft--o4LQ6",toolbarLoC:"DiffPreview-module__toolbarLoC--xR8Qi",toolbarActions:"DiffPreview-module__toolbarActions--EAoyT"};var nH=n(83510),nG=n(34522);let nK={container:"CodeMirrorDiff-module__container--RCtmx",newFile:"CodeMirrorDiff-module__newFile--vX9DQ",deletedFile:"CodeMirrorDiff-module__deletedFile--_w4wx"};var nz=n(53839),nQ=n(63133),nY=n(98325),nJ=n(71381),nX=n(74713),nZ=n(11636),n0=n(18351),n1=n(24774),n2=n(41185);function n3(e){return e.left&&e.right?"split"===e.view?(0,i.jsx)(n4,{...e}):(0,i.jsx)(n5,{...e}):(0,i.jsx)(n6,{...e})}function n4(e){let t=(0,_.useRef)(null);return!function({fileName:e,left:t,leftLabelledBy:n,parentRef:i,right:a,rightLabelledBy:s,spacing:r}){let o=(0,_.useRef)(null),l=(0,_.useMemo)(()=>new nz.xx,[]),c=(0,_.useMemo)(()=>new nz.xx,[]),d=(0,_.useMemo)(()=>new nz.xx,[]),[u,m]=(0,_.useMemo)(()=>{let e=[...nY.o,...(0,nJ.u)(r),(0,nX.h)(),c.of([]),l.of([]),d.of([(0,nZ.O)()]),(0,n2.T)()],t=[(0,n0.I)(n),n1.Lz.contentAttributes.of({"aria-labelledby":n})],i=[(0,n0.I)(s),n1.Lz.contentAttributes.of({"aria-labelledby":s})];return[e.concat(t),e.concat(i)]},[r,c,l,d,n,s]);(0,_.useEffect)(()=>{let n=i.current;if(n)return o.current=new nH.SV({a:{doc:t,extensions:u},b:{doc:a,extensions:m},parent:n,gutter:!1}),(0,nQ.r)({autoCompleteCompartment:l,fileName:e,languageCompartment:c,managedExtensions:[],themeCompartment:d,view:o.current?.a,viewB:o.current?.b}),()=>o.current?.destroy()},[])}({...e,parentRef:t}),(0,i.jsx)("div",{ref:t,className:nK.container})}function n5(e){let t=(0,_.useMemo)(()=>[(0,nH.ex)({original:e.left,mergeControls:!1,gutter:!1})],[e.left]);return(0,i.jsx)(nG.default,{ariaLabelledBy:e.unifiedLabelledBy,containerClassName:nK.container,fileName:e.fileName,height:"100%",isReadOnly:!0,spacing:e.spacing,value:e.right,onChange:e0.l,placeholder:"Loading...",hideHelp:!0,extensions:t})}function n6(e){let t=""===e.left?nK.newFile:nK.deletedFile,n=e.right||e.left;return(0,i.jsx)(nG.default,{ariaLabelledBy:e.unifiedLabelledBy,containerClassName:t,fileName:e.fileName,height:"100%",isReadOnly:!0,spacing:e.spacing,value:n,onChange:e0.l,placeholder:"Loading...",hideHelp:!0})}try{n3.displayName||(n3.displayName="CodeMirrorDiff")}catch{}try{n4.displayName||(n4.displayName="CodeMirrorDiffSplit")}catch{}try{n5.displayName||(n5.displayName="CodeMirrorDiffUnified")}catch{}try{n6.displayName||(n6.displayName="CodeMirrorDiffNewOrDeletedFile")}catch{}var n7=n(25506);function n8(e){let t,n,s,r,o,l=(0,a.c)(24),{left:c,right:d,view:u}=e,m=(0,_.useId)(),p=(0,_.useId)(),h=(0,_.useId)(),f=(0,n7.a)(c);return l[0]!==c.name||l[1]!==m?(t=(0,i.jsxs)("span",{id:m,className:"sr-only",children:[c.name," original file contents"]}),l[0]=c.name,l[1]=m,l[2]=t):t=l[2],l[3]!==d.name||l[4]!==p?(n=(0,i.jsxs)("span",{id:p,className:"sr-only",children:[d.name," modified file contents"]}),l[3]=d.name,l[4]=p,l[5]=n):n=l[5],l[6]!==c.name||l[7]!==d.name||l[8]!==h?(s=(0,i.jsxs)("span",{id:h,className:"sr-only",children:[c.name," and ",d.name," unified diff view"]}),l[6]=c.name,l[7]=d.name,l[8]=h,l[9]=s):s=l[9],l[10]!==f||l[11]!==c.name||l[12]!==c.value||l[13]!==m||l[14]!==d.value||l[15]!==p||l[16]!==h||l[17]!==u?(r=(0,i.jsx)(n3,{fileName:c.name,left:c.value,leftLabelledBy:m,right:d.value,rightLabelledBy:p,spacing:f,unifiedLabelledBy:h,view:u}),l[10]=f,l[11]=c.name,l[12]=c.value,l[13]=m,l[14]=d.value,l[15]=p,l[16]=h,l[17]=u,l[18]=r):r=l[18],l[19]!==t||l[20]!==n||l[21]!==s||l[22]!==r?(o=(0,i.jsxs)("div",{children:[t,n,s,r]}),l[19]=t,l[20]=n,l[21]=s,l[22]=r,l[23]=o):o=l[23],o}try{n8.displayName||(n8.displayName="DiffView")}catch{}function n9(e){let t,n,s,r,o,l,c,d=(0,a.c)(15),{isUnifiedDiff:u,setIsUnifiedDiff:m}=e;d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)(y.W.Anchor,{children:(0,i.jsx)(g.K,{icon:h.GearIcon,"aria-label":"Open diff view settings",variant:"invisible"})}),d[0]=t):t=d[0],d[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(v.l.GroupHeading,{children:"Layout"}),d[1]=n):n=d[1],d[2]!==m?(s=()=>m(!0),d[2]=m,d[3]=s):s=d[3],d[4]!==u||d[5]!==s?(r=(0,i.jsx)(v.l.Item,{selected:u,onSelect:s,children:"Unified"}),d[4]=u,d[5]=s,d[6]=r):r=d[6];let p=!u;return d[7]!==m?(o=()=>m(!1),d[7]=m,d[8]=o):o=d[8],d[9]!==p||d[10]!==o?(l=(0,i.jsx)(v.l.Item,{selected:p,onSelect:o,children:"Split"}),d[9]=p,d[10]=o,d[11]=l):l=d[11],d[12]!==r||d[13]!==l?(c=(0,i.jsxs)(y.W,{children:[t,(0,i.jsx)(y.W.Overlay,{children:(0,i.jsx)(v.l,{children:(0,i.jsxs)(v.l.Group,{selectionVariant:"single",children:[n,r,l]})})})]}),d[12]=r,d[13]=l,d[14]=c):c=d[14],c}try{n9.displayName||(n9.displayName="DiffViewSettings")}catch{}let ie=e=>{let t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=e.name||"file",n.click(),URL.revokeObjectURL(t)};function it(e){let t,n,s,r,o,c,d,u,m,p=(0,a.c)(29),{fileDiff:f}=e,{updateItem:y}=(0,N.xx)(),v=f.baseFile,x=f.headFile,[b,j]=(0,_.useState)(!0),w=v.value&&x.value,C=!v.value&&x.value,k=v.value&&!x.value,{linesOfCode:S,size:I}=nq(C||w?x:v),T=`${C?"Added: ":k?"Deleted: ":""} ${S} `;nU(f,y,"base"),nU(f,y,"head");let E=1===S?"line":"lines";p[0]!==T||p[1]!==I||p[2]!==E?(t=(0,i.jsx)("div",{className:nW.toolbarLeft,children:(0,i.jsxs)("p",{className:nW.toolbarLoC,children:[T," ",E," \xb7 ",I]})}),p[0]=T,p[1]=I,p[2]=E,p[3]=t):t=p[3],p[4]!==v.reference?(n=v.reference&&"url"in v.reference&&(0,i.jsx)(g.K,{as:"a","aria-label":"Go to the file",icon:h.LinkExternalIcon,variant:"invisible",href:v.reference.url}),p[4]=v.reference,p[5]=n):n=p[5],p[6]!==x.value?(s=(0,i.jsx)(n$.T,{textToCopy:x.value,ariaLabel:"Copy code",onCopy:ii}),p[6]=x.value,p[7]=s):s=p[7],p[8]!==x.name||p[9]!==x.value?(r=(0,i.jsx)(g.K,{"aria-label":"Download code",icon:h.DownloadIcon,variant:"invisible",onClick:()=>{let e=x.name;ie(new File([x.value],e)),(0,l.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}}),p[8]=x.name,p[9]=x.value,p[10]=r):r=p[10],p[11]!==w||p[12]!==b?(o=w&&(0,i.jsx)(n9,{setIsUnifiedDiff:j,isUnifiedDiff:b}),p[11]=w,p[12]=b,p[13]=o):o=p[13],p[14]!==n||p[15]!==s||p[16]!==r||p[17]!==o?(c=(0,i.jsxs)("div",{className:nW.toolbarActions,children:[n,s,r,o]}),p[14]=n,p[15]=s,p[16]=r,p[17]=o,p[18]=c):c=p[18],p[19]!==t||p[20]!==c?(d=(0,i.jsxs)("div",{className:nW.toolbar,children:[t,c]}),p[19]=t,p[20]=c,p[21]=d):d=p[21];let L=b?"unified":"split";return p[22]!==v||p[23]!==x||p[24]!==L?(u=(0,i.jsx)(n8,{left:v,right:x,view:L}),p[22]=v,p[23]=x,p[24]=L,p[25]=u):u=p[25],p[26]!==u||p[27]!==d?(m=(0,i.jsxs)("div",{className:nW.container,children:[d,u]}),p[26]=u,p[27]=d,p[28]=m):m=p[28],m}function ii(){return(0,l.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}try{it.displayName||(it.displayName="DiffPreview")}catch{}var ia=n(72439),is=n(59121),ir=n(23125),io=n(41649);let il={container:"FilePreview-module__container--P2h3J",previewContainer:"FilePreview-module__previewContainer--KRQup",codeMirrorContainer:"FilePreview-module__codeMirrorContainer--lxGn_",toolbar:"FilePreview-module__toolbar--ZZWN1",toolbarLeft:"FilePreview-module__toolbarLeft--RCKxW",toolbarLoC:"FilePreview-module__toolbarLoC--I7tcY",toolbarActions:"FilePreview-module__toolbarActions--h04aW",content:"FilePreview-module__content--HoIot",footer:"FilePreview-module__footer--o2xcM"};var ic=n(74807),id=n(79634);let iu={ERROR:"ERROR",LOADING:"LOADING",LOADED:"LOADED",READY:"READY"};function im(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}var ip=n(71315);let ih={container:"SandboxView-module__container--PAb4m",iframe:"SandboxView-module__iframe--r6S4N"},ig={error:"ErrorMessage-module__error--xol56",errorIcon:"ErrorMessage-module__errorIcon--ODD8l",errorHeader:"ErrorMessage-module__errorHeader--hmJF7"};function iy(e){let t,n=(0,a.c)(4),{error:s}=e;if(n[0]!==s){let e,a,r=s?.split(`
`)??[];n[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("span",{className:ig.errorIcon,children:(0,i.jsx)(h.StopIcon,{size:24})}),a=(0,i.jsx)("h2",{className:ig.errorHeader,children:"HTML rendering failed"}),n[2]=e,n[3]=a):(e=n[2],a=n[3]),t=(0,i.jsxs)("div",{className:ig.error,children:[e,a,r.length>0?(0,i.jsx)("p",{children:r.map(iv)}):(0,i.jsx)("p",{children:"Refresh the page or check the HTML"})]}),n[0]=s,n[1]=t}else t=n[1];return t}function iv(e){return(0,i.jsxs)(i.Fragment,{children:[e,(0,i.jsx)("br",{})]},`error-line-${e}}`)}try{iy.displayName||(iy.displayName="ErrorMessage")}catch{}function ix(e){let t,n,s,r,o=(0,a.c)(14),{content:c,inlineScripts:d,inlineStyles:u,headScripts:m,bodyScripts:p,styles:h,viewscreenUrl:f}=e,g=(0,tU.G7)("viewscreen_sandbox");o[0]!==f?(n=new URL("view/sandbox?url=client://sandbox",f).toString(),t=new URL(n,ip.fV.origin),o[0]=f,o[1]=t,o[2]=n):(t=o[1],n=o[2]);let y=t.origin,v=(0,_.useRef)(null),x=(0,_.useRef)(null);o[3]!==p||o[4]!==c||o[5]!==m||o[6]!==d||o[7]!==u||o[8]!==h?(s={content:c,headScripts:m,bodyScripts:p,inlineScripts:d,inlineStyles:u,styles:h},o[3]=p,o[4]=c,o[5]=m,o[6]=d,o[7]=u,o[8]=h,o[9]=s):s=o[9];let{renderState:b,errorMessage:j}=function(e,t,n,i){let s,r,o,l,c,d,u=(0,a.c)(16),[m,p]=(0,_.useState)(iu.LOADING),[h,f]=(0,_.useState)();u[0]!==t||u[1]!==e||u[2]!==i?(s=n=>(function(e,t,n,i,a,s){let r=function(e){var t;let n=e.data;if(!n)return null;if("string"==typeof n)try{n=JSON.parse(n)}catch{return null}return"object"==typeof(t=n)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?n:null}(e);if(!r)return;let o=r.body,l=n.current?.contentWindow;switch(o){case"hello":im(l,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),im(l,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":s(iu.ERROR),r.payload?.error&&a(r.payload.error);break;case"loading":s(iu.LOADING);break;case"loaded":if(!n.current||!i.current)return;s(iu.LOADED);break;case"ready":if(!n.current||!i.current)return;s(iu.READY)}})(n,0,e,t,f,p),u[0]=t,u[1]=e,u[2]=i,u[3]=s):s=u[3];let g=s;return u[4]!==g?(r=()=>(window.addEventListener("message",g),()=>window.removeEventListener("message",g)),o=[g],u[4]=g,u[5]=r,u[6]=o):(r=u[5],o=u[6]),(0,_.useEffect)(r,o),u[7]!==t||u[8]!==e||u[9]!==n||u[10]!==m?(l=()=>{m===iu.READY&&e.current&&t.current&&function(e,t,n){let i={type:"render:cmd",body:{cmd:"sandbox:data","sandbox:data":{...n}}};im(e.contentWindow,i)}(e.current,t.current,n)},c=[t,e,n,m],u[7]=t,u[8]=e,u[9]=n,u[10]=m,u[11]=l,u[12]=c):(l=u[11],c=u[12]),(0,_.useEffect)(l,c),u[13]!==h||u[14]!==m?(d={renderState:m,errorMessage:h},u[13]=h,u[14]=m,u[15]=d):d=u[15],d}(v,x,s,y);if(!g)return null;for(let e of((0,l.BI)("sandbox_view.activate",{target:"SANDBOX_INITIALIZED",enabled:g}),Array.from(new Set([...m||[],...p||[],...h||[]].map(e=>{try{return new URL(e,y).origin}catch{return null}}).filter(Boolean)))))(0,l.BI)("sandbox_view.activate",{target:"SANDBOX_RESOURCE_ORIGIN",origin:e});return o[10]!==j||o[11]!==b||o[12]!==n?(r=(0,i.jsx)("div",{ref:x,className:ih.container,children:b===iu.ERROR?(0,i.jsx)(iy,{error:j}):(0,i.jsx)("iframe",{ref:v,className:ih.iframe,sandbox:"allow-scripts allow-same-origin",title:"Preview page for the user provided code",src:n})}),o[10]=j,o[11]=b,o[12]=n,o[13]=r):r=o[13],r}try{ix.displayName||(ix.displayName="SandboxView")}catch{}let ib={loadingContainer:"HtmlPreview-module__loadingContainer--t3YC7",loadingHead:"HtmlPreview-module__loadingHead--XAabR",loadingText:"HtmlPreview-module__loadingText--WYn1B"};function i_(e,t,n){let i=`file:${e}`;if(!n.has(i))return null;let a=n.get(i)??[],s=a[a.length-1];if(!s)return null;let r=t.get(s);return r&&"file"===r.type?r:null}function ij(e){let t,n,s=(0,a.c)(15),{file:r}=e,{previewUrl:o}=(0,id.X)(),{items:l,versionedItems:c}=(0,N.xx)(),{scripts:d,styles:u,files:m}=function(e,t,n){let i=Array.from(e.matchAll(/<script.*?src="(.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e).map(e=>i_(e,t,n)),a=(function(e){let t=Array.from(e.matchAll(/<link([^>]+)>/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[];for(let e of t){if("stylesheet"!==/rel\s*=\s*"([^"]+)"/.exec(e)?.[1])continue;let t=/href\s*=\s*"([^"]+)"/.exec(e)?.[1];t&&n.push(t)}return n})(e).map(e=>i_(e,t,n)),s=Array.from(e.matchAll(/<script(?![^>]*\bsrc=).*?>(.*?)<\/script>/gms)).map(e=>e[1]).filter(e=>void 0!==e);return{scripts:[...i.map(e=>e?.value??""),...s,'document.dispatchEvent(new Event("DOMContentLoaded"))'].join(`
`),styles:a.map(e=>e?.value??"").join(`
`),files:i.concat(a)}}(r.value,l,c),[p,h]=(0,_.useState)(!1),f=(r.isStreaming||m.some(iw))&&!p;s[0]!==f||s[1]!==h?(t=()=>{if(f){let e=setTimeout(()=>{h(!0)},3e3);return()=>clearTimeout(e)}},s[0]=f,s[1]=h,s[2]=t):t=s[2],(0,_.useEffect)(t),s[3]!==r.value?(n=function(e){let t=Array.from(e.matchAll(/<script.*?src="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e),n=[],i=[];for(let a of t)e.substring(e.indexOf("<head"),e.indexOf("</head>")).includes(a)?n.push(a):i.push(a);return{headScripts:n,bodyScripts:i,styles:Array.from(e.matchAll(/<link rel="stylesheet" href="(https:\/\/.*?)"/g)).map(e=>e[1]).filter(e=>void 0!==e)}}(r.value),s[3]=r.value,s[4]=n):n=s[4];let{headScripts:g,bodyScripts:y,styles:v}=n;if(f){let e;return s[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)("div",{className:ib.loadingContainer,children:[(0,i.jsx)("div",{className:ib.loadingHead,children:(0,i.jsx)(ic.N,{animationType:"thinking",loopAnimation:!0})}),(0,i.jsx)("p",{className:ib.loadingText,children:"Preparing your preview\u2026"})]}),s[5]=e):e=s[5],e}{let e;return s[6]!==y||s[7]!==v||s[8]!==r.id||s[9]!==r.value||s[10]!==g||s[11]!==o||s[12]!==d||s[13]!==u?(e=(0,i.jsx)(ix,{inlineScripts:d,inlineStyles:u,headScripts:g,bodyScripts:y,styles:v,content:r.value,viewscreenUrl:o},r.id),s[6]=y,s[7]=v,s[8]=r.id,s[9]=r.value,s[10]=g,s[11]=o,s[12]=d,s[13]=u,s[14]=e):e=s[14],e}}function iw(e){return!e||e.isStreaming}try{ij.displayName||(ij.displayName="HtmlPreview")}catch{}var iN=n(70840);function iC({isPreviewOpening:e,file:t,onClose:n}){var r;let{updateItem:o,items:c,versionedItems:d}=(0,N.xx)(),u=(0,s.Pk)(),m=t.isStreaming?u.messages[u.messages.length-1]:u.messages.find(e=>e.id===t.messageId),{linesOfCode:p,isPreviewable:f,size:y}=nq(t);!function(e,t){let n,i,s,r,o,l,c,d=(0,a.c)(25),{reference:u}=e,m=(0,eI.b)(),p=u?.type;d[0]!==u?(n=u?(0,nV.Vb)(u):void 0,d[0]=u,d[1]=n):n=d[1],d[2]!==p||d[3]!==n?(i=["copilot-reference-preview","copilot","references",p,n],d[2]=p,d[3]=n,d[4]=i):i=d[4],d[5]!==e||d[6]!==m||d[7]!==u||d[8]!==t?(s=async()=>{if(!u||"file"!==u.type||e.value)return null;let n=await m.service.hydrateReference(u);return n.ok?(t({...e,value:n.payload.contents,isStreaming:!1}),n.payload):null},d[5]=e,d[6]=m,d[7]=u,d[8]=t,d[9]=s):s=d[9],d[10]!==i||d[11]!==s?(r={queryKey:i,queryFn:s,staleTime:1/0},d[10]=i,d[11]=s,d[12]=r):r=d[12];let{isLoading:h,isError:f,data:g}=(0,ec.I)(r);d[13]!==g||d[14]!==e||d[15]!==t?(o=()=>{g?.contents&&e.value!==g.contents&&t({...e,value:g.contents,isStreaming:!1})},d[13]=g,d[14]=e,d[15]=t,d[16]=o):o=d[16];let y=g?.contents;d[17]!==e||d[18]!==y||d[19]!==t?(l=[y,e,t],d[17]=e,d[18]=y,d[19]=t,d[20]=l):l=d[20],(0,_.useEffect)(o,l),d[21]!==g||d[22]!==f||d[23]!==h?(c={isLoading:h,isError:f,data:g},d[21]=g,d[22]=f,d[23]=h,d[24]=c):c=d[24]}(t,o);let[v,x]=(0,_.useState)("code"),[b,j]=(0,_.useState)(!0),[w,C]=(0,_.useState)(void 0),k=(0,_.useCallback)(e=>{C(e)},[]),S=(0,B.SX)(t,c,d),I=!!S;(0,_.useEffect)(()=>{(m?.error?.type==="publicCode"||m?.error?.type==="filtered")&&n()},[m?.error,n]);let T=[["code","Code"]],E="code";f&&(T.unshift(["preview","Preview"]),E="preview"===v?"preview":E),I&&(T.push(["diff","Diff"]),E="diff"===v?"diff":E);let L="object"==typeof(r=t.reference)&&null!==r&&"repoOwner"in r&&"repoName"in r&&"string"==typeof r.repoOwner&&"string"==typeof r.repoName?`${t.reference.repoOwner}/${t.reference.repoName}/${t.name}`:t.name;return(0,i.jsxs)("div",{className:il.container,children:[(0,i.jsxs)("div",{className:il.toolbar,children:[(0,i.jsxs)("div",{className:il.toolbarLeft,children:[(f||I)&&(0,i.jsx)(is.I,{"aria-label":"File view",onChange:e=>{let t=T[e]?.[0]||"code";x(t),(0,l.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_VIEW_OPTION",option:t})},children:T.map(([e,t])=>(0,i.jsx)(is.I.Button,{selected:v===e,children:t},e))}),(0,i.jsx)(M,{item:t,onVersionSelect:k}),(0,i.jsxs)("p",{className:il.toolbarLoC,children:[p," ",1===p?"line":"lines"," \xb7 ",y]})]}),(0,i.jsxs)("div",{className:il.toolbarActions,children:[t.reference&&"url"in t.reference&&(0,i.jsx)(g.K,{as:"a","aria-label":"Go to the file",icon:h.LinkExternalIcon,variant:"invisible",href:t?.reference?.url}),(0,i.jsx)(n$.T,{textToCopy:t.value,ariaLabel:"Copy code",onCopy:()=>(0,l.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_COPY",mode:"immersive"})}),(0,i.jsx)(g.K,{"aria-label":"Download code",icon:h.DownloadIcon,variant:"invisible",onClick:()=>{let e=(()=>{let e=t.name.lastIndexOf(".");if(e>0){let n=t.name.substring(0,e),i=t.name.substring(e);return void 0!==w?`${n}_${w}${i}`:t.name}return void 0!==w?`${t.name}_${w}`:t.name})();ie(new File([t.value],e)),(0,l.BI)("dotcom_chat.activate",{target:"BROWSER_FILE_DOWNLOAD",mode:"immersive"})}}),"diff"===E&&(0,i.jsx)(n9,{isUnifiedDiff:b,setIsUnifiedDiff:j})]})]}),(0,i.jsx)("div",{className:il.content,children:"preview"===E?(0,i.jsx)(iI,{file:t}):"diff"===E?(0,i.jsx)(n8,{left:S,right:t,view:b?"unified":"split"}):(0,i.jsx)(iS,{file:t,isPreviewOpening:e})}),(0,i.jsx)("footer",{className:il.footer,children:(0,i.jsx)("span",{"aria-live":"polite",children:L})})]})}let ik=(0,ir.A)((e,t,n)=>{n({...e,value:t})},500,{leading:!1,trailing:!0});function iS({file:e,isPreviewOpening:t}){let{openItem:n,updateItem:a,versionedItems:r}=(0,N.xx)(),l=(0,eI.b)(),c=(0,_.useRef)(!1),d=function(e,t){let n=e.get((0,B.oy)(t.id))??[];return n[n.length-1]===t.id}(r,e),u=!e.reference||"thread-scoped-file"===e.reference.type,m=u&&!e.isStreaming&&d,p=(0,_.useId)(),h=(0,n7.a)(e),[f,g]=(0,_.useState)(),y=f?.id===e.id?f.value:e.value,[v,x]=(0,_.useState)(!0),{messages:b,currentReferences:j}=(0,s.Pk)(),w=(0,_.useRef)(""),C=(0,_.useRef)(null),[k,S]=(0,_.useState)(void 0);(0,_.useEffect)(()=>{j&&(j.some(t=>"thread-scoped-snippet"===t.type&&t.name===e.name)||S(null))},[j,e.name]);let I=(0,_.useMemo)(()=>{if(!o.W.selectionAttachments)return;let t=ia.E.getAttachmentSizeLimit();return{debounceMs:0,onSelection:({view:n,text:i,fromLine:a,toLine:s})=>{if(!i||""===i.trim()||!l)return;let r=n.state.doc.line(a),o=n.state.doc.line(s),c=r.from,d=o.to,u=n.state.doc.sliceString(c,d),m=`${e.id}:${c}-${d}:${e.value.length}`;if(w.current===m||new Blob([u]).size>t)return;let p={type:"thread-scoped-snippet",name:e.name,snippetText:u,language:e.language||"text",range:{start:a,end:s}};C.current?l.replaceReference(C.current,p):l.addReference(p,"immersive-selection"),C.current=p,S({from:c,to:d}),w.current=m},onClear:()=>{w.current&&(l&&C.current&&l.removeReference(C.current),w.current="",C.current=null,S(null))}}},[e.id,e.name,e.value,e.language,l]);(0,_.useEffect)(()=>{l&&C.current&&l.removeReference(C.current),C.current=null,w.current="",S(null)},[e.id,l]),(0,_.useEffect)(()=>()=>{l&&C.current&&l.removeReference(C.current),C.current=null,w.current=""},[l]),(0,_.useEffect)(()=>{x(!1)},[]),(0,_.useEffect)(()=>{t&&(c.current=!0)},[t]);let T=(0,io.K)((0,_.useCallback)(t=>{if(m&&t!==e.value)if(e.isUserEdited)g({value:t,id:e.id}),ik(e,t,a);else{let i={...e,messageId:eT.Wp,id:`file:${e.name}#${b.length}`,timestamp:new Date,isUserEdited:!0,value:t};a(i),n(i.id),g({value:t,id:i.id})}},[e,m,b.length,n,a]));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("span",{id:p,className:"sr-only",children:[e.name," file contents"]}),(0,i.jsx)(nG.default,{ariaLabelledBy:p,containerClassName:il.codeMirrorContainer,fileName:e.name,height:"100%",isReadOnly:!m,spacing:h,value:v?"":y,onChange:T,focusNextRenderRef:c,placeholder:"Loading...",hideHelp:!0,selectionListenerOptions:I,selectionAttachmentRange:k}),u&&!d&&(0,i.jsx)("div",{className:il.footer,children:"Switch to the latest version to edit this file."})]})}function iI({file:e}){return"markdown"===e.language?(0,i.jsx)("div",{className:il.previewContainer,children:(0,i.jsx)(iN.G,{content:e})}):"html"===e.language?(0,i.jsx)("div",{className:il.previewContainer,children:(0,i.jsx)(ij,{file:e})}):null}try{iC.displayName||(iC.displayName="FilePreview")}catch{}try{iS.displayName||(iS.displayName="CodeMirrorView")}catch{}try{iI.displayName||(iI.displayName="PreviewComponent")}catch{}let iT={container:"ImagePreview-module__container--lxQZb",imageElement:"ImagePreview-module__imageElement--WTRgY"};function iE(e){let t,n=(0,a.c)(3),{image:s}=e;return n[0]!==s.altText||n[1]!==s.url?(t=(0,i.jsx)("div",{className:iT.container,children:(0,i.jsx)("img",{className:iT.imageElement,src:s.url,alt:s.altText})}),n[0]=s.altText,n[1]=s.url,n[2]=t):t=n[2],t}try{iE.displayName||(iE.displayName="ImagePreview")}catch{}let iL={container:"IssuePreview-module__container--O4xBI"},iR=(0,_.memo)(function(e){let t,n,s,r,o,l,c=(0,a.c)(17),{isPreviewOpening:d,issue:u,onClose:m}=e,[p,f]=(0,_.useState)(d);c[0]!==p?(t=()=>{if(p){let e=setTimeout(()=>f(!1),A.t);return()=>clearTimeout(e)}},n=[p],c[0]=p,c[1]=t,c[2]=n):(t=c[1],n=c[2]),(0,_.useEffect)(t,n),c[3]!==u.href?(s=(0,i.jsx)(g.K,{icon:h.LinkExternalIcon,variant:"invisible","aria-label":"Open issue in new tab",onClick:()=>{window.open(u.href,"_blank")}}),c[3]=u.href,c[4]=s):s=c[4];let y=s;c[5]!==m||c[6]!==y?(r={navigate:e0.l,insideSidePanel:!0,shouldSkipSetDocumentTitle:!0,useViewportQueries:!1,onIssueDelete:m,additionalHeaderActions:y,showRepositoryPill:!0},c[5]=m,c[6]=y,c[7]=r):r=c[7];let v=r;c[8]!==u.number||c[9]!==u.owner||c[10]!==u.repo?(o={owner:u.owner,repo:u.repo,number:u.number,type:"Issue"},c[8]=u.number,c[9]=u.owner,c[10]=u.repo,c[11]=o):o=c[11];let x=o;if(p){let e;return c[12]!==v?(e=(0,i.jsx)(I.Q,{optionConfig:v}),c[12]=v,c[13]=e):e=c[13],e}return c[14]!==x||c[15]!==v?(l=(0,i.jsx)("div",{className:iL.container,children:(0,i.jsx)(nm.e,{children:(0,i.jsx)(nu.cI,{itemIdentifier:x,optionConfig:v})})}),c[14]=x,c[15]=v,c[16]=l):l=c[16],l});try{iR.displayName||(iR.displayName="IssuePreview")}catch{}let iA={container:"JobResultPreview-module__container--ITPQp",spinner:"JobResultPreview-module__spinner--NGGeF",error:"JobResultPreview-module__error--UiqJQ",errorIcon:"JobResultPreview-module__errorIcon--Gr5_m",errorHeader:"JobResultPreview-module__errorHeader--u1d_F"};function iD(e){e.stopPropagation()}function iP(e){let t,n,s,r,o=(0,a.c)(7),{jobResult:l}=e,c=_.useRef(null),[d,u]=(0,_.useState)(null),[m,p]=(0,_.useState)(null);o[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{e.detail.fetchResponse.succeeded||(p("Failed to load markdown preview"),e.preventDefault(),e.stopPropagation())},o[0]=t):t=o[0];let f=t;return o[1]!==l?(n=()=>{if(c.current){let e=c.current;return e.addEventListener("turbo:before-fetch-request",iD),e.addEventListener("turbo:before-fetch-response",f),u(function(e){let t=[e.repoOwner,e.repoName,"actions","runs",e.workflowId,"job",e.jobId],n=new URL(`/${t.map(String).map(encodeURIComponent).join("/")}`,window.location.origin);return n.searchParams.set("partial","true"),n.toString()}(l)),()=>{e.removeEventListener("turbo:before-fetch-request",iD),e.removeEventListener("turbo:before-fetch-response",f)}}},s=[f,l],o[1]=l,o[2]=n,o[3]=s):(n=o[2],s=o[3]),(0,_.useEffect)(n,s),o[4]!==m||o[5]!==d?(r=(0,i.jsx)("div",{className:iA.container,children:m?(0,i.jsxs)("div",{className:iA.error,children:[(0,i.jsx)("span",{className:iA.errorIcon,children:(0,i.jsx)(h.StopIcon,{size:24})}),(0,i.jsx)("h2",{className:iA.errorHeader,children:"Failed to load job results"})]}):(0,i.jsx)("turbo-frame",{src:d,ref:c,id:"workflow_run_content",target:"_top",children:(0,i.jsx)("div",{className:iA.spinner,children:(0,i.jsx)(q.A,{srText:"Loading Markdown preview\u2026"})})})}),o[4]=m,o[5]=d,o[6]=r):r=o[6],r}try{iP.displayName||(iP.displayName="JobResultPreview")}catch{}var iO=n(97189);let iB={container:"SpecPreview-module__container--WG_WF FilePreview-module__container--P2h3J",content:"SpecPreview-module__content--ES0hY FilePreview-module__content--HoIot"};var iF=n(73783);let iM={footer:"SpecPreviewFooter-module__footer--M1fJw",footerText:"SpecPreviewFooter-module__footerText--NBYrK",button:"SpecPreviewFooter-module__button--jMuoa",buttonGroup:"SpecPreviewFooter-module__buttonGroup--ZKWsL",divider:"SpecPreviewFooter-module__divider--U_nTw",menuButton:"SpecPreviewFooter-module__menuButton--r_s5t"};function i$(e){let t,n,r,o,c,d,u,m,p=(0,a.c)(18),{spec:f}=e,[x,b]=(0,_.useState)(!1),{createBreakdown:j}=function(e){let t,n,i=(0,a.c)(6),r=(0,eI.b)(),o=(0,s.Pk)();i[0]!==r||i[1]!==e||i[2]!==o?(t=async t=>{let n=e.name||e.tag;(0,l.BI)("copilot.planning_tasklist",{target:`PLANNING_TASK_SPEC_BREAKDOWN_${t.toUpperCase()}`,mode:"immersive",threadId:(0,eE.W)(o)?.id,messageId:e.messageId});let i={type:"text",name:`timeline-event: {"type": "planning-breakdown", "markdownContent": "Breaking down '${n}' into ${t}s..."}`},a="task"===t?`
Break down the ${e.tag} spec into tasks.
`:`
Break down the ${e.tag} spec into tasks, but instead of returning a task list, create an issue for each task.
- The issues should be nested under one parent issue, which is a feature-level issue containing the ${e.tag} spec contents. The name should be the same as the spec name.
- Issues should be blocked by their logical dependencies.
`;await r.sendChatMessage({thread:(0,eE.W)(o),content:a,references:[i],topic:o.currentTopic,context:o.context,customInstructions:o.customInstructions,model:o.model,intent:eT.wh.planningAgent})},i[0]=r,i[1]=e,i[2]=o,i[3]=t):t=i[3];let c=t;return i[4]!==c?(n={createBreakdown:c},i[4]=c,i[5]=n):n=i[5],n}(f),w=f.isStreaming||!f.content;return p[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,i.jsx)("div",{className:iM.footerText,children:"Consider breaking this up into multiple tasks"}),p[0]=t):t=p[0],p[1]!==j?(n=()=>j("task"),p[1]=j,p[2]=n):n=p[2],p[3]!==w||p[4]!==n?(r=(0,i.jsx)(W.Q,{className:iM.button,leadingVisual:h.TasklistIcon,onClick:n,disabled:w,inactive:w,children:"Break down into smaller tasks"}),p[3]=w,p[4]=n,p[5]=r):r=p[5],p[6]===Symbol.for("react.memo_cache_sentinel")?(o=(0,i.jsx)("div",{className:iM.divider}),p[6]=o):o=p[6],p[7]!==w?(c=(0,i.jsx)(y.W.Anchor,{children:(0,i.jsx)(g.K,{"aria-label":"Task break down options\u2026",className:iM.menuButton,icon:h.TriangleDownIcon,disabled:w,inactive:w})}),p[7]=w,p[8]=c):c=p[8],p[9]!==j?(d=(0,i.jsx)(y.W.Overlay,{children:(0,i.jsx)(v.l,{children:(0,i.jsx)(v.l.Item,{onSelect:()=>j("issue"),children:"Break down into issues"})})}),p[9]=j,p[10]=d):d=p[10],p[11]!==x||p[12]!==c||p[13]!==d?(u=(0,i.jsxs)(y.W,{open:x,onOpenChange:b,children:[c,d]}),p[11]=x,p[12]=c,p[13]=d,p[14]=u):u=p[14],p[15]!==r||p[16]!==u?(m=(0,i.jsxs)("div",{className:iM.footer,children:[t,(0,i.jsxs)(iF.A,{className:iM.buttonGroup,children:[r,o,u]})]}),p[15]=r,p[16]=u,p[17]=m):m=p[17],m}try{i$.displayName||(i$.displayName="SpecPreviewFooter")}catch{}function iV(e){let t,n,s,r=(0,a.c)(7),{error:o,onDismiss:l}=e,[c,d]=(0,_.useState)(0);return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{d(iU)},r[0]=t):t=r[0],r[1]!==o?(n=[o],r[1]=o,r[2]=n):n=r[2],(0,_.useEffect)(t,n),r[3]!==c||r[4]!==o.message||r[5]!==l?(s=(0,i.jsx)(L.l,{"aria-atomic":"true",role:"alert",variant:"critical",title:"Failed to start task",hideTitle:!0,description:o.message,onDismiss:l},c),r[3]=c,r[4]=o.message,r[5]=l,r[6]=s):s=r[6],s}function iU(e){return e+1}try{iV.displayName||(iV.displayName="TaskErrorBanner")}catch{}var iq=n(62189),iW=n(91747);let iH={button:"TaskActions-module__button--mfKv1",buttonGroup:"TaskActions-module__buttonGroup--HfUFm",divider:"TaskActions-module__divider--mfTun",menuButton:"TaskActions-module__menuButton--KexmI"},iG=(0,_.forwardRef)((e,t)=>{let n,s,r,o,l,c,d,u=(0,a.c)(23),{children:m,inactive:p,isLoading:f,isMenuOpen:x,loadingAnnouncement:b,menuItems:_,onMenuOpenChange:j,onStartClick:w,primaryButtonText:N}=e,C=void 0===b?"Starting task\u2026":b,k=void 0===N?"Start agent task":N;return u[0]!==p||u[1]!==f||u[2]!==C||u[3]!==w||u[4]!==k||u[5]!==t?(n=(0,i.jsx)(W.Q,{className:iH.button,inactive:p,leadingVisual:h.AgentIcon,loading:f,loadingAnnouncement:C,onClick:w,ref:t,variant:"primary",children:k}),u[0]=p,u[1]=f,u[2]=C,u[3]=w,u[4]=k,u[5]=t,u[6]=n):n=u[6],u[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,i.jsx)("div",{className:iH.divider}),u[7]=s):s=u[7],u[8]!==f?(r=(0,i.jsx)(y.W.Anchor,{"aria-label":"Task options",children:(0,i.jsx)(g.K,{"aria-label":"Task options\u2026",className:iH.menuButton,disabled:f,icon:h.TriangleDownIcon,variant:"primary"})}),u[8]=f,u[9]=r):r=u[9],u[10]!==_?(o=_.map(iK),u[10]=_,u[11]=o):o=u[11],u[12]!==o?(l=(0,i.jsx)(y.W.Overlay,{children:(0,i.jsx)(v.l,{children:o})}),u[12]=o,u[13]=l):l=u[13],u[14]!==x||u[15]!==j||u[16]!==r||u[17]!==l?(c=(0,i.jsxs)(y.W,{open:x,onOpenChange:j,children:[r,l]}),u[14]=x,u[15]=j,u[16]=r,u[17]=l,u[18]=c):c=u[18],u[19]!==m||u[20]!==n||u[21]!==c?(d=(0,i.jsxs)(iF.A,{className:iH.buttonGroup,children:[n,m,s,c]}),u[19]=m,u[20]=n,u[21]=c,u[22]=d):d=u[22],d});function iK(e){return(0,i.jsx)(v.l.Item,{disabled:e.disabled,onSelect:e.onSelect,children:e.label},e.label)}iG.displayName="TaskActions";var iz=n(65529),iQ=n(91779),iY=n(66990),iJ=n(86877),iX=n(66565),iZ=n(44095);let i0={formContainer:"StartTaskDialog-module__formContainer--fvFyc",selectorsRow:"StartTaskDialog-module__selectorsRow--t23fd",taskContainer:"StartTaskDialog-module__taskContainer--jUtk2"},i1=function(){var e={defaultValue:null,kind:"LocalArgument",name:"name"},t={defaultValue:null,kind:"LocalArgument",name:"owner"},n=[{kind:"Variable",name:"name",variableName:"name"},{kind:"Variable",name:"owner",variableName:"owner"}],i={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[e,t],kind:"Fragment",metadata:null,name:"useRepositoryDefaultBranchQuery",selections:[{alias:null,args:n,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:[i],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,e],kind:"Operation",name:"useRepositoryDefaultBranchQuery",selections:[{alias:null,args:n,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,concreteType:"Ref",kind:"LinkedField",name:"defaultBranchRef",plural:!1,selections:[i,a],storageKey:null},a],storageKey:null}]},params:{id:"cc890d4a355bf52f7d7b18263e22f595",metadata:{},name:"useRepositoryDefaultBranchQuery",operationKind:"query",text:null}}}();function i2(e){let t,n,s,r,o,l,c,d,u,m,p,h,f,g,y,v,x,b,j,w,N=(0,a.c)(51),{previewItem:C,initialRepo:k,topRepos:S,onStart:I,onCancel:T}=e,[E,L]=(0,_.useState)(k),[R,A]=(0,_.useState)(""),[D,P]=(0,_.useState)(""),[O,B]=(0,_.useState)(null);N[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,tU.G7)("copilot_swe_agent_use_subagents"),N[0]=t):t=N[0];let F=t&&D,{data:M,isLoading:$}=function(e,t){let n,i,s,r,o=(0,a.c)(13),l=(0,en.useRelayEnvironment)();return o[0]!==l?(n=JSON.stringify(l),o[0]=l,o[1]=n):n=o[1],o[2]!==t||o[3]!==e||o[4]!==n?(i=["repository-default-branch",n,e,t],o[2]=t,o[3]=e,o[4]=n,o[5]=i):i=o[5],o[6]!==l||o[7]!==t||o[8]!==e?(s=async()=>{if(!e||!t)return null;let n=await (0,t8.fetchQuery)(l,i1,{owner:e,name:t},{fetchPolicy:"store-or-network"}).toPromise();return n?.repository?.defaultBranchRef?.name||null},o[6]=l,o[7]=t,o[8]=e,o[9]=s):s=o[9],o[10]!==i||o[11]!==s?(r={queryKey:i,queryFn:s},o[10]=i,o[11]=s,o[12]=r):r=o[12],(0,ec.I)(r)}(E?.owner?.login,E?.name);N[1]!==M?(n=()=>{null!=M?(A(M),P(M)):A("")},s=[M],N[1]=M,N[2]=n,N[3]=s):(n=N[2],s=N[3]),(0,_.useEffect)(n,s),N[4]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{P(e)},N[4]=r):r=N[4];let V=r;N[5]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{L(e)},N[5]=o):o=N[5];let q=o;N[6]!==I||N[7]!==D||N[8]!==E||N[9]!==O?(l=()=>{I(E,D,O)},N[6]=I,N[7]=D,N[8]=E,N[9]=O,N[10]=l):l=N[10];let W=l,H=!!E&&!!D;N[11]!==T?(c={buttonType:"default",content:"Cancel",onClick:T},N[11]=T,N[12]=c):c=N[12];let G=!H;N[13]!==W||N[14]!==G?(d={buttonType:"primary",content:"Start",onClick:W,disabled:G},N[13]=W,N[14]=G,N[15]=d):d=N[15],N[16]!==c||N[17]!==d?(u=[c,d],N[16]=c,N[17]=d,N[18]=u):u=N[18],N[19]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.jsx)(iJ.A.Label,{children:"Target repository"}),N[19]=m):m=N[19];let K=E||void 0;if(N[20]===Symbol.for("react.memo_cache_sentinel")?(p={includeForks:!0},N[20]=p):p=N[20],N[21]!==K||N[22]!==S?(h=(0,i.jsxs)(iJ.A,{children:[m,(0,i.jsx)(X.f0,{initialRepository:K,onSelect:q,topRepositories:S,enforceAtleastOneSelected:!0,options:p,preventDefault:!0,responsiveOnNarrow:!0})]}),N[21]=K,N[22]=S,N[23]=h):h=N[23],N[24]===Symbol.for("react.memo_cache_sentinel")?(f=(0,i.jsx)(iJ.A.Label,{children:"Base branch"}),N[24]=f):f=N[24],N[25]!==$||N[26]!==R||N[27]!==D||N[28]!==E?(g=(0,i.jsxs)(iJ.A,{children:[f,E||D?(0,i.jsx)(iY.PI,{useFocusZone:!0,cacheKey:"brainstorm-start-task-ref-selector",canCreate:!1,currentCommitish:R?D:"None available",defaultBranch:R,owner:E?.owner?.login||"",repo:E?.name||"",types:["branch"],selectedRefType:"branch",closeOnSelect:!0,hideShowAll:!0,disabled:$,onSelectItem:V,anchoredOverlayProps:{variant:{regular:"anchored",narrow:"fullscreen"},height:"small"}}):(0,i.jsx)(iX.f,{height:"32px",width:"100px"})]}),N[25]=$,N[26]=R,N[27]=D,N[28]=E,N[29]=g):g=N[29],N[30]!==$||N[31]!==R||N[32]!==D||N[33]!==E||N[34]!==O||N[35]!==F)y=F&&E&&(0,i.jsxs)(iJ.A,{children:[(0,i.jsx)(iJ.A.Label,{children:"Custom agent"}),(0,i.jsx)(iQ.p,{repo:{id:E.databaseId||0,graphQLId:E.id,name:E.nameWithOwner,nameWithOwner:E.nameWithOwner,nameOnly:E.name,owner:E.owner.login,private:E.isPrivate||!1,defaultBranch:R||"",isEmpty:!1,enabled:!0},branch:D,selectedAgent:O,onSelect:B,iconOnly:!1,disabled:$})]}),N[30]=$,N[31]=R,N[32]=D,N[33]=E,N[34]=O,N[35]=F,N[36]=y;else y=N[36];return N[37]!==h||N[38]!==g||N[39]!==y?(v=(0,i.jsxs)("div",{className:i0.selectorsRow,children:[h,g,y]}),N[37]=h,N[38]=g,N[39]=y,N[40]=v):v=N[40],N[41]===Symbol.for("react.memo_cache_sentinel")?(x=(0,i.jsx)(iJ.A.Label,{children:"Task"}),N[41]=x):x=N[41],N[42]!==C?(b=(0,i.jsx)("div",{className:i0.taskContainer,children:(0,i.jsxs)(iJ.A,{children:[x,(0,i.jsx)(iZ.m,{previewItem:C})]})}),N[42]=C,N[43]=b):b=N[43],N[44]!==v||N[45]!==b?(j=(0,i.jsxs)("div",{className:i0.formContainer,children:[v,b]}),N[44]=v,N[45]=b,N[46]=j):j=N[46],N[47]!==T||N[48]!==u||N[49]!==j?(w=(0,i.jsx)(U.l,{width:"xlarge",title:"Start task",onClose:T,footerButtons:u,children:j}),N[47]=T,N[48]=u,N[49]=j,N[50]=w):w=N[50],w}i1.hash="606cda456dcdccbb61e31c769c1ea96c";try{i2.displayName||(i2.displayName="StartTaskDialog")}catch{}function i3(e){let t,n,r,o,c,d,u,m,p,h,f,g,y,v=(0,a.c)(37),{spec:x,onError:b}=e,[j,w]=(0,_.useState)(!1),[N,C]=(0,_.useState)(!1);if(v[0]!==x)t={messageId:x.messageId,name:x.name,isUserEdited:x.isUserEdited,tag:x.tag,repository:x.repository,type:"planning-task",id:x.id.replace("planning-spec:","planning-task:"),description:x.content,isStreaming:x.isStreaming,dependencyTags:void 0,subtaskTags:void 0,aggregateTag:void 0},v[0]=x,v[1]=t;else t=v[1];let k=t,{repositoryData:S,isLoading:I}=function(e){let t,n,i,s,r,o,l=(0,a.c)(18);l[0]!==e.repository?(t=e.repository?.split("/")??[],l[0]=e.repository,l[1]=t):t=l[1];let[c,d]=t,u=(0,en.useRelayEnvironment)();l[2]!==u?(n=JSON.stringify(u),l[2]=u,l[3]=n):n=l[3],l[4]!==c||l[5]!==d||l[6]!==n?(i=["copilot-immersive-spec-repo",n,c,d],l[4]=c,l[5]=d,l[6]=n,l[7]=i):i=l[7],l[8]!==u||l[9]!==c||l[10]!==d?(s=async()=>c&&d?await (0,X.tZ)(u,c,d):null,l[8]=u,l[9]=c,l[10]=d,l[11]=s):s=l[11],l[12]!==i||l[13]!==s?(r={queryKey:i,queryFn:s},l[12]=i,l[13]=s,l[14]=r):r=l[14];let{data:m,isLoading:p}=(0,ec.I)(r);return l[15]!==p||l[16]!==m?(o={repositoryData:m,isLoading:p},l[15]=p,l[16]=m,l[17]=o):o=l[17],o}(x),{isLoading:T,data:E}=function(){let e,t,n,i,s=(0,a.c)(9),r=(0,en.useRelayEnvironment)();return s[0]!==r?(e=JSON.stringify(r),s[0]=r,s[1]=e):e=s[1],s[2]!==e?(t=["copilot-immersive-spec-top-repos",e],s[2]=e,s[3]=t):t=s[3],s[4]!==r?(n=async()=>await (0,X.St)(r,{first:10,hasIssuesEnabled:!0}),s[4]=r,s[5]=n):n=s[5],s[6]!==t||s[7]!==n?(i={queryKey:t,queryFn:n},s[6]=t,s[7]=n,s[8]=i):i=s[8],(0,ec.I)(i)}(),{start:L,error:R}=(0,iz.vQ)(k),{pullRequest:A,isLoading:D}=(0,iz.as)(k),{createIssue:P}=function(e){let t,n,i=(0,a.c)(6),r=(0,eI.b)(),o=(0,s.Pk)();i[0]!==r||i[1]!==e||i[2]!==o?(t=async()=>{let t=e.name||e.tag,n=(0,eE.W)(o);(0,l.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_CREATE_ISSUE",mode:"immersive",threadId:n?.id,messageId:e.messageId});let i={type:"text",name:`timeline-event: {"type": "planning-spec-to-issue", "markdownContent": "Drafting '${t}' spec as an issue..."}`},a=`
Create an issue based on the ${e.tag} spec${e.repository?` in the ${e.repository} repository`:""}.
- The issue title should be the same as the spec name.
- Use the spec content to draft the issue body. The issue body should include the full spec content and any relevant implementation details.
`;await r.sendChatMessage({thread:n,content:a,references:[i],topic:o.currentTopic,context:o.context,customInstructions:o.customInstructions,model:o.model,intent:eT.wh.planningAgent})},i[0]=r,i[1]=e,i[2]=o,i[3]=t):t=i[3];let c=t;return i[4]!==c?(n={createIssue:c},i[4]=c,i[5]=n):n=i[5],n}(x);v[2]!==R||v[3]!==b?(n=()=>{b?.(R)},r=[R,b],v[2]=R,v[3]=b,v[4]=n,v[5]=r):(n=v[4],r=v[5]),(0,_.useEffect)(n,r);let O=(0,iW.u)("copilot_swe_agent_progress_commands");v[6]!==O||v[7]!==A?(o=A?O?(0,iq.U)(A.global_relay_id):`/${A.repository_nwo}/pull/${A.number}`:void 0,v[6]=O,v[7]=A,v[8]=o):o=v[8];let B=o,F=O?"View task":"View pull request",M=x.isStreaming??!1;v[9]!==x.content?(c=x.content?.trim(),v[9]=x.content,v[10]=c):c=v[10];let $=M||I||T||D,V=!c||$;v[11]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{C(!0)},v[11]=d):d=v[11];let U=d;v[12]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{C(!1)},v[12]=u):u=v[12];let q=u;v[13]!==L?(m=(e,t,n)=>{L({nameWithOwner:e.nameWithOwner,branch:t,subAgent:n}),C(!1)},v[13]=L,v[14]=m):m=v[14];let H=m;v[15]!==P?(p=()=>{P()},v[15]=P,v[16]=p):p=v[16];let G=p;if(A){let e;return v[17]!==B||v[18]!==F?(e=(0,i.jsx)(W.Q,{as:"a",href:B,variant:"primary",size:"small",children:F}),v[17]=B,v[18]=F,v[19]=e):e=v[19],e}let K=V||S?.hasIssuesEnabled===!1;return v[20]!==G||v[21]!==K?(h=[{label:"Create issue",onSelect:G,disabled:K}],v[20]=G,v[21]=K,v[22]=h):h=v[22],v[23]!==V||v[24]!==$||v[25]!==j||v[26]!==h?(f=(0,i.jsx)(iG,{inactive:V,isLoading:$,isMenuOpen:j,loadingAnnouncement:"Loading spec\u2026",menuItems:h,onMenuOpenChange:w,onStartClick:U,primaryButtonText:"Start task"}),v[23]=V,v[24]=$,v[25]=j,v[26]=h,v[27]=f):f=v[27],v[28]!==H||v[29]!==N||v[30]!==S||v[31]!==x||v[32]!==E?(g=N&&(0,i.jsx)(i2,{previewItem:x,initialRepo:S,topRepos:E||[],onStart:H,onCancel:q}),v[28]=H,v[29]=N,v[30]=S,v[31]=x,v[32]=E,v[33]=g):g=v[33],v[34]!==f||v[35]!==g?(y=(0,i.jsxs)(i.Fragment,{children:[f,g]}),v[34]=f,v[35]=g,v[36]=y):y=v[36],y}try{i3.displayName||(i3.displayName="SpecActions")}catch{}let i4={toolbar:"SpecToolbar-module__toolbar--tdSZU FilePreview-module__toolbar--ZZWN1",toolbarLeft:"SpecToolbar-module__toolbarLeft--R4qo5 FilePreview-module__toolbarLeft--RCKxW",toolbarLoC:"SpecToolbar-module__toolbarLoC--Zemt9 FilePreview-module__toolbarLoC--I7tcY",toolbarActions:"SpecToolbar-module__toolbarActions--wO9eJ FilePreview-module__toolbarActions--h04aW"};function i5(e){let t,n,r,o,c,d,u,m,p,f,y,v,x,b,j,w,N,C,k,S,I,T=(0,a.c)(60),{spec:E,linesOfCode:L,size:R,isDiffable:A,onViewModeChange:D}=e,{selectedThreadID:P}=(0,s.Pk)(),[O,B]=(0,_.useState)("preview"),[F,$]=(0,_.useState)(void 0),[V,U]=(0,_.useState)(null),[q,W]=(0,_.useState)(null),H=V&&V!==q;T[0]!==V?(t=()=>{W(V)},T[0]=V,T[1]=t):t=T[1];let G=t;T[2]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{U(e)},T[2]=n):n=T[2];let K=n;if(T[3]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{W(null)},T[3]=r):r=T[3],T[4]!==E.id?(o=[E.id],T[4]=E.id,T[5]=o):o=T[5],(0,_.useEffect)(r,o),T[6]===Symbol.for("react.memo_cache_sentinel")?(c=["preview","Preview"],T[6]=c):c=T[6],T[7]!==A){if(d=[c],A){let e;T[9]===Symbol.for("react.memo_cache_sentinel")?(e=["diff","Diff"],T[9]=e):e=T[9],d.push(e)}T[7]=A,T[8]=d}else d=T[8];let z=d;T[10]===Symbol.for("react.memo_cache_sentinel")?(u=e=>{$(e)},T[10]=u):u=T[10];let Q=u;T[11]!==z||T[12]!==D||T[13]!==E.messageId||T[14]!==P?(m=e=>{let t=z[e]?.[0]||"preview";B(t),D(t),(0,l.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_CHANGE_VIEW_MODE",option:t,threadId:P,messageId:E.messageId})},T[11]=z,T[12]=D,T[13]=E.messageId,T[14]=P,T[15]=m):m=T[15];let Y=m;T[16]!==F||T[17]!==E.content||T[18]!==E.messageId||T[19]!==E.tag||T[20]!==P?(p=()=>{let e=(()=>{let e=E.tag;return void 0!==F?`${e}_${F}.md`:`${e}.md`})();ie(new File([E.content],e)),(0,l.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_DOWNLOAD_FILE",mode:"immersive",threadId:P,messageId:E.messageId})},T[16]=F,T[17]=E.content,T[18]=E.messageId,T[19]=E.tag,T[20]=P,T[21]=p):p=T[21];let J=p;T[22]!==E.messageId||T[23]!==P?(f=()=>{(0,l.BI)("copilot.planning_tasklist",{target:"PLANNING_TASK_SPEC_COPY_CODE",mode:"immersive",threadId:P,messageId:E.messageId})},T[22]=E.messageId,T[23]=P,T[24]=f):f=T[24];let X=f;T[25]!==V||T[26]!==G||T[27]!==H?(y=H&&(0,i.jsx)(iV,{error:V,onDismiss:G}),T[25]=V,T[26]=G,T[27]=H,T[28]=y):y=T[28],T[29]!==z||T[30]!==Y||T[31]!==O?(v=z.length>1&&(0,i.jsx)(is.I,{"aria-label":"Spec view",onChange:Y,children:z.map(e=>{let[t,n]=e;return(0,i.jsx)(is.I.Button,{selected:O===t,children:n},t)})}),T[29]=z,T[30]=Y,T[31]=O,T[32]=v):v=T[32],T[33]!==E?(x=(0,i.jsx)(M,{item:E,onVersionSelect:Q}),T[33]=E,T[34]=x):x=T[34];let Z=1===L?"line":"lines";return T[35]!==L||T[36]!==R||T[37]!==Z?(b=(0,i.jsxs)("p",{className:i4.toolbarLoC,children:[L," ",Z," \xb7 ",R]}),T[35]=L,T[36]=R,T[37]=Z,T[38]=b):b=T[38],T[39]!==v||T[40]!==x||T[41]!==b?(j=(0,i.jsxs)("div",{className:i4.toolbarLeft,children:[v,x,b]}),T[39]=v,T[40]=x,T[41]=b,T[42]=j):j=T[42],T[43]!==X||T[44]!==E.content?(w=(0,i.jsx)(n$.T,{textToCopy:E.content,ariaLabel:"Copy spec content",onCopy:X}),T[43]=X,T[44]=E.content,T[45]=w):w=T[45],T[46]!==J?(N=(0,i.jsx)(g.K,{"aria-label":"Download spec",icon:h.DownloadIcon,variant:"invisible",onClick:J}),T[46]=J,T[47]=N):N=T[47],T[48]!==E?(C=(0,i.jsx)(i3,{spec:E,onError:K}),T[48]=E,T[49]=C):C=T[49],T[50]!==w||T[51]!==N||T[52]!==C?(k=(0,i.jsxs)("div",{className:i4.toolbarActions,children:[w,N,C]}),T[50]=w,T[51]=N,T[52]=C,T[53]=k):k=T[53],T[54]!==j||T[55]!==k?(S=(0,i.jsxs)("div",{className:i4.toolbar,children:[j,k]}),T[54]=j,T[55]=k,T[56]=S):S=T[56],T[57]!==y||T[58]!==S?(I=(0,i.jsxs)(i.Fragment,{children:[y,S]}),T[57]=y,T[58]=S,T[59]=I):I=T[59],I}try{i5.displayName||(i5.displayName="SpecToolbar")}catch{}function i6(e){return{messageId:e.messageId,name:`${e.tag}.md`,id:e.id.replace("planning-spec:","file:"),type:"file",value:e.content,language:"markdown",timestamp:e.timestamp,isStreaming:e.isStreaming??!1,isUserEdited:e.isUserEdited}}function i7(e){let t,n,s,r,o,l,c,d,u=(0,a.c)(23),{spec:m}=e,{items:p,versionedItems:h}=(0,N.xx)(),[f,g]=(0,_.useState)("preview");u[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{g(e)},u[0]=t):t=u[0];let y=t;if(u[1]!==p||u[2]!==m||u[3]!==h){let e=(0,B.SX)(m,p,h);n=!!e,s=e?i6(e):null,u[1]=p,u[2]=m,u[3]=h,u[4]=n,u[5]=s}else n=u[4],s=u[5];let v=s;u[6]!==m?(r=i6(m),u[6]=m,u[7]=r):r=u[7];let x=r,{linesOfCode:b,size:j}=nq(x);return u[8]!==n||u[9]!==b||u[10]!==j||u[11]!==m?(o=(0,i.jsx)(i5,{spec:m,linesOfCode:b,size:j,isDiffable:n,onViewModeChange:y}),u[8]=n,u[9]=b,u[10]=j,u[11]=m,u[12]=o):o=u[12],u[13]!==v||u[14]!==x||u[15]!==f?(l=(0,i.jsx)("div",{className:iB.content,children:"preview"===f?(0,i.jsx)(iN.G,{content:{value:x.value,name:x.name},fallbackToRaw:!0,hideHeadingAnchors:!0}):(0,i.jsx)(n8,{left:v,right:x,view:"unified"})}),u[13]=v,u[14]=x,u[15]=f,u[16]=l):l=u[16],u[17]!==m?(c=(0,i.jsx)(i$,{spec:m}),u[17]=m,u[18]=c):c=u[18],u[19]!==o||u[20]!==l||u[21]!==c?(d=(0,i.jsx)(iO.Fn,{children:(0,i.jsxs)("div",{className:iB.container,children:[o,l,c]})}),u[19]=o,u[20]=l,u[21]=c,u[22]=d):d=u[22],d}try{i7.displayName||(i7.displayName="SpecPreview")}catch{}let i8={container:"TaskPreview-module__container--RZnMV"};function i9(e){let t,n,s,r,o=(0,a.c)(14),{title:l,description:c,onClose:d,onSubmit:u,buttonRef:m}=e;return o[0]!==d?(t={buttonType:"default",content:"Cancel",onClick:d},o[0]=d,o[1]=t):t=o[1],o[2]!==d||o[3]!==u?(n={buttonType:"danger",content:"Proceed to PR creation",onClick:()=>{u(),d()}},o[2]=d,o[3]=u,o[4]=n):n=o[4],o[5]!==t||o[6]!==n?(s=[t,n],o[5]=t,o[6]=n,o[7]=s):s=o[7],o[8]!==m||o[9]!==c||o[10]!==d||o[11]!==s||o[12]!==l?(r=(0,i.jsx)(U.l,{title:l,onClose:d,returnFocusRef:m,footerButtons:s,children:c}),o[8]=m,o[9]=c,o[10]=d,o[11]=s,o[12]=l,o[13]=r):r=o[13],r}try{i9.displayName||(i9.displayName="StartTaskWarningDialog")}catch{}function ae(e){let t,n=(0,a.c)(4),{buttonRef:s,onClose:r,onSubmit:o}=e;return n[0]!==s||n[1]!==r||n[2]!==o?(t=(0,i.jsx)(i9,{buttonRef:s,description:"This task has unmerged dependencies. Please consider waiting until all dependencies are completed before starting the task.",onClose:r,onSubmit:o,title:"Unmerged dependencies"}),n[0]=s,n[1]=r,n[2]=o,n[3]=t):t=n[3],t}try{ae.displayName||(ae.displayName="UnmergedDependenciesWarningDialog")}catch{}var at=n(35104);function an(e){return e.isLoading||null==e.pullRequest||"merged"!==e.pullRequest.state}function ai(e){return null!=e}let aa={toolbarActions:"NoPullRequestTaskToolbar-module__toolbarActions--nHT53 FilePreview-module__toolbarActions--h04aW"};function as(e){let t,n,s,r,o,l,c,d,u,m,p=(0,a.c)(33),{loading:h,task:f,startTask:g}=e,[y,v]=(0,_.useState)(!1),[x,b]=(0,_.useState)(!1),{convertToDraftIssue:j}=(0,at.Y)(f),w=(0,_.useRef)(null),[C,k]=(0,_.useState)(!1),S=function(e){let t,n,i=(0,a.c)(6),{items:s,versionedItems:r}=(0,N.xx)();i[0]!==s||i[1]!==e.dependencyTags||i[2]!==r?(t=e.dependencyTags?.map(e=>{let t=r.get(`planning-task:${e}`);return null==t||0===t.length?null:s.get(t.at(-1))}).filter(ai)??[],i[0]=s,i[1]=e.dependencyTags,i[2]=r,i[3]=t):t=i[3];let o=t,l=(0,iz.fp)(o);return i[4]!==l?(n=l.some(an),i[4]=l,i[5]=n):n=i[5],n}(f);p[0]!==h||p[1]!==f?(t={externalLoading:h,task:f},p[0]=h,p[1]=f,p[2]=t):t=p[2];let{selectedRepo:I,topRepos:T,isLoading:E}=function(e){let t,n,i,s,r,o,l,c,d,u,m,p,h,f,g=(0,a.c)(42),{externalLoading:y,task:v}=e;g[0]!==v.repository?(t=v.repository?.split("/")??[],g[0]=v.repository,g[1]=t):t=g[1];let[x,b]=t,[j,w]=(0,_.useState)(void 0),{updateItem:C}=(0,N.xx)(),k=(0,en.useRelayEnvironment)();g[2]!==k?(n=JSON.stringify(k),g[2]=k,g[3]=n):n=g[3],g[4]!==n?(i=["copilot-immersive-top-repos",n],g[4]=n,g[5]=i):i=g[5],g[6]!==k?(s=async()=>await (0,X.St)(k,{first:10}),g[6]=k,g[7]=s):s=g[7],g[8]!==i||g[9]!==s?(r={queryKey:i,queryFn:s},g[8]=i,g[9]=s,g[10]=r):r=g[10];let{data:S,isLoading:I}=(0,ec.I)(r);g[11]!==S?(o=void 0===S?[]:S,g[11]=S,g[12]=o):o=g[12];let T=o;g[13]!==k?(l=JSON.stringify(k),g[13]=k,g[14]=l):l=g[14],g[15]!==x||g[16]!==b||g[17]!==l?(c=["copilot-immersive-current-repo",l,x,b],g[15]=x,g[16]=b,g[17]=l,g[18]=c):c=g[18],g[19]!==k||g[20]!==x||g[21]!==b?(d=async()=>x&&b?await (0,X.tZ)(k,x,b):null,g[19]=k,g[20]=x,g[21]=b,g[22]=d):d=g[22],g[23]!==c||g[24]!==d?(u={queryKey:c,queryFn:d},g[23]=c,g[24]=d,g[25]=u):u=g[25];let{data:E,isLoading:L}=(0,ec.I)(u),R=void 0!==y&&y||I||L;g[26]!==v||g[27]!==C?(m=e=>{w(e),e&&C({...v,isUserEdited:!0,repository:e.nameWithOwner})},g[26]=v,g[27]=C,g[28]=m):m=g[28];let A=m;return g[29]!==E||g[30]!==A||g[31]!==R||g[32]!==j||g[33]!==v.repository||g[34]!==T?(p=()=>{if(!R){if(v.repository){E&&E.nameWithOwner!==j?.nameWithOwner&&w(E);return}!j&&T&&T.length>0&&A(T[0])}},h=[E,A,R,j,v.repository,T],g[29]=E,g[30]=A,g[31]=R,g[32]=j,g[33]=v.repository,g[34]=T,g[35]=p,g[36]=h):(p=g[35],h=g[36]),(0,_.useEffect)(p,h),g[37]!==A||g[38]!==R||g[39]!==j||g[40]!==T?(f={handleRepoSelect:A,isLoading:R,selectedRepo:j,topRepos:T},g[37]=A,g[38]=R,g[39]=j,g[40]=T,g[41]=f):f=g[41],f}(t);p[3]!==S?(n=()=>{if(S)return void k(!0);b(!0)},p[3]=S,p[4]=n):n=p[4];let L=n;p[5]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{b(!1)},p[5]=s):s=p[5];let R=s;p[6]!==g?(r=(e,t,n)=>{g({nameWithOwner:e.nameWithOwner,branch:t,subAgent:n}),b(!1)},p[6]=g,p[7]=r):r=p[7];let A=r;p[8]!==j?(o=()=>{j()},p[8]=j,p[9]=o):o=p[9];let D=o,P=!I,O=E?"Loading\u2026":"Starting task\u2026",B=I?.hasIssuesEnabled===!1;return p[10]!==D||p[11]!==B?(l=[{disabled:B,label:"Draft issue",onSelect:D}],p[10]=D,p[11]=B,p[12]=l):l=p[12],p[13]!==L||p[14]!==C?(c=C&&(0,i.jsx)(ae,{buttonRef:w,onClose:()=>k(!1),onSubmit:L}),p[13]=L,p[14]=C,p[15]=c):c=p[15],p[16]!==L||p[17]!==E||p[18]!==y||p[19]!==c||p[20]!==P||p[21]!==O||p[22]!==l?(d=(0,i.jsx)("div",{className:aa.toolbarActions,children:(0,i.jsx)(iG,{inactive:P,isLoading:E,isMenuOpen:y,loadingAnnouncement:O,menuItems:l,onMenuOpenChange:v,onStartClick:L,ref:w,children:c})}),p[16]=L,p[17]=E,p[18]=y,p[19]=c,p[20]=P,p[21]=O,p[22]=l,p[23]=d):d=p[23],p[24]!==A||p[25]!==x||p[26]!==f||p[27]!==I||p[28]!==T?(u=x&&(0,i.jsx)(i2,{previewItem:f,initialRepo:I,topRepos:T||[],onStart:A,onCancel:R}),p[24]=A,p[25]=x,p[26]=f,p[27]=I,p[28]=T,p[29]=u):u=p[29],p[30]!==d||p[31]!==u?(m=(0,i.jsxs)(i.Fragment,{children:[d,u]}),p[30]=d,p[31]=u,p[32]=m):m=p[32],m}try{as.displayName||(as.displayName="NoPullRequestTaskToolbar")}catch{}var ar=n(26607);let ao={toolbarLeft:"PullRequestTaskToolbar-module__toolbarLeft--zhjF9 FilePreview-module__toolbarLeft--RCKxW",toolbarActions:"PullRequestTaskToolbar-module__toolbarActions--chqDS FilePreview-module__toolbarActions--h04aW",toolbarRepo:"PullRequestTaskToolbar-module__toolbarRepo--V_hWp"};function al(e){let t,n,s,r,o,l,c=(0,a.c)(19),{pullRequest:d}=e,u=(0,iW.u)("copilot_swe_agent_progress_commands");c[0]!==u||c[1]!==d.global_relay_id||c[2]!==d.number||c[3]!==d.repository_nwo?(t=u?(0,iq.U)(d.global_relay_id):`/${d.repository_nwo}/pull/${d.number}`,c[0]=u,c[1]=d.global_relay_id,c[2]=d.number,c[3]=d.repository_nwo,c[4]=t):t=c[4];let m=t,p=u?"View task":"View pull request";c[5]!==d.repository_nwo?(n=(0,i.jsx)("div",{className:ao.toolbarLeft,children:(0,i.jsx)(ar.A,{variant:"accent",size:"large",className:ao.toolbarRepo,children:d.repository_nwo})}),c[5]=d.repository_nwo,c[6]=n):n=c[6];let h="merged"===d.state?"success":"accent",f="merged"===d.state?"Merged":"In progress";return c[7]!==h||c[8]!==f?(s=(0,i.jsx)(ar.A,{variant:h,size:"small",children:f}),c[7]=h,c[8]=f,c[9]=s):s=c[9],c[10]!==m||c[11]!==p?(r=(0,i.jsx)(W.Q,{as:"a",href:m,variant:"primary",size:"small",children:p}),c[10]=m,c[11]=p,c[12]=r):r=c[12],c[13]!==s||c[14]!==r?(o=(0,i.jsxs)("div",{className:ao.toolbarActions,children:[s,r]}),c[13]=s,c[14]=r,c[15]=o):o=c[15],c[16]!==n||c[17]!==o?(l=(0,i.jsxs)(i.Fragment,{children:[n,o]}),c[16]=n,c[17]=o,c[18]=l):l=c[18],l}try{al.displayName||(al.displayName="PullRequestTaskToolbar")}catch{}let ac={toolbar:"TaskToolbar-module__toolbar--lRGiC FilePreview-module__toolbar--ZZWN1"};function ad(e){let t,n,s,r,o,l,c,d,u=(0,a.c)(22),{className:m,task:p}=e,{pullRequest:h,isLoading:f}=(0,iz.as)(p),{start:g,error:y}=(0,iz.vQ)(p),[v,x]=(0,_.useState)(null),j=y&&y!==v;u[0]!==y?(t=()=>{x(y)},u[0]=y,u[1]=t):t=u[1];let w=t;return u[2]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{x(null)},u[2]=n):n=u[2],u[3]!==p.id?(s=[p.id],u[3]=p.id,u[4]=s):s=u[4],(0,_.useEffect)(n,s),u[5]!==y||u[6]!==w||u[7]!==j?(r=j&&(0,i.jsx)(iV,{error:y,onDismiss:w}),u[5]=y,u[6]=w,u[7]=j,u[8]=r):r=u[8],u[9]!==m?(o=(0,b.$)(ac.toolbar,m),u[9]=m,u[10]=o):o=u[10],u[11]!==f||u[12]!==h||u[13]!==g||u[14]!==p?(l=h?(0,i.jsx)(al,{pullRequest:h}):(0,i.jsx)(as,{loading:f,task:p,startTask:g}),u[11]=f,u[12]=h,u[13]=g,u[14]=p,u[15]=l):l=u[15],u[16]!==o||u[17]!==l?(c=(0,i.jsx)("div",{className:o,children:l}),u[16]=o,u[17]=l,u[18]=c):c=u[18],u[19]!==r||u[20]!==c?(d=(0,i.jsxs)(i.Fragment,{children:[r,c]}),u[19]=r,u[20]=c,u[21]=d):d=u[21],d}try{ad.displayName||(ad.displayName="TaskToolbar")}catch{}function au(e){let t,n,s,r=(0,a.c)(8),{task:o}=e,l=o.description;o.name&&(l=`# ${o.name}

${l}`);let c=l;r[0]!==o?(t=(0,i.jsx)(ad,{task:o}),r[0]=o,r[1]=t):t=r[1];let d=`${o.tag}.md`;return r[2]!==c||r[3]!==d?(n=(0,i.jsx)(iN.G,{content:{value:c,name:d},fallbackToRaw:!0,hideHeadingAnchors:!0}),r[2]=c,r[3]=d,r[4]=n):n=r[4],r[5]!==t||r[6]!==n?(s=(0,i.jsx)(iO.Fn,{children:(0,i.jsxs)("div",{className:i8.container,children:[t,n]})}),r[5]=t,r[6]=n,r[7]=s):s=r[7],s}try{au.displayName||(au.displayName="TaskPreview")}catch{}function am(e){let t,n=(0,a.c)(35),{isOpening:s,onClose:r,previewItem:o}=e,l=(0,C.qw)(),c=null;switch(o.type){case"file":{let e;n[0]!==s||n[1]!==r||n[2]!==o?(e=(0,i.jsx)(iC,{isPreviewOpening:s,file:o,onClose:r}),n[0]=s,n[1]=r,n[2]=o,n[3]=e):e=n[3],c=e;break}case"file-diff":{let e;n[4]!==o?(e=(0,i.jsx)(it,{fileDiff:o}),n[4]=o,n[5]=e):e=n[5],c=e;break}case"issue":{let e;n[6]!==s||n[7]!==r||n[8]!==o?(e=(0,i.jsx)(iR,{isPreviewOpening:s,issue:o,onClose:r}),n[6]=s,n[7]=r,n[8]=o,n[9]=e):e=n[9],c=e;break}case"new-issue":{let e;n[10]!==s||n[11]!==r||n[12]!==o?(e=(0,i.jsx)(nc,{isPreviewOpening:s,issue:o,onClose:r}),n[10]=s,n[11]=r,n[12]=o,n[13]=e):e=n[13],c=e;break}case"update-issue":{let e;n[14]!==s||n[15]!==r||n[16]!==o?(e=(0,i.jsx)(nI,{isPreviewOpening:s,issue:o,onClose:r}),n[14]=s,n[15]=r,n[16]=o,n[17]=e):e=n[17],c=e;break}case"existing-issue":{let e;n[18]!==s||n[19]!==r||n[20]!==o?(e=(0,i.jsx)(nh,{isPreviewOpening:s,issue:o,onClose:r}),n[18]=s,n[19]=r,n[20]=o,n[21]=e):e=n[21],c=e;break}case"image":{let e;n[22]!==o?(e=(0,i.jsx)(iE,{image:o}),n[22]=o,n[23]=e):e=n[23],c=e;break}case"planning-task":{let e;n[24]!==o?(e=(0,i.jsx)(au,{task:o}),n[24]=o,n[25]=e):e=n[25],c=e;break}case"planning-spec":{let e;n[26]!==o?(e=(0,i.jsx)(i7,{spec:o}),n[26]=o,n[27]=e):e=n[27],c=e;break}case"plugin-content":if(n[28]!==l||n[29]!==o.reference){for(let e of l){let t=e.previewComponents?.[o.reference.type];if(t){c=(0,i.jsx)(t,{reference:o.reference});break}}n[28]=l,n[29]=o.reference,n[30]=c}else c=n[30];break;case"job-result":{let e;n[31]!==o?(e=(0,i.jsx)(iP,{jobResult:o}),n[31]=o,n[32]=e):e=n[32],c=e}}return n[33]!==c?(t=c?(0,i.jsx)(u.t,{fallback:(0,i.jsx)(j.x,{regionName:"This workbench item"}),children:c}):null,n[33]=c,n[34]=t):t=n[34],t}try{am.displayName||(am.displayName="ContentPreviewItem")}catch{}let ap={tabContainer:"ContentPreviewTab-module__tabContainer--ApaB_",tabContent:"ContentPreviewTab-module__tabContent--xe28k",isActive:"ContentPreviewTab-module__isActive--Pi2gz",mainButton:"ContentPreviewTab-module__mainButton--vLx58",icon:"ContentPreviewTab-module__icon--lefqk",title:"ContentPreviewTab-module__title--l571P",closeButton:"ContentPreviewTab-module__closeButton--SByWv",trailingComponent:"ContentPreviewTab-module__trailingComponent--lAh8u"};function ah(e){let t=(0,a.c)(3),{file:n}=e;if(n.isStreaming){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(q.A,{size:"small"}),t[0]=e):e=t[0],e}if("markdown"===n.language){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(h.MarkdownIcon,{}),t[1]=e):e=t[1],e}{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(h.CodeIcon,{}),t[2]=e):e=t[2],e}}function af(e){let t=(0,a.c)(12),{item:n}=e;switch(n.type){case"file":{let e;return t[0]!==n?(e=(0,i.jsx)(ah,{file:n}),t[0]=n,t[1]=e):e=t[1],e}case"file-diff":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(h.FileDiffIcon,{}),t[2]=e):e=t[2],e}case"image":{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(h.ImageIcon,{}),t[3]=e):e=t[3],e}case"issue":{let e;return t[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(h.IssueOpenedIcon,{}),t[4]=e):e=t[4],e}case"new-issue":{let e;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(h.IssueDraftIcon,{}),t[5]=e):e=t[5],e}case"update-issue":{let e;return t[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(h.IssueDraftIcon,{}),t[6]=e):e=t[6],e}case"existing-issue":{let e;return t[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(h.IssueOpenedIcon,{}),t[7]=e):e=t[7],e}case"planning-task":{let e;return t[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(h.TasklistIcon,{}),t[8]=e):e=t[8],e}case"planning-spec":{let e;return t[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(h.NoteIcon,{}),t[9]=e):e=t[9],e}case"plugin-content":{let e;return t[10]!==n.icon?(e=n.icon?(0,i.jsx)(n.icon,{}):null,t[10]=n.icon,t[11]=e):e=t[11],e}default:return null}}let ag=(0,_.forwardRef)(function(e,t){let n,s,r,o,c,u,m,p,f,y,v,x,j,w,N,C,k,S,I,T,E=(0,a.c)(52);E[0]!==e?({onClick:o,onClose:c,isActive:s,item:r,controlHintId:n,tabPanelId:m,...u}=e,E[0]=e,E[1]=n,E[2]=s,E[3]=r,E[4]=o,E[5]=c,E[6]=u,E[7]=m):(n=E[1],s=E[2],r=E[3],o=E[4],c=E[5],u=E[6],m=E[7]);let[L,R]=(0,_.useState)(!1),A=(0,_.useRef)(null),D=!r.disableCloseButton;E[8]!==c?(p=()=>{c&&c(),(0,l.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_CLOSE",mode:"immersive"})},E[8]=c,E[9]=p):p=E[9];let P=p,O=(0,_.useRef)(null),B=r.name;E[10]!==L?(f=()=>{let e=A.current;if(!e)return;let t=e.scrollWidth>e.clientWidth;t!==L&&R(t)},E[10]=L,E[11]=f):f=E[11];let F=f,M=`content-preview-tab-${r.id}`;E[12]!==F||E[13]!==M||E[14]!==B?(y=(0,i.jsx)("span",{className:ap.title,"data-title":B,"data-testid":M,ref:A,onMouseEnter:F,children:B}),E[12]=F,E[13]=M,E[14]=B,E[15]=y):y=E[15];let $=y;E[16]!==s?(v=(0,b.$)(ap.tabContent,{[ap.isActive]:s}),E[16]=s,E[17]=v):v=E[17];let V=s?"true":void 0;return E[18]!==o?(x=e=>{o&&o(e),(0,l.BI)("dotcom_chat.activate",{target:"BROWSER_TAB_SELECT",mode:"immersive"})},E[18]=o,E[19]=x):x=E[19],E[20]!==P||E[21]!==D?(j=e=>{switch(e.key.toLowerCase()){case"delete":case"backspace":D&&P();break;case"tab":if(e.shiftKey)break;D&&(e.preventDefault(),O.current?.focus())}},w=e=>{1===e.button&&D&&P()},E[20]=P,E[21]=D,E[22]=j,E[23]=w):(j=E[22],w=E[23]),E[24]!==r?(N=(0,i.jsx)("span",{className:ap.icon,children:(0,i.jsx)(af,{item:r})}),E[24]=r,E[25]=N):N=E[25],E[26]!==L||E[27]!==B||E[28]!==$?(C=L?(0,i.jsx)(d.m,{text:B,position:"bottom",children:$}):$,E[26]=L,E[27]=B,E[28]=$,E[29]=C):C=E[29],E[30]!==r.trailingComponent?(k=r.trailingComponent?(0,i.jsx)("div",{className:ap.trailingComponent,children:r.trailingComponent}):null,E[30]=r.trailingComponent,E[31]=k):k=E[31],E[32]!==n||E[33]!==t||E[34]!==u||E[35]!==N||E[36]!==C||E[37]!==k||E[38]!==V||E[39]!==x||E[40]!==j||E[41]!==w||E[42]!==m?(S=(0,i.jsxs)("button",{className:ap.mainButton,type:"button",role:"tab","aria-selected":V,"aria-describedby":n,"aria-controls":m,onClick:x,onKeyDown:j,onAuxClick:w,ref:t,...u,children:[N,C,k]}),E[32]=n,E[33]=t,E[34]=u,E[35]=N,E[36]=C,E[37]=k,E[38]=V,E[39]=x,E[40]=j,E[41]=w,E[42]=m,E[43]=S):S=E[43],E[44]!==P||E[45]!==D||E[46]!==B?(I=D&&(0,i.jsx)("div",{className:ap.closeButton,children:(0,i.jsx)(g.K,{icon:h.XIcon,size:"small",variant:"invisible","aria-label":`Close ${B}`,"aria-hidden":!0,tabIndex:-1,unsafeDisableTooltip:!0,onClick:P,ref:O})}),E[44]=P,E[45]=D,E[46]=B,E[47]=I):I=E[47],E[48]!==S||E[49]!==I||E[50]!==v?(T=(0,i.jsx)("div",{className:ap.tabContainer,children:(0,i.jsxs)("div",{className:v,children:[S,I]})}),E[48]=S,E[49]=I,E[50]=v,E[51]=T):T=E[51],T});try{ah.displayName||(ah.displayName="CodeTabIcon")}catch{}try{af.displayName||(af.displayName="TabIcon")}catch{}try{ag.displayName||(ag.displayName="ContentPreviewTab")}catch{}var ay=n(88934);function av(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,i.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M13 .5H3A2.5 2.5 0 0 0 .5 3v10A2.5 2.5 0 0 0 3 15.5h10a2.5 2.5 0 0 0 2.5-2.5V3A2.5 2.5 0 0 0 13 .5M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm6 6.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5M12.25 5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 12.25a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5",clipRule:"evenodd"})}),t[0]=e):e=t[0],e}try{av.displayName||(av.displayName="DiceIcon")}catch{}let ax={container:"EmptyState-module__container--LAYqE",icon:"EmptyState-module__icon--Ur91O",heading:"EmptyState-module__heading--fStvv",subtitle:"EmptyState-module__subtitle--tjaBc"};function ab(e){let t,n,r,o,c,d,u,m,p,f,g,y,v=(0,a.c)(23),{isOpening:x}=e,b=(0,eI.b)(),j=(0,s.Pk)(),w=(0,ay.zy)(),N=(0,_.useRef)(null);v[0]!==j?(t=(0,eE.W)(j),v[0]=j,v[1]=t):t=v[1];let C=t,k=(0,id.X)();v[2]===Symbol.for("react.memo_cache_sentinel")?(n=[],v[2]=n):n=v[2];let[S,I]=(0,_.useState)(n);v[3]!==k.icebreakers?(r=()=>{var e;if(Array.isArray(e=k.icebreakers)&&e.every(e=>"type"in e&&"data"in e)){let e=k.icebreakers.find(a_);e&&e.data.length>0&&I(e.data)}},v[3]=k.icebreakers,v[4]=r):r=v[4],v[5]!==w||v[6]!==k.icebreakers?(o=[k.icebreakers,w],v[5]=w,v[6]=k.icebreakers,v[7]=o):o=v[7],(0,_.useEffect)(r,o),v[8]!==x?(c=()=>{x&&N.current&&window.requestAnimationFrame(()=>{N.current?.focus({preventScroll:!0})})},d=[x],v[8]=x,v[9]=c,v[10]=d):(c=v[9],d=v[10]),(0,_.useEffect)(c,d),v[11]!==C||v[12]!==S||v[13]!==b||v[14]!==j?(u=()=>{if(0===S.length)return;let e=function(e){let t=Math.floor(Math.random()*e.length),n=e[t];if(!n)throw Error("No icebreaker found");return n}(S),t=0===j.messages.length?C:(0,eE.W)(j),n=j.currentUserLogin,i=e.message;b.sendChatMessage({thread:t,content:i.replaceAll("$$USERNAME$$",n),references:j.currentReferences,topic:j.currentTopic,context:j.context,customInstructions:j.customInstructions,model:j.model}),(0,l.BI)("dotcom_chat.activate",{target:"CONTENT_PREVIEW_EMPTY_STATE_ICEBREAKER_BUTTON",topic:j.currentTopic?.name,mode:"immersive",suggestionId:e.id})},v[11]=C,v[12]=S,v[13]=b,v[14]=j,v[15]=u):u=v[15];let T=u;return v[16]===Symbol.for("react.memo_cache_sentinel")?(f=(0,i.jsx)(h.BrowserIcon,{size:24,className:ax.icon}),g=(0,i.jsx)("h1",{className:"sr-only",children:"Content preview panel"}),m=(0,i.jsx)("h2",{className:ax.heading,children:"View files directly within Copilot"}),p=(0,i.jsx)("p",{className:ax.subtitle,children:"Ask to generate a file or app, or use the button below to try it yourself."}),v[16]=m,v[17]=p,v[18]=f,v[19]=g):(m=v[16],p=v[17],f=v[18],g=v[19]),v[20]!==T||v[21]!==j.isWaitingOnCopilot?(y=(0,i.jsxs)("div",{className:ax.container,children:[f,g,m,p,(0,i.jsx)(W.Q,{ref:N,leadingVisual:av,onClick:T,disabled:j.isWaitingOnCopilot,children:"I\u2019m feeling lucky"})]}),v[20]=T,v[21]=j.isWaitingOnCopilot,v[22]=y):y=v[22],y}function a_(e){return"interactional"===e.type}try{ab.displayName||(ab.displayName="EmptyState")}catch{}let aj={container:"LoadingState-module__container--dKvYJ"};function aw(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("div",{className:aj.container,children:(0,i.jsx)(q.A,{size:"large"})}),t[0]=e):e=t[0],e}try{aw.displayName||(aw.displayName="LoadingState")}catch{}function aN(e,t,n={}){(0,l.BI)(e,{contentPreviewType:t.type,mode:"immersive",path:t.id,...n})}function aC(e){let t,n,c,d,u,j,C,k,S,I,T,E,L,R,A,D,P,O,B,F,M,$,V,U,q,W,H,G,K,z,Q,Y,J,X,Z,ee,et,en=(0,a.c)(119),{returnFocusRef:ei,disableResourcePanel:ea,disableActionsMenu:es,useXCloseButton:er}=e,eo=void 0!==es&&es,el=void 0!==er&&er,ec=(0,N.tZ)(),ed=(0,N.wI)(),{selectedThreadID:eu}=(0,s.bP)("selectedThreadID"),em=(0,m.S)(eu),{items:ep,allOpenItems:eh,selectedItem:ef,openItem:eg,closeItem:ey,closeItems:ev,closePreviewPane:ex,showLoadingState:eb,openResourcePanel:e_,returnFocusElementRef:ej}=(0,N.xx)(),ew=(0,m.S)(ec),eN=ec&&!ew,eC=ew&&!ec;if(en[0]!==ep||en[1]!==eh){let e;en[3]!==ep?(e=e=>ep.get(e),en[3]=ep,en[4]=e):e=en[4],t=eh.map(e).filter(aE),en[0]=ep,en[1]=eh,en[2]=t}else t=en[2];let ek=t,eS=(0,_.useId)(),eI=(0,_.useId)(),eT=(0,_.useId)();if(en[5]!==ep||en[6]!==eh||en[7]!==ef){let e;en[10]!==ep?(e=e=>ep.get(e),en[10]=ep,en[11]=e):e=en[11],c=(n=eh.map(e).filter(aT)).find(e=>e.id===ef)??n[0],en[5]=ep,en[6]=eh,en[7]=ef,en[8]=n,en[9]=c}else n=en[8],c=en[9];let eE=c,eL=o.W.copilotResourcePanel&&!(void 0!==ea&&ea),eR=(0,_.useRef)(!0);en[12]!==eC||en[13]!==eN||en[14]!==ej||en[15]!==ei||en[16]!==eE?(d=()=>{if(eC||o.W.focusTextAreaInsteadOfWorkbench&&eR.current&&eE&&"file"===eE.type&&!eN){eR.current=!1;let e=ej.current;e?e.focus():ei.current?.focus()}},u=[eC,eN,ei,eE,ej],en[12]=eC,en[13]=eN,en[14]=ej,en[15]=ei,en[16]=eE,en[17]=d,en[18]=u):(d=en[17],u=en[18]),(0,_.useEffect)(d,u),en[19]!==ex||en[20]!==em||en[21]!==eu?(j=()=>{void 0!==em&&em!==eu&&ex()},C=[ex,em,eu],en[19]=ex,en[20]=em,en[21]=eu,en[22]=j,en[23]=C):(j=en[22],C=en[23]),(0,_.useEffect)(j,C),en[24]!==ec||en[25]!==n||en[26]!==ef?(k=()=>{if(!ef||!ec)return;let e=n.findIndex(e=>e.id===ef),t=eP.current[e];t?.scrollIntoView({block:"nearest",inline:"nearest"})},S=[ef,n,ec],en[24]=ec,en[25]=n,en[26]=ef,en[27]=k,en[28]=S):(k=en[27],S=en[28]),(0,_.useEffect)(k,S),en[29]!==ek?(I=async()=>{let e=ek.map(aI);ie(new File([await (0,x._6)(e).blob()],"files.zip"))},en[29]=ek,en[30]=I):I=en[30];let eA=I;en[31]!==ey||en[32]!==ex||en[33]!==n.length||en[34]!==eE?(T=e=>{if(eE){let t=void 0!==e&&e&&1===n.length;ey(eE.id),t&&(ex(),(0,l.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"}))}},en[31]=ey,en[32]=ex,en[33]=n.length,en[34]=eE,en[35]=T):T=en[35];let eD=T;en[36]===Symbol.for("react.memo_cache_sentinel")?(E=[],en[36]=E):E=en[36];let eP=(0,_.useRef)(E),eO=(0,_.useRef)(null);en[37]===Symbol.for("react.memo_cache_sentinel")?(L={containerRef:eO,focusableElementFilter:aS,bindKeys:p.z0.ArrowHorizontal|p.z0.HomeAndEnd,focusInStrategy:"first",focusOutBehavior:"wrap"},en[37]=L):L=en[37],en[38]!==n?(R=[n],en[38]=n,en[39]=R):R=en[39],(0,f.G)(L,R);let eB=!(0,r.g)(eO);if(en[40]!==eS||en[41]!==ey||en[42]!==ev||en[43]!==ex||en[44]!==eT||en[45]!==ed||en[46]!==eg||en[47]!==n||en[48]!==e_||en[49]!==eL||en[50]!==ef||en[51]!==eI||en[52]!==el){let e;en[64]!==ev||en[65]!==ex?(e=()=>{ev(),ex(),(0,l.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE_ALL_TABS",mode:"immersive"})},en[64]=ev,en[65]=ex,en[66]=e):e=en[66],A=e,U=w.toolbar,en[67]!==ed||en[68]!==e_||en[69]!==eL||en[70]!==el?(q=(!eL||!ed)&&!el&&(0,i.jsx)("div",{className:(0,b.$)(w.actions,w.rightDivider),children:eL?ed?null:(0,i.jsx)(g.K,{icon:h.ListUnorderedIcon,"aria-label":"Open resource panel",onClick:e_,variant:"invisible"}):(0,i.jsx)(aL,{})}),en[67]=ed,en[68]=e_,en[69]=eL,en[70]=el,en[71]=q):q=en[71],V=w.tabsContainer,D=w.tabs,P="tablist",O="Workbench items",B=eO,F=-1,M=ak,$=n.map((e,t)=>(0,i.jsx)(ag,{id:e.id===ef?eS:void 0,tabPanelId:e.id===ef?eI:void 0,controlHintId:eT,isActive:e.id===ef,onClick:()=>{eg(e.id),aN("filePreviewTab.click",e)},onClose:()=>(e=>{let t=n[e];if(!t)return;let i=eP.current[e+1]??eP.current[e-1]??eO.current;i?.focus();let a=1===n.length;ey(t.id),a&&ex(),aN("filePreviewTab.close",t)})(t),item:e,ref:e=>{eP.current[t]=e}},e.id)),en[40]=eS,en[41]=ey,en[42]=ev,en[43]=ex,en[44]=eT,en[45]=ed,en[46]=eg,en[47]=n,en[48]=e_,en[49]=eL,en[50]=ef,en[51]=eI,en[52]=el,en[53]=A,en[54]=D,en[55]=P,en[56]=O,en[57]=B,en[58]=F,en[59]=M,en[60]=$,en[61]=V,en[62]=U,en[63]=q}else A=en[53],D=en[54],P=en[55],O=en[56],B=en[57],F=en[58],M=en[59],$=en[60],V=en[61],U=en[62],q=en[63];return en[72]!==eT?(W=(0,i.jsx)("span",{id:eT,"aria-hidden":"true",className:"sr-only",children:"Press Delete to close."}),en[72]=eT,en[73]=W):W=en[73],en[74]===Symbol.for("react.memo_cache_sentinel")?(H=(0,i.jsx)("span",{}),en[74]=H):H=en[74],en[75]!==D||en[76]!==P||en[77]!==O||en[78]!==B||en[79]!==F||en[80]!==M||en[81]!==$||en[82]!==W?(G=(0,i.jsxs)("div",{className:D,role:P,"aria-label":O,ref:B,tabIndex:F,onWheel:M,children:[$,W,H]}),en[75]=D,en[76]=P,en[77]=O,en[78]=B,en[79]=F,en[80]=M,en[81]=$,en[82]=W,en[83]=G):G=en[83],en[84]!==V||en[85]!==G?(K=(0,i.jsx)("div",{className:V,children:G}),en[84]=V,en[85]=G,en[86]=K):K=en[86],en[87]!==A||en[88]!==eo||en[89]!==eA||en[90]!==ek.length||en[91]!==eh.length||en[92]!==eB?(z=!eo&&eh.length>0&&(0,i.jsx)("div",{className:(0,b.$)(w.actions,eB&&w.leftDivider),children:(0,i.jsxs)(y.W,{children:[(0,i.jsx)(y.W.Anchor,{children:(0,i.jsx)(g.K,{icon:h.KebabHorizontalIcon,"aria-label":"More options",variant:"invisible"})}),(0,i.jsx)(y.W.Overlay,{children:(0,i.jsxs)(v.l,{children:[ek.length>0&&(0,i.jsxs)(v.l.Item,{onSelect:eA,children:[(0,i.jsx)(v.l.LeadingVisual,{children:(0,i.jsx)(h.FileZipIcon,{})}),"Download all files"]}),(0,i.jsxs)(v.l.Item,{onSelect:A,children:[(0,i.jsx)(v.l.LeadingVisual,{children:(0,i.jsx)(h.XIcon,{})}),"Close all tabs"]})]})})]})}),en[87]=A,en[88]=eo,en[89]=eA,en[90]=ek.length,en[91]=eh.length,en[92]=eB,en[93]=z):z=en[93],en[94]!==ex||en[95]!==eL||en[96]!==el?(Q=eL||el?(0,i.jsx)(g.K,{variant:"invisible",icon:h.XIcon,"aria-label":"Close workbench",onClick:()=>{ex(),(0,l.BI)("dotcom_chat.activate",{target:"CLOSE_PREVIEW_PANE_BUTTON",mode:"immersive"})}}):null,en[94]=ex,en[95]=eL,en[96]=el,en[97]=Q):Q=en[97],en[98]!==z||en[99]!==Q?(Y=(0,i.jsxs)("div",{className:w.rightActions,children:[z,Q]}),en[98]=z,en[99]=Q,en[100]=Y):Y=en[100],en[101]!==U||en[102]!==q||en[103]!==K||en[104]!==Y?(J=(0,i.jsxs)("div",{className:U,children:[q,K,Y]}),en[101]=U,en[102]=q,en[103]=K,en[104]=Y,en[105]=J):J=en[105],en[106]===Symbol.for("react.memo_cache_sentinel")?(X=(0,b.$)(w.content,"content-preview-content"),en[106]=X):X=en[106],en[107]!==eD||en[108]!==eN||en[109]!==eE||en[110]!==eb?(Z=eb?(0,i.jsx)(aw,{}):eE?(0,i.jsx)(am,{isOpening:eN,previewItem:eE,onClose:eD}):(0,i.jsx)(ab,{isOpening:eN}),en[107]=eD,en[108]=eN,en[109]=eE,en[110]=eb,en[111]=Z):Z=en[111],en[112]!==eS||en[113]!==eI||en[114]!==Z?(ee=(0,i.jsx)("div",{className:X,role:"tabpanel",id:eI,"aria-labelledby":eS,children:Z}),en[112]=eS,en[113]=eI,en[114]=Z,en[115]=ee):ee=en[115],en[116]!==J||en[117]!==ee?(et=(0,i.jsxs)(i.Fragment,{children:[J,ee]}),en[116]=J,en[117]=ee,en[118]=et):et=en[118],et}function ak(e){e.deltaY&&(e.preventDefault(),e.currentTarget.scrollLeft=e.currentTarget.scrollLeft+e.deltaY)}function aS(e){return"tab"===e.role}function aI(e){return new File([e.value],e.name)}function aT(e){return!!e}function aE(e){return e?.type==="file"}function aL(){let e,t,n=(0,a.c)(3),{closePreviewPane:s}=(0,N.xx)();return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(h.SidebarCollapseIcon,{}),n[0]=e):e=n[0],n[1]!==s?(t=(0,i.jsx)(d.m,{text:"Close workbench",position:"bottom",relationship:"label",children:(0,i.jsx)(c.$,{variant:"invisible",iconOnly:!0,icon:e,onClick:()=>{s(),(0,l.BI)("dotcom_chat.activate",{target:"BROWSER_CLOSE",mode:"immersive"})}})}),n[1]=s,n[2]=t):t=n[2],t}function aR(){let e,t=(0,a.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:w.toolbar,children:(0,i.jsx)("div",{className:(0,b.$)(w.actions,w.rightDivider),children:(0,i.jsx)(aL,{})})}),(0,i.jsx)("div",{className:(0,b.$)(w.content),children:(0,i.jsx)(j.x,{regionName:"The workbench"})})]}),t[0]=e):e=t[0],e}function aA(e){let t,n,s,r,o,l=(0,a.c)(17),{returnFocusRef:c,disableResourcePanel:d,disableActionsMenu:m,useXCloseButton:p,className:h}=e,f=void 0!==d&&d,g=void 0!==m&&m,y=void 0!==p&&p,v=(0,_.useId)(),{contentPreviewRef:x}=(0,N.xx)(),j=(0,N.tZ)(),C=(0,N.wI)()&&w.resourcePanelOpen;l[0]!==h||l[1]!==C?(t=(0,b.$)(w.container,C,h),l[0]=h,l[1]=C,l[2]=t):t=l[2];let k=j?x:void 0;return l[3]!==v?(n=(0,i.jsx)("h2",{id:v,className:"sr-only",children:"Workbench"}),l[3]=v,l[4]=n):n=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,i.jsx)(aR,{}),l[5]=s):s=l[5],l[6]!==g||l[7]!==f||l[8]!==c||l[9]!==y?(r=(0,i.jsx)(u.t,{fallback:s,children:(0,i.jsx)(aC,{returnFocusRef:c,disableResourcePanel:f,disableActionsMenu:g,useXCloseButton:y})}),l[6]=g,l[7]=f,l[8]=c,l[9]=y,l[10]=r):r=l[10],l[11]!==v||l[12]!==t||l[13]!==k||l[14]!==n||l[15]!==r?(o=(0,i.jsxs)("div",{"aria-labelledby":v,className:t,tabIndex:-1,"data-testid":"content-preview",role:"dialog",ref:k,children:[n,r]}),l[11]=v,l[12]=t,l[13]=k,l[14]=n,l[15]=r,l[16]=o):o=l[16],o}try{aC.displayName||(aC.displayName="ContentPreviewInner")}catch{}try{aL.displayName||(aL.displayName="CloseContentPreviewButton")}catch{}try{aR.displayName||(aR.displayName="ContentPreviewFallback")}catch{}try{aA.displayName||(aA.displayName="ContentPreview")}catch{}},91348:(e,t,n)=>{n.d(t,{FT:()=>f,Gx:()=>m,Hx:()=>y,NZ:()=>g,f0:()=>l,kX:()=>p,nT:()=>d});var i=n(31629),a=n(21046),s=n(90122),r=n(39087),o=n(45363);function l(e){let t={nodes:new Map,edges:[],layers:[]};if(!e)return t;for(let n of e){if(!n?.id)continue;let e=u(n.id);t.nodes.set(e,n)}for(let n of e)for(let e of c(n)){let i=u(e);n?.id&&i&&t.edges.push({from:i,to:n.id})}let n=function(e){let t={},n=new Set,i=(s,r=0)=>{try{if(n.has(s))throw Error(`Potential cycle detected at node ${s}`);if(n.add(s),r>100)return(0,a.FF)(`Maximum recursion depth reached for node ${s}`),0;if(void 0!==t[s])return t[s];let o=e.nodes.get(s);if(!o)return t[s]=0,0;let l=c(o);if(l&&0!==l.size){let e=[...l].map(e=>{let t=u(e);return i(t,r+1)});t[s]=Math.max(...e)+1}else{let n=e.edges.filter(e=>e.from===s).map(e=>e.to);0===n.length?t[s]=-1:t[s]=1}return t[s]}finally{n.delete(s)}};for(let[n]of e.nodes)if(!t[n])try{i(n)}catch(e){(0,a.vV)(`Error computing layer for node ${n}:`,e),t[n]=0}let s=Math.max(...Object.values(t))+1;for(let e of Object.keys(t))-1===t[e]&&(t[e]=s);let r=[];for(let[n,i]of Object.entries(t)){let t=e.nodes.get(n);t&&(r[i]||(r[i]=[]),r[i].push(t))}return r.filter(Boolean)}(t);return t.layers=n,t}function c(e){let t=(0,s.ZP)();return new Set((e.content.match(t)||[]).map(e=>e.replace(/[{}]/g,"")))}function d(e){return new Set([...c(e)].map(u))}function u(e){return e.match(/^[^|.]+/)?.[0]??e}let m=(e,t)=>{if(!e||"object"!=typeof e||!e.title&&!e.description&&!e.content)return null;let n={...e,title:e.title||"",description:e.description||"",type:o.C.getMetadata(e.type)?e.type:"text",content:e.content||"",id:(e.id||"").trim()};if("text"===n.type&&(n.metadata=function(e){if((0,i.ir)(e))return r.j[e.metadata.inputType]?e.metadata:{inputType:"text"}}(e)||{inputType:"text"}),"string"!=typeof n.content&&(n.content=""),(0,i.jq)(n)){let e=t.find(e=>e.id===n.loopId);if(e){let t=n.loopInputValues?.reduce((e,t)=>(e[t.inputId]=t,e),{})||{};n.loopInputValues=e.nodes?.filter(e=>(0,i.ir)(e)).map(e=>{let n=t[e.id];if(!n)throw Error(`Input not found for node ${e.id}`);return{inputId:e.id,nodeId:n.nodeId,doMapInput:!!n.doMapInput}})}}return n},p=(e,t)=>{let n=function(e){return{...e,nodes:e.nodes.map(h)}}(e);return{...n,nodes:(n.nodes||[]).map(e=>m(e,t)).filter(e=>null!==e)}};function h(e){return"prompt"===e.type&&"model"in e&&"string"==typeof e.model?{...e,metadata:{model:e.model}}:"text"===e.type&&"inputType"in e?{...e,metadata:function(e){if("type"in e&&"string"==typeof e.type){let t="file"===e.type?"text":e.type;return{...e,inputType:t}}return e}(e.inputType)}:e}function f(e){let t=l(e.nodes);return e.nodes.filter(e=>v(e,t))}function g(e){let t={nodes:new Map,edges:[...e.edges],layers:[...e.layers]};for(let[n,i]of e.nodes)t.nodes.set(n,i);let n=[...e.nodes].filter(([,t])=>v(t,e));if(n.length>0){let e="virtual-output";for(let[,i]of(t.nodes.set(e,{type:"output",id:e}),n))t.edges.push({from:i.id,to:e})}return t}function y(e){return"virtual-output"===e}function v(e,t){return!t.edges.some(t=>t.from===e.id)&&t.edges.some(t=>t.to===e.id)}},93364:(e,t,n)=>{function i(e){return{success:!0,data:e}}function a(e,t){var n,i;return{success:!1,error:(n=e)?"string"==typeof n?n:"object"!=typeof n?(void 0)??s:"message"in n&&"string"==typeof n.message?n.message:"error"in n&&"string"===n.error?n.error:i??s:i??s,httpStatus:t?.status}}n.d(t,{$j:()=>i,YD:()=>a});let s="Unknown error"},93380:(e,t,n)=>{n.d(t,{B:()=>s});var i=n(21728),a=n(96540);function s(e){let t,n,s,r=(0,i.c)(4),[o,l]=(0,a.useState)(e);r[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>l(!0),r[0]=t):t=r[0];let c=t;r[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>l(!1),r[1]=n):n=r[1];let d=n;return r[2]!==o?(s=[o,c,d],r[2]=o,r[3]=s):s=r[3],s}},95254:(e,t,n)=>{n.d(t,{L:()=>a});var i=n(47723);function a(e){if(e&&0!==e.length)for(let t of e){let e=function(e){let t=`${i.qY}::`;if(!e.startsWith(t))return;let n=e.slice(t.length),a=n.indexOf("::");if(-1!==a)return n.slice(0,a)||void 0}(t);if(e)return e}}},95772:(e,t,n)=>{n.d(t,{A:()=>v});var i=n(74848),a=n(21728),s=n(91474),r=n(17925),o=n(53419),l=n(26607);let c={button:"CommandPill-module__button--dwT_a",text:"CommandPill-module__text--ggGhT"},d=e=>{let t,n,s,r,o,d,u,m,p=(0,a.c)(16);p[0]!==e?({children:s,icon:t,isNew:r,...n}=e,p[0]=e,p[1]=t,p[2]=n,p[3]=s,p[4]=r):(t=p[1],n=p[2],s=p[3],r=p[4]);let h=void 0!==r&&r;return p[5]!==t?(o=(0,i.jsx)(t,{}),p[5]=t,p[6]=o):o=p[6],p[7]!==s?(d=(0,i.jsx)("span",{className:c.text,children:s}),p[7]=s,p[8]=d):d=p[8],p[9]!==h?(u=h&&(0,i.jsx)(l.A,{size:"small",variant:"accent",children:"New"}),p[9]=h,p[10]=u):u=p[10],p[11]!==n||p[12]!==o||p[13]!==d||p[14]!==u?(m=(0,i.jsxs)("button",{className:c.button,...n,children:[o,d,u]}),p[11]=n,p[12]=o,p[13]=d,p[14]=u,p[15]=m):m=p[15],m};try{d.displayName||(d.displayName="CommandPill")}catch{}let u={container:"CommandStarters-module__container--y1QAx",list:"CommandStarters-module__list--sK_4w"},m=e=>{let t,n,r,o=(0,a.c)(8),{onSelect:l}=e;o[0]===Symbol.for("react.memo_cache_sentinel")?(t={enabled:!0},o[0]=t):t=o[0];let{availableCommands:c}=(0,s.j)(t);if(0===c.length)return null;if(o[1]!==c||o[2]!==l){let e;o[4]!==l?(e=e=>(0,i.jsx)("li",{children:(0,i.jsx)(d,{icon:e.icon,onClick:()=>l(e.key),isNew:e.isNew,children:e.name})},e.key),o[4]=l,o[5]=e):e=o[5],n=c.map(e),o[1]=c,o[2]=l,o[3]=n}else n=o[3];return o[6]!==n?(r=(0,i.jsx)("div",{className:u.container,children:(0,i.jsx)("ul",{className:u.list,children:n})}),o[6]=n,o[7]=r):r=o[7],r};try{m.displayName||(m.displayName="CommandStarters")}catch{}var p=n(11683),h=n(5524),f=n(63307),g=n(96540);let y=e=>{let t,n,s,r,o,l,c,d,u,m,y,v,x,b,_,j,w,N,C,k,S,I,T,E,L=(0,a.c)(67),{chatCommand:R,suggestions:A,onSelect:D,anchorRef:P,textAreaRef:O}=e,[B,F]=(0,g.useState)(0),[M,$]=(0,g.useState)(0),[V,U]=(0,g.useState)(!1),[q,W]=(0,g.useState)(void 0),[H,G]=(0,g.useState)(-1),[K,z]=(0,g.useState)(""),Q=(0,g.useRef)(null),Y=(0,g.useRef)(null);if(L[0]!==R||L[1]!==A||L[2]!==K){let e;L[4]!==R||L[5]!==K?(e=e=>{let t=`/${R} ${e}`.toLowerCase(),n=K.toLowerCase().trim();return t.includes(n)&&t!==n},L[4]=R,L[5]=K,L[6]=e):e=L[6],t=A.filter(e),L[0]=R,L[1]=A,L[2]=K,L[3]=t}else t=L[3];let J=t,X=V&&J.length>0;L[7]!==P?(n=()=>{if(Y.current&&P.current){let{top:e,left:t}=(0,p.uG)(Y.current,P.current,{align:"start",side:"outside-bottom",anchorOffset:4});F(e),$(t)}},L[7]=P,L[8]=n):n=L[8];let Z=n;L[9]!==O?(s=()=>{O.current===document.activeElement&&U(!0)},r=[O],L[9]=O,L[10]=s,L[11]=r):(s=L[10],r=L[11]),(0,g.useEffect)(s,r),L[12]!==O?(o=()=>{let e=O.current;if(!e)return;let t=()=>{z(e.value)};return z(e.value),e.addEventListener("input",t),()=>{e.removeEventListener("input",t)}},l=[O],L[12]=O,L[13]=o,L[14]=l):(o=L[13],l=L[14]),(0,g.useEffect)(o,l),L[15]!==P||L[16]!==X||L[17]!==Z?(c=()=>{let e=P.current;if(!X||!e)return;let t=()=>{P.current&&(W(P.current.getBoundingClientRect().width),Z())};return t(),Q.current||(Q.current=new ResizeObserver(t)),Q.current.observe(e),()=>{Q.current&&Q.current.unobserve(e)}},d=[X,P,Z],L[15]=P,L[16]=X,L[17]=Z,L[18]=c,L[19]=d):(c=L[18],d=L[19]),(0,g.useEffect)(c,d),L[20]!==O?(u=e=>!!e&&((O.current?.contains(e)??!1)||(Y.current?.contains(e)??!1)),L[20]=O,L[21]=u):u=L[21];let ee=u;L[22]!==ee||L[23]!==O?(m=()=>{let e=O.current;if(!e)return;let t=e=>{ee(e.relatedTarget)||U(!1)};return e.addEventListener("blur",t),()=>{e.removeEventListener("blur",t)}},y=[O,ee],L[22]=ee,L[23]=O,L[24]=m,L[25]=y):(m=L[24],y=L[25]),(0,g.useEffect)(m,y),L[26]!==R||L[27]!==O?(v=()=>{let e=O.current;if(!e)return;let t=()=>{R&&U(!0)};return e.addEventListener("focus",t),()=>{e.removeEventListener("focus",t)}},x=[O,R],L[26]=R,L[27]=O,L[28]=v,L[29]=x):(v=L[28],x=L[29]),(0,g.useEffect)(v,x),L[30]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{U(!1),G(-1)},L[30]=b):b=L[30];let et=b;L[31]!==X||L[32]!==O?(_=()=>{let e=O.current;if(!e||!X)return;let t=e=>{(1!==e.key.length||e.ctrlKey||e.metaKey||e.altKey||e.isComposing)&&"Backspace"!==e.key&&"Delete"!==e.key||G(-1)};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}},j=[O,X],L[31]=X,L[32]=O,L[33]=_,L[34]=j):(_=L[33],j=L[34]),(0,g.useEffect)(_,j),L[35]!==R||L[36]!==X||L[37]!==D||L[38]!==O||L[39]!==J?(w=()=>{let e=O.current;if(!e||!X)return;let t=e=>{if("ArrowDown"===e.key||"ArrowUp"===e.key){e.preventDefault();let t="ArrowDown"===e.key?"down":"up";G(e=>((e,t)=>{let n="down"===e?-1===t?0:Math.min(t+1,J.length-1):-1===t?J.length-1:Math.max(t-1,0),i=J[n];return i&&D(R,i),n})(t,e))}};return e.addEventListener("keydown",t),()=>{e.removeEventListener("keydown",t)}},N=[O,X,J,R,D],L[35]=R,L[36]=X,L[37]=D,L[38]=O,L[39]=J,L[40]=w,L[41]=N):(w=L[40],N=L[41]),(0,g.useEffect)(w,N),L[42]!==ee?(C=e=>{e.target instanceof Node&&ee(e.target)||et()},L[42]=ee,L[43]=C):C=L[43];let en=C;L[44]!==R||L[45]!==D?(k=e=>{D(R,e),G(-1)},L[44]=R,L[45]=D,L[46]=k):k=L[46];let ei=k;if(!X)return null;if(L[47]!==q?(S=q?{width:`${q}px`}:void 0,L[47]=q,L[48]=S):S=L[48],L[49]!==R||L[50]!==ei||L[51]!==H||L[52]!==J){let e;L[54]!==R||L[55]!==ei||L[56]!==H?(e=(e,t)=>(0,i.jsxs)(h.l.Item,{size:"large",onSelect:()=>ei(e),active:t===H,children:[(0,i.jsx)(h.l.LeadingVisual,{children:(0,i.jsxs)("span",{className:"fgColor-muted",children:["/",R]})}),e]},e),L[54]=R,L[55]=ei,L[56]=H,L[57]=e):e=L[57],I=J.map(e),L[49]=R,L[50]=ei,L[51]=H,L[52]=J,L[53]=I}else I=L[53];return L[58]!==I?(T=(0,i.jsx)(h.l,{children:I}),L[58]=I,L[59]=T):T=L[59],L[60]!==P||L[61]!==M||L[62]!==en||L[63]!==S||L[64]!==T||L[65]!==B?(E=(0,i.jsx)(f.Ay,{top:B,left:M,onClickOutside:en,onEscape:et,returnFocusRef:P,"aria-label":"Command suggestions",style:S,"data-testid":"command-suggestions-overlay",ref:Y,preventFocusOnOpen:!0,children:T}),L[60]=P,L[61]=M,L[62]=en,L[63]=S,L[64]=T,L[65]=B,L[66]=E):E=L[66],E};try{y.displayName||(y.displayName="CommandSuggestions")}catch{}function v(e){let t,n,l,c,d,u,p,h,f=(0,a.c)(24),{chatCommand:g,chatInputRef:v,containerRef:x,textAreaRef:b}=e;f[0]===Symbol.for("react.memo_cache_sentinel")?(t={enabled:!0},f[0]=t):t=f[0];let{availableCommands:_,availableCommandKeys:j}=(0,s.j)(t);f[1]!==j||f[2]!==v||f[3]!==b?(n=e=>{(0,o.BI)("dotcom_chat.activate",{target:"COMMAND_STARTER_SELECTED",mode:"immersive",command:e}),v.current?.setText(t=>{let n=(0,r.V)(t,j);return n?t.replace(`/${n}`,`/${e}`):`/${e} ${t}`}),b.current?.focus()},f[1]=j,f[2]=v,f[3]=b,f[4]=n):n=f[4];let w=n;f[5]!==v||f[6]!==b?(l=(e,t)=>{(0,o.BI)("dotcom_chat.activate",{target:"COMMAND_SUGGESTION_SELECTED",mode:"immersive",command:e,suggestion:t}),v.current?.setText(`/${e} ${t}`.trim()),b.current?.focus()},f[5]=v,f[6]=b,f[7]=l):l=f[7];let N=l;f[8]!==_||f[9]!==g?(c=g?_.find(e=>e.key===g)?.suggestions:null,f[8]=_,f[9]=g,f[10]=c):c=f[10];let C=c,k=C&&C.length>0;return f[11]!==g||f[12]!==x||f[13]!==N||f[14]!==k||f[15]!==C||f[16]!==b?(d=g&&k&&(0,i.jsx)(y,{chatCommand:g,suggestions:C,onSelect:N,anchorRef:x,textAreaRef:b},g),f[11]=g,f[12]=x,f[13]=N,f[14]=k,f[15]=C,f[16]=b,f[17]=d):d=f[17],f[18]===Symbol.for("react.memo_cache_sentinel")?(u=(0,i.jsx)("h2",{className:"sr-only",children:"Chat Commands"}),f[18]=u):u=f[18],f[19]!==w?(p=(0,i.jsxs)(i.Fragment,{children:[u,(0,i.jsx)(m,{onSelect:w})]}),f[19]=w,f[20]=p):p=f[20],f[21]!==d||f[22]!==p?(h=(0,i.jsxs)(i.Fragment,{children:[d,p]}),f[21]=d,f[22]=p,f[23]=h):h=f[23],h}try{v.displayName||(v.displayName="CommandStartersAndSuggestions")}catch{}},95807:(e,t,n)=>{n.d(t,{i:()=>h});var i=n(74848),a=n(96379),s=n(21373),r=n(69726),o=n(11196),l=n(96540),c=n(30459),d=n(57224),u=n(70263);let m={button:"PullRequestsProcessingIndicator-module__button--IKkby",indicator:"PullRequestsProcessingIndicator-module__indicator--iNiwb",text:"PullRequestsProcessingIndicator-module__text--JUMXg"},p={stale:!1,latest_unsynced_push_to_head_ref_at:null};function h({processingIndicatorUrl:e,repositoryId:t,pullRequestId:n}){let[s,r]=(0,l.useState)(p),o=(0,u.A)(),c=(0,l.useCallback)(async()=>{try{let t=await (0,a.lS)(e);if(t.ok){let e=await t.json();o()&&r(e)}}catch{o()&&r(p)}},[o,e]);(0,l.useEffect)(()=>{c()},[]);let{stale:m,latest_unsynced_push_to_head_ref_at:h}=s;return(0,i.jsx)("div",{className:"border-left pl-1",children:(0,i.jsx)(d.y,{appName:"pull-requests-processing-indicator",category:"render",metadata:{},children:(0,i.jsx)(f,{pullRequestId:n,repositoryId:t,stale:m,latest_unsynced_push_to_head_ref_at:h})})})}function f({pullRequestId:e,repositoryId:t,stale:n,latest_unsynced_push_to_head_ref_at:a}){let{sendAnalyticsEvent:l}=(0,c.s)();if(!n||!a)return null;let d=new Date,u=new Date(a),p=Math.round(d.getTime()-u.getTime())/1e3;return p<20||p>=86400?null:(l("pull_requests.processing_indicator","",{repositoryId:t,pullRequestId:e,secondsSinceLastPush:p}),(0,i.jsx)(o.m,{text:"Recent push is being processed and will appear soon",direction:"s",children:(0,i.jsx)(s.Q,{as:"a",href:"https://gh.io/pr-sync-in-progress",variant:"invisible",className:m.button,children:(0,i.jsxs)("div",{className:m.indicator,children:[(0,i.jsx)(r.A,{size:"small"}),(0,i.jsx)("span",{className:m.text,children:"Processing updates"})]})})}))}try{h.displayName||(h.displayName="PullRequestsProcessingIndicatorWithDataFetching")}catch{}try{f.displayName||(f.displayName="PullRequestsProcessingIndicator")}catch{}},96002:(e,t,n)=>{n.d(t,{u:()=>u});var i=n(74848),a=n(21728),s=n(53419),r=n(74753),o=n(73077),l=n(84078),c=n(79184);let d={container:"FreeChatExceededBanner-module__container--yeDGw"};function u(){let e,t,n,s,u=(0,a.c)(6),{resetDate:p}=(0,c.xR)();u[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)(r.s,{children:(0,i.jsx)("h2",{children:"Limit reached"})}),u[0]=e):e=u[0],u[1]!==p?(t=(0,i.jsxs)(i.Fragment,{children:[e,"You have reached your free plan limit. Limit resets on ",p,"."]}),u[1]=p,u[2]=t):t=u[2];let h=t;u[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,i.jsx)(o.z,{as:"a",href:"https://github.com/features/copilot#pricing",onClick:m,children:"Upgrade"}),u[3]=n):n=u[3];let f=n;return u[4]!==h?(s=(0,i.jsx)("div",{className:d.container,children:(0,i.jsx)(l.l,{variant:"upsell",title:"Limit reached",description:h,hideTitle:!0,primaryAction:f})}),u[4]=h,u[5]=s):s=u[5],s}function m(){(0,s.BI)("dotcom_chat.activate",{target:"QUOTA_METER_BANNER_LINK_UPGRADE",mode:"immersive"})}try{u.displayName||(u.displayName="FreeChatExceededBanner")}catch{}},96868:(e,t,n)=>{n.d(t,{Fj:()=>s,Kh:()=>a,qB:()=>r});var i=n(33026);let a={CANVAS:"canvas",OUTPUT:"output"},s={CHAT:"chat",NODE:"node",ABOUT:"about"},r={focusedNodeId:null,hoveredNodeId:null,view:a.CANVAS,sidePanelView:s.CHAT,version:i.U8,showLinkCopiedBanner:!1,showDuplicatedBanner:!1}},97645:(e,t,n)=>{n.d(t,{N:()=>aw});var i,a,s,r=n(21728),o=n(50467),l=n(74848),c=n(87687),d=n(2635),u=n(33592),m=n(17593),p=n(76143),h=n(69599),f=n(26956),g=n(27912),y=n(79634),v=n(91747),x=n(46251),b=n(57352),_=n(96540),j=n(97189),w=n(76977),N=n(47865),C=n(79064);function k(e,t){try{let n=JSON.parse(e);if(void 0!==n.text){let e=n.selectedRepo?{...n.selectedRepo,private:"private"===n.selectedRepo.visibility}:null,i=n.selectedBranch||"",a=n.selectedCustomAgent||"";t.current(n.text,e,i,a)}else t.current(e,null,"","")}catch{t.current(e,null,"","")}}var S=n(93654),I=n(76186),T=n(64894),E=n(26382),L=n(55248);let R={blankslate:"AgentsBlankslate-module__blankslate--h3RJ8",banner:"AgentsBlankslate-module__banner--k7WQF",upsell:"AgentsBlankslate-module__upsell--hyyby"};var A=n(84078),D=n(25641);function P(e){let t,n,i,a,s,o,c,d=(0,r.c)(11),{hasCEorCBAccess:u}=e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(E.E.Visual,{children:(0,l.jsx)(L.j,{})}),n=(0,l.jsx)(E.E.Heading,{children:"Delegate tasks to GitHub Copilot coding agent"}),i=(0,l.jsx)(E.E.Description,{children:"Let Copilot work independently in the background to complete tasks, and then monitor Copilot's progress."}),a=(0,l.jsx)(E.E.SecondaryAction,{href:"https://docs.github.com/en/copilot/how-tos/agents/copilot-coding-agent/enabling-copilot-coding-agent",children:"Learn more about Copilot coding agent"}),d[0]=t,d[1]=n,d[2]=i,d[3]=a):(t=d[0],n=d[1],i=d[2],a=d[3]),d[4]!==u?(s=!0===u&&(0,l.jsx)(O,{}),d[4]=u,d[5]=s):s=d[5],d[6]!==u?(o=!1===u&&(0,l.jsx)(B,{}),d[6]=u,d[7]=o):o=d[7],d[8]!==s||d[9]!==o?(c=(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(f.Zf.Container,{width:"medium",children:(0,l.jsxs)(E.E,{size:"medium",className:R.blankslate,children:[t,n,i,a,s,o]})})}),d[8]=s,d[9]=o,d[10]=c):c=d[10],c}function O(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(A.l,{variant:"warning",title:"Copilot coding agent access disabled",className:R.banner,hideTitle:!0,"data-testid":"agents-access-disabled-banner",children:(0,l.jsx)(A.l.Description,{children:"Access to Copilot coding agent has been disabled by your admin."})}),t[0]=e):e=t[0],e}function B(){let e,t,n=(0,r.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(A.l.PrimaryAction,{as:"a",href:D.Zs,children:"Upgrade"}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(A.l,{variant:"upsell",title:"Copilot coding agent access unavailable for plan",className:`${R.banner} ${R.upsell}`,hideTitle:!0,primaryAction:e,"data-testid":"agents-upgrade-banner",children:(0,l.jsx)(A.l.Description,{children:"This feature is not available on your current plan."})}),n[1]=t):t=n[1],t}try{P.displayName||(P.displayName="AgentsBlankslate")}catch{}try{O.displayName||(O.displayName="AccessDisabledBanner")}catch{}try{B.displayName||(B.displayName="UpgradeBanner")}catch{}let F={failedTaskCreationBanners:"AgentsView-module__failedTaskCreationBanners--bUn1A",copilotDisclosure:"AgentsView-module__copilotDisclosure--lAild",copilotDisclosureText:"AgentsView-module__copilotDisclosureText--myF9L"};function M(e){let t,n,i,a,s=(0,r.c)(10),{problemStatement:o,handleRetry:c,handleDismiss:d}=e,u=o??"";s[0]!==u?(t=function(e,t=50,n=2){let i=t*n;return e.length<=i?e:`${e.substring(0,i).trim()}...`}(u,20,1),s[0]=u,s[1]=t):t=s[1];let m=t,p=`Failed to create a task for '${m}'. Please try again.`;return s[2]!==d?(n=(0,l.jsx)(A.l.SecondaryAction,{onClick:d,children:"Dismiss"}),s[2]=d,s[3]=n):n=s[3],s[4]!==c?(i=(0,l.jsx)(A.l.PrimaryAction,{onClick:c,children:"Retry"}),s[4]=c,s[5]=i):i=s[5],s[6]!==p||s[7]!==n||s[8]!==i?(a=(0,l.jsx)(A.l,{variant:"critical",title:"Task Creation Failed",hideTitle:!0,description:p,secondaryAction:n,primaryAction:i}),s[6]=p,s[7]=n,s[8]=i,s[9]=a):a=s[9],a}try{M.displayName||(M.displayName="TaskCreationFailedBanner")}catch{}var $=n(30388);let V={button:"TaskList-module__button--FzNZb",counter:"TaskList-module__counter--suSM7",filterButtons:"TaskList-module__filterButtons--DNyGe"};var U=n(38621),q=n(62935);let W={description:"TaskListItem-module__description--GUKJ9",iconTransition:"TaskListItem-module__iconTransition--h8TDX",fadeOut:"TaskListItem-module__fadeOut--TTRa9",fadeText:"TaskListItem-module__fadeText--giNoG",entering:"TaskListItem-module__entering--aB9fl",exiting:"TaskListItem-module__exiting--m4Koz"};var H=n(67154),G=n(82595);let K={prDiffSummary:"PullRequestDiffSummaryText-module__prDiffSummary--EzG14",added:"PullRequestDiffSummaryText-module__added--I0cdZ",deleted:"PullRequestDiffSummaryText-module__deleted--M94wu"};function z(e){let t,n,i,a,s,o,c,d=(0,r.c)(17),{prDiffSummary:u}=e;return u&&(0!==u.lines_added||0!==u.lines_deleted)?(d[0]!==u.lines_added?(t=u.lines_added.toLocaleString(),d[0]=u.lines_added,d[1]=t):t=d[1],d[2]!==t?(n=(0,l.jsxs)("span",{"aria-hidden":"true",className:`${K.prDiffSummary} ${K.added}`,children:["+",t]}),d[2]=t,d[3]=n):n=d[3],d[4]!==u.lines_deleted?(i=u.lines_deleted.toLocaleString(),d[4]=u.lines_deleted,d[5]=i):i=d[5],d[6]!==i?(a=(0,l.jsxs)("span",{"aria-hidden":"true",className:`${K.prDiffSummary} ${K.deleted}`,children:["-",i]}),d[6]=i,d[7]=a):a=d[7],d[8]!==u.lines_added||d[9]!==u.lines_deleted?(s=function({linesAdded:e,linesDeleted:t}){let n="Lines changed: ";return n+`${e} ${1===e?"addition":"additions"} & ${t} ${1===t?"deletion":"deletions"}`}({linesAdded:u.lines_added,linesDeleted:u.lines_deleted}),d[8]=u.lines_added,d[9]=u.lines_deleted,d[10]=s):s=d[10],d[11]!==s?(o=(0,l.jsx)("span",{className:"sr-only",children:s}),d[11]=s,d[12]=o):o=d[12],d[13]!==n||d[14]!==a||d[15]!==o?(c=(0,l.jsxs)(x.B,{direction:"horizontal",gap:"condensed",children:[n,a,o]}),d[13]=n,d[14]=a,d[15]=o,d[16]=c):c=d[16],c):null}try{z.displayName||(z.displayName="PullRequestDiffSummaryText")}catch{}var Q=n(44334),Y=n(62189),J=n(45244);let X=e=>{let t,n,i,a=(0,r.c)(7),{text:s}=e,[o,c]=(0,_.useState)(null),[d,u]=(0,_.useState)("none");a[0]!==o||a[1]!==s?(t=()=>{if(null===o)return void c(s);if(s!==o){u("exiting");let e=setTimeout(()=>{c(s),u("entering")},400);return()=>clearTimeout(e)}},n=[s,o],a[0]=o,a[1]=s,a[2]=t,a[3]=n):(t=a[2],n=a[3]),(0,_.useEffect)(t,n);let m=`${W.fadeText} ${"entering"===d?W.entering:"exiting"===d?W.exiting:null}`;return a[4]!==o||a[5]!==m?(i=(0,l.jsx)("span",{className:m,children:o}),a[4]=o,a[5]=m,a[6]=i):i=a[6],i};function Z(e){let t,n,i,a,s,o,c,d,u,m,p,h=(0,r.c)(39),{state:f,revisionCount:g,startedAt:y,prState:x,prUrl:b,prTitle:j,prNwo:w,prNumber:N,prGlobalId:C,prInMergeQueue:k,prDiffSummary:S}=e,[I,T]=(0,_.useState)(null),[E,L]=(0,_.useState)(!1);h[0]!==k||h[1]!==x||h[2]!==f?(t="merged"===x?"Merged":"closed"===x?"Closed":k?"Queued to merge":f&&(0,H.wG)(f)||"",h[0]=k,h[1]=x,h[2]=f,h[3]=t):t=h[3];let R=t;h[4]!==k||h[5]!==x||h[6]!==f?(n=(0,Q.T)(x,k,f),h[4]=k,h[5]=x,h[6]=f,h[7]=n):n=h[7];let A=n;h[8]!==I||h[9]!==A?(i=()=>{if(!I)return void T(A);if(I.icon!==A.icon){L(!0);let e=setTimeout(()=>{T(A),L(!1)},300);return()=>clearTimeout(e)}},a=[A,I],h[8]=I,h[9]=A,h[10]=i,h[11]=a):(i=h[10],a=h[11]),(0,_.useEffect)(i,a);let D=g>0?`${g} revision${g>1?"s":""} \xb7 `:null,P=b,O=(0,v.u)("copilot_swe_agent_progress_commands");if(O){let e;h[12]!==C?(e=(0,Y.U)(C),h[12]=C,h[13]=e):e=h[13],P=e}let B=!O,F=`${W.iconTransition} ${E?W.fadeOut:""}`;return h[14]!==A||h[15]!==F?(s=(0,l.jsx)($.qJ.Item.LeadingVisual,{children:(0,l.jsx)(G.I,{...A,className:F})}),h[14]=A,h[15]=F,h[16]=s):s=h[16],h[17]!==j?(o=(0,l.jsx)($.qJ.Item.Title,{children:j}),h[17]=j,h[18]=o):o=h[18],h[19]!==S||h[20]!==f?(c=f&&"in_progress"!==f&&S&&(0,l.jsx)($.qJ.Item.Actions,{children:(0,l.jsx)(z,{prDiffSummary:S})}),h[19]=S,h[20]=f,h[21]=c):c=h[21],h[22]!==y?(d=(0,l.jsx)(q.A,{format:"micro",datetime:y}),h[22]=y,h[23]=d):d=h[23],h[24]!==R?(u=(0,l.jsx)(X,{text:R}),h[24]=R,h[25]=u):u=h[25],h[26]!==N||h[27]!==w||h[28]!==D||h[29]!==d||h[30]!==u?(m=(0,l.jsx)($.qJ.Item.Description,{children:(0,l.jsxs)("span",{className:W.description,children:[w,"#",N," \xb7 started ",d," ago \xb7"," ",D,u]})}),h[26]=N,h[27]=w,h[28]=D,h[29]=d,h[30]=u,h[31]=m):m=h[31],h[32]!==m||h[33]!==B||h[34]!==s||h[35]!==o||h[36]!==c||h[37]!==P?(p=(0,l.jsxs)($.qJ.Item,{href:P,isExternalLink:B,children:[s,o,c,m]}),h[32]=m,h[33]=B,h[34]=s,h[35]=o,h[36]=c,h[37]=P,h[38]=p):p=h[38],p}function ee(e){let t,n,i,a,s=(0,r.c)(7),{repositoryNwo:o}=e,c=`Creating task in ${o}`;return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)($.qJ.Item.LeadingVisual,{children:(0,l.jsx)(G.I,{icon:U.DotFillIcon,color:"var(--fgColor-attention)"})}),s[0]=t):t=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsx)($.qJ.Item.Title,{children:(0,l.jsx)(J.b,{className:"fgColor-muted",children:"Creating task"})}),s[1]=n):n=s[1],s[2]!==o?(i=(0,l.jsxs)($.qJ.Item.Description,{children:[(0,l.jsx)("span",{className:W.description,children:o})," \xb7 Initializing pull request\u2026"]}),s[2]=o,s[3]=i):i=s[3],s[4]!==c||s[5]!==i?(a=(0,l.jsxs)($.qJ.Item,{"aria-label":c,children:[t,n,i]}),s[4]=c,s[5]=i,s[6]=a):a=s[6],a}try{X.displayName||(X.displayName="FadeText")}catch{}try{Z.displayName||(Z.displayName="TaskListItem")}catch{}try{(i=function(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)($.qJ.Item.Skeleton,{}),t[0]=e):e=t[0],e}).displayName||(i.displayName="LoadingTaskListItem")}catch{}try{ee.displayName||(ee.displayName="OptimisticTaskListItem")}catch{}function et(e){let t,n=(0,r.c)(3),{tasks:i,isError:a}=e;return n[0]!==a||n[1]!==i?(t=(0,l.jsx)($.qJ.List,{id:"tasks-list","aria-labelledby":"open-tab",children:a?(0,l.jsxs)($.qJ.EmptyState,{children:[(0,l.jsx)(U.AlertIcon,{size:24}),(0,l.jsx)("p",{children:"Sorry, something went wrong"})]}):0===i.length?(0,l.jsx)($.qJ.EmptyState,{children:(0,l.jsx)("p",{children:"No open tasks yet. Start a new task to see it here."})}):(0,l.jsx)(l.Fragment,{children:i.map(en)})}),n[0]=a,n[1]=i,n[2]=t):t=n[2],t}function en(e){return e.isOptimistic?(0,l.jsx)(ee,{title:`Creating: ${e.problemStatement??""}`,repositoryNwo:e.nwo??""},e.clientGeneratedId):e.pull&&(0,l.jsx)(Z,{state:e.latest_session_state,startedAt:e.latest_session_updated_at,revisionCount:e.session_count-1,prState:e.pull.state,prUrl:e.pull.url,prTitle:e.pull.title,prNwo:e.pull.repository_nwo,prNumber:e.pull.number,prGlobalId:e.pull.global_relay_id,prInMergeQueue:e.pull.inMergeQueue??!1,prDiffSummary:e.pull.pr_diff_summary},e.pull.id)}try{et.displayName||(et.displayName="OpenTaskList")}catch{}function ei(e){let t,n,i=(0,r.c)(5),{tasks:a,isError:s}=e;return i[0]!==s||i[1]!==a?(t=s?(0,l.jsxs)($.qJ.EmptyState,{children:[(0,l.jsx)(U.AlertIcon,{size:24}),(0,l.jsx)("p",{children:"Sorry, something went wrong"})]}):0===a.length?(0,l.jsx)($.qJ.EmptyState,{children:(0,l.jsx)("p",{children:"No closed tasks yet."})}):a.map(ea),i[0]=s,i[1]=a,i[2]=t):t=i[2],i[3]!==t?(n=(0,l.jsx)($.qJ.List,{id:"tasks-list","aria-labelledby":"closed-tab",children:t}),i[3]=t,i[4]=n):n=i[4],n}function ea(e){return(0,l.jsx)(Z,{state:e.latest_session_state,startedAt:e.latest_session_updated_at,revisionCount:e.session_count-1,prState:e.pull.state,prUrl:e.pull.url,prTitle:e.pull.title,prNwo:e.pull.repository_nwo,prNumber:e.pull.number,prGlobalId:e.pull.global_relay_id,prInMergeQueue:e.pull.inMergeQueue??!1,prDiffSummary:e.pull.pr_diff_summary},e.pull.id)}try{ei.displayName||(ei.displayName="ClosedTaskList")}catch{}function es(e){let t,n,i,a,s,o,c,d,u,m,p,h=(0,r.c)(31),{tasks:f,isError:g,activeTab:y,setActiveTab:v}=e;h[0]!==f?(t=f.filter(eo),h[0]=f,h[1]=t):t=h[1];let x=t;h[2]!==f?(n=f.filter(er),h[2]=f,h[3]=n):n=h[3];let b=n;h[4]!==v?(i=()=>v("open"),h[4]=v,h[5]=i):i=h[5];let _="open"===y;h[6]!==x.length?(a=(0,l.jsx)("span",{className:V.counter,children:x.length}),h[6]=x.length,h[7]=a):a=h[7],h[8]!==i||h[9]!==_||h[10]!==a?(s=(0,l.jsxs)("button",{onClick:i,role:"tab","aria-selected":_,"aria-controls":"tasks-list",id:"open-tab",className:V.button,children:["Open ",a]}),h[8]=i,h[9]=_,h[10]=a,h[11]=s):s=h[11],h[12]!==v?(o=()=>v("closed"),h[12]=v,h[13]=o):o=h[13];let j="closed"===y;return h[14]!==b.length?(c=(0,l.jsx)("span",{className:V.counter,children:b.length}),h[14]=b.length,h[15]=c):c=h[15],h[16]!==o||h[17]!==j||h[18]!==c?(d=(0,l.jsxs)("button",{onClick:o,role:"tab","aria-selected":j,"aria-controls":"tasks-list",id:"closed-tab",className:V.button,children:["Closed ",c]}),h[16]=o,h[17]=j,h[18]=c,h[19]=d):d=h[19],h[20]!==d||h[21]!==s?(u=(0,l.jsx)($.qJ.Header,{children:(0,l.jsxs)("div",{role:"tablist","aria-label":"Filter pull requests",className:V.filterButtons,children:[s,d]})}),h[20]=d,h[21]=s,h[22]=u):u=h[22],h[23]!==y||h[24]!==b||h[25]!==g||h[26]!==x?(m="open"===y?(0,l.jsx)(et,{tasks:x,isError:g}):(0,l.jsx)(ei,{tasks:b,isError:g}),h[23]=y,h[24]=b,h[25]=g,h[26]=x,h[27]=m):m=h[27],h[28]!==u||h[29]!==m?(p=(0,l.jsxs)($.qJ,{children:[u,m]}),h[28]=u,h[29]=m,h[30]=p):p=h[30],p}function er(e){return!!(e.pull&&("merged"===e.pull.state||"closed"===e.pull.state))}function eo(e){return!e.pull||"merged"!==e.pull.state&&"closed"!==e.pull.state}try{es.displayName||(es.displayName="TaskList")}catch{}function el(){let e,t,n,i=(0,r.c)(6),{agentsEnabled:a,hasCEorCBAccess:s}=(0,d.Pk)();i[0]!==a?(e=(0,h.G7)("copilot_chat_agents_empty_state")&&!a,i[0]=a,i[1]=e):e=i[1];let o=e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(g.P.Sidebar,{children:(0,l.jsx)(c.U,{})}),i[2]=t):t=i[2],i[3]!==s||i[4]!==o?(n=(0,l.jsx)(j.Fn,{children:(0,l.jsxs)(g.P,{"data-testid":"agents-layout",children:[t,(0,l.jsx)(g.P.ColumnLeft,{children:o?(0,l.jsx)(P,{hasCEorCBAccess:s}):(0,l.jsx)(ec,{})})]})}),i[3]=s,i[4]=o,i[5]=n):n=i[5],n}function ec(){let e,t,n,i,a,s,o,c,d,p,h,g,b,j,E,L,R=(0,r.c)(38),[A,D]=(0,_.useState)("open"),{sessionsPollingInterval:P,showCopilotCodingAgentPremiumRequestsBanner:O,tasks:B,pullRequestsMap:$}=(0,y.X)(),V=(0,v.u)("copilot_agent_task_list_v2");R[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],R[0]=e):e=R[0];let[U,q]=(0,_.useState)(e);(0,w._)(),R[1]!==$||R[2]!==B||R[3]!==P?(t={sessionsPollingInterval:P,initialTasks:B,initialPullRequestsMap:$},R[1]=$,R[2]=B,R[3]=P,R[4]=t):t=R[4];let{tasks:W,isError:H}=(0,S.si)(t);R[5]===Symbol.for("react.memo_cache_sentinel")?(n={onError:(e,t)=>{q(n=>[...n,{...t,error:e,baseRef:t.baseRef,timestamp:new Date().toISOString()}])}},R[5]=n):n=R[5];let{createTask:G}=(0,N.Z)(n),K=(0,u.b)();R[6]===Symbol.for("react.memo_cache_sentinel")?(i=[],R[6]=i):i=R[6],(0,_.useEffect)(ed,i),R[7]!==K?(a=()=>{K.selectThread(null,{includeThreads:!1,clearTopic:!0})},s=[K],R[7]=K,R[8]=a,R[9]=s):(a=R[8],s=R[9]),(0,_.useEffect)(a,s),R[10]!==G||R[11]!==K?(o=async(e,t,n,i)=>{let a=e.trim();""!==a&&n&&""!==n.trim()&&(t?(D("open"),G({nwo:t.nameWithOwner,problemStatement:a,baseRef:n,eventType:"agents_page",eventContent:a,customAgent:i})):K.sendChatMessage({content:a,thread:null,references:[]}))},R[10]=G,R[11]=K,R[12]=o):o=R[12];let z=o;!function(e){let t,n,i,a,s=(0,r.c)(5),o=(0,_.useRef)(e);s[0]!==e?(t=()=>{o.current=e},n=[e],s[0]=e,s[1]=t,s[2]=n):(t=s[1],n=s[2]),(0,_.useEffect)(t,n),s[3]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{let e=C.Jt.getTaskEntrypointMessage();e&&(C.Jt.setTaskEntrypointMessage(null),k(e.message,o))},a=[],s[3]=i,s[4]=a):(i=s[3],a=s[4]),(0,_.useEffect)(i,a)}(z),R[13]!==G||R[14]!==U?(c=e=>{let t=U[e];t&&(q(t=>t.filter((t,n)=>n!==e)),G({nwo:t.nwo,problemStatement:t.problemStatement,baseRef:t.baseRef,eventType:"agents_page"}))},R[13]=G,R[14]=U,R[15]=c):c=R[15];let Q=c,[Y,J]=(0,_.useState)(!1);return R[16]!==Y||R[17]!==O?(d=O&&!Y&&(0,l.jsx)(f.Zf.Banner,{children:(0,l.jsx)(T.C,{onBannerDismiss:()=>J(!0)})}),R[16]=Y,R[17]=O,R[18]=d):d=R[18],R[19]===Symbol.for("react.memo_cache_sentinel")?(p=(0,l.jsxs)(f.Zf.Header,{children:[(0,l.jsx)(f.Zf.Title,{children:"Agents"}),(0,l.jsx)(f.Zf.Description,{children:"Delegate tasks to GitHub Copilot coding agent to work on in the background, and then monitor Copilot's progress."})]}),R[19]=p):p=R[19],R[20]!==z?(h=(0,l.jsx)(I.Q,{handleUserSubmit:z}),R[20]=z,R[21]=h):h=R[21],R[22]!==U||R[23]!==Q?(g=U.length>0&&(0,l.jsx)(x.B,{direction:"vertical",className:F.failedTaskCreationBanners,children:U.map((e,t)=>(0,l.jsx)(M,{problemStatement:e?.problemStatement,handleRetry:()=>Q(t),handleDismiss:()=>{q(e=>e.filter((e,n)=>n!==t))}},`${e?.nwo}-${e?.problemStatement}-${e?.timestamp}`))}),R[22]=U,R[23]=Q,R[24]=g):g=R[24],R[25]!==h||R[26]!==g?(b=(0,l.jsxs)(f.Zf.Section,{children:[h,g]}),R[25]=h,R[26]=g,R[27]=b):b=R[27],R[28]!==A||R[29]!==H||R[30]!==V||R[31]!==W?(j=(0,l.jsx)(f.Zf.Section,{children:V?(0,l.jsx)(m.f,{title:"Recent sessions",initialResultCount:25,showPillMenu:!0}):(0,l.jsx)(es,{tasks:W,isError:H,activeTab:A,setActiveTab:D})}),R[28]=A,R[29]=H,R[30]=V,R[31]=W,R[32]=j):j=R[32],R[33]===Symbol.for("react.memo_cache_sentinel")?(E=(0,l.jsx)(eu,{}),R[33]=E):E=R[33],R[34]!==b||R[35]!==j||R[36]!==d?(L=(0,l.jsxs)(f.Zf.Container,{noHeader:!0,width:"small",children:[d,p,b,j,E]}),R[34]=b,R[35]=j,R[36]=d,R[37]=L):L=R[37],L}function ed(){(0,p.D)("Agents \xb7 GitHub Copilot")}function eu(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{className:F.copilotDisclosure,children:(0,l.jsxs)("p",{className:F.copilotDisclosureText,children:[(0,l.jsx)(b.A,{href:"https://docs.github.com/copilot/responsible-use/copilot-coding-agent",target:"_blank",rel:"noopener noreferrer",muted:!0,inline:!0,children:"Copilot"})," ","uses AI. Check for mistakes."]})}),t[0]=e):e=t[0],e}try{el.displayName||(el.displayName="AgentsViewWrapper")}catch{}try{ec.displayName||(ec.displayName="AgentsView")}catch{}try{eu.displayName||(eu.displayName="CopilotDisclosure")}catch{}var em=n(47723);let ep=/\/copilot\/agents/,eh=`${D.Jz}/agents`;let AgentsPlugin=class AgentsPlugin{constructor(e=!1,t,n=!1){(0,o._)(this,"id",em.Dv),(0,o._)(this,"displayName",em.Ff),(0,o._)(this,"createTaskFromInput",void 0),(0,o._)(this,"handleUserSubmitRef",void 0),(0,o._)(this,"agentsEnabled",void 0),(0,o._)(this,"skipSyncRouteToThread",!0),(0,o._)(this,"components",[{id:"agents-view",Component:el,routes:[ep]}]),(0,o._)(this,"slashCommand",{key:"task",name:"Task",description:"Give Copilot coding agent a background task",icon:U.AgentIcon,isNew:!0,order:0,execute:async(e,t,n)=>!(this.agentsEnabled&&t.selectedThreadID&&(0,h.G7)("copilot_immersive_task_within_chat_thread"))&&(this.agentsEnabled&&this.createTaskFromInput&&this.handleUserSubmitRef?k(e,this.handleUserSubmitRef):(C.Jt.setTaskEntrypointMessage(e),n(eh,{preventTurbo:!0})),!0),suggestions:["Identify and suggest improvements to slow or inefficient code","Find and refactor duplicated code","Suggest more descriptive variable and function names"]}),(0,o._)(this,"navigationItems",[{id:em.Dv,displayName:"Agents",href:em.pr,icon:L.p}]),this.createTaskFromInput=e,this.handleUserSubmitRef=t,this.agentsEnabled=n}};var ef=n(7922);let eg={container:"PullRequestFilesChangedPreview-module__container--mKeOB",banner:"PullRequestFilesChangedPreview-module__banner--KQCNJ"};function ey(e){let t,n,i,a=(0,r.c)(9),{headSha:s,basePath:o,isSessionRunning:c,isSessionReadonly:d}=e;return a[0]!==d||a[1]!==c?(t=c&&(0,l.jsx)(A.l,{variant:"info",title:"Copilot is working",description:d?"Copilot code review in progress.":"Copilot is still working. Changes will automatically appear once they have been committed to the branch.",hideTitle:!0,icon:(0,l.jsx)(U.InfoIcon,{}),className:eg.banner}),a[0]=d,a[1]=c,a[2]=t):t=a[2],a[3]!==o||a[4]!==s?(n=(0,l.jsx)(ef.b.Container,{children:(0,l.jsx)(ef.b.Viewer,{headSha:s,basePath:o,forceUnifiedView:!0,treeCollapsedByDefault:!0,useFileTree:!0,useBasicToolbar:!0},o)}),a[3]=o,a[4]=s,a[5]=n):n=a[5],a[6]!==t||a[7]!==n?(i=(0,l.jsxs)("div",{className:eg.container,children:[t,n]}),a[6]=t,a[7]=n,a[8]=i):i=a[8],i}try{ey.displayName||(ey.displayName="PullRequestFilesChangedPreview")}catch{}function ev(e){let t,n=(0,r.c)(5),{reference:i}=e,{headSha:a,basePath:s,isSessionRunning:o,isSessionReadonly:c}=i;return n[0]!==s||n[1]!==a||n[2]!==c||n[3]!==o?(t=(0,l.jsx)(ey,{headSha:a,basePath:s,isSessionRunning:o,isSessionReadonly:c}),n[0]=s,n[1]=a,n[2]=c,n[3]=o,n[4]=t):t=n[4],t}try{ev.displayName||(ev.displayName="PullRequestFilesChangedPluginPreview")}catch{}var ex=n(70840),eb=n(72579),e_=n(56833),ej=n(81960),ew=n(98755),eN=n(99896),eC=n(10422),ek=n(25407),eS=n(96379);let eI={container:"PullRequestOverviewPreview-module__container--BrFOa",titleContainer:"PullRequestOverviewPreview-module__titleContainer--lTxTc",pullNumber:"PullRequestOverviewPreview-module__pullNumber--LvQ2Y",sessionStatus:"PullRequestOverviewPreview-module__sessionStatus--Wu0ff",sessionStatusWrapper:"PullRequestOverviewPreview-module__sessionStatusWrapper--TEpIE",separator:"PullRequestOverviewPreview-module__separator--EAqT5",iconCompleted:"PullRequestOverviewPreview-module__iconCompleted--XBgZD",iconFailed:"PullRequestOverviewPreview-module__iconFailed--bZUms",summaryBox:"PullRequestOverviewPreview-module__summaryBox--S2PyJ",summaryHeading:"PullRequestOverviewPreview-module__summaryHeading--xI39Z",summaryHeader:"PullRequestOverviewPreview-module__summaryHeader--KeZPa",summaryMetadata:"PullRequestOverviewPreview-module__summaryMetadata--R418e",summaryContent:"PullRequestOverviewPreview-module__summaryContent--YREy7",repositoryName:"PullRequestOverviewPreview-module__repositoryName--O0p8d",branchComparison:"PullRequestOverviewPreview-module__branchComparison--QaaJZ",branchWrapper:"PullRequestOverviewPreview-module__branchWrapper--IIzXz",copyButtonWrapper:"PullRequestOverviewPreview-module__copyButtonWrapper--LAwSf",checksButton:"PullRequestOverviewPreview-module__checksButton--yqdFS",emptyDescription:"PullRequestOverviewPreview-module__emptyDescription--X5Q_t"};function eT(e){let t,n,i,a,s,o,c,d,u=(0,r.c)(22),{headSha:m,repositoryNwo:p,commitAliveChannel:h}=e;u[0]!==p?(t=p?.split("/")??[],u[0]=p,u[1]=t):t=u[1];let[f,g]=t,y=void 0===f?"":f,v=void 0===g?"":g;u[2]!==v||u[3]!==y?(n={ownerLogin:y,name:v},u[2]=v,u[3]=y,u[4]=n):n=u[4];let[x,b]=function(e,t){let n,i,a=(0,r.c)(6),[s,o]=(0,_.useState)();a[0]!==e||a[1]!==t?(n=async()=>{if(!e||!t)return void o(void 0);let n=(0,ek.vki)(t,e),i=await (0,eS.lS)(n);i.ok&&o(await i.json())},a[0]=e,a[1]=t,a[2]=n):n=a[2];let l=n;return a[3]!==s||a[4]!==l?(i=[s,l],a[3]=s,a[4]=l,a[5]=i):i=a[5],i}(m,n);u[5]!==h?(i={stateChannel:h,deployedChannel:null,reviewStateChannel:null,workflowsChannel:null,mergeQueueChannel:null,headRefChannel:null,baseRefChannel:null,gitMergeStateChannel:null,pullRequestChannel:null},u[5]=h,u[6]=i):i=u[6];let j=i;if(u[7]!==j||u[8]!==b?(a={channels:j,refetchQuery:b},u[7]=j,u[8]=b,u[9]=a):a=u[9],(0,eC.cY)(a),u[10]!==b||u[11]!==m||u[12]!==p?(s=()=>{m&&p&&b()},o=[m,p,b],u[10]=b,u[11]=m,u[12]=p,u[13]=s,u[14]=o):(s=u[13],o=u[14]),(0,_.useEffect)(s,o),!m||!p||!x||0===x.checkRuns.length)return null;u[15]!==x?(c=()=>{if(!x?.checkRuns)return"";let e=x.checkRuns.length,t=x.checkRuns.filter(eE).length;return`${t}/${e}`},u[15]=x,u[16]=c):c=u[16];let w=c,N=function(e){switch(e){case"SUCCEEDED":return"success";case"FAILED":case"UNSUCCESSFUL":return"failure";default:return"pending"}}(x?.checksHeaderState||""),C=w();return u[17]!==x||u[18]!==b||u[19]!==N||u[20]!==C?(d=(0,l.jsx)("span",{className:eI.checksButton,children:(0,l.jsx)(eN.B6,{statusRollup:N,combinedStatus:x,onWillOpenPopup:b,size:"small",variant:"default",descriptionText:C})}),u[17]=x,u[18]=b,u[19]=N,u[20]=C,u[21]=d):d=u[21],d}function eE(e){return"success"===e.state}try{eT.displayName||(eT.displayName="ChecksStatusButton")}catch{}var eL=n(88984),eR=n(55127),eA=n.n(eR);function eD(e){let t,n,i,a,s,o,c,d,u,m,p,h,f,g,y,v,x,_,j,w,N=(0,r.c)(59),{title:C,number:k,body:S,repositoryNwo:I,baseRef:T,headRef:E,headSha:L,sessionState:R,sessionUpdatedAt:A,sessionCount:D,premiumRequestCount:P,isSingleSessionView:O,commitAliveChannel:B}=e;N[0]!==R?(t=()=>{if(!R)return null;switch(R){case"completed":return(0,l.jsx)(U.CheckCircleFillIcon,{className:eI.iconCompleted,size:16});case"failed":case"timed_out":return(0,l.jsx)(U.XCircleFillIcon,{className:eI.iconFailed,size:16});case"in_progress":return(0,l.jsx)(eL.w,{});default:return null}},N[0]=R,N[1]=t):t=N[1];let F=t;N[2]!==R||N[3]!==A?(n=()=>(0,l.jsxs)("span",{className:eI.sessionStatusWrapper,children:["completed"===R&&(0,l.jsx)("span",{children:"Completed"}),"failed"===R&&(0,l.jsx)("span",{children:"Failed"}),"timed_out"===R&&(0,l.jsx)("span",{children:"Timed out"}),"in_progress"===R&&(0,l.jsx)("span",{children:"Started"}),A&&(0,l.jsx)(q.A,{date:new Date(A),tense:"past"})]}),N[2]=R,N[3]=A,N[4]=n):n=N[4];let M=n;N[5]!==T||N[6]!==E||N[7]!==I?(i=()=>(0,l.jsxs)(l.Fragment,{children:[I&&(0,l.jsx)(b.A,{href:`/${I}`,className:eI.repositoryName,children:I}),T&&E&&(0,l.jsxs)("span",{className:eI.branchWrapper,children:[(0,l.jsxs)("span",{className:eI.branchComparison,children:[(0,l.jsx)(eb.A,{href:`/${I}/tree/${T}`,children:T}),(0,l.jsx)(U.ArrowLeftIcon,{}),(0,l.jsx)(eb.A,{href:`/${I}/tree/${E}`,children:E})]}),(0,l.jsx)("span",{className:eI.copyButtonWrapper,children:(0,l.jsx)(ew.T,{ariaLabel:"Copy head branch name to clipboard",size:"small",textToCopy:E})})]})]}),N[5]=T,N[6]=E,N[7]=I,N[8]=i):i=N[8];let $=i;N[9]!==C?(a=(0,l.jsx)("span",{children:C}),N[9]=C,N[10]=a):a=N[10];let V=`/${I}/pull/${k}`;N[11]!==k||N[12]!==V?(s=(0,l.jsxs)(b.A,{className:eI.pullNumber,href:V,children:["#",k]}),N[11]=k,N[12]=V,N[13]=s):s=N[13],N[14]!==a||N[15]!==s?(o=(0,l.jsx)(e_.z.TitleArea,{children:(0,l.jsx)(e_.z.Title,{className:eI.titleContainer,as:"h1",children:(0,l.jsxs)("span",{children:[a," ",s]})})}),N[14]=a,N[15]=s,N[16]=o):o=N[16],N[17]!==F?(c=F(),N[17]=F,N[18]=c):c=N[18],N[19]!==M?(d=M(),N[19]=M,N[20]=d):d=N[20],N[21]!==c||N[22]!==d?(u=(0,l.jsxs)("span",{className:eI.sessionStatusWrapper,children:[c,d]}),N[21]=c,N[22]=d,N[23]=u):u=N[23],N[24]!==I||N[25]!==A?(m=A&&I&&(0,l.jsx)("span",{className:eI.separator,children:" \xb7 "}),N[24]=I,N[25]=A,N[26]=m):m=N[26],N[27]!==$?(p=$(),N[27]=$,N[28]=p):p=N[28];let W=L||"",H=I||"";return N[29]!==B||N[30]!==W||N[31]!==H?(h=(0,l.jsx)(eT,{headSha:W,repositoryNwo:H,commitAliveChannel:B}),N[29]=B,N[30]=W,N[31]=H,N[32]=h):h=N[32],N[33]!==u||N[34]!==m||N[35]!==p||N[36]!==h?(f=(0,l.jsx)(e_.z.Description,{children:(0,l.jsxs)("div",{className:eI.sessionStatus,children:[u,m,p,h]})}),N[33]=u,N[34]=m,N[35]=p,N[36]=h,N[37]=f):f=N[37],N[38]!==f||N[39]!==o?(g=(0,l.jsxs)(e_.z,{children:[o,f]}),N[38]=f,N[39]=o,N[40]=g):g=N[40],N[41]===Symbol.for("react.memo_cache_sentinel")?(y=(0,l.jsx)(ej.A,{as:"h2",className:eI.summaryHeading,children:"Summary"}),N[41]=y):y=N[41],N[42]!==O||N[43]!==P||N[44]!==D||N[45]!==A?(v=!O&&P>0&&void 0!==D&&D>0&&(0,l.jsxs)(l.Fragment,{children:[D," ",eA()("session",D),P&&(0,l.jsxs)("span",{children:[" ","\xb7 ",P," premium ",eA()("request",P)]}),A&&(0,l.jsxs)("span",{children:[" ","\xb7 Last updated ",(0,l.jsx)(q.A,{date:new Date(A),tense:"past"})]})]}),N[42]=O,N[43]=P,N[44]=D,N[45]=A,N[46]=v):v=N[46],N[47]!==v?(x=(0,l.jsxs)("div",{className:eI.summaryHeader,children:[y,(0,l.jsx)("div",{className:eI.summaryMetadata,children:v})]}),N[47]=v,N[48]=x):x=N[48],N[49]!==S||N[50]!==k||N[51]!==I?(_=(0,l.jsx)("div",{className:eI.summaryContent,children:S?(0,l.jsx)(ex.G,{content:{value:S,name:`pull-request-${k}-${I}.md`},hideHeadingAnchors:!0,fallbackToRaw:!0,useLoadingSkeletonWithOptions:[{size:"bodyMedium",lines:3},{size:"titleLarge",lines:1},{size:"bodyMedium",lines:8}]}):(0,l.jsx)("p",{className:eI.emptyDescription,children:"No description provided."})}),N[49]=S,N[50]=k,N[51]=I,N[52]=_):_=N[52],N[53]!==x||N[54]!==_?(j=(0,l.jsxs)("div",{className:eI.summaryBox,children:[x,_]}),N[53]=x,N[54]=_,N[55]=j):j=N[55],N[56]!==g||N[57]!==j?(w=(0,l.jsxs)("div",{className:eI.container,children:[g,j]}),N[56]=g,N[57]=j,N[58]=w):w=N[58],w}try{eD.displayName||(eD.displayName="PullRequestOverviewPreview")}catch{}function eP(e){let t,n=(0,r.c)(2),{reference:i}=e;return"pr-overview"!==i.type?null:(n[0]!==i?(t=(0,l.jsx)(eD,{...i}),n[0]=i,n[1]=t):t=n[1],t)}try{eP.displayName||(eP.displayName="PullRequestOverviewPluginPreview")}catch{}var eO=n(1747),eB=n(21502),eF=n(42312),eM=n(88934),e$=n(53419),eV=n(26108);function eU(e){let t,n=(0,r.c)(4),{isContentPreviewOpen:i,openPreviewPane:a}=e,s=(0,eF.U)();return n[0]!==s||n[1]!==i||n[2]!==a?(t=!i&&(0,l.jsx)(eV.K,{icon:U.SidebarExpandIcon,"aria-label":"Open workbench",size:"small",onClick:()=>{a(),(0,e$.BI)("dotcom_chat.activate",{target:"OPEN_PREVIEW_PANE_BUTTON",mode:"immersive",context:"agent_sessions"})},ref:s}),n[0]=s,n[1]=i,n[2]=a,n[3]=t):t=n[3],t}try{eU.displayName||(eU.displayName="PreviewPaneButton")}catch{}var eq=n(5524),eW=n(19199),eH=n(26410),eG=n(99223),eK=n(13107),ez=n(71315);let eQ={actionList:"OpenInMenu-module__actionList--jMOLM",menuItem:"OpenInMenu-module__menuItem--SS743",menuContent:"OpenInMenu-module__menuContent--dtUPD",menuIcon:"OpenInMenu-module__menuIcon--TWmG3",menuTitle:"OpenInMenu-module__menuTitle--hwhpE",cliSection:"OpenInMenu-module__cliSection--nAe4Q",cliHeader:"OpenInMenu-module__cliHeader--ggn5w",actionListDivider:"OpenInMenu-module__actionListDivider--CEt3s"};function eY(e,t){let n=`git clone https://github.com/${t}.git && code ${t.split("/")[1]}`;window.open(e,"_self"),navigator.clipboard&&navigator.clipboard.writeText(n)}let eJ=(e,t,n)=>()=>{let i=function(e,t,n){let i=encodeURIComponent(JSON.stringify({owner:e,repo:t,pullRequestNumber:n}));return`vscode://github.vscode-pull-request-github/open-pull-request-webview?${i}`}(e,t,n);window.open(i,"_self")},eX=(e,t,n)=>()=>{let i=`https://github.com/${e}.git`;eY(`vscode-insiders://GitHub.copilot-chat/openAgentSession?id=${t}&type=copilot&url=${encodeURIComponent(i)}&branch=${encodeURIComponent(n)}`,e)},eZ=(e,t)=>()=>{eY(function(e,t){let n=ez.cg?.location.origin||"https://github.com";return`x-github-client://openRepo/${n}/${e}?pr=${t}`}(e,t),e)};function e0(e){let t,n,i,a,s,o,c,d,u,m,p=(0,r.c)(28),{pull:f,session:g}=e;p[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,h.G7)("open_agent_session_in_vscode_insiders"),p[0]=t):t=p[0];let y=t;p[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,h.G7)("open_agent_session_in_vscode_stable"),p[1]=n):n=p[1];let v=n;if(p[2]!==f.number||p[3]!==f.repository_nwo){let[e,t]=f.repository_nwo.split("/");i=eJ(void 0===e?"":e,void 0===t?"":t,f.number),p[2]=f.number,p[3]=f.repository_nwo,p[4]=i}else i=p[4];let x=i;p[5]!==f.global_relay_id||p[6]!==f.head_ref_name||p[7]!==f.repository_nwo?(a=eX(f.repository_nwo,f.global_relay_id,f.head_ref_name),p[5]=f.global_relay_id,p[6]=f.head_ref_name,p[7]=f.repository_nwo,p[8]=a):a=p[8];let b=a;p[9]!==f.number||p[10]!==f.repository_nwo?(s=eZ(f.repository_nwo,f.number),p[9]=f.number,p[10]=f.repository_nwo,p[11]=s):s=p[11];let _=s;p[12]!==f.head_ref_name||p[13]!==f.repository_id?(o=(0,eK.QS)(f.repository_id,f.head_ref_name),p[12]=f.head_ref_name,p[13]=f.repository_id,p[14]=o):o=p[14];let j=o;p[15]===Symbol.for("react.memo_cache_sentinel")?(c=(0,eG.k)(),p[15]=c):c=p[15];let w=c,N=!!j;p[16]!==g?(d=!!g&&(0,H.v5)(g),p[16]=g,p[17]=d):d=p[17];let C=d;return p[18]!==_||p[19]!==x||p[20]!==b||p[21]!==C||p[22]!==f.url?(u=(0,l.jsx)(e1,{pullURL:f.url,onOpenInVSCode:x,onOpenInVSCodeInsiders:b,onOpenInGitHubDesktop:_,showVSCodeStable:v,showVSCodeInsiders:y,isSessionActive:C}),p[18]=_,p[19]=x,p[20]=b,p[21]=C,p[22]=f.url,p[23]=u):u=p[23],p[24]!==j||p[25]!==N||p[26]!==u?(m=(0,l.jsx)(eW.n,{primary:!1,size:"small",isEnterprise:w,showCodespacesTab:N,codespacesPath:j,localTab:u}),p[24]=j,p[25]=N,p[26]=u,p[27]=m):m=p[27],m}function e1(e){let t,n,i,a,s,o,c,d,u,m,p,h,f=(0,r.c)(26),{pullURL:g,onOpenInVSCode:y,onOpenInVSCodeInsiders:v,onOpenInGitHubDesktop:x,showVSCodeInsiders:_,showVSCodeStable:j,isSessionActive:w}=e,N=`gh agent-task view ${g} --log${w?" --follow":""}`;return f[0]!==y||f[1]!==j?(t=j&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(eq.l.Item,{className:eQ.menuItem,onSelect:y,children:(0,l.jsxs)("div",{className:eQ.menuContent,children:[(0,l.jsx)(U.TerminalIcon,{className:eQ.menuIcon}),(0,l.jsx)("p",{className:eQ.menuTitle,children:"Open in VS Code"})]})})}),f[0]=y,f[1]=j,f[2]=t):t=f[2],f[3]!==_||f[4]!==j?(n=j&&_&&(0,l.jsx)(eq.l.Divider,{className:eQ.actionListDivider}),f[3]=_,f[4]=j,f[5]=n):n=f[5],f[6]!==v||f[7]!==_?(i=_&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(eq.l.Item,{className:eQ.menuItem,onSelect:v,children:(0,l.jsxs)("div",{className:eQ.menuContent,children:[(0,l.jsx)(U.TerminalIcon,{className:eQ.menuIcon}),(0,l.jsx)("p",{className:eQ.menuTitle,children:"Open in VS Code Insiders"})]})})}),f[6]=v,f[7]=_,f[8]=i):i=f[8],f[9]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsx)(eq.l.Divider,{className:eQ.actionListDivider}),f[9]=a):a=f[9],f[10]===Symbol.for("react.memo_cache_sentinel")?(s=(0,l.jsxs)("div",{className:eQ.menuContent,children:[(0,l.jsx)(U.DesktopDownloadIcon,{className:eQ.menuIcon}),(0,l.jsx)("p",{className:eQ.menuTitle,children:"Checkout with GitHub Desktop"})]}),f[10]=s):s=f[10],f[11]!==x?(o=(0,l.jsx)(eq.l.Item,{className:eQ.menuItem,onSelect:x,children:s}),f[11]=x,f[12]=o):o=f[12],f[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,l.jsx)(eq.l.Divider,{className:eQ.actionListDivider}),f[13]=c):c=f[13],f[14]===Symbol.for("react.memo_cache_sentinel")?(d=(0,l.jsxs)("div",{className:eQ.cliHeader,children:[(0,l.jsx)(U.TerminalIcon,{className:eQ.menuIcon}),(0,l.jsx)("p",{className:eQ.menuTitle,children:"GitHub CLI"})]}),f[14]=d):d=f[14],f[15]!==N?(u=(0,l.jsx)(eH.J,{buttonAriaLabel:"Copy GitHub agent-task command to clipboard",inputId:"github-cli",inputLabel:"GitHub CLI command",url:N}),f[15]=N,f[16]=u):u=f[16],f[17]===Symbol.for("react.memo_cache_sentinel")?(m=(0,l.jsxs)("p",{className:"text-normal color-fg-muted",children:["Work fast with our official CLI."," ",(0,l.jsx)(b.A,{inline:!0,href:"https://cli.github.com",target:"_blank","aria-label":"Learn more about the GitHub CLI",children:"Learn more"})]}),f[17]=m):m=f[17],f[18]!==u?(p=(0,l.jsx)("ul",{children:(0,l.jsxs)("li",{className:eQ.cliSection,children:[d,u,m]})}),f[18]=u,f[19]=p):p=f[19],f[20]!==t||f[21]!==p||f[22]!==n||f[23]!==i||f[24]!==o?(h=(0,l.jsxs)(eq.l,{className:eQ.actionList,children:[t,n,i,a,o,c,p]}),f[20]=t,f[21]=p,f[22]=n,f[23]=i,f[24]=o,f[25]=h):h=f[25],h}try{e0.displayName||(e0.displayName="OpenInMenu")}catch{}try{e1.displayName||(e1.displayName="CustomLocalTab")}catch{}var e2=n(21373);function e3(e){let t,n,i=(0,r.c)(6),{pullUrl:a,taskId:s}=e;i[0]!==a||i[1]!==s?(t=()=>{(0,e$.BI)("agent_sessions.task_view",{target:"VIEW_PULL_REQUEST_BUTTON",pull_url:a,task_id:s})},i[0]=a,i[1]=s,i[2]=t):t=i[2];let o=t;return i[3]!==o||i[4]!==a?(n=(0,l.jsx)(e2.Q,{as:"a",href:a,target:"_self",leadingVisual:U.GitPullRequestIcon,variant:"primary",size:"small",onClick:o,children:"View pull request"}),i[3]=o,i[4]=a,i[5]=n):n=i[5],n}try{e3.displayName||(e3.displayName="ViewPullRequestButton")}catch{}var e4=n(61191),e5=n(77274);let e6=[{name:"Hate it",value:"VERY_NEGATIVE",icon:e5.YS,color:"veryDissatisfied"},{name:"Not great",value:"NEGATIVE",icon:e5.Mm,color:"dissatisfied"},{name:"It\u2019s ok",value:"POSITIVE",icon:e5.Cf,color:"satisfied"},{name:"Love it",value:"VERY_POSITIVE",icon:e5.mN,color:"verySatisfied"}],e7=()=>(0,e4.f)("task-header",e6);function e8(){let e,t,n,i,a=(0,r.c)(9),s=(0,h.G7)("copilot_swe_agent_progress_commands"),o=(0,h.G7)("copilot_mission_control_feedback"),{openFeedback:c,FeedbackDialog:d}=e7();a[0]!==c?(e=()=>c(),a[0]=c,a[1]=e):e=a[1];let u=e;return s&&o?(a[2]!==u?(t=(0,l.jsx)(e2.Q,{variant:"link",className:"f6",onClick:u,children:"Give feedback"}),a[2]=u,a[3]=t):t=a[3],a[4]!==d?(n=(0,l.jsx)(d,{}),a[4]=d,a[5]=n):n=a[5],a[6]!==t||a[7]!==n?(i=(0,l.jsxs)(l.Fragment,{children:[t,n]}),a[6]=t,a[7]=n,a[8]=i):i=a[8],i):null}try{e8.displayName||(e8.displayName="FeedbackButton")}catch{}var e9=n(94236);function te(e){let t,n,i,a,s,o,c,d,u,m,p,f,g,y,v,x,b,_,j,w,N,C,k,S,I,T=(0,r.c)(55),{pull:E}=e;T[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,h.G7)("open_agent_session_in_vscode_insiders"),T[0]=t):t=T[0];let L=t;T[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,h.G7)("open_agent_session_in_vscode_stable"),T[1]=n):n=T[1];let R=n;if(T[2]!==E.number||T[3]!==E.repository_nwo){let[e,t]=E.repository_nwo.split("/");i=eJ(void 0===e?"":e,void 0===t?"":t,E.number),T[2]=E.number,T[3]=E.repository_nwo,T[4]=i}else i=T[4];let A=i;T[5]!==E.global_relay_id||T[6]!==E.head_ref_name||T[7]!==E.repository_nwo?(a=eX(E.repository_nwo,E.global_relay_id,E.head_ref_name),T[5]=E.global_relay_id,T[6]=E.head_ref_name,T[7]=E.repository_nwo,T[8]=a):a=T[8];let D=a;T[9]!==E.number||T[10]!==E.repository_nwo?(s=eZ(E.repository_nwo,E.number),T[9]=E.number,T[10]=E.repository_nwo,T[11]=s):s=T[11];let P=s;if(T[12]!==E.head_ref_name||T[13]!==E.repository_id){let e,t;e=E.repository_id,t=E.head_ref_name,o=()=>{let n=(0,eK.QS)(e,t);n&&window.open(n,"_self")},T[12]=E.head_ref_name,T[13]=E.repository_id,T[14]=o}else o=T[14];let O=o,{openFeedback:B,FeedbackDialog:F}=e7();T[15]!==B?(c=()=>B(),T[15]=B,T[16]=c):c=T[16];let M=c;T[17]!==E.url?(d=()=>{window.open(E.url,"_blank")},T[17]=E.url,T[18]=d):d=T[18];let $=d;T[19]===Symbol.for("react.memo_cache_sentinel")?(u=(0,eG.k)(),T[19]=u):u=T[19];let V=u;T[20]!==E.head_ref_name||T[21]!==E.repository_id?(m=(0,eK.QS)(E.repository_id,E.head_ref_name),T[20]=E.head_ref_name,T[21]=E.repository_id,T[22]=m):m=T[22];let q=!!m&&!V;return T[23]===Symbol.for("react.memo_cache_sentinel")?(p=(0,l.jsx)(e9.W.Anchor,{children:(0,l.jsx)(eV.K,{icon:U.KebabHorizontalIcon,variant:"invisible","aria-label":"More options",size:"small"})}),T[23]=p):p=T[23],T[24]===Symbol.for("react.memo_cache_sentinel")?(f=(0,l.jsx)(eq.l.LeadingVisual,{children:(0,l.jsx)(U.GitPullRequestIcon,{})}),T[24]=f):f=T[24],T[25]!==$?(g=(0,l.jsxs)(eq.l.Item,{onSelect:$,children:[f,"View pull request"]}),T[25]=$,T[26]=g):g=T[26],T[27]!==M?(y=(0,h.G7)("copilot_mission_control_feedback")&&(0,l.jsxs)(eq.l.Item,{onSelect:M,children:[(0,l.jsx)(eq.l.LeadingVisual,{children:(0,l.jsx)(U.CommentIcon,{})}),"Feedback"]}),T[27]=M,T[28]=y):y=T[28],T[29]===Symbol.for("react.memo_cache_sentinel")?(v=(0,l.jsx)(eq.l.Divider,{}),T[29]=v):v=T[29],T[30]===Symbol.for("react.memo_cache_sentinel")?(x=(0,l.jsx)(eq.l.GroupHeading,{children:"Open in"}),T[30]=x):x=T[30],T[31]!==A?(b=R&&(0,l.jsxs)(eq.l.Item,{onSelect:A,children:[(0,l.jsx)(eq.l.LeadingVisual,{children:(0,l.jsx)(U.VscodeIcon,{})}),"Open in VS Code"]}),T[31]=A,T[32]=b):b=T[32],T[33]!==D?(_=L&&(0,l.jsxs)(eq.l.Item,{onSelect:D,children:[(0,l.jsx)(eq.l.LeadingVisual,{children:(0,l.jsx)(U.VscodeIcon,{})}),"Open in VS Code Insiders"]}),T[33]=D,T[34]=_):_=T[34],T[35]===Symbol.for("react.memo_cache_sentinel")?(j=(0,l.jsx)(eq.l.LeadingVisual,{children:(0,l.jsx)(U.DesktopDownloadIcon,{})}),T[35]=j):j=T[35],T[36]!==P?(w=(0,l.jsxs)(eq.l.Item,{onSelect:P,children:[j,"Checkout with GitHub Desktop"]}),T[36]=P,T[37]=w):w=T[37],T[38]!==O||T[39]!==q?(N=q&&(0,l.jsxs)(eq.l.Item,{onSelect:O,children:[(0,l.jsx)(eq.l.LeadingVisual,{children:(0,l.jsx)(U.TerminalIcon,{})}),"Open in Codespaces"]}),T[38]=O,T[39]=q,T[40]=N):N=T[40],T[41]!==b||T[42]!==_||T[43]!==w||T[44]!==N?(C=(0,l.jsxs)(eq.l.Group,{children:[x,b,_,w,N]}),T[41]=b,T[42]=_,T[43]=w,T[44]=N,T[45]=C):C=T[45],T[46]!==g||T[47]!==y||T[48]!==C?(k=(0,l.jsxs)(e9.W,{children:[p,(0,l.jsx)(e9.W.Overlay,{align:"end",children:(0,l.jsxs)(eq.l,{children:[g,y,v,C]})})]}),T[46]=g,T[47]=y,T[48]=C,T[49]=k):k=T[49],T[50]!==F?(S=(0,l.jsx)(F,{}),T[50]=F,T[51]=S):S=T[51],T[52]!==k||T[53]!==S?(I=(0,l.jsxs)(l.Fragment,{children:[k,S]}),T[52]=k,T[53]=S,T[54]=I):I=T[54],I}try{te.displayName||(te.displayName="TaskHeaderMobileMenu")}catch{}var tt=n(50129),tn=n(79684);function ti(e){let t,n,i=(0,r.c)(4),{pull:a}=e;i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(tn.B.Item,{href:"/copilot/agents",children:"Agents"}),i[0]=t):t=i[0];let s=!a,o=a?.title;return i[1]!==s||i[2]!==o?(n=(0,l.jsxs)(tn.B,{children:[t,(0,l.jsx)(tn.B.Item,{loading:s,children:o})]}),i[1]=s,i[2]=o,i[3]=n):n=i[3],n}try{ti.displayName||(ti.displayName="TaskBreadcrumbs")}catch{}var ta=n(34164);let ts={container:"TaskHeader-module__container--mszgP",leftControls:"TaskHeader-module__leftControls--gPjSp",rightControls:"TaskHeader-module__rightControls--ujKcE",desktopButtons:"TaskHeader-module__desktopButtons--bONYA",mobileMenu:"TaskHeader-module__mobileMenu--CAeut",largerBreakpoint:"TaskHeader-module__largerBreakpoint--Q9iqK"};function tr(e){let t,n,i,a,s,o,c,d,u,m=(0,r.c)(23),{pull:p,session:f,isContentPreviewOpen:g,openPreviewPane:y}=e,v=`/${p?.repository_nwo}/pull/${p?.number}`;if(m[0]!==v){let e=(0,h.G7)("copilot_mission_control_feedback");t=tt.Kg,i=v,n=(0,ta.$)(ts.container,e&&ts.largerBreakpoint),m[0]=v,m[1]=t,m[2]=n,m[3]=i}else t=m[1],n=m[2],i=m[3];return m[4]!==p?(a=(0,l.jsx)("div",{className:ts.leftControls,children:(0,l.jsx)(ti,{pull:p})}),m[4]=p,m[5]=a):a=m[5],m[6]!==p||m[7]!==f?(s=p&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:ts.desktopButtons,children:[(0,l.jsx)(e8,{}),(0,l.jsx)(e0,{pull:p,session:f}),(0,l.jsx)(e3,{pullUrl:p.url,taskId:p.global_relay_id})]}),(0,l.jsx)("div",{className:ts.mobileMenu,children:(0,l.jsx)(te,{pull:p})})]}),m[6]=p,m[7]=f,m[8]=s):s=m[8],m[9]!==g||m[10]!==y?(o=(0,l.jsx)(eU,{isContentPreviewOpen:g,openPreviewPane:y}),m[9]=g,m[10]=y,m[11]=o):o=m[11],m[12]!==s||m[13]!==o?(c=(0,l.jsx)("div",{className:ts.rightControls,children:(0,l.jsxs)(x.B,{direction:"horizontal",align:"center",gap:"condensed",children:[s,o]})}),m[12]=s,m[13]=o,m[14]=c):c=m[14],m[15]!==n||m[16]!==a||m[17]!==c?(d=(0,l.jsxs)("div",{className:n,children:[a,c]}),m[15]=n,m[16]=a,m[17]=c,m[18]=d):d=m[18],m[19]!==t||m[20]!==i||m[21]!==d?(u=(0,l.jsx)(t,{basePageDataUrl:i,children:d}),m[19]=t,m[20]=i,m[21]=d,m[22]=u):u=m[22],u}try{tr.displayName||(tr.displayName="TaskHeader")}catch{}var to=n(51213),tl=n(91095),tc=n(7812),td=n(67955);let tu=_.createContext(void 0);function tm(e){let t,n,i=(0,r.c)(7),{currentUser:a,currentUserIsSessionOwner:s,children:o}=e,c=!s;i[0]!==a||i[1]!==s||i[2]!==c?(t={currentUser:a,currentUserIsSessionOwner:s,isSingleSessionView:c},i[0]=a,i[1]=s,i[2]=c,i[3]=t):t=i[3];let d=t;return i[4]!==o||i[5]!==d?(n=(0,l.jsxs)(tu.Provider,{value:d,children:[" ",o," "]}),i[4]=o,i[5]=d,i[6]=n):n=i[6],n}function tp(){let e=_.useContext(tu);if(!e)throw Error("useCurrentUser must be used within a CurrentUserProvider");return e}try{tu.displayName||(tu.displayName="CurrentUserContext")}catch{}try{tm.displayName||(tm.displayName="CurrentUserProvider")}catch{}let th=(0,_.createContext)(void 0);function tf(e){let t,n,i=(0,r.c)(5),{pull:a,children:s}=e;i[0]!==a?(t={pull:a},i[0]=a,i[1]=t):t=i[1];let o=t;return i[2]!==s||i[3]!==o?(n=(0,l.jsx)(th.Provider,{value:o,children:s}),i[2]=s,i[3]=o,i[4]=n):n=i[4],n}try{th.displayName||(th.displayName="PullContext")}catch{}try{tf.displayName||(tf.displayName="PullContextProvider")}catch{}var tg=n(97286);async function ty(e,t){if(!e)throw Error("No globalID provided");let n=new URL(`/copilot/tasks/pull/${e}`,window.location.origin);t&&n.searchParams.set("session_id",t);let i=await fetch(n.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!i.ok)throw Error(`Failed to fetch task payload for ${e}`);return await i.json()}let tv=["pull","sessions","currentUser","currentUserCanPush","steeringEnabled","logsPollingInterval","sessionsPollingInterval"];function tx(){let e,t,n,i,a=(0,r.c)(11),s=(0,y.X)(),{globalID:o}=(0,eM.g)(),[l]=(0,eM.ok)();a[0]!==l?(e=l.get("session_id"),a[0]=l,a[1]=e):e=a[1];let c=e,d=s&&"object"==typeof s&&null!==s&&tv.every(e=>e in s)&&o&&s.pull&&s.pull.global_relay_id===o?s:void 0;a[2]!==o||a[3]!==c?(t=["agent-task-payload",o,c],n=()=>ty(o,c),a[2]=o,a[3]=c,a[4]=t,a[5]=n):(t=a[4],n=a[5]);let u=!!o&&!d;return a[6]!==t||a[7]!==n||a[8]!==u||a[9]!==d?(i={queryKey:t,queryFn:n,initialData:d,enabled:u,staleTime:1/0},a[6]=t,a[7]=n,a[8]=u,a[9]=d,a[10]=i):i=a[10],(0,tg.I)(i)}var tb=n(40235),t_=n(74022),tj=n(97665);let tw=async(e,t={})=>{let{includeBody:n=!1}=t,i=new URL("/copilot/agent-sessions/pull-requests",window.location.origin);i.searchParams.set("pull_request_ids",String(e)),n&&i.searchParams.set("include_body","true");let a=await fetch(i.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!a.ok)throw Error(`Failed to fetch pull request ${e}`);let s=(await a.json()).pull_requests[e];if(!s)throw Error(`Pull request ${e} not found`);return s};var tN=n(34001),tC=n(7104),tk=n(69726),tS=n(53627),tI=n(44296),tT=n(95254),tE=n(74807);let tL={container:"CopilotInitialMessage-module__container--e58G3",message:"CopilotInitialMessage-module__message--w_WDE"},tR=e=>{let t,n,i=(0,r.c)(3),{message:a}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(tE.N,{size:32,animationType:"static",loopAnimation:!1}),i[0]=t):t=i[0],i[1]!==a?(n=(0,l.jsxs)("div",{className:tL.container,children:[t,(0,l.jsxs)("p",{className:tL.message,children:["Copilot ",a]})]}),i[1]=a,i[2]=n):n=i[2],n};try{tR.displayName||(tR.displayName="CopilotInitialMessage")}catch{}let tA={container:"UserInitialMessage-module__container--j2mCV",markdown:"UserInitialMessage-module__markdown--adqIo",startedTaskMessage:"UserInitialMessage-module__startedTaskMessage--Llm_V",message:"UserInitialMessage-module__message--WKLo0"};var tD=n(4817);let tP={overflowing:"ExpandableMarkdown-module__overflowing--mnr1a",expanded:"ExpandableMarkdown-module__expanded--Leqmk",toggle:"ExpandableMarkdown-module__toggle--nxcJD"};function tO(e){let t,n,i,a,s,o,c,d,u,m,p=(0,r.c)(31),{markdown:h,className:f,extensions:g,maxHeight:y}=e,v=void 0===y?500:y,x=(0,_.useRef)(null),[b,j]=(0,_.useState)(!1),[w,N]=(0,_.useState)(!1);p[0]!==v?(t=()=>{let e=()=>{x.current&&j(x.current.scrollHeight>v)};e();let t=setTimeout(e,100);return()=>clearTimeout(t)},p[0]=v,p[1]=t):t=p[1],p[2]!==h||p[3]!==v?(n=[h,v],p[2]=h,p[3]=v,p[4]=n):n=p[4],(0,_.useEffect)(t,n),p[5]!==w?(i=()=>{N(!w)},p[5]=w,p[6]=i):i=p[6];let C=i,k=`${v}px`;p[7]!==k?(a={"--max-height":k},p[7]=k,p[8]=a):a=p[8];let S=a,I=b&&tP.overflowing,T=w&&tP.expanded;return p[9]!==I||p[10]!==T?(s=(0,ta.$)(I,T),p[9]=I,p[10]=T,p[11]=s):s=p[11],p[12]!==w||p[13]!==b?(o=b&&!w?{inert:""}:{},p[12]=w,p[13]=b,p[14]=o):o=p[14],p[15]!==f||p[16]!==g||p[17]!==h?(c=(0,l.jsx)(tD.To,{markdown:h,className:f,extensions:g}),p[15]=f,p[16]=g,p[17]=h,p[18]=c):c=p[18],p[19]!==s||p[20]!==o||p[21]!==c?(d=(0,l.jsx)("div",{ref:x,className:s,...o,children:c}),p[19]=s,p[20]=o,p[21]=c,p[22]=d):d=p[22],p[23]!==C||p[24]!==w||p[25]!==b?(u=b&&(0,l.jsx)(e2.Q,{variant:"invisible",size:"small",onClick:C,className:tP.toggle,children:w?"Show less":"Show more"}),p[23]=C,p[24]=w,p[25]=b,p[26]=u):u=p[26],p[27]!==d||p[28]!==u||p[29]!==S?(m=(0,l.jsxs)("div",{style:S,children:[d,u]}),p[27]=d,p[28]=u,p[29]=S,p[30]=m):m=p[30],m}try{tO.displayName||(tO.displayName="ExpandableMarkdown")}catch{}let tB=e=>{let t,n,i,a,s,o,c,d=(0,r.c)(17),{currentUser:u,threadId:m,session:p,message:h}=e;e:{if(!m){t=void 0;break e}t=`${window.location.origin}/copilot/c/${m}`}let f=t,g=p.event_content;d[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,ta.$)(tA.startedTaskMessage),d[0]=n):n=d[0];let y=u?.login??"User";return d[1]!==y?(i=(0,l.jsx)("span",{children:y}),d[1]=y,d[2]=i):i=d[2],d[3]!==f||d[4]!==p.id||d[5]!==p.resource_global_id||d[6]!==m?(a=f&&(0,l.jsxs)(l.Fragment,{children:[" ","from a"," ",(0,l.jsx)(b.A,{href:f,inline:!0,onClick:()=>{(0,e$.BI)("agent_sessions.task_view",{target:"VIEW_CONVERSATION_LINK",session_id:p.id,task_id:p.resource_global_id,thread_id:m})},children:"conversation"})]}),d[3]=f,d[4]=p.id,d[5]=p.resource_global_id,d[6]=m,d[7]=a):a=d[7],d[8]!==h||d[9]!==i||d[10]!==a?(s=(0,l.jsx)("div",{className:n,children:(0,l.jsxs)("p",{className:tA.message,children:[i," ",h,a]})}),d[8]=h,d[9]=i,d[10]=a,d[11]=s):s=d[11],d[12]!==g?(o=g&&(0,l.jsx)(tO,{className:tA.markdown,markdown:g}),d[12]=g,d[13]=o):o=d[13],d[14]!==s||d[15]!==o?(c=(0,l.jsxs)("div",{className:tA.container,children:[s,o]}),d[14]=s,d[15]=o,d[16]=c):c=d[16],c};try{tB.displayName||(tB.displayName="UserInitialMessage")}catch{}var tF=n(81261),tM=n(27566);let t$={containerWrapper:"SessionHeader-module__containerWrapper--caacS",container:"SessionHeader-module__container--BCSgM",containerStickyToChatInput:"SessionHeader-module__containerStickyToChatInput--JE6Gj",containerStickyToTop:"SessionHeader-module__containerStickyToTop--HfwWn",toggleButton:"SessionHeader-module__toggleButton--bU9HQ",icon:"SessionHeader-module__icon--fUMu9",mainContent:"SessionHeader-module__mainContent--jyuqu",rightContent:"SessionHeader-module__rightContent--Fvqqt",sessionName:"SessionHeader-module__sessionName--eFIXs",statusIcon:"SessionHeader-module__statusIcon--qeEPF"};var tV=n(12385),tU=n(24939),tq=n(40260);function tW(e){let t,n,i=(0,r.c)(6),{containerRef:a,behavior:s,smoothThreshold:o}=e,l=void 0===s?"auto":s;i[0]!==a||i[1]!==l||i[2]!==o?(t=e=>{let t=void 0===e?l:e,{distance:n,element:i,targetTop:s}=(e=>{if(!e){let e=document.scrollingElement||document.documentElement,t=window.scrollY||window.pageYOffset,n=e.scrollHeight;return{element:null,targetTop:n,distance:Math.abs(n-t)}}return{element:e,targetTop:e.scrollHeight,distance:Math.abs(e.scrollHeight-e.scrollTop)}})(a?.current),r=t;"auto"===t&&void 0!==o&&(r=n>=o?"smooth":"auto"),i?i.scrollTo({top:s,behavior:r}):window.scrollTo({top:s,behavior:r})},i[0]=a,i[1]=l,i[2]=o,i[3]=t):t=i[3];let c=t;return i[4]!==c?(n={scrollToBottom:c},i[4]=c,i[5]=n):n=i[5],n}function tH(e){let t,n,i,a,s,o,c,d,u,m,p,h,f,g,y,v,x,b,j,w,N,C,k,S,I,T,E,L,R,A=(0,r.c)(90),{nwo:D,currentUserCanPush:P,isCollapsed:O,onModifierClick:B,scrollContainerRef:F,hideStopButton:M,contentId:$,onOpenChange:V}=e,{session:q}=(0,tI.Lg)(),W=D??null;A[0]!==q.workflow_run_id||A[1]!==W?(t=(0,tM.A)(W,q.workflow_run_id),A[0]=q.workflow_run_id,A[1]=W,A[2]=t):t=A[2];let G=t,K=(0,Y.U)(q.resource_global_id,q.id),z=!!(G||K),Q=(0,_.useRef)(null);A[3]!==q?(n=(0,H.v5)(q),A[3]=q,A[4]=n):n=A[4];let J=n,X=(0,H.VY)(q),Z=(0,H.K9)(q);A[5]!==q?(i=(0,H.mk)(q),A[5]=q,A[6]=i):i=A[6];let ee=i,et=(0,H.cv)(q),[en,ei]=(0,_.useState)(!1);A[7]!==F?(a={containerRef:F,behavior:"smooth"},A[7]=F,A[8]=a):a=A[8];let{scrollToBottom:ea}=tW(a);A[9]!==q.id||A[10]!==q.resource_global_id?(s=e=>{e&&(ei(!0),(0,e$.BI)("agent_sessions.task_view",{target:"STOP_SESSION_BUTTON",session_id:q.id,task_id:q.resource_global_id}))},A[9]=q.id,A[10]=q.resource_global_id,A[11]=s):s=A[11];let es=s;A[12]!==ee||A[13]!==en?(o=()=>{if(ee&&en){let e=setTimeout(()=>ei(!1),0);return()=>clearTimeout(e)}},c=[ee,en],A[12]=ee,A[13]=en,A[14]=o,A[15]=c):(o=A[14],c=A[15]),(0,_.useEffect)(o,c),A[16]!==J||A[17]!==F?(d={scrollContainerRef:F,elementRef:Q,enabled:J,offset:-8},A[16]=J,A[17]=F,A[18]=d):d=A[18];let{isLeaving:er}=function(e){let t,n,i,a,s,o=(0,r.c)(11),{scrollContainerRef:l,elementRef:c,enabled:d,offset:u}=e,m=void 0===u?0:u,[p,h]=(0,_.useState)(!1),f=(0,_.useRef)(p);return o[0]!==p?(t=()=>{f.current=p},n=[p],o[0]=p,o[1]=t,o[2]=n):(t=o[1],n=o[2]),(0,_.useEffect)(t,n),o[3]!==c||o[4]!==d||o[5]!==m||o[6]!==l?(i=()=>{let e=l.current,t=c.current;if(!d||!e||!t)return;let n=()=>{let n=e.getBoundingClientRect(),i=t.getBoundingClientRect().bottom>n.bottom+m;i!==f.current&&h(i)};n();let i=null,a=()=>{null==i&&(i=window.requestAnimationFrame(()=>{n(),i=null}))};return e.addEventListener("scroll",a),()=>{h(!1),e.removeEventListener("scroll",a)}},a=[d,l,c,m],o[3]=c,o[4]=d,o[5]=m,o[6]=l,o[7]=i,o[8]=a):(i=o[7],a=o[8]),(0,_.useEffect)(i,a),o[9]!==p?(s={isLeaving:p},o[9]=p,o[10]=s):s=o[10],s}(d);A[19]!==O||A[20]!==er||A[21]!==B||A[22]!==V||A[23]!==ea||A[24]!==q.id||A[25]!==q.resource_global_id?(u=e=>{if((e.altKey||e.metaKey)&&B)return e.preventDefault(),e.stopPropagation(),B(!!O),(0,e$.BI)("agent_sessions.task_view",{target:"SESSION_HEADER_MODIFIER",action:O?"EXPAND_ALL":"COLLAPSE_ALL",session_id:q.id,task_id:q.resource_global_id}),!1;if((0,e$.BI)("agent_sessions.task_view",{target:"SESSION_HEADER",action:O?"EXPAND":"COLLAPSE",session_id:q.id,task_id:q.resource_global_id}),er){V(!0),setTimeout(()=>{ea()},50);return}V(O)},A[19]=O,A[20]=er,A[21]=B,A[22]=V,A[23]=ea,A[24]=q.id,A[25]=q.resource_global_id,A[26]=u):u=A[26];let eo=u;A[27]!==q.id||A[28]!==q.resource_global_id?(m=e=>{if((0,e$.BI)("agent_sessions.task_view",{target:"CLICK_WORKFLOW_LOGS_LINK",session_id:q.id,task_id:q.resource_global_id}),e.metaKey||e.ctrlKey)return void e.stopPropagation()},A[27]=q.id,A[28]=q.resource_global_id,A[29]=m):m=A[29];let el=m;A[30]!==q.id||A[31]!==q.resource_global_id||A[32]!==K?(p=async e=>{if(K)try{let e=window.location.origin+K;await (0,tq.D)(e),(0,e$.BI)("agent_sessions.task_view",{target:"COPY_SESSION_LINK",session_id:q.id,task_id:q.resource_global_id})}catch{e.preventDefault(),e.stopPropagation()}},A[30]=q.id,A[31]=q.resource_global_id,A[32]=K,A[33]=p):p=A[33];let ec=p;e:{if(X){h="New session";break e}h=q.name}let ed=h;t:{if(en||ee){let e;A[34]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(U.SkipIcon,{className:"fgColor-muted"}),A[34]=e):e=A[34],f=e;break t}if(Z){let e;A[35]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(U.CheckIcon,{className:"fgColor-success"}),A[35]=e):e=A[35],f=e;break t}if(et){let e;A[36]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(U.XCircleFillIcon,{className:"fgColor-danger"}),A[36]=e):e=A[36],f=e;break t}f=null}let eu=f;n:{if(X){g=null;break n}if(J||Z||ee||et){let e;A[37]!==q.completed_at||A[38]!==q.created_at||A[39]!==q.state?(e=(0,l.jsx)(tU.A,{createdAt:q.created_at,completedAt:q.completed_at,state:q.state}),A[37]=q.completed_at,A[38]=q.created_at,A[39]=q.state,A[40]=e):e=A[40],g=e;break n}g=null}let em=g;i:{if(void 0!==M&&M){y=!1;break i}y=J}let ep=y,eh=!O,ef=!O;A[41]!==ef?(v=(0,l.jsx)(U.ChevronRightIcon,{className:t$.icon,"data-expanded":ef}),A[41]=ef,A[42]=v):v=A[42],A[43]!==$||A[44]!==eo||A[45]!==eh||A[46]!==v?(x=(0,l.jsx)("button",{onClick:eo,type:"button",className:t$.toggleButton,"aria-expanded":eh,"aria-controls":$,"aria-labelledby":"session-header-title",children:v}),A[43]=$,A[44]=eo,A[45]=eh,A[46]=v,A[47]=x):x=A[47],A[48]!==ed?(b=(0,l.jsx)("span",{className:t$.sessionName,id:"session-header-title",children:ed}),A[48]=ed,A[49]=b):b=A[49],A[50]!==x||A[51]!==b?(j=(0,l.jsxs)("div",{className:t$.mainContent,children:[x,b]}),A[50]=x,A[51]=b,A[52]=j):j=A[52],A[53]!==em||A[54]!==eu?(w=(eu||em)&&(0,l.jsxs)("div",{className:"d-flex align-items-center gap-1 mr-2",children:[eu&&(0,l.jsx)("span",{className:t$.statusIcon,children:eu}),em&&(0,l.jsx)("span",{className:"text-small text-medium text-tabular-nums",children:em})]}),A[53]=em,A[54]=eu,A[55]=w):w=A[55],A[56]!==P||A[57]!==es||A[58]!==en||A[59]!==D||A[60]!==ep?(N=ep&&(0,l.jsx)(tV.l,{variant:"icon-button",nwo:D,currentUserCanPush:P,onStoppingStateChange:es,loading:en}),A[56]=P,A[57]=es,A[58]=en,A[59]=D,A[60]=ep,A[61]=N):N=A[61],A[62]!==ec||A[63]!==el||A[64]!==K||A[65]!==z||A[66]!==G?(C=z&&(0,l.jsxs)(e9.W,{children:[(0,l.jsx)(e9.W.Anchor,{children:(0,l.jsx)(eV.K,{icon:U.KebabHorizontalIcon,"aria-label":"More actions",variant:"invisible"})}),(0,l.jsx)(e9.W.Overlay,{align:"end",children:(0,l.jsxs)(eq.l,{children:[G&&(0,l.jsx)(eq.l.LinkItem,{href:G,onClick:el,children:"View verbose logs"}),K&&(0,l.jsx)(eq.l.Item,{onSelect:ec,children:"Copy link"})]})})]}),A[62]=ec,A[63]=el,A[64]=K,A[65]=z,A[66]=G,A[67]=C):C=A[67],A[68]!==w||A[69]!==N||A[70]!==C?(k=(0,l.jsxs)("div",{className:t$.rightContent,children:[w,N,C]}),A[68]=w,A[69]=N,A[70]=C,A[71]=k):k=A[71],A[72]!==j||A[73]!==k?(S=(0,l.jsxs)(l.Fragment,{children:[j,k]}),A[72]=j,A[73]=k,A[74]=S):S=A[74];let eg=S,ey=!er;A[75]!==ey?(I=(0,ta.$)(t$.containerWrapper,{[t$.containerStickyToTop]:ey}),A[75]=ey,A[76]=I):I=A[76];let ev=!O;return A[77]!==eg||A[78]!==J||A[79]!==ev?(T=(0,l.jsx)("div",{"data-active":J,"data-expanded":ev,className:t$.container,children:eg}),A[77]=eg,A[78]=J,A[79]=ev,A[80]=T):T=A[80],A[81]!==I||A[82]!==T?(E=(0,l.jsx)("div",{ref:Q,className:I,children:T}),A[81]=I,A[82]=T,A[83]=E):E=A[83],A[84]!==eg||A[85]!==er?(L=er&&(0,l.jsx)("div",{className:(0,ta.$)(t$.container,t$.containerStickyToChatInput),children:eg}),A[84]=eg,A[85]=er,A[86]=L):L=A[86],A[87]!==E||A[88]!==L?(R=(0,l.jsxs)(l.Fragment,{children:[E,L]}),A[87]=E,A[88]=L,A[89]=R):R=A[89],R}try{tH.displayName||(tH.displayName="SessionHeader")}catch{}var tG=n(16425);let tK={detailsContainer:"Session-module__detailsContainer--qmZLt",contentContainer:"Session-module__contentContainer--IM2G9",logsContainer:"Session-module__logsContainer--uhCCi",permalinkedSession:"Session-module__permalinkedSession--nOoTk",bottomFooter:"Session-module__bottomFooter--HIesg"},tz="session-global-toggle";function tQ(e){let t,n,i,a,s,o,c,d,u,m,p,h,f,g,y,v,x,b=(0,r.c)(45),{defaultOpen:j,onOpenChange:w,scrollContainerRef:N,hideStopButton:C,onToolExpand:k,shouldHighlight:S}=e,I=void 0!==C&&C,T=void 0!==S&&S,{session:E}=(0,tI.Lg)(),[L,R]=(0,_.useState)(void 0!==j&&j),{data:A}=tx();b[0]!==A?(t=void 0===A?{}:A,b[0]=A,b[1]=t):t=b[1];let{currentUserCanPush:D,pull:P,logsPollingInterval:O,currentUser:B}=t,F=(0,_.useRef)(null);b[2]===Symbol.for("react.memo_cache_sentinel")?(n={},b[2]=n):n=b[2];let M=(0,_.useRef)(n);b[3]===Symbol.for("react.memo_cache_sentinel")?(i=e=>{e.detail.excludeInstance!==M.current&&R(e.detail.expand)},b[3]=i):i=b[3];let $=(0,_.useRef)(i);b[4]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{let e=e=>{$.current?.(e)};return document.addEventListener(tz,e),()=>{document.removeEventListener(tz,e)}},s=[],b[4]=a,b[5]=s):(a=b[4],s=b[5]),(0,_.useEffect)(a,s),b[6]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{R(e);let t=new CustomEvent(tz,{detail:{expand:e,excludeInstance:M.current}});document.dispatchEvent(t)},b[6]=o):o=b[6];let V=o;b[7]!==w?(c=e=>{R(e),w(e)},b[7]=w,b[8]=c):c=b[8];let U=c;b[9]!==E?(d=(0,H.v5)(E),b[9]=E,b[10]=d):d=b[10];let q=d,W=`session-content-${E.id}`;b[11]!==T?(u=()=>{if(!T||!F.current)return;let e=0,t=0;return e=requestAnimationFrame(()=>{t=requestAnimationFrame(()=>{F.current?.scrollIntoView({behavior:"smooth",block:"start"})})}),()=>{cancelAnimationFrame(e),cancelAnimationFrame(t)}},m=[T],b[11]=T,b[12]=u,b[13]=m):(u=b[12],m=b[13]),(0,_.useEffect)(u,m),b[14]!==T?(p=(0,ta.$)(tK.detailsContainer,{[tK.permalinkedSession]:T}),b[14]=T,b[15]=p):p=b[15];let G=P?.repository_nwo,K=!!D,z=!L;b[16]!==W||b[17]!==U||b[18]!==I||b[19]!==N||b[20]!==G||b[21]!==K||b[22]!==z?(h=(0,l.jsx)(tH,{nwo:G,currentUserCanPush:K,isCollapsed:z,onModifierClick:V,scrollContainerRef:N,hideStopButton:I,contentId:W,onOpenChange:U}),b[16]=W,b[17]=U,b[18]=I,b[19]=N,b[20]=G,b[21]=K,b[22]=z,b[23]=h):h=b[23];let Q=O??3e3,Y=P?.repository_nwo;return b[24]!==B||b[25]!==Q||b[26]!==Y?(f=(0,l.jsx)(tF.U,{logsPollingInterval:Q,nwo:Y,currentUser:B,batchCompletedSessions:!0}),b[24]=B,b[25]=Q,b[26]=Y,b[27]=f):f=b[27],b[28]!==k||b[29]!==f?(g=(0,l.jsx)("div",{className:tK.logsContainer,children:(0,l.jsx)(tG.$X,{variant:"mission-control",onToolExpand:k,children:f})}),b[28]=k,b[29]=f,b[30]=g):g=b[30],b[31]!==E.premium_requests||b[32]!==E.state?(y=E.state===H.Yj.Completed&&E.premium_requests>0&&(0,l.jsxs)("div",{className:tK.bottomFooter,children:[(0,l.jsxs)("span",{className:"text-semibold",children:[E.premium_requests," "]}),(0,l.jsxs)("span",{className:"fgColor-muted",children:["premium ",eA()("request",E.premium_requests)]})]}),b[31]=E.premium_requests,b[32]=E.state,b[33]=y):y=b[33],b[34]!==W||b[35]!==L||b[36]!==g||b[37]!==y?(v=(0,l.jsxs)("div",{id:W,className:tK.contentContainer,"data-expanded":L,children:[g,y]}),b[34]=W,b[35]=L,b[36]=g,b[37]=y,b[38]=v):v=b[38],b[39]!==q||b[40]!==E.id||b[41]!==p||b[42]!==h||b[43]!==v?(x=(0,l.jsxs)("div",{ref:F,className:p,"data-active":q,"data-session-id":E.id,children:[h,v]}),b[39]=q,b[40]=E.id,b[41]=p,b[42]=h,b[43]=v,b[44]=x):x=b[44],x}try{tQ.displayName||(tQ.displayName="Session")}catch{}let tY={root:"TaskChat-module__root--i8enD",container:"TaskChat-module__container--n3jVO",stickableContainer:"TaskChat-module__stickableContainer--fhutl",scrollContainer:"TaskChat-module__scrollContainer--ENR5a",content:"TaskChat-module__content--X5M4z",initialMessages:"TaskChat-module__initialMessages--zIGn9",chatInputContainer:"TaskChat-module__chatInputContainer--Z0U1_",suspenseSpinner:"TaskChat-module__suspenseSpinner--V6afj",blankSlateContainer:"TaskChat-module__blankSlateContainer--K8GiA"};var tJ=n(70257),tX=n(56708),tZ=n(86877),t0=n(94747);function t1({pull:e,sessions:t=[]}){let n=function(e){let t=e.filter(e=>"pull_request_comment"===e.event_type||"pull_request_comment_non_copilot_pull_request"===e.event_type).map(e=>e.event_identifiers).flat().sort(),n=e.filter(e=>"pull_request_review"===e.event_type||"pull_request_review_non_copilot_pull_request"===e.event_type).map(e=>e.event_identifiers).flat().sort(),i=new URLSearchParams;for(let e of t)null!=e&&i.append("pull_request_comment_ids[]",e.toString());for(let e of n)null!=e&&i.append("pull_request_review_ids[]",e.toString());return i.toString()}(t),i=(0,tg.I)({queryKey:["agent-mentions",e.id,n],queryFn:async()=>{let t=await fetch(`/copilot/agent-sessions/pull-requests/${e.id}/agent-mentions?${n}`,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw Error("Failed to fetch pull request comments");return(await t.json()).agent_mentions},enabled:t.length>0,placeholderData:e=>e}),a=(0,t0.n)({mutationFn:async t=>{/(?:^|[^a-zA-Z0-9_])@copilot(?:[^a-zA-Z0-9_]|$)/i.test(t)||(t=`@copilot ${t.trim()}`);let n=await (0,eS.Sr)(`/${e.repository_nwo}/pull/${e.number}/page_data/create_timeline_comment`,{method:"POST",headers:{Accept:"application/json"},body:{text:t}}),i=await n.json();if(!n.ok)throw Error("Failed to submit comment");return(0,e$.BI)("agent_sessions.task_view",{target:"CREATE_COMMAND_POST_SESSION",pull_id:e.id,pull_number:e.number}),i}}),s=async(e,t)=>{try{let n=await a.mutateAsync(e);return t?.onSuccess?.(n),n}catch(e){throw t?.onError?.(),e}};return{...i,createMention:s}}var t2=n(51120);let t3={formControl:"TaskChatInput-module__formControl--zRdu3",inputWrapper:"TaskChatInput-module__inputWrapper--eke62",extraToolbarText:"TaskChatInput-module__extraToolbarText--MRY2J",blockedOverlay:"TaskChatInput-module__blockedOverlay--YUGdv",blockedContent:"TaskChatInput-module__blockedContent--lQFKZ",blockedIcon:"TaskChatInput-module__blockedIcon--f_JVW"};function t4(e){let t,n,i,a,s,o,c,d,u,m,p,h,f,g,y,v,x,b,j,w=(0,r.c)(59),{activeSession:N,onAddPendingSession:C,onClearPendingSession:k,payload:S,scrollToBottom:I,inputRef:T,chatInputRef:E}=e,{pull:L,steeringEnabled:R,currentUserCanPush:A}=S,[D,P]=(0,_.useState)(!1),O=!!N,B=N?.isPending===!0;w[0]!==N?.user_id||w[1]!==S.sessionOwners?(t=S.sessionOwners.find(e=>e.id===N?.user_id)||null,w[0]=N?.user_id,w[1]=S.sessionOwners,w[2]=t):t=w[2];let F=t,{currentUserIsSessionOwner:M}=tp();w[3]!==D||w[4]!==T?(n=()=>{let e,t=T.current;if(!t)return;let n=()=>{D&&(e=setTimeout(()=>{P(!1)},0))};return t.addEventListener("input",n),()=>{t.removeEventListener("input",n),e&&clearTimeout(e)}},i=[D,T],w[3]=D,w[4]=T,w[5]=n,w[6]=i):(n=w[5],i=w[6]),(0,_.useEffect)(n,i),w[7]!==L?(a={pull:L},w[7]=L,w[8]=a):a=w[8];let{createMention:$}=t1(a);w[9]!==N||w[10]!==O?(s=async e=>{if(O&&!(await (0,t2.I)({path:`/agents/sessions/${N.id}/commands`,method:"POST",body:{content:e}})).ok)throw Error("Failed to submit command")},w[9]=N,w[10]=O,w[11]=s):s=w[11];let V=s;w[12]!==$||w[13]!==V||w[14]!==C||w[15]!==k||w[16]!==I||w[17]!==O?(o=async e=>{P(!1);try{if(O){await V(e),I();return}C(e),await $(e,{onError:()=>{k()}}),I()}catch{throw P(!0),new tX.q(e)}},w[12]=$,w[13]=V,w[14]=C,w[15]=k,w[16]=I,w[17]=O,w[18]=o):o=w[18];let q=o;w[19]!==F?.login||w[20]!==A||w[21]!==M||w[22]!==L||w[23]!==O||w[24]!==R?(c=()=>R?A?"open"!==L.state?`Pull request is ${L.state}`:M?void 0:O?`Only ${F?.login??"the session owner"} can steer this session`:"Only the author of the task can ask for changes. View pull request to request more changes.":"You do not have write permission on the repository":"Steering Copilot requires an active subscription",w[19]=F?.login,w[20]=A,w[21]=M,w[22]=L,w[23]=O,w[24]=R,w[25]=c):c=w[25];let W=c,H=B?"Waiting for Copilot to start session...":O?"Steer active session while Copilot is working":"What would you like to change?";w[26]!==W?(d=W(),w[26]=W,w[27]=d):d=w[27];let G=d,K=!!G,z=!K&&!O&&!B;w[28]!==T||w[29]!==z?(m=()=>{let e=T.current;e&&(z?e.setAttribute("aria-describedby","task-chat-input-help"):e.removeAttribute("aria-describedby"))},u=["task-chat-input-help",z,T],w[28]=T,w[29]=z,w[30]=u,w[31]=m):(u=w[30],m=w[31]),(0,_.useEffect)(m,u),w[32]===Symbol.for("react.memo_cache_sentinel")?(p=(0,l.jsx)(tZ.A.Label,{visuallyHidden:!0,children:"New prompt"}),w[32]=p):p=w[32],w[33]===Symbol.for("react.memo_cache_sentinel")?(h=(0,l.jsx)(U.AgentIcon,{}),w[33]=h):h=w[33];let Q=B?"Wait for the session to be started":void 0;w[34]!==H||w[35]!==Q?(f=[{name:"Agent",supportsMCP:!1,supportsAttachments:!1,supportsModelSwitching:!1,supportsAutocompletion:!1,supportsSpaces:!1,icon:h,placeholder:H,submitLabel:Q}],w[34]=H,w[35]=Q,w[36]=f):f=w[36];let Y=B||K;return w[37]!==z?(g=z?(0,l.jsx)("p",{id:"task-chat-input-help",className:t3.extraToolbarText,children:"Submitting will post a pull request comment"}):null,w[37]=z,w[38]=g):g=w[38],w[39]!==E||w[40]!==q||w[41]!==T||w[42]!==K||w[43]!==f||w[44]!==Y||w[45]!==g?(y=(0,l.jsx)(tJ.V,{onSubmit:q,textAreaRef:T,chatInputRef:E,modes:f,size:"large",isStreaming:!1,disabled:K,submitDisabled:Y,extraToolbar:g}),w[39]=E,w[40]=q,w[41]=T,w[42]=K,w[43]=f,w[44]=Y,w[45]=g,w[46]=y):y=w[46],w[47]!==G||w[48]!==K?(v=K&&(0,l.jsx)("div",{className:t3.blockedOverlay,children:(0,l.jsxs)("div",{className:t3.blockedContent,children:[(0,l.jsx)(U.LockIcon,{size:16,className:t3.blockedIcon}),(0,l.jsx)("p",{className:"mb-0",children:G})]})}),w[47]=G,w[48]=K,w[49]=v):v=w[49],w[50]!==y||w[51]!==v?(x=(0,l.jsxs)("div",{className:t3.inputWrapper,children:[y,v]}),w[50]=y,w[51]=v,w[52]=x):x=w[52],w[53]!==D||w[54]!==K?(b=D&&!K&&(0,l.jsx)(tZ.A.Validation,{variant:"error",className:"pt-2",children:"Failed to submit latest message"}),w[53]=D,w[54]=K,w[55]=b):b=w[55],w[56]!==x||w[57]!==b?(j=(0,l.jsxs)(tZ.A,{className:t3.formControl,children:[p,x,b]}),w[56]=x,w[57]=b,w[58]=j):j=w[58],j}try{t4.displayName||(t4.displayName="TaskChatInput")}catch{}var t5=n(7892),t6=n(77430),t7=n(81945);let t8={container:"UserMessage-module__container--n_nga",messageContainer:"UserMessage-module__messageContainer--l7UxI",messageMeta:"UserMessage-module__messageMeta--zsApi",truncatedPath:"UserMessage-module__truncatedPath--IIrJ5",messageText:"UserMessage-module__messageText--Q3g30",avatarContainer:"UserMessage-module__avatarContainer--ALfST"},t9=e=>{let t,n,i,a=(0,r.c)(9),{mention:s,isLoading:o}=e,c=void 0!==o&&o;if(!s){let e;return a[0]!==c?(e=c?(0,l.jsx)(nt,{}):(0,l.jsx)(ne,{}),a[0]=c,a[1]=e):e=a[1],e}return a[2]!==s?(t=(0,l.jsx)(nn,{mention:s}),a[2]=s,a[3]=t):t=a[3],a[4]!==s.author.avatar_url?(n=(0,l.jsx)("div",{className:t8.avatarContainer,children:(0,l.jsx)(t6.r,{src:s.author.avatar_url,size:24})}),a[4]=s.author.avatar_url,a[5]=n):n=a[5],a[6]!==t||a[7]!==n?(i=(0,l.jsxs)("div",{className:t8.container,children:[t,n]}),a[6]=t,a[7]=n,a[8]=i):i=a[8],i},ne=()=>{let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{className:t8.container,children:(0,l.jsx)("div",{className:t8.messageContainer,children:(0,l.jsx)("p",{className:t8.messageText,children:"Failed to fetch triggering comment"})})}),t[0]=e):e=t[0],e},nt=()=>{let e,t,n,i=(0,r.c)(3);return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("span",{className:t8.messageMeta,children:(0,l.jsx)(t7.O,{variant:"rounded",height:"sm",width:"80px"})}),i[0]=e):e=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsxs)("div",{className:t8.messageContainer,children:[e,(0,l.jsx)("div",{className:t8.messageText,children:(0,l.jsx)(t7.O,{variant:"rounded",height:"sm",width:"random"})})]}),i[1]=t):t=i[1],i[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsxs)("div",{className:t8.container,children:[t,(0,l.jsx)("div",{className:t8.avatarContainer,children:(0,l.jsx)(t7.O,{variant:"elliptical",height:"24px",width:"24px"})})]}),i[2]=n):n=i[2],n},nn=e=>{let t,n,i,a,s=(0,r.c)(10),{mention:o}=e,c=!!o.body;return s[0]!==c||s[1]!==o?(t=c&&(0,l.jsx)(ni,{mention:o}),s[0]=c,s[1]=o,s[2]=t):t=s[2],s[3]!==o?(n=(0,l.jsx)(na,{mention:o}),i="review"===o.type&&(0,l.jsx)(ns,{mention:o}),s[3]=o,s[4]=n,s[5]=i):(n=s[4],i=s[5]),s[6]!==t||s[7]!==n||s[8]!==i?(a=(0,l.jsxs)("div",{className:t8.messageContainer,children:[t,n,i]}),s[6]=t,s[7]=n,s[8]=i,s[9]=a):a=s[9],a},ni=e=>{let t,n,i,a=(0,r.c)(10),{mention:s}=e,{author:o,type:c,url:d,path:u,isPending:m}=s;a[0]!==o.display_login||a[1]!==m||a[2]!==u||a[3]!==c||a[4]!==d?(t=()=>{switch(c){case"single_comment_review":return(0,l.jsxs)("span",{className:t8.truncatedPath,children:[o.display_login," reviewed"," ",(0,l.jsx)(b.A,{muted:!0,inline:!0,href:d,children:u})]});case"review":return`${o.display_login} reviewed`;default:if(m)return`${o.display_login} commented`;return(0,l.jsxs)(l.Fragment,{children:[o.display_login," ",(0,l.jsx)(b.A,{muted:!0,inline:!0,href:d,children:"commented"})]})}},a[0]=o.display_login,a[1]=m,a[2]=u,a[3]=c,a[4]=d,a[5]=t):t=a[5];let p=t;return a[6]!==p?(n=p(),a[6]=p,a[7]=n):n=a[7],a[8]!==n?(i=(0,l.jsx)("span",{className:t8.messageMeta,children:n}),a[8]=n,a[9]=i):i=a[9],i},na=e=>{let t,n,i=(0,r.c)(6),{mention:a}=e;i[0]!==a.author||i[1]!==a.body||i[2]!==a.type?(t="review"!==a.type||a.body?a.body?.split(/(@copilot)/gi).map(nr):`${a.author.display_login} requested changes`,i[0]=a.author,i[1]=a.body,i[2]=a.type,i[3]=t):t=i[3];let s=t;return i[4]!==s?(n=(0,l.jsx)("p",{className:t8.messageText,children:s}),i[4]=s,i[5]=n):n=i[5],n},ns=e=>{let t,n,i,a=(0,r.c)(6),{mention:s}=e,o=s.child_comments??0,c=`${o} review comment${1!==o?"s":""}`;return a[0]!==c||a[1]!==s.url?(t=(0,l.jsx)(b.A,{muted:!0,inline:!0,href:s.url,children:c}),a[0]=c,a[1]=s.url,a[2]=t):t=a[2],a[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsx)(U.ArrowUpRightIcon,{size:12}),a[3]=n):n=a[3],a[4]!==t?(i=(0,l.jsxs)("span",{className:t8.messageMeta,children:[t,n]}),a[4]=t,a[5]=i):i=a[5],i};try{t9.displayName||(t9.displayName="UserMessage")}catch{}try{ne.displayName||(ne.displayName="ErrorMessage")}catch{}try{nt.displayName||(nt.displayName="LoadingMessage")}catch{}try{nn.displayName||(nn.displayName="MessageContent")}catch{}try{ni.displayName||(ni.displayName="MessageMeta")}catch{}try{na.displayName||(na.displayName="MessageText")}catch{}try{ns.displayName||(ns.displayName="ReviewCommentText")}catch{}function nr(e,t){return"@copilot"===e.toLowerCase()?(0,l.jsx)(b.A,{inline:!0,muted:!0,href:"https://gh.io/copilot-coding-agent-docs",children:e},t):e}let no={container:"SessionInitialMessage-module__container--qMtpP",message:"SessionInitialMessage-module__message--Blpx0"},nl=e=>{let t=(0,r.c)(3),{session:n}=e;if(n){let e,i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(U.LockIcon,{}),t[0]=e):e=t[0],t[1]!==n.name?(i=(0,l.jsxs)("div",{className:no.container,children:[e,(0,l.jsxs)("p",{className:no.message,children:["Viewing session ",(0,l.jsx)("span",{className:"text-bold",children:n.name})," only"]})]}),t[1]=n.name,t[2]=i):i=t[2],i}};try{nl.displayName||(nl.displayName="SessionInitialMessage")}catch{}var nc=n(42455);function nd(e){return e}function nu(e){return e.id}function nm(e){return!["completed","failed","cancelled"].includes(e.state.toLowerCase())}var np=n(98747);let nh={container:"CopilotMessage-module__container--hQBT6",message:"CopilotMessage-module__message--luHTt",text:"CopilotMessage-module__text--A3MHK",loadingText:"CopilotMessage-module__loadingText--qNpCH",icon:"CopilotMessage-module__icon--RahmT"};function nf(e){let t,n,i,a,s,o=(0,r.c)(13),{logsPollingInterval:c}=e,{currentUserIsSessionOwner:d}=tp();o[0]!==d||o[1]!==c?(t={logsPollingInterval:c,batchCompletedSessions:!0,currentUserIsSessionOwner:d},o[0]=d,o[1]=c,o[2]=t):t=o[2];let{data:u,isLoading:m,error:p}=(0,np.j)(t);if(o[3]!==p||o[4]!==m||o[5]!==u){a=Symbol.for("react.early_return_sentinel");e:{let e=function(e=[]){let t=new Map;for(let n of e)if((0,H.Qx)(n)){for(let e of n.choices)if("assistant"===e.delta.role){for(let i of e.delta.tool_calls||[])if("reply_to_comment"===i.function.name)try{let e=JSON.parse(i.function.arguments);t.set(n.id,e)}catch{}}}return[...t.values()]}(u);if(m){let e;o[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(ny,{}),o[9]=e):e=o[9],a=e;break e}if(p||0===e.length){a=null;break e}n=nh.container,i=e.map(ng)}o[3]=p,o[4]=m,o[5]=u,o[6]=n,o[7]=i,o[8]=a}else n=o[6],i=o[7],a=o[8];return a!==Symbol.for("react.early_return_sentinel")?a:(o[10]!==n||o[11]!==i?(s=(0,l.jsx)("div",{className:n,children:i}),o[10]=n,o[11]=i,o[12]=s):s=o[12],s)}function ng(e,t){return(0,l.jsxs)("div",{className:nh.message,children:[(0,l.jsx)("div",{className:nh.icon,children:0===t&&(0,l.jsx)(tE.N,{size:32,animationType:"static",loopAnimation:!1})}),(0,l.jsx)(tD.To,{className:nh.text,markdown:e.reply})]},e.comment_id)}let ny=()=>{let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{className:nh.container,children:(0,l.jsxs)("div",{className:nh.message,children:[(0,l.jsx)("div",{className:nh.icon,children:(0,l.jsx)(t7.O,{variant:"elliptical",height:"32px",width:"32px"})}),(0,l.jsxs)("div",{className:(0,ta.$)(nh.text,nh.loadingText),children:[(0,l.jsx)(t7.O,{variant:"rounded",height:"sm",width:"random"}),(0,l.jsx)(t7.O,{variant:"rounded",height:"sm",width:"random"}),(0,l.jsx)(t7.O,{variant:"rounded",height:"sm",width:"random"})]})]})}),t[0]=e):e=t[0],e};try{nf.displayName||(nf.displayName="CopilotMessage")}catch{}try{ny.displayName||(ny.displayName="LoadingMessage")}catch{}var nv=n(13814);function nx(){let e,t=(0,r.c)(3),{data:n,isLoading:i}=tx();if(i){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{className:tY.suspenseSpinner,children:(0,l.jsx)(tk.A,{size:"medium"})}),t[0]=e):e=t[0],e}return t[1]!==n?(e=n&&(0,l.jsx)(nj,{payload:n}),t[1]=n,t[2]=e):e=t[2],e}function nb(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{className:tY.blankSlateContainer,style:{alignItems:"center"},children:(0,l.jsx)(tk.A,{})}),t[0]=e):e=t[0],e}function n_(e){let t,n,i,a,s,o,c=(0,r.c)(14),{title:d,description:u,statusLink:m,pullLink:p}=e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(E.E.Visual,{children:(0,l.jsx)(U.AlertIcon,{size:24,className:"fgColor-muted"})}),c[0]=t):t=c[0],c[1]!==d?(n=(0,l.jsx)(E.E.Heading,{children:d}),c[1]=d,c[2]=n):n=c[2],c[3]!==u?(i=(0,l.jsx)(E.E.Description,{className:"text-center",children:u}),c[3]=u,c[4]=i):i=c[4],c[5]!==m?(a=m?(0,l.jsx)(E.E.SecondaryAction,{href:m,children:"GitHub status"}):null,c[5]=m,c[6]=a):a=c[6],c[7]!==p?(s=p?(0,l.jsx)(E.E.SecondaryAction,{href:p,children:"Go to pull request"}):null,c[7]=p,c[8]=s):s=c[8],c[9]!==n||c[10]!==i||c[11]!==a||c[12]!==s?(o=(0,l.jsx)("div",{className:tY.blankSlateContainer,children:(0,l.jsxs)(E.E,{children:[t,n,i,a,s]})}),c[9]=n,c[10]=i,c[11]=a,c[12]=s,c[13]=o):o=c[13],o}function nj(e){let t,n,i,a,s,o,c,d,u,m,p,f,g,y,v,x,b,j,w,N,C,k,S=(0,r.c)(56),{payload:I}=e,{pull:T,sessions:E,logsPollingInterval:L,sessionsPollingInterval:R,sessionOwners:A}=I,[D]=(0,eM.ok)();S[0]!==D?(t=D.get("session_id"),S[0]=D,S[1]=t):t=S[1];let P=t,{currentUser:O,currentUserIsSessionOwner:B}=tp(),[F,M]=(0,_.useState)(B&&P?P:null),$=(0,_.useRef)(!1),V=(0,_.useRef)(null),U=(0,_.useRef)(null),q=(0,_.useRef)(null),W=(0,_.useRef)(null);S[2]!==T.id||S[3]!==E||S[4]!==R?(n={pullId:T.id,initialData:E,sessionsPollingInterval:R},S[2]=T.id,S[3]=E,S[4]=R,S[5]=n):n=S[5];let{data:G,isError:K,timedOut:z}=(0,tN.t)(n);S[6]!==A||S[7]!==G?(i={sessions:G,initialData:A},S[6]=A,S[7]=G,S[8]=i):i=S[8];let{data:Q}=(0,t5.i)(i);S[9]!==T||S[10]!==G?(a={pull:T,sessions:G},S[9]=T,S[10]=G,S[11]=a):a=S[11];let{data:Y,isFetching:J}=t1(a);S[12]!==O||S[13]!==Y||S[14]!==T.id||S[15]!==G?(s={pullId:T.id,sessions:G,mentions:Y,currentUser:O},S[12]=O,S[13]=Y,S[14]=T.id,S[15]=G,S[16]=s):s=S[16];let{allSessions:X,allMentions:Z,addPendingSession:ee,clearPendingSession:et}=function(e){let t,n,i,a,s,o,l,c,d,u,m,p,h,f=(0,r.c)(32),{pullId:g,sessions:y,mentions:v,currentUser:x}=e;f[0]!==y?(t=void 0===y?[]:y,f[0]=y,f[1]=t):t=f[1];let b=t;f[2]!==v?(n=void 0===v?[]:v,f[2]=v,f[3]=n):n=f[3];let j=n,[w,N]=(0,_.useState)(null),[C,k]=(0,_.useState)(null),[S,I]=(0,_.useState)(b.length),[T,E]=(0,_.useState)(j.length),L=b.length>S,R=j.length>T;f[4]!==S||f[5]!==b.length?(i=()=>{if(b.length!==S){let e=setTimeout(()=>{I(b.length)},0);return()=>clearTimeout(e)}},a=[b.length,S],f[4]=S,f[5]=b.length,f[6]=i,f[7]=a):(i=f[6],a=f[7]),(0,_.useEffect)(i,a),f[8]!==j.length||f[9]!==T?(s=()=>{if(j.length!==T){let e=setTimeout(()=>{E(j.length)},0);return()=>clearTimeout(e)}},o=[j.length,T],f[8]=j.length,f[9]=T,f[10]=s,f[11]=o):(s=f[10],o=f[11]),(0,_.useEffect)(s,o);let A=L?null:w,D=R?null:C;f[12]!==R||f[13]!==L||f[14]!==C||f[15]!==w?(c=()=>{if(L&&null!==w||R&&null!==C){let e=setTimeout(()=>{L&&N(null),R&&k(null)},0);return()=>clearTimeout(e)}},l=[L,R,w,C],f[12]=R,f[13]=L,f[14]=C,f[15]=w,f[16]=l,f[17]=c):(l=f[16],c=f[17]),(0,_.useEffect)(c,l),f[18]!==x||f[19]!==g?(d=e=>{let t=function(e,t){let n=t?.login??"You";return{type:"timeline_comment",id:-1,global_relay_id:"",pull_request_id:0,body:e,url:"",created_at:"",updated_at:"",author:{avatar_url:t?.primaryAvatarUrl??`https://avatars.githubusercontent.com/${t?.login??"ghost"}`,display_login:n,global_relay_id:"",id:0,url:""},path:null,subject_type:null,child_comments:null,isPending:!0}}(e,x);k(t),N((0,H.s1)(g,t.id.toString()))},f[18]=x,f[19]=g,f[20]=d):d=f[20];let P=d;f[21]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{N(null),k(null)},f[21]=u):u=f[21];let O=u;f[22]!==A||f[23]!==b?(m=A?[...b,A]:b,f[22]=A,f[23]=b,f[24]=m):m=f[24];let B=m;f[25]!==D||f[26]!==j?(p=D?[...j,D]:j,f[25]=D,f[26]=j,f[27]=p):p=f[27];let F=p;return f[28]!==P||f[29]!==F||f[30]!==B?(h={allSessions:B,allMentions:F,addPendingSession:P,clearPendingSession:O},f[28]=P,f[29]=F,f[30]=B,f[31]=h):h=f[31],h}(s);S[17]!==G?(o=G?.every(nS)??!1,S[17]=G,S[18]=o):o=S[18];let en=o,ei=X.sort(nk),{data:ea,isLoading:es}=function(e){let t,n,i,a,s=(0,r.c)(11),{sessions:o}=e,{pull:l}=function(){let e=(0,_.useContext)(th);if(!e)throw Error("usePullContext must be used within a PullContextProvider");return e}();s[0]!==o?(t=o.filter(nm).map(nu).sort().join(","),s[0]=o,s[1]=t):t=s[1];let c=t,d=l?.id;s[2]!==c||s[3]!==d?(n=["agent-inactive-session-logs",d,c],s[2]=c,s[3]=d,s[4]=n):n=s[4],s[5]!==l?.id?(i=async()=>{let e=await (0,t2.I)({path:`/agents/sessions/resource/pull/${l?.id}/inactive_logs`});if(!e.ok)throw Error(`Error fetching inactive session logs: ${e.statusText}`);let t=(await e.json()).logs,n={};for(let e in t){let i=t[e],a=[];for(let t of function(e){return e.split(`

`).map(e=>e.trim()).filter(e=>e.length>0).map(e=>e.split(`
`).filter(e=>e.startsWith("data: ")).map(e=>e.substring(6)).join(`
`)).filter(e=>"[DONE]"!==e).filter(e=>e.length>0).map(e=>JSON.parse(e))}(i)){if((0,H.X)(t))a.push(t);else throw Error(`Invalid log entry received: ${JSON.stringify(t)}`);n[e]=a}}return n},s[5]=l?.id,s[6]=i):i=s[6];let u=!!l;return s[7]!==n||s[8]!==i||s[9]!==u?(a={queryKey:n,queryFn:i,enabled:u,placeholderData:nd},s[7]=n,s[8]=i,s[9]=u,s[10]=a):a=s[10],(0,nc.b)(a)}({sessions:ei});S[19]===Symbol.for("react.memo_cache_sentinel")?(c=(0,h.G7)("copilot_immersive_task_hyperlinking"),S[19]=c):c=S[19];let er=c;S[20]!==X?(d=er?(()=>{let e=X.find(nC);return(0,tT.L)(e?.event_identifiers)})():void 0,S[20]=X,S[21]=d):d=S[21];let eo=d;S[22]!==Z?(u=e=>{if(Z&&e.event_identifiers)return Z.find(t=>e.event_identifiers?.includes(t.id.toString()))},S[22]=Z,S[23]=u):u=S[23];let el=u;S[24]===Symbol.for("react.memo_cache_sentinel")?(m={containerRef:V,behavior:"smooth"},S[24]=m):m=S[24];let{scrollToBottom:ec}=tW(m);S[25]===Symbol.for("react.memo_cache_sentinel")?(p={containerRef:V,sentinelRef:U,offset:4},S[25]=p):p=S[25];let{setIsAtBottom:ed}=function(e){let t,n,i,a,s,o,l,c,d,u,m,p,h=(0,r.c)(24),{containerRef:f,sentinelRef:g,offset:y,scrollBehavior:v}=e,x=void 0===v?"instant":v,[b,j]=(0,_.useState)(!0),w=(0,_.useRef)(!1),N=(0,_.useRef)(b);h[0]!==b?(t=()=>{N.current=b},n=[b],h[0]=b,h[1]=t,h[2]=n):(t=h[1],n=h[2]),(0,_.useEffect)(t,n),h[3]!==f||h[4]!==x?(i={containerRef:f,behavior:x,smoothThreshold:500},h[3]=f,h[4]=x,h[5]=i):i=h[5];let{scrollToBottom:C}=tW(i);h[6]!==f||h[7]!==g?(a=()=>{let e=f?.current;if(!e)return{containerElement:null,contentElement:document.scrollingElement||document.documentElement};let t=g.current?.parentElement??e;return{containerElement:e,contentElement:t}},h[6]=f,h[7]=g,h[8]=a):a=h[8];let k=a;return h[9]!==f?(s=()=>{let e=f?.current||window,t=()=>{w.current=!0};return e.addEventListener("scroll",t,{once:!0}),()=>{e.removeEventListener("scroll",t)}},o=[f],h[9]=f,h[10]=s,h[11]=o):(s=h[10],o=h[11]),(0,_.useEffect)(s,o),h[12]!==k||h[13]!==y||h[14]!==g?(l=()=>{let e=g.current;if(!e)return;let{containerElement:t}=k(),n=new IntersectionObserver(e=>{let t=e[0];t&&j(t.isIntersecting)},{root:t??null,rootMargin:`0px 0px ${y}px 0px`,threshold:0});return n.observe(e),()=>n.disconnect()},c=[y,k,g],h[12]=k,h[13]=y,h[14]=g,h[15]=l,h[16]=c):(l=h[15],c=h[16]),(0,_.useEffect)(l,c),h[17]!==k||h[18]!==C?(d=()=>{let{contentElement:e}=k();if(!e)return;let t=new ResizeObserver(()=>{(!w.current||N.current)&&C()});return t.observe(e),()=>t.disconnect()},u=[k,C],h[17]=k,h[18]=C,h[19]=d,h[20]=u):(d=h[19],u=h[20]),(0,_.useEffect)(d,u),h[21]===Symbol.for("react.memo_cache_sentinel")?(m=e=>{N.current=e,j(e)},h[21]=m):m=h[21],h[22]!==b?(p={isAtBottom:b,setIsAtBottom:m},h[22]=b,h[23]=p):p=h[23],p}(p);S[26]!==D||S[27]!==P?(f=()=>{if(!P||"undefined"==typeof window||$.current)return;$.current=!0;let e=new URLSearchParams(D);e.delete("session_id");let t=e.toString(),n=`${window.location.pathname}${t?`?${t}`:""}${window.location.hash}`;(0,tS.kd)(n),queueMicrotask(()=>M(null))},S[26]=D,S[27]=P,S[28]=f):f=S[28];let eu=f;S[29]!==F||S[30]!==eu?(g=e=>{if(!F)return;let t=e.target,n=V.current?.querySelector(`[data-session-id="${F}"]`);n&&!n.contains(t)&&eu()},S[29]=F,S[30]=eu,S[31]=g):g=S[31];let em=g;return S[32]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{$.current=!1},S[32]=y):y=S[32],S[33]!==P?(v=[P],S[33]=P,S[34]=v):v=S[34],(0,_.useEffect)(y,v),S[35]!==ed||S[36]!==P?(x=()=>{P&&ed(!1)},b=[P,ed],S[35]=ed,S[36]=P,S[37]=x,S[38]=b):(x=S[37],b=S[38]),(0,_.useEffect)(x,b),S[39]!==en||S[40]!==T.global_relay_id?(j={chatInputRef:q,textAreaRef:W,isReadonly:en,taskId:T.global_relay_id},S[39]=en,S[40]=T.global_relay_id,S[41]=j):j=S[41],!function(e){let t,n,i,a,s=(0,r.c)(10),{chatInputRef:o,textAreaRef:l,isReadonly:c,taskId:d}=e,u=(0,_.useRef)(null),m=(0,_.useRef)(null);s[0]!==o||s[1]!==l?(t=e=>{o.current&&(o.current.setText(t=>t&&t.trim()?`${t}
${e}`:e),l?.current?.focus())},s[0]=o,s[1]=l,s[2]=t):t=s[2];let p=t;s[3]!==p||s[4]!==c||s[5]!==d?(n=e=>{(e instanceof nv.L||e instanceof nv.J)&&(c||((0,e$.BI)("agent_sessions.task_view",{target:"CREATE_COMMAND_DIFF_BUTTON",file_path:e.filePath,line_number:e.endLineNumber,has_range:e.startLineNumber!==e.endLineNumber,task_id:d}),m.current=e,u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{m.current&&(p(function(e){let{filePath:t,startLineNumber:n,endLineNumber:i}=e;return n!==i&&n?`${t}:${n}-${i}`:`${t}:${i}`}(m.current)),m.current=null)},300)))},s[3]=p,s[4]=c,s[5]=d,s[6]=n):n=s[6];let h=n;s[7]!==h?(i=()=>(window.addEventListener("DiffAddCommentButtonClickedEvent",h),window.addEventListener("DiffSelectedLineEvent",h),()=>{window.removeEventListener("DiffAddCommentButtonClickedEvent",h),window.removeEventListener("DiffSelectedLineEvent",h),u.current&&clearTimeout(u.current)}),a=[h],s[7]=h,s[8]=i,s[9]=a):(i=s[8],a=s[9]),(0,_.useEffect)(i,a)}(j),S[42]!==eu||S[43]!==G||S[44]!==P?(w=()=>{if(!P||!G)return;let e=G.find(H.v5),t=e?.id??null;t&&t!==P&&eu()},N=[P,G,eu],S[42]=eu,S[43]=G,S[44]=P,S[45]=w,S[46]=N):(w=S[45],N=S[46]),(0,_.useEffect)(w,N),S[47]!==ec||S[48]!==ed||S[49]!==P?(C=()=>{if(q.current&&q.current.setText(""),P)return void ed(!1);ed(!0),ec("instant")},S[47]=ec,S[48]=ed,S[49]=P,S[50]=C):C=S[50],S[51]!==T.id||S[52]!==ec||S[53]!==ed||S[54]!==P?(k=[T.id,ed,ec,P],S[51]=T.id,S[52]=ec,S[53]=ed,S[54]=P,S[55]=k):k=S[55],(0,_.useEffect)(C,k),G&&Q?K&&z?(0,l.jsx)(n_,{title:"Activity cannot be loaded",description:"The activity on this task is temporarily unavailable due to a system error. Try reloading the page, or if the problem persists, contact support.",statusLink:"https://www.githubstatus.com/"}):G.length?(0,l.jsx)("div",{className:tY.root,children:(0,l.jsxs)("div",{className:tY.container,children:[(0,l.jsx)("div",{className:tY.stickableContainer,children:(0,l.jsx)(tC.$,{containerRef:V,disabled:!1,className:tY.scrollContainer,onClick:em,children:(0,l.jsxs)("div",{className:tY.content,children:[ei.map((e,t)=>{var n;let i=el(e),a=(0,H.VY)(e);return(0,l.jsxs)("div",{className:"d-flex flex-column",children:[0===t&&(0,l.jsx)("div",{className:tY.initialMessages,children:B?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tB,{currentUser:O,threadId:eo,session:e,message:en?"requested a review":"started a task"}),(0,l.jsx)(tR,{message:en?"started a review":"started work"})]}):(0,l.jsx)(nl,{session:e})}),t>0&&(0,l.jsx)(t9,{mention:i,isLoading:!i&&J},i?.id),(0,l.jsxs)(tI.PS,{session:e,sessionOwner:Q.find(t=>t.id===e.user_id),logs:ea?.[e.id],logsAreLoading:es,children:[(0,l.jsx)(tQ,{defaultOpen:(n=e.id,P?n===P:!!a||(G&&G.some(nN)?n===G.find(nw)?.id:t===ei.length-1)),scrollContainerRef:V,hideStopButton:a,onOpenChange:()=>ed(!1),onToolExpand:()=>ed(!1),shouldHighlight:e.id===F}),"completed"===e.state&&(B&&0!==t||!B)&&(0,l.jsx)(nf,{logsPollingInterval:L??3e3})]})]},e.id)}),(0,l.jsx)("div",{ref:U,"aria-hidden":!0,style:{height:1}})]})})}),!en&&(0,l.jsx)("div",{className:tY.chatInputContainer,children:(0,l.jsx)(t4,{activeSession:X?.find(H.v5)??null,onAddPendingSession:ee,onClearPendingSession:et,payload:I,scrollToBottom:ec,chatInputRef:q,inputRef:W})})]})}):(0,l.jsx)(n_,{title:"This task is not viewable",description:"You can't view this task because you do not have any active sessions for this pull request.",pullLink:T.url}):(0,l.jsx)(nb,{})}function nw(e){return(0,H.v5)(e)}function nN(e){return(0,H.v5)(e)}function nC(e){return e.event_type===em.qY}function nk(e,t){return new Date(e.created_at).getTime()-new Date(t.created_at).getTime()}function nS(e){return(0,H.SS)(e)}try{nx.displayName||(nx.displayName="TaskChatSuspended")}catch{}try{nb.displayName||(nb.displayName="CenteredSpinner")}catch{}try{n_.displayName||(n_.displayName="CenteredBlankSlate")}catch{}try{nj.displayName||(nj.displayName="TaskChat")}catch{}let nI={layout:"TaskView-module__layout--AFh4y",contentPreview:"TaskView-module__contentPreview--NFDAQ"};function nT(){let e,t=(0,r.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(j.Fn,{children:(0,l.jsx)(eO.BH,{children:(0,l.jsx)(nE,{})})}),t[0]=e):e=t[0],e}function nE(){let e,t,n,i,a,s,o,d,m,h,f,y,v,x,b,j,N,C,k,S,I,T,E,L,R,A,D=(0,r.c)(95),{data:P}=tx();D[0]!==P?(e=void 0===P?{}:P,D[0]=P,D[1]=e):e=D[1];let{pull:O,sessions:B,sessionsPollingInterval:F,currentUser:M}=e,$=O?.id??0,V=F??0;D[2]!==B||D[3]!==$||D[4]!==V?(t={pullId:$,initialData:B,sessionsPollingInterval:V},D[2]=B,D[3]=$,D[4]=V,D[5]=t):t=D[5];let{data:q}=(0,tN.t)(t),W=(0,eO.tZ)(),{openPreviewPane:H,closePreviewPane:G,openItem:K,closeItem:z,updateItem:Q,allOpenItems:Y}=(0,eO.xx)(),[J]=(0,eM.ok)(),X=Y?.length??0,{isNarrowViewport:Z}=(0,eB.B)(),ee=!!q?.length;D[6]!==J?(n=J.get("session_id"),D[6]=J,D[7]=n):n=D[7];let et=!!n;D[8]!==q?(i=q?.toSorted(nD)[0],D[8]=q,D[9]=i):i=D[9];let en=i,ei=q?.length??0;D[10]!==q?(a=q?.reduce(nA,0)||0,D[10]=q,D[11]=a):a=D[11];let ea=a,es=!!(M&&M?.id===q?.[0]?.user_id);D[12]!==q?(s=q?.some(nR)??!1,D[12]=q,D[13]=s):s=D[13];let er=s;D[14]!==q?(o=q?.every(nL)??!1,D[14]=q,D[15]=o):o=D[15];let eo=o,el=O?.id||0,ec=!!O?.id;D[16]!==O||D[17]!==el||D[18]!==ec?(d={pullRequestId:el,includeBody:!1,initialData:O,enabled:ec},D[16]=O,D[17]=el,D[18]=ec,D[19]=d):d=D[19];let{data:ed,refetchBody:eu,refetchPullRequest:em}=function(e){let t,n,i,a,s,o,l=(0,r.c)(25),{pullRequestId:c,includeBody:d,initialData:u,enabled:m}=e,p=void 0!==d&&d,h=void 0===m||m,f=(0,tj.jE)();l[0]!==p||l[1]!==c?(t=["pull-request",c,p],l[0]=p,l[1]=c,l[2]=t):t=l[2];let g=t;l[3]!==p||l[4]!==c?(n=()=>tw(c,{includeBody:p}),l[3]=p,l[4]=c,l[5]=n):n=l[5];let y=n,v=3e5*!!u;l[6]!==h||l[7]!==u||l[8]!==y||l[9]!==g||l[10]!==v?(i={queryKey:g,queryFn:y,initialData:u,staleTime:v,enabled:h},l[6]=h,l[7]=u,l[8]=y,l[9]=g,l[10]=v,l[11]=i):i=l[11];let{data:x,refetch:b}=(0,tg.I)(i);l[12]!==c||l[13]!==f||l[14]!==g?(a=async()=>{let e=await tw(c,{includeBody:!0});f.setQueryData(g,t=>t?{...t,body:e.body,body_revision_count:e.body_revision_count}:e)},l[12]=c,l[13]=f,l[14]=g,l[15]=a):a=l[15];let _=a;l[16]!==c||l[17]!==f||l[18]!==g?(s=async()=>{let e=await tw(c,{includeBody:!1});f.setQueryData(g,t=>t?{...t,title:e.title,head_sha:e.head_sha,changed_files:e.changed_files,commit_alive_channel:e.commit_alive_channel}:e)},l[16]=c,l[17]=f,l[18]=g,l[19]=s):s=l[19];let j=s;return l[20]!==x||l[21]!==b||l[22]!==_||l[23]!==j?(o={data:x,refetch:b,refetchBody:_,refetchPullRequest:j},l[20]=x,l[21]=b,l[22]=_,l[23]=j,l[24]=o):o=l[24],o}(d);!function(e,t,n){let i,a,s,o=(0,r.c)(7);o[0]!==t?(i=(0,t_.A)(t,2e3,{leading:!1,trailing:!0}),o[0]=t,o[1]=i):i=o[1];let l=i;o[2]!==n?(a=(0,t_.A)(n,2e3,{leading:!1,trailing:!0}),o[2]=n,o[3]=a):a=o[3];let c=a;o[4]!==c||o[5]!==l?(s=e=>{(e.event_updates?.git_updated||e.event_updates?.title_updated)&&l(),e.event_updates?.body_updated&&c()},o[4]=c,o[5]=l,o[6]=s):s=o[6];let d=s;(0,tb.x)(e,d)}(ed?.aliveChannel,em,eu),D[20]===Symbol.for("react.memo_cache_sentinel")?(m=new Set,D[20]=m):m=D[20];let ep=(0,_.useRef)(m),eh=(0,_.useRef)(void 0),ef=(0,_.useRef)(void 0);D[21]!==X?(h=()=>{0===X&&ep.current.clear()},f=[X],D[21]=X,D[22]=h,D[23]=f):(h=D[22],f=D[23]),(0,_.useEffect)(h,f),D[24]!==Y||D[25]!==z||D[26]!==es||D[27]!==eo||D[28]!==ed||D[29]!==et||D[30]!==er||D[31]!==Z||D[32]!==en?.last_updated_at||D[33]!==en?.state||D[34]!==K||D[35]!==H||D[36]!==ea||D[37]!==O||D[38]!==ei||D[39]!==Q?(y=()=>{if(!ed)return;void 0!==ed.id&&void 0!==eh.current&&eh.current!==ed.id&&(ep.current.clear(),ef.current=void 0),eh.current=ed?.id;let e=ed.changed_files??0,t=ed.head_sha,n=ei>0&&e>0,i={...(0,tc.Bx)({body:ed?.body??"",title:ed.title,number:ed.number,type:"pr-overview",repositoryNwo:ed.repository_nwo,baseRef:ed.base_ref_name,headRef:ed.head_ref_name,headSha:t,sessionState:en?.state,sessionUpdatedAt:en?.last_updated_at,sessionCount:ei,premiumRequestCount:ea,isSingleSessionView:!es,commitAliveChannel:ed.commit_alive_channel},to.Wp),disableCloseButton:!0,icon:U.NoteIcon},a=O&&n?{...(0,tc.Bx)({type:"pr-files-changed",headSha:t,basePath:`/${ed.repository_nwo}/pull/${ed.number}`,isSessionRunning:er,isSessionReadonly:eo},to.Wp),disableCloseButton:!0,trailingComponent:(0,l.jsx)(td.A,{children:e}),icon:U.FileIcon}:null;for(let e of(Q(i),a&&Q(a),Y))e.includes("pr-files-changed:")&&!n&&z(e);let s=Y.includes(i.id),r=a&&Y.includes(a.id),o=!ep.current.has(i.id)&&!s,c=a&&!ep.current.has(a.id)&&!r;o&&(K(i.id,!et),Z||H()),c&&(K(a.id,et),et&&!Z&&H()),ep.current.add(i.id),a&&ep.current.add(a.id)},D[24]=Y,D[25]=z,D[26]=es,D[27]=eo,D[28]=ed,D[29]=et,D[30]=er,D[31]=Z,D[32]=en?.last_updated_at,D[33]=en?.state,D[34]=K,D[35]=H,D[36]=ea,D[37]=O,D[38]=ei,D[39]=Q,D[40]=y):y=D[40];let eg=en?.state,ey=en?.last_updated_at;D[41]!==Y||D[42]!==z||D[43]!==G||D[44]!==es||D[45]!==eo||D[46]!==ed||D[47]!==et||D[48]!==er||D[49]!==Z||D[50]!==K||D[51]!==X||D[52]!==H||D[53]!==ea||D[54]!==O||D[55]!==ei||D[56]!==eg||D[57]!==ey||D[58]!==Q?(v=[ed,Q,K,z,H,G,et,O,X,eg,ey,ei,ea,Y,Z,es,er,eo],D[41]=Y,D[42]=z,D[43]=G,D[44]=es,D[45]=eo,D[46]=ed,D[47]=et,D[48]=er,D[49]=Z,D[50]=K,D[51]=X,D[52]=H,D[53]=ea,D[54]=O,D[55]=ei,D[56]=eg,D[57]=ey,D[58]=Q,D[59]=v):v=D[59],(0,_.useEffect)(y,v);let ev=(0,u.b)(),ex=(0,eF.U)();D[60]!==G||D[61]!==H?(x=e=>{e?H():G()},D[60]=G,D[61]=H,D[62]=x):x=D[62];let eb=x;D[63]!==ed?.title?(b=()=>{let e=ed?.title;e?(0,p.D)(`${e} \xb7 Task \xb7 GitHub Copilot`):(0,p.D)("Task \xb7 GitHub Copilot")},D[63]=ed?.title,D[64]=b):b=D[64];let e_=ed?.title;return D[65]!==e_?(j=[e_],D[65]=e_,D[66]=j):j=D[66],(0,_.useEffect)(b,j),D[67]!==ev?(N=()=>{ev.selectThread(null,{includeThreads:!1,clearTopic:!0})},C=[ev],D[67]=ev,D[68]=N,D[69]=C):(N=D[68],C=D[69]),(0,_.useEffect)(N,C),(0,w._)(),D[70]!==W||D[71]!==eb?(k=[W,eb],D[70]=W,D[71]=eb,D[72]=k):k=D[72],D[73]!==ed||D[74]!==W||D[75]!==ee||D[76]!==en||D[77]!==H?(S=ee&&(0,l.jsx)(g.P.Header,{children:(0,l.jsx)(tr,{pull:ed,session:en,isContentPreviewOpen:W,openPreviewPane:H})}),D[73]=ed,D[74]=W,D[75]=ee,D[76]=en,D[77]=H,D[78]=S):S=D[78],D[79]===Symbol.for("react.memo_cache_sentinel")?(I=(0,l.jsx)(g.P.Sidebar,{children:(0,l.jsx)(c.U,{})}),D[79]=I):I=D[79],D[80]===Symbol.for("react.memo_cache_sentinel")?(T=(0,l.jsx)(g.P.ColumnLeft,{children:(0,l.jsx)(nx,{})}),D[80]=T):T=D[80],D[81]!==ee||D[82]!==ex?(E=ee&&(0,l.jsx)(g.P.ColumnRight,{children:(0,l.jsx)(tl.U,{returnFocusRef:ex,disableActionsMenu:!0,disableResourcePanel:!0,useXCloseButton:!0,className:nI.contentPreview})}),D[81]=ee,D[82]=ex,D[83]=E):E=D[83],D[84]!==k||D[85]!==S||D[86]!==E?(L=(0,l.jsxs)(g.P,{mainColumn:"left","data-hpc":!0,secondaryColumnState:k,className:nI.layout,children:[S,I,T,E]}),D[84]=k,D[85]=S,D[86]=E,D[87]=L):L=D[87],D[88]!==ed||D[89]!==L?(R=(0,l.jsx)(tf,{pull:ed,children:L}),D[88]=ed,D[89]=L,D[90]=R):R=D[90],D[91]!==M||D[92]!==es||D[93]!==R?(A=(0,l.jsx)(tm,{currentUser:M,currentUserIsSessionOwner:es,children:R}),D[91]=M,D[92]=es,D[93]=R,D[94]=A):A=D[94],A}function nL(e){return(0,H.SS)(e)}function nR(e){return"in_progress"===e.state}function nA(e,t){return e+t.premium_requests}function nD(e,t){return new Date(t.created_at).getTime()-new Date(e.created_at).getTime()}try{nT.displayName||(nT.displayName="TaskViewWrapper")}catch{}try{nE.displayName||(nE.displayName="TaskView")}catch{}let nP=/\/copilot\/tasks\/pull\/([a-zA-Z0-9-_]+)/;let TasksPlugin=class TasksPlugin{get previewComponents(){return{"pr-overview":eP,"pr-files-changed":ev}}constructor(){(0,o._)(this,"id",em.v),(0,o._)(this,"displayName",em.Ns),(0,o._)(this,"skipSyncRouteToThread",!0),(0,o._)(this,"components",[{id:em.kF,Component:nT,routes:[nP]}])}};var nO=n(35247),nB=n(65411),nF=n(82590),nM=n(85094),n$=n(47970),nV=n(46665),nU=n(46857);let nq={container:"LoopBlock-module__container--F3X80",streaming:"LoopBlock-module__streaming--kzTU_",header:"LoopBlock-module__header--Bmyfz",headerCollapsed:"LoopBlock-module__headerCollapsed--Yoo66",expandButton:"LoopBlock-module__expandButton--kYkwN",buttonText:"LoopBlock-module__buttonText--pH2DI",content:"LoopBlock-module__content--SQW7_",node:"LoopBlock-module__node--GZLd9",iconContainer:"LoopBlock-module__iconContainer--QF1t5",checkIcon:"LoopBlock-module__checkIcon--_Toxw",nodeTitle:"LoopBlock-module__nodeTitle--upYDV"};function nW(e){let t,n,i,a,s,o,c,d,u,m=(0,r.c)(26),{loop:p,headerButton:h,isStreaming:f}=e,[g,y]=(0,_.useState)(!0);if(!p)return null;m[0]!==g?(t=()=>y(!g),m[0]=g,m[1]=t):t=m[1];let v=t,x=f&&nq.streaming;m[2]!==x?(n=(0,ta.$)(nq.container,x),m[2]=x,m[3]=n):n=m[3];let b=!g&&nq.headerCollapsed;return m[4]!==b?(i=(0,ta.$)(nq.header,b),m[4]=b,m[5]=i):i=m[5],m[6]!==g?(a=g?(0,l.jsx)(U.ChevronDownIcon,{size:16}):(0,l.jsx)(U.ChevronRightIcon,{size:16}),m[6]=g,m[7]=a):a=m[7],m[8]!==p.title?(s=(0,l.jsx)("span",{className:nq.buttonText,children:p.title}),m[8]=p.title,m[9]=s):s=m[9],m[10]!==a||m[11]!==s||m[12]!==v?(o=(0,l.jsx)(e2.Q,{variant:"invisible",onClick:v,className:nq.expandButton,leadingVisual:a,children:s}),m[10]=a,m[11]=s,m[12]=v,m[13]=o):o=m[13],m[14]!==h||m[15]!==i||m[16]!==o?(c=(0,l.jsxs)("div",{className:i,children:[o,h]}),m[14]=h,m[15]=i,m[16]=o,m[17]=c):c=m[17],m[18]!==g||m[19]!==f||m[20]!==p.nodes?(d=g&&(0,l.jsx)("div",{className:nq.content,children:p.nodes.map((e,t)=>{let n=f&&t===p.nodes.length-1;return(0,l.jsxs)("div",{className:nq.node,children:[(0,l.jsx)("div",{className:nq.iconContainer,children:(0,l.jsx)(U.CheckCircleFillIcon,{size:16,className:nq.checkIcon})}),n&&!e.title?null:(0,l.jsx)("span",{className:nq.nodeTitle,children:e.title})]},e.id)})}),m[18]=g,m[19]=f,m[20]=p.nodes,m[21]=d):d=m[21],m[22]!==d||m[23]!==n||m[24]!==c?(u=(0,l.jsxs)("div",{className:n,children:[c,d]}),m[22]=d,m[23]=n,m[24]=c,m[25]=u):u=m[25],u}try{nW.displayName||(nW.displayName="LoopBlockContent")}catch{}var nH=n(91348),nG=n(12465),nK=n(37510),nz=n(99993);function nQ(e){let t,n,i,a,s=(0,r.c)(15),{isStreaming:o}=e,c=function(){let{message:e}=(0,nV.V)(),t=(0,nU.O)(e);return t?.pipeline??null}(),{mutate:d}=(0,nG.P)(),{data:u}=(0,nz._N)();s[0]!==u||s[1]!==c||s[2]!==d?(t=()=>{if(!u||!c)return;let e=(0,nH.kX)({...c,id:u.id},[]);d({loopID:u.id,updateFn:()=>e})},s[0]=u,s[1]=c,s[2]=d,s[3]=t):t=s[3];let m=t;s[4]!==o||s[5]!==u||s[6]!==c?(n=u&&!o&&!(0,nK.S)(u,c),s[4]=o,s[5]=u,s[6]=c,s[7]=n):n=s[7];let p=n;s[8]!==m||s[9]!==p?(i=p?(0,l.jsx)(e2.Q,{variant:"invisible",onClick:m,children:"Restore"}):null,s[8]=m,s[9]=p,s[10]=i):i=s[10];let h=i;return s[11]!==o||s[12]!==c||s[13]!==h?(a=(0,l.jsx)(nW,{loop:c,headerButton:h,isStreaming:o}),s[11]=o,s[12]=c,s[13]=h,s[14]=a):a=s[14],a}try{nQ.displayName||(nQ.displayName="LoopBlock")}catch{}let nY="data-loop-block",nJ=(0,nM.F)(nY),nX={div:(e,t)=>{let n=(0,nM.k)(e,nY);return n?(0,l.jsx)(nQ,{...n}):t}};function nZ(){return{transformMarkdown:e=>(0,n$.YR)(e,"code",e=>{"loop"===e.lang&&(e.data={hName:"div",hProperties:{[nJ]:JSON.stringify({isStreaming:e.isStreaming??!1})},hChildren:[]})}),transformHtml:e=>(0,n$.YR)(e,"element",(e,t,n)=>{let i=e.children?.[0];n&&void 0!==t&&"pre"===e.tagName&&e.children?.length===1&&i?.type==="element"&&nJ in i.properties&&n.children.splice(t,1,i)}),reactComponents:nX}}var n0=n(54908),n1=n(35750),n2=n(18150),n3=n(85242),n4=n(88243),n5=n(16213),n6=n(46062),n7=new WeakMap,n8=new WeakMap,n9=new WeakMap,ie=new WeakSet,it=new WeakMap;let ChatCompletionsClient=class ChatCompletionsClient{async *getChatCompletion(e,t,n){let i=(0,n6.wv)(),a=t??i.id,s=await (0,n1._)(this,n7).getAuthToken(),r=await (0,D.p)({basePath:(0,n1._)(this,n8),body:{messages:e,model:a,stream:!0},path:"/chat/completions",method:"POST",streamingResponse:!0,authToken:s,integrationId:(0,n1._)(this,it).integrationID,realIp:(0,n1._)(this,n9),signal:n});if(!r.ok){let e=await r.response?.text()??"Unknown error",t=e;try{let n=JSON.parse(e);t=n.error?.message||r.error}catch(e){}throw(0,e$.BI)("dotcom_chat.error",{type:"execution",nodeType:"prompt",mode:"pipes",errorMessage:t}),Error(`Failed to get chat completion: ${t}`)}!n?.aborted&&r.body&&(yield*(0,n4._)(this,ie,ii).call(this,r.body,n))}constructor(e,t,n=""){(0,n5._)(this,ie),(0,n2._)(this,it,{get:ia,set:void 0}),(0,n2._)(this,n7,{writable:!0,value:void 0}),(0,n2._)(this,n8,{writable:!0,value:void 0}),(0,n2._)(this,n9,{writable:!0,value:void 0}),(0,n3._)(this,n8,e),(0,n3._)(this,n7,t),(0,n3._)(this,n9,n)}};async function*ii(e,t){let n=new TextDecoder("utf-8"),i=e.getReader(),a="";try{for(;;){if(t?.aborted)return;let{done:e,value:s}=await i.read();if(e)break;for(a+=n.decode(s);;){if(a.startsWith("data: [DONE]"))return;let e=a.indexOf(`

`);if(-1===e)break;let t=a.slice(0,e).replace(/^data:\s+/,"");if(""===t){a=a.slice(e+2);continue}try{let e=JSON.parse(t),n=e.choices?.[0]?.delta?.content??"",i=e.model,a=e.usage?{prompt_tokens:e.usage.prompt_tokens,completion_tokens:e.usage.completion_tokens,total_tokens:e.usage.total_tokens,model:i}:void 0;(n||a)&&(yield{content:n,usage:a})}catch{}a=a.slice(e+2)}}}finally{i.releaseLock()}}function ia(){return{integrationID:"copilot-chat"}}var is=n(21046);let ir=["SAML"],io={FORBIDDEN:["SAML error"]};function il(e,t){var n;if("errors"in(e="errors"in(n=e)?{...n,errors:n.errors.filter(e=>!ir.includes(e.type)&&!io[e.type]?.includes(e.message))}:n)&&e.errors.length){let t=e.errors.map(e=>`${e.message}${e.path?` (path: ${e.path})`:""}`).join(", ");throw(0,e$.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:t}),Error(t)}if(!("data"in e)){let n=`Expected data property in response: ${JSON.stringify(e)}. requestId: ${t}`;throw(0,is.vV)(n),(0,e$.BI)("dotcom_chat.error",{type:"execution",nodeType:"graphql",mode:"pipes",errorMessage:n}),Error("Failed to fetch data.")}return!0}var ic=n(13647),id=new WeakMap,iu=new WeakMap,im=new WeakMap;let GraphQLClient=class GraphQLClient{async getGraphQLResponse(e,t,n){if((0,ic.Xg)()){let n=await (0,n1._)(this,im).executeGraphQL(e,t.loopId,t.version,t.executionId,t.nodeId);if(!n.success)throw Error(`GraphQL execution failed: ${JSON.stringify(n.error)}`);if(il(n.data))return n.data}let i={"X-Copilot-Api-Token":(await (0,n1._)(this,iu).getAuthToken()).value},a={query:e};a.loopId=t.loopId,a.version=t.version,a.executionId=t.executionId,a.nodeId=t.nodeId;let s=await (0,eS.Sr)((0,n1._)(this,id),{method:"POST",body:a,headers:i,signal:n?.signal});if(s.ok){let e=await s.json();if(il(e,s.headers.get("X-Github-Request-Id")||""))return e}else throw Error("Failed to get GraphQL response.")}constructor(e,t,n){(0,n2._)(this,id,{writable:!0,value:void 0}),(0,n2._)(this,iu,{writable:!0,value:void 0}),(0,n2._)(this,im,{writable:!0,value:void 0}),(0,n3._)(this,id,e),(0,n3._)(this,iu,t),(0,n3._)(this,im,n)}};let ip={header:"LoopsView-module__header--ZnQDC",input:"LoopsView-module__input--HBzte",noResultsMessage:"LoopsView-module__noResultsMessage--OkrMA",searchContainer:"LoopsView-module__searchContainer--ypqMb"};var ih=n(80770),ig=n(21229),iy=n(58615),iv=n(49912),ix=n(17005),ib=n(15220),i_=n(72511),ij=n(4175),iw=n(76746),iN=n(99519);let iC={container:"CreateLoopFromJsonDialog-module__container--yEYu1",header:"CreateLoopFromJsonDialog-module__header--UNUms",description:"CreateLoopFromJsonDialog-module__description--vfsKH",formControl:"CreateLoopFromJsonDialog-module__formControl--vBsuV",textarea:"CreateLoopFromJsonDialog-module__textarea--OHmSD",spacer:"CreateLoopFromJsonDialog-module__spacer--JbIGC"};function ik({isOpen:e,onClose:t}){let[n,i]=(0,_.useState)(""),[a,s]=(0,_.useState)(!1),[r,o]=(0,_.useState)(null),c=(0,iN.EY)(),d=(0,eM.Zp)(),u=(0,_.useMemo)(()=>{if(!n.trim())return{isValid:!1,errors:[]};try{let e=JSON.parse(n),t=(0,iw.v)(e);if(t.length>0)return{isValid:!1,errors:t.map(e=>e.error)};return{isValid:!0,errors:[],loop:e}}catch(e){return{isValid:!1,errors:[`Invalid JSON: ${e instanceof Error?e.message:"Syntax error"}`]}}},[n]),m=async()=>{if(u.isValid&&u.loop&&!a){s(!0),o(null),(0,e$.BI)("dotcom_chat.activate",{target:"CREATE_LOOP_FROM_JSON",mode:"loops"});try{let e={...u.loop,id:crypto.randomUUID(),updatedAt:Date.now(),owned:!0,visibility:"private"};await c.createLoop(e),d(`${D.Jz}/l/${e.id}`),t()}catch(e){o(e instanceof Error?e.message:"Failed to create loop. Please try again.")}finally{s(!1)}}};return e?(0,l.jsx)(ib.l,{title:"Create loop from JSON",onClose:t,width:"large",height:"large",renderBody:()=>(0,l.jsxs)("div",{className:iC.container,children:[r&&(0,l.jsx)(i_.A,{variant:"danger",children:r}),(0,l.jsx)("div",{className:iC.header,children:(0,l.jsx)("p",{className:iC.description,children:"Paste a valid loop JSON object to create a new loop."})}),(0,l.jsxs)(tZ.A,{className:iC.formControl,children:[(0,l.jsx)(tZ.A.Label,{visuallyHidden:!0,children:"Loop JSON"}),(0,l.jsx)(ij.Ay,{className:iC.textarea,value:n,onChange:e=>i(e.target.value),placeholder:"Paste your loop JSON here...",resize:"none",spellCheck:!1,autoComplete:"off"}),u.errors.length>0?(0,l.jsx)(tZ.A.Validation,{variant:"error",children:(0,l.jsx)("div",{children:u.errors[0]})}):u.isValid&&u.loop?(0,l.jsx)(tZ.A.Validation,{variant:"success",children:"Valid loop detected!"}):(0,l.jsx)("span",{className:iC.spacer})]})]}),renderFooter:()=>(0,l.jsxs)(ib.l.Footer,{children:[(0,l.jsx)(e2.Q,{onClick:t,children:"Cancel"}),(0,l.jsx)(e2.Q,{onClick:m,variant:"primary",inactive:!u.isValid||a,loading:a,children:"Create loop"})]})}):null}try{ik.displayName||(ik.displayName="CreateLoopFromJsonDialog")}catch{}let iS={header:"LoopsViewHeader-module__header--miwmH",rightControls:"LoopsViewHeader-module__rightControls--tpwkz"};function iI(){let e,t,n,i,a,s,o,c,d,u,m=(0,r.c)(11),p=(0,_.useRef)(null),h=(0,_.useRef)(null),[f,g]=(0,_.useState)(!1);return m[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(e9.W.Anchor,{children:(0,l.jsx)(eV.K,{icon:U.KebabHorizontalIcon,"aria-label":"Menu",onClick:iE})}),m[0]=e):e=m[0],m[1]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{g(!0),(0,e$.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_CREATE_FROM_JSON",mode:"loops"})},m[1]=t):t=m[1],m[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsx)(eq.l.Group,{children:(0,l.jsxs)(eq.l.Item,{onSelect:t,children:["Create from JSON",(0,l.jsx)(eq.l.LeadingVisual,{children:(0,l.jsx)(U.UploadIcon,{})})]})}),i=(0,l.jsx)(eq.l.Divider,{}),m[2]=n,m[3]=i):(n=m[2],i=m[3]),m[4]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{p.current?.openDialog(),(0,e$.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_GIVE_FEEDBACK",mode:"immersive"})},m[4]=a):a=m[4],m[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,l.jsxs)(eq.l.Item,{onSelect:a,children:["Give feedback",(0,l.jsx)(eq.l.LeadingVisual,{children:(0,l.jsx)(U.CommentIcon,{})})]}),m[5]=s):s=m[5],m[6]===Symbol.for("react.memo_cache_sentinel")?(o=(0,l.jsxs)(e9.W,{anchorRef:h,children:[e,(0,l.jsx)(e9.W.Overlay,{width:"small",children:(0,l.jsxs)(eq.l,{children:[n,i,(0,l.jsxs)(eq.l.Group,{children:[s,(0,l.jsxs)(eq.l.LinkItem,{href:"/settings/copilot",onClick:iT,children:[(0,l.jsx)(eq.l.LeadingVisual,{children:(0,l.jsx)(U.GearIcon,{})}),"Settings"]})]})]})})]}),c=(0,l.jsx)(ix.l,{ref:p,mode:"immersive",returnFocusRef:h}),m[6]=o,m[7]=c):(o=m[6],c=m[7]),m[8]===Symbol.for("react.memo_cache_sentinel")?(d=()=>g(!1),m[8]=d):d=m[8],m[9]!==f?(u=(0,l.jsx)("div",{className:iS.header,children:(0,l.jsxs)("div",{className:iS.rightControls,children:[o,c,(0,l.jsx)(ik,{isOpen:f,onClose:d})]})}),m[9]=f,m[10]=u):u=m[10],u}function iT(){return(0,e$.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU_SETTINGS",mode:"immersive"})}function iE(){return(0,e$.BI)("dotcom_chat.activate",{target:"META_CONTEXT_MENU",mode:"immersive"})}try{iI.displayName||(iI.displayName="LoopsViewHeader")}catch{}let iL=[{altText:"GitHub Battle Royale report",assetPath:"/images/modules/loops/BattleRoyal.png",loop:{title:"GitHub Battle Royale",description:"Compare two GitHub users based on their pull request contributions and metrics",nodes:[{id:"1",type:"text",title:"Start Date",description:"The date 30 days ago from today",content:"@today-30d",metadata:{inputType:"date"}},{id:"2",type:"text",title:"First Username",description:"GitHub username for the first contestant",content:"jonrohan",metadata:{inputType:"text"}},{id:"3",type:"text",title:"Second Username",description:"GitHub username for the second contestant",content:"colebemis",metadata:{inputType:"text"}},{id:"4",type:"text",title:"Repository",description:"The repository to analyze (in owner/name format)",content:"primer/react",metadata:{inputType:"text"}},{id:"5",type:"github-graphql",title:"First User PRs",description:"Fetch PRs for the first user",content:`query {
  search(query: "repo:{{4}} author:{{2}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Second User PRs",description:"Fetch PRs for the second user",content:`query {
  search(query: "repo:{{4}} author:{{3}} is:pr created:>={{1}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          merged
          closed
          createdAt
          mergedAt
          additions
          deletions
          commits {
            totalCount
          }
          repository {
            nameWithOwner
          }
        }
      }
    }
  }
}`},{id:"7",type:"prompt",title:"Battle Analysis",description:"Compare the two users and determine a winner",content:`You're a GitHub Battle Royale announcer. Compare the following metrics between these two contestants based on their pull request data:

# Battle Royal \u{1F934}\u{1F5E1}\u{FE0F}\u{1F478}

1. Total PRs created
2. PR merge rate
3. Lines of code changed (additions + deletions)
4. Average commits per PR
5. PR velocity (PRs per month)

User 1 ({{2}}) data: {{5}}
User 2 ({{3}}) data: {{6}}

Analyze each metric and assign points (1-10) for each category. Then declare an overall winner with a dramatic announcement. Format your response as an exciting battle commentary.`}]}},{altText:"Battle Royale report",assetPath:"/images/modules/loops/FirstResponder.png",loop:{title:"First Responder Activity Report",description:"Generates a summary of a first responder's activity including new issues, PR reviews, and issue involvement from the past week",nodes:[{id:"1",type:"text",title:"First Responder Username",description:"GitHub username of the first responder",content:"",metadata:{inputType:"text"}},{id:"2",type:"text",title:"Start Date",description:"Start date for the report (1 week ago)",content:"@today-1w",metadata:{inputType:"date"}},{id:"repo",type:"text",title:"Repository",description:"The full repository name (e.g. owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"3",type:"github-graphql",title:"Created Issues",description:"Issues created by the user in the past week",content:`query {
  search(query: "repo:{{repo}} author:{{1}} is:issue created:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          createdAt
          state
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"PR Reviews",description:"PR reviews submitted by the user in the past week",content:`query {
  search(query: "repo:{{repo}} is:pr reviewed-by:{{1}} updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          reviews(first: 5, author: "{{1}}") {
            edges {
              node {
                state
                submittedAt
              }
            }
          }
        }
      }
    }
  }
}`},{id:"involved_issues",type:"github-graphql",title:"Involved Issues",description:"Issues where the user was involved (commented or assigned) in the past week",content:`query {
  search(query: "repo:{{repo}} involves:{{1}} is:issue updated:>{{2}}", type: ISSUE, first: 100) {
    edges {
      node {
        ... on Issue {
          title
          url
          updatedAt
          state
          comments(last: 5) {
            nodes {
              author {
                login
              }
              createdAt
            }
          }
          assignees(first: 5) {
            nodes {
              login
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"prompt",title:"Activity Summary",description:"Summary report of the first responder's activity",content:`Generate a comprehensive summary report of the first responder's ({{1}}) activity in the {{repo}} repository over the past week. Include their issue creation, PR review activities, and issue involvement.

Issues Created:
{{3}}

PR Reviews:
{{4}}

Issue Involvement:
{{involved_issues}}

Please format the report with these sections:
1. Overview (total numbers)
2. Issue Activity
   - Created Issues
   - Issue Involvement (comments, assignments)
3. PR Review Activity (highlight significant reviews)
4. Key Observations

Keep the tone professional and focus on what the next first responder needs to know about as they come in for the next shift.`}]}},{altText:"GitHub repo feature announcement magazine",assetPath:"/images/modules/loops/NewsFlash.png",loop:{title:"Multi-Repo GitHub Feature Announcement Magazine",description:"Creates a tabloid-style frontpage focusing on new features and enhancements across multiple GitHub repositories",nodes:[{id:"repo1",type:"text",title:"Repository 1",description:"First repository to analyze (format: owner/repo)",content:"facebook/react",metadata:{inputType:"text"}},{id:"repo2",type:"text",title:"Repository 2",description:"Second repository to analyze (format: owner/repo)",content:"microsoft/vscode",metadata:{inputType:"text"}},{id:"repo3",type:"text",title:"Repository 3",description:"Third repository to analyze (format: owner/repo)",content:"primer/react",metadata:{inputType:"text"}},{id:"days",type:"text",title:"Days Limit",description:"Number of days to look back for data",content:"@today-30d",metadata:{inputType:"date"}},{id:"3",type:"github-graphql",title:"Feature PRs - Repository 1",description:"Fetch recent feature/enhancement pull requests from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"4",type:"github-graphql",title:"Feature PRs - Repository 2",description:"Fetch recent feature/enhancement pull requests from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"5",type:"github-graphql",title:"Feature PRs - Repository 3",description:"Fetch recent feature/enhancement pull requests from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:pr created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on PullRequest {
          title
          url
          author {
            login
          }
          createdAt
          additions
          deletions
          changedFiles
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          reviews(first: 3) {
            nodes {
              author {
                login
              }
            }
          }
        }
      }
    }
  }
}`},{id:"6",type:"github-graphql",title:"Feature Requests - Repository 1",description:"Fetch recent feature request issues from the first repository",content:`query {
  search(query: "repo:{{repo1}} is:issue label:\\"Type: Feature Request\\" created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"7",type:"github-graphql",title:"Feature Requests - Repository 2",description:"Fetch recent feature request issues from the second repository",content:`query {
  search(query: "repo:{{repo2}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"8",type:"github-graphql",title:"Feature Requests - Repository 3",description:"Fetch recent feature request issues from the third repository",content:`query {
  search(query: "repo:{{repo3}} is:issue label:enhancement,feature-request created:>={{days}} sort:updated-desc", type: ISSUE, first: 10) {
    edges {
      node {
        ... on Issue {
          title
          url
          author {
            login
          }
          createdAt
          body
          labels(first: 5) {
            edges {
              node {
                name
              }
            }
          }
          comments {
            totalCount
          }
        }
      }
    }
  }
}`},{id:"9",type:"text",title:"Magazine Style",description:"Define the style of the feature announcement magazine",content:`\u{2728}\u{1F4AB} \u{1F31F} OPEN SOURCE NEWS FLASH \u{1F31F} \u{1F4AB} \u{2728}
\u{1F680} BREAKING UPDATES \u{1F680} EXCLUSIVE FEATURES \u{1F3AF} HOT RELEASES \u{1F525}

Your #1 source for hot new features in your favorite open source projects! \u{1F308}`,metadata:{inputType:"text"}},{id:"10",type:"prompt",title:"Feature Magazine Content",description:"Generate tabloid-style headlines focusing on new features",content:`You are a tech magazine writer specializing in new feature announcements. Create an exciting frontpage covering the latest features and enhancements from these repositories: {{repo1}}, {{repo2}}, and {{repo3}}.

Use this data for each repository:
Repository 1:
- PRs: {{3}}
- Issues: {{6}}

Repository 2:
- PRs: {{4}}
- Issues: {{7}}

Repository 3:
- PRs: {{5}}
- Issues: {{8}}

Start with this header:
{{9}}

For each repository:
1. Create a section with an appropriate emoji
2. Include 2-3 exciting headlines about new features or requests
3. Focus on user impact and benefits
4. Include the original URLs as 'READ MORE' links
5. Mention scope of changes for PRs (additions + deletions)

End with a 'FEATURE FORECAST' section comparing the most exciting upcoming features across repositories.

Format everything in markdown and use emojis liberally.`}]}}];var iR=n(43134);let iA=(0,_.lazy)(async()=>({default:(await Promise.all([n.e("primer-react"),n.e("vendors-node_modules_d3-interpolate_src_value_js-node_modules_d3-selection_src_select_js"),n.e("vendors-node_modules_motion_dist_es_framer-motion_dist_es_components_AnimatePresence_index_mj-61d1c2"),n.e("vendors-node_modules_d3-drag_src_nodrag_js-node_modules_d3-selection_src_pointer_js-node_modu-e1c806"),n.e("vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_d3_src_index_js"),n.e("packages_copilot-chat_hooks_use-chat-message-behavior_ts-packages_copilot-chat_hooks_use-grou-d552cd"),n.e("packages_copilot-loops_components_Loop_tsx-packages_copilot-chat_components_ChatImage_module_-a090c1")]).then(n.bind(n,49522))).Loop}));try{iA.displayName||(iA.displayName="LazyLoop")}catch{}var iD=n(59121);function iP(e){let t,n,i,a,s=(0,r.c)(10),{value:o,onChange:c}=e;s[0]!==c?(t=e=>{c(0===e?"list":"output")},s[0]=c,s[1]=t):t=s[1];let d=t,u="list"===o;s[2]!==u?(n=(0,l.jsx)(iD.I.IconButton,{"aria-label":"List view",selected:u,icon:U.ThreeBarsIcon}),s[2]=u,s[3]=n):n=s[3];let m="output"===o;return s[4]!==m?(i=(0,l.jsx)(iD.I.IconButton,{"aria-label":"Output view",selected:m,icon:U.RowsIcon}),s[4]=m,s[5]=i):i=s[5],s[6]!==d||s[7]!==n||s[8]!==i?(a=(0,l.jsxs)(iD.I,{"aria-label":"Loops overview view mode",onChange:d,children:[n,i]}),s[6]=d,s[7]=n,s[8]=i,s[9]=a):a=s[9],a}try{iP.displayName||(iP.displayName="ListModeToggle")}catch{}var iO=n(70324),iB=n(14303);function iF(e){let t,n,i,a=(0,r.c)(14),{onDelete:s,onCopyLoop:o,onDuplicate:c,onShare:d,onEdit:u,onCopyOutput:m,loopId:p,variant:h,hasOutput:f}=e,g=void 0===h?"invisible":h,y=(0,_.useRef)(null);return p?(a[0]!==g?(t=(0,l.jsx)(e9.W.Anchor,{children:(0,l.jsx)(eV.K,{icon:U.KebabHorizontalIcon,"aria-label":"Manage loop",variant:g})}),a[0]=g,a[1]=t):t=a[1],a[2]!==f||a[3]!==p||a[4]!==o||a[5]!==m||a[6]!==s||a[7]!==c||a[8]!==u||a[9]!==d?(n=(0,l.jsx)(iB.r,{onDelete:s,onCopyLoop:o,onDuplicate:c,onShare:d,onEdit:u,onCopyOutput:m,hasOutput:f,loopId:p,returnFocusRef:y}),a[2]=f,a[3]=p,a[4]=o,a[5]=m,a[6]=s,a[7]=c,a[8]=u,a[9]=d,a[10]=n):n=a[10],a[11]!==t||a[12]!==n?(i=(0,l.jsxs)(e9.W,{anchorRef:y,children:[t,n]}),a[11]=t,a[12]=n,a[13]=i):i=a[13],i):null}try{iF.displayName||(iF.displayName="LoopsContextMenu")}catch{}var iM=n(33026),i$=n(5533);function iV(e,t){return["loop-execution",e,t]}var iU=n(93364),iq=n(48057),iW=n(90122);let iH={panel:"LoopOutput-module__panel--MrOXo",header:"LoopOutput-module__header--fcRKQ",title:"LoopOutput-module__title--pNloU",actions:"LoopOutput-module__actions--S7bni",body:"LoopOutput-module__body--fhlUk"};var iG=n(19336),iK=n(11607);function iz(e){let t,n,i,a,s,o,c,d,u,m,p,h,f,g=(0,r.c)(43),{loop:y}=e,{runLoop:v,stopLoop:x,isPreparing:b}=function(){let e=(0,iN.EY)(),t=(0,tj.jE)(),[n,i]=(0,_.useState)(!1);return{runLoop:(0,_.useCallback)(async n=>{i(!0);try{let a=await e.createExecution(n.id,n.version||iM.kj);if(!a.success)throw Error(`Failed to create execution: ${a.error}`);let s=a.data,r=(0,iq.wu)(n.id,n.version||iM.kj),o=iV(n.id,n.version||iM.kj);t.setQueryData(r,s),t.setQueryData(o,s),i(!1),await e.runPipeline(n,s.id,e=>{let i=(0,iq.wu)(n.id,n.version||iM.kj),a=iV(n.id,n.version||iM.kj);switch(e.type){case"UPDATE_NODE_VALUE":case"UPDATE_NODE_VALUE_PARTIAL":{let n=t=>t?{...t,nodes:{...t.nodes,[e.nodeID]:{...t.nodes[e.nodeID],value:e.value,completedAt:"UPDATE_NODE_VALUE"===e.type?Date.now():void 0}}}:null;t.setQueryData(i,n),t.setQueryData(a,n)}break;case"UPDATE_NODE_ERROR":{let n=t=>t?{...t,nodes:{...t.nodes,[e.nodeID]:{...t.nodes[e.nodeID],error:e.error,completedAt:Date.now()}}}:null;t.setQueryData(i,n),t.setQueryData(a,n)}break;case"SET_RUNNING":{let n=t=>t?{...t,nodes:{...t.nodes,[e.nodeID]:{...t.nodes[e.nodeID],completedAt:void 0,startedAt:Date.now()}}}:null;t.setQueryData(i,n),t.setQueryData(a,n)}}},(e,n,i)=>{let a=(0,iq.wu)(e,n),s=t.getQueryData(a);return Promise.resolve(s?(0,iU.$j)(s):(0,iU.YD)("execution not found"))})}catch(e){throw i(!1),(0,is.vV)("Error running loop:",e),e}},[e,t]),stopLoop:(0,_.useCallback)(n=>{let i=(0,iq.wu)(n.id,n.version||iM.kj),a=t.getQueryData(i);a&&e.stopPipeline(a.id,()=>{t.invalidateQueries({queryKey:i}),t.invalidateQueries({queryKey:iV(n.id,n.version||iM.kj)})})},[e,t]),isPreparing:n}}();g[0]!==y?(t=(0,nH.FT)(y),g[0]=y,g[1]=t):t=g[1];let j=t[0],{data:w}=function(e,t){let n,i,a,s,o=(0,r.c)(13),l=(0,iN.EY)(),c=e.id,d=e.version??"";return o[0]!==c||o[1]!==d?(n=iV(c,d),o[0]=c,o[1]=d,o[2]=n):n=o[2],o[3]!==c||o[4]!==d||o[5]!==l?(i=async()=>{let e=await l.getExecution(c,d,iM.qD);if(!e.success)return null;let t=e.data;return l.isExecutionRunning(t.id)!==(0,i$.y)(t)?null:t},o[3]=c,o[4]=d,o[5]=l,o[6]=i):i=o[6],void 0!==o[7]?(a=void 0,o[7]=t,o[8]=a):a=o[8],o[9]!==n||o[10]!==i||o[11]!==a?(s={queryKey:n,queryFn:i,enabled:!0,...a,staleTime:3e5},o[9]=n,o[10]=i,o[11]=a,o[12]=s):s=o[12],(0,tg.I)(s)}(y),N=j?w?.nodes[j.id]:void 0,C=N?.value??null,k=N?.error||null;g[2]!==w?(n=(0,i$.y)(w),g[2]=w,g[3]=n):n=g[3];let S=n,I=b||S;g[4]!==C?(i=(0,iW.DO)(C),g[4]=C,g[5]=i):i=g[5];let T=i;g[6]!==y||g[7]!==v?(a=async()=>{await v(y),(0,e$.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_LOOP_RUN",mode:"loops"})},g[6]=y,g[7]=v,g[8]=a):a=g[8];let E=a;g[9]!==y||g[10]!==x?(s=()=>{x(y),(0,e$.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_LOOP_STOP",mode:"loops"})},g[9]=y,g[10]=x,g[11]=s):s=g[11];let L=s;g[12]!==C||g[13]!==T?(o=async()=>{if(C)try{await navigator.clipboard.writeText(T),(0,e$.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_COPY_OUTPUT",mode:"loops"})}catch{}},g[12]=C,g[13]=T,g[14]=o):o=g[14];let R=o,A=`${D.Jz}/l/${y.id}`;g[15]!==y.title||g[16]!==A?(c=(0,l.jsx)("h3",{className:iH.title,children:(0,l.jsx)(iK.$,{variant:"invisible",condensed:!0,to:A,onClick:iQ,children:y.title})}),g[15]=y.title,g[16]=A,g[17]=c):c=g[17],g[18]!==E||g[19]!==L||g[20]!==I||g[21]!==C?(d=(0,l.jsx)(iO.c,{isLoading:I,onClick:E,onStop:L,value:C,variant:"invisible",iconOnly:!0}),g[18]=E,g[19]=L,g[20]=I,g[21]=C,g[22]=d):d=g[22];let P=!!C;g[23]!==R||g[24]!==y.id||g[25]!==P?(u=(0,l.jsx)(iF,{loopId:y.id,onEdit:iQ,onCopyOutput:R,hasOutput:P}),g[23]=R,g[24]=y.id,g[25]=P,g[26]=u):u=g[26],g[27]!==u||g[28]!==d?(m=(0,l.jsxs)("div",{className:iH.actions,children:[d,u]}),g[27]=u,g[28]=d,g[29]=m):m=g[29],g[30]!==m||g[31]!==c?(p=(0,l.jsxs)("div",{className:iH.header,children:[c,m]}),g[30]=m,g[31]=c,g[32]=p):p=g[32];let O=!!j;return g[33]!==E||g[34]!==L||g[35]!==I||g[36]!==k||g[37]!==C||g[38]!==O?(h=(0,l.jsx)("div",{className:iH.body,children:(0,l.jsx)(iG.G,{outputNodeExists:O,isRunning:I,nodeValue:C,nodeError:k,onRun:E,onStop:L})}),g[33]=E,g[34]=L,g[35]=I,g[36]=k,g[37]=C,g[38]=O,g[39]=h):h=g[39],g[40]!==p||g[41]!==h?(f=(0,l.jsxs)("div",{className:iH.panel,children:[p,h]}),g[40]=p,g[41]=h,g[42]=f):f=g[42],f}function iQ(){(0,e$.BI)("dotcom_chat.activate",{target:"OUTPUTS_VIEW_EDIT_LOOP",mode:"loops"})}try{iz.displayName||(iz.displayName="LoopOutput")}catch{}let iY={list:"LoopsOutputList-module__list--DoC1u"};var iJ=n(76219),iX=n(79184),iZ=n(96002),i0=n(4559);let i1=(0,n(23125).A)(i0.C,1e3);function i2(e){let t,n,i,a,s,o,d=(0,r.c)(11),{chatState:u,plugin:m}=e;if(!m||!(0,iv.j)(m))throw Error("LoopsView can only be used with a LoopsPlugin");return d[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],d[0]=t):t=d[0],d[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsx)(g.P.Header,{children:(0,l.jsx)(iI,{})}),d[1]=n):n=d[1],d[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)(g.P.Sidebar,{children:(0,l.jsx)(c.U,{})}),d[2]=i):i=d[2],d[3]!==u?(a=(0,l.jsxs)(g.P,{"data-testid":"loops-layout",children:[n,i,(0,l.jsx)(g.P.ColumnLeft,{children:(0,l.jsx)(i4,{chatState:u})})]}),d[3]=u,d[4]=a):a=d[4],d[5]!==m.previewUrl||d[6]!==a?(s=(0,l.jsx)(iJ.Q,{previewUrl:m.previewUrl,availableModels:t,sendChatMessage:i3,children:a}),d[5]=m.previewUrl,d[6]=a,d[7]=s):s=d[7],d[8]!==m.service||d[9]!==s?(o=(0,l.jsx)(iN.qT,{value:m.service,children:s}),d[8]=m.service,d[9]=s,d[10]=o):o=d[10],o}function i3(){}function i4(e){let t,n,i,a,s,o,c,d,m,p,h,g,y,v,x,b,j,w,N,k,S,I,T=(0,r.c)(53),{chatState:E}=e,{data:L,isLoading:R}=(0,ih.C)(),A=(0,u.b)(),P=(0,eM.Zp)(),O=(0,iN.EY)(),B=(0,n6.GF)(E.availableModels),[F,M]=(0,iy.M)("loopsOverviewViewMode","output"),[V,q]=(0,_.useState)(""),{chatQuotaExceeded:W,isLicensedLimited:H}=(0,iX.xR)(),G=H&&W,K=(0,_.useRef)(null);if(T[0]!==L||T[1]!==V){e:{if(!L){t=L;break e}let e=L.filter(ae);if(!V.trim()){t=e;break e}let n=V.toLowerCase().trim();t=e.filter(e=>e.title.toLowerCase().includes(n)||e.description&&e.description.toLowerCase().includes(n))}T[0]=L,T[1]=V,T[2]=t}else t=T[2];let z=t;T[3]===Symbol.for("react.memo_cache_sentinel")?(n=[],T[3]=n):n=T[3],(0,_.useEffect)(i9,n),T[4]!==A?(i=()=>{A.selectThread(null,{includeThreads:!1,clearTopic:!0})},a=[A],T[4]=A,T[5]=i,T[6]=a):(i=T[5],a=T[6]),(0,_.useEffect)(i,a),T[7]!==B||T[8]!==O||T[9]!==A||T[10]!==P?(s=async e=>{let t=e.trim();if(""===t)return;(0,e$.BI)("dotcom_chat.activate",{target:"OVERVIEW_INITIAL_CREATE",mode:"loops"});let n=crypto.randomUUID(),i={scopeId:nF.S$},a=await A.createThread(i);await O.createLoop(n),(0,iR.aq)(n,a.id);let s={content:t,model:B,references:[],thread:a,mode:nF.lh};A.sendChatMessage(s),P(`${D.Jz}/l/${n}`)},T[7]=B,T[8]=O,T[9]=A,T[10]=P,T[11]=s):s=T[11];let Q=s,Y=(0,_.useRef)(Q);T[12]!==Q?(o=()=>{Y.current=Q},c=[Q],T[12]=Q,T[13]=o,T[14]=c):(o=T[13],c=T[14]),(0,_.useEffect)(o,c),T[15]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{let e=C.Jt.getLoopEntrypointMessage();e&&(C.Jt.setLoopEntrypointMessage(null),Y.current(e.message))},m=[],T[15]=d,T[16]=m):(d=T[15],m=T[16]),(0,_.useEffect)(d,m),T[17]===Symbol.for("react.memo_cache_sentinel")?(p=()=>(K.current&&i1(K.current,{assertive:!0}),i8),T[17]=p):p=T[17],T[18]!==z||T[19]!==R||T[20]!==V?(h=[V,z,R],T[18]=z,T[19]=R,T[20]=V,T[21]=h):h=T[21],(0,_.useEffect)(p,h),T[22]!==O||T[23]!==P?(g=async e=>{await O.createLoop(e),P(`${D.Jz}/l/${e.id}`)},T[22]=O,T[23]=P,T[24]=g):g=T[24];let J=g;T[25]!==M?(y=e=>{M(e)},T[25]=M,T[26]=y):y=T[26];let X=y;T[27]===Symbol.for("react.memo_cache_sentinel")?(v=e=>{q(e),(0,e$.BI)("dotcom_chat.activate",{target:"LOOPS_SEARCH",mode:"loops"})},T[27]=v):v=T[27];let Z=v;return T[28]===Symbol.for("react.memo_cache_sentinel")?(x=(0,l.jsxs)(f.Zf.Header,{children:[(0,l.jsx)(f.Zf.Title,{children:"Loops"}),(0,l.jsx)(f.Zf.Description,{children:"Automate repetitive tasks by simply describing them using natural language. Automate once. Loop forever."})]}),T[28]=x):x=T[28],T[29]===Symbol.for("react.memo_cache_sentinel")?(b=[{name:"Loop",icon:(0,l.jsx)(U.LoopIcon,{}),submitLabel:"Automate",placeholder:"What would you like to automate?"}],T[29]=b):b=T[29],T[30]!==Q||T[31]!==G?(j=(0,l.jsx)(tJ.V,{modes:b,size:"large",disabled:G,onSubmit:Q}),T[30]=Q,T[31]=G,T[32]=j):j=T[32],T[33]!==G?(w=G&&(0,l.jsx)(iZ.u,{}),T[33]=G,T[34]=w):w=T[34],T[35]!==j||T[36]!==w?(N=(0,l.jsxs)("div",{className:ip.header,children:[x,(0,l.jsxs)("div",{className:ip.input,children:[j,w]})]}),T[35]=j,T[36]=w,T[37]=N):N=T[37],T[38]!==z||T[39]!==X||T[40]!==R||T[41]!==L||T[42]!==V||T[43]!==F?(k=R||L&&L.length>0?(0,l.jsxs)(f.Zf.Section,{children:[(0,l.jsxs)("div",{className:ip.searchContainer,children:[(0,l.jsx)(ig.D,{onSearch:Z,placeholder:"Search loops...","aria-label":"Search loops",debounceDelay:300}),(0,l.jsx)(iP,{value:F,onChange:X}),(0,l.jsx)("h2",{className:"sr-only",children:"My loops"})]}),V&&z&&0===z.length?(0,l.jsxs)("div",{className:ip.noResultsMessage,ref:K,children:["No loops found matching \u201C",V,"\u201D"]}):"list"===F?(0,l.jsx)($.qJ,{children:(0,l.jsx)($.qJ.List,{loading:R,children:z?.map(i6)})}):(0,l.jsx)("div",{className:iY.list,children:(z||[]).map(i5)})]}):null,T[38]=z,T[39]=X,T[40]=R,T[41]=L,T[42]=V,T[43]=F,T[44]=k):k=T[44],T[45]!==J||T[46]!==R||T[47]!==L?(S=!R&&(!L||0===L.length)&&(0,l.jsxs)(f.Zf.Section,{children:[(0,l.jsx)(f.Zf.Section.Title,{children:"Examples"}),(0,l.jsx)($.qJ,{children:(0,l.jsx)($.qJ.List,{loading:R,children:iL.map(e=>{let{loop:t}=e;return(0,l.jsxs)($.qJ.Item,{onClick:()=>{(0,e$.BI)("dotcom_chat.activate",{target:"OVERVIEW_EXAMPLE_LOOP_SELECT",mode:"loops"}),J({...t,id:crypto.randomUUID(),updatedAt:Date.now(),owned:!0,visibility:"private"})},children:[(0,l.jsx)($.qJ.Item.Title,{children:t.title}),(0,l.jsx)($.qJ.Item.Description,{children:t.description})]},t.title)})})})]}),T[45]=J,T[46]=R,T[47]=L,T[48]=S):S=T[48],T[49]!==N||T[50]!==k||T[51]!==S?(I=(0,l.jsxs)(f.Zf.Container,{width:"small",children:[N,k,S]}),T[49]=N,T[50]=k,T[51]=S,T[52]=I):I=T[52],I}function i5(e){return(0,l.jsx)(iz,{loop:e},e.id)}function i6(e){return(0,l.jsxs)($.qJ.Item,{href:`${D.Jz}/l/${e.id}`,onClick:i7,children:[(0,l.jsx)($.qJ.Item.Title,{children:e.title}),(0,l.jsx)($.qJ.Item.Description,{children:e.description}),(0,l.jsx)($.qJ.Item.Actions,{children:(0,l.jsx)(iF,{loopId:e.id})})]},e.id)}function i7(){return(0,e$.BI)("dotcom_chat.activate",{target:"OVERVIEW_USER_LOOP_SELECT",mode:"loops"})}function i8(){i1.cancel()}function i9(){(0,p.D)("Loops \xb7 GitHub Copilot"),Promise.all([n.e("primer-react"),n.e("vendors-node_modules_d3-interpolate_src_value_js-node_modules_d3-selection_src_select_js"),n.e("vendors-node_modules_motion_dist_es_framer-motion_dist_es_components_AnimatePresence_index_mj-61d1c2"),n.e("vendors-node_modules_d3-drag_src_nodrag_js-node_modules_d3-selection_src_pointer_js-node_modu-e1c806"),n.e("vendors-node_modules_d3-dag_bundle_d3-dag_esm_min_js-node_modules_d3_src_index_js"),n.e("packages_copilot-chat_hooks_use-chat-message-behavior_ts-packages_copilot-chat_hooks_use-grou-d552cd"),n.e("packages_copilot-loops_components_Loop_tsx-packages_copilot-chat_components_ChatImage_module_-a090c1")]).then(n.bind(n,49522))}function ae(e){return""!==e.title||0!==e.nodes.length}try{i2.displayName||(i2.displayName="LoopsView")}catch{}try{i4.displayName||(i4.displayName="LoopsViewInner")}catch{}var at=n(49851),an=new WeakMap,ai=new WeakMap,aa=new WeakSet;let LoopsClient=class LoopsClient{listLoops(){return(0,n4._)(this,aa,as).call(this,{operation:"list-loops"})}listLoopVersions(e){return(0,n4._)(this,aa,as).call(this,{operation:"list-loop-versions",loopID:e})}createLoop(e){return(0,n4._)(this,aa,as).call(this,{operation:"create-loop",loop:e})}updateLoop(e,t,n){return(0,n4._)(this,aa,as).call(this,{operation:"update-loop",loopID:e,version:t,loop:n})}getLoop(e,t){return(0,n4._)(this,aa,as).call(this,{operation:"get-loop",loopID:e,versionConstraint:t})}deleteLoop(e){return(0,n4._)(this,aa,as).call(this,{operation:"delete-loop",loopID:e})}createExecution(e,t,n,i,a){return(0,n4._)(this,aa,as).call(this,{operation:"create-execution",loopID:e,version:t,executionInit:{inputValues:i,nodes:n},shareID:a})}getExecution(e,t,n){return(0,n4._)(this,aa,as).call(this,{operation:"get-execution",loopID:e,version:t,executionID:n})}updateNodeExecution(e,t,n,i,a,s){return(0,n4._)(this,aa,as).call(this,{operation:"update-node-execution",loopID:e,version:t,executionID:n,nodeID:i,nodeExecution:a,shareID:s})}shareLoop(e){return(0,n4._)(this,aa,as).call(this,{operation:"share-loop",loopID:e})}unshareLoop(e){return(0,n4._)(this,aa,as).call(this,{operation:"unshare-loop",loopID:e})}executeGraphQL(e,t,n,i,a){return(0,n4._)(this,aa,as).call(this,{operation:"execute-graphql",query:e,loopID:t,version:n,executionID:i,nodeID:a})}constructor(e,t){(0,n5._)(this,aa),(0,n2._)(this,an,{writable:!0,value:void 0}),(0,n2._)(this,ai,{writable:!0,value:void 0}),(0,n3._)(this,an,e),(0,n3._)(this,ai,t)}};async function as(e){let t={"Content-Type":"application/json"};if("get-execution"===e.operation&&(0,n1._)(this,ai)){let e=await (0,n1._)(this,ai).getAuthToken();t["X-Copilot-Api-Token"]=e.value}let n=await (0,eS.DI)((0,n1._)(this,an),{method:"POST",body:JSON.stringify(e),headers:t});if(!n.ok){let e=await n.text();try{return(0,iU.YD)(JSON.parse(e),n)}catch(e){return(0,iU.YD)(e,n)}}let i=204===n.status?void 0:await n.json();return(0,iU.$j)(i)}var ar=n(18096);let ao={itemDescription:"LoopExecutionAttachmentMenuItem-module__itemDescription--yZ8xi"};var al=n(42518);function ac(e){let t,n,i=(0,r.c)(3),{onSelect:a}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(eq.l.LeadingVisual,{children:(0,l.jsx)(at.LP,{})}),i[0]=t):t=i[0],i[1]!==a?(n=(0,l.jsxs)(eq.l.Item,{onSelect:a,children:[t,"Loops\u2026"]}),i[1]=a,i[2]=n):n=i[2],n}function ad(e){let t,n,i,a,s,o,c,d,m,p,h,f,g,y,v,x,b=(0,r.c)(48),{onSubmit:j,onDismiss:w,client:N}=e,C=(0,u.b)(),{data:k,isError:S,isLoading:I}=function(e){let t,n,i=(0,r.c)(3);return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=["loop-execution-references"],i[0]=t):t=i[0],i[1]!==e?(n={queryKey:t,queryFn:()=>ap(e)},i[1]=e,i[2]=n):n=i[2],(0,tg.I)(n)}(N),[T,E]=(0,_.useState)("");b[0]!==C||b[1]!==j||b[2]!==k?(t=e=>{if(!k)return;let t=k.find(t=>t.executionID===e);t&&C.addReference(t,"loop-executions-select-panel"),j()},b[0]=C,b[1]=j,b[2]=k,b[3]=t):t=b[3];let L=t;if(b[4]!==T||b[5]!==S||b[6]!==I||b[7]!==w||b[8]!==L||b[9]!==j||b[10]!==k){let e,t,r=k?k.map(au).filter(e=>e.text.toLowerCase().includes(T.toLowerCase())):[];i=ar.X,p=!0,h="modal",f="large",g="instant",y="Select Loop output",a=w,s=j,b[24]===Symbol.for("react.memo_cache_sentinel")?(e=e=>E(e.currentTarget.value),b[24]=e):e=b[24],b[25]!==I?(o=(0,l.jsx)(ar.X.Header,{children:(0,l.jsx)(ar.X.SearchInput,{loading:I,onChange:e,placeholder:"Search loops","aria-label":"Search loops"})}),b[25]=I,b[26]=o):o=b[26],n=eq.l,b[27]!==S||b[28]!==I?(c=!I&&S&&(0,l.jsx)(ar.X.Message,{variant:"error",size:"inline",children:"An error occurred"}),b[27]=S,b[28]=I,b[29]=c):c=b[29],d=!I&&0===r.length&&(0,l.jsx)(ar.X.Message,{variant:"empty",title:"No loop output found",children:"Try creating and running a loop to see output here"}),b[30]!==L?(t=e=>(0,l.jsxs)(eq.l.Item,{onSelect:()=>L(e.key),children:[e.text,(0,l.jsx)(eq.l.Description,{variant:"block",className:ao.itemDescription,children:e.description})]},e.key),b[30]=L,b[31]=t):t=b[31],m=r.map(t),b[4]=T,b[5]=S,b[6]=I,b[7]=w,b[8]=L,b[9]=j,b[10]=k,b[11]=n,b[12]=i,b[13]=a,b[14]=s,b[15]=o,b[16]=c,b[17]=d,b[18]=m,b[19]=p,b[20]=h,b[21]=f,b[22]=g,b[23]=y}else n=b[11],i=b[12],a=b[13],s=b[14],o=b[15],c=b[16],d=b[17],m=b[18],p=b[19],h=b[20],f=b[21],g=b[22],y=b[23];return b[32]!==n||b[33]!==c||b[34]!==d||b[35]!==m?(v=(0,l.jsxs)(n,{children:[c,d,m]}),b[32]=n,b[33]=c,b[34]=d,b[35]=m,b[36]=v):v=b[36],b[37]!==i||b[38]!==a||b[39]!==s||b[40]!==o||b[41]!==v||b[42]!==p||b[43]!==h||b[44]!==f||b[45]!==g||b[46]!==y?(x=(0,l.jsxs)(i,{open:p,variant:h,width:f,selectionVariant:g,title:y,onCancel:a,onSubmit:s,children:[o,v]}),b[37]=i,b[38]=a,b[39]=s,b[40]=o,b[41]=v,b[42]=p,b[43]=h,b[44]=f,b[45]=g,b[46]=y,b[47]=x):x=b[47],x}function au(e){var t;return{text:e.loopTitle,key:e.executionID,description:"string"==typeof(t=e.output[0]?.value)?t:JSON.stringify(t)}}let am=[404,403];async function ap(e){let t=await e.listLoops();if(!t.success)throw Error(t.error);return(await Promise.all(t.data.map(async t=>{if(!t.version)return null;let n=await e.getExecution(t.id,t.version,"latest");if(!n.success){if(am.includes(n.httpStatus))return null;throw Error(n.error)}return n.data}))).filter(e=>!!e).map(e=>{let n=t.data.find(t=>t.id===e?.loopID);return n?(0,al.C)(n,e):null}).filter(e=>!!e)}try{ac.displayName||(ac.displayName="LoopExecutionAttachmentMenuItem")}catch{}try{(a=LoopExecutionsSelectPanel).displayName||(a.displayName="LoopExecutionsSelectPanel")}catch{}try{ad.displayName||(ad.displayName="LoopExecutionsSelectPanelInner")}catch{}var ah=n(12357),af=n(73077),ag=n(96459);let ay={previewContainer:"LoopExecutionPreview-module__previewContainer--RqSzv",buttonContainer:"LoopExecutionPreview-module__buttonContainer--i4KdB",contentContainer:"LoopExecutionPreview-module__contentContainer--k2ZO7"};try{(s=LoopExecutionPreview).displayName||(s.displayName="LoopExecutionPreview")}catch{}var av=new WeakMap,ax=new WeakMap,ab=new WeakMap;let IFrameCodeExecutor=class IFrameCodeExecutor{async execute(e){return e?new Promise(t=>{let n=document.createElement("iframe");n.src=`${(0,n1._)(this,av)}/code-node-execution.html`,n.setAttribute("sandbox",(0,n1._)(this,ab));let i=!1,a=e=>{i||(i=!0,s&&window.removeEventListener("message",s),document.body.contains(n)&&document.body.removeChild(n),t(e))},s=e=>{let t=new URL((0,n1._)(this,av),window.location.origin).origin;e.origin===t&&(e.data?.type==="result"?a({success:!0,result:e.data.message}):e.data?.type==="error"&&a({success:!1,error:e.data.message}))},r=setTimeout(()=>{a({success:!1,error:"Timeout: No response"})},(0,n1._)(this,ax));window.addEventListener("message",e=>{clearTimeout(r),s(e)}),n.onerror=()=>{clearTimeout(r),a({success:!1,error:"Error: Failed to load execution environment"})},document.body.appendChild(n),n.onload=()=>{try{n.contentWindow?.postMessage({type:"execute",code:e},(0,n1._)(this,av))}catch(e){clearTimeout(r),a({success:!1,error:`Error: Failed to execute code - ${e instanceof Error?e.message:"Unknown error"}`})}}}):{success:!0,result:""}}constructor(e,t=15e3,n="allow-scripts allow-same-origin"){(0,n2._)(this,av,{writable:!0,value:void 0}),(0,n2._)(this,ax,{writable:!0,value:void 0}),(0,n2._)(this,ab,{writable:!0,value:void 0}),(0,n3._)(this,av,e),(0,n3._)(this,ax,t),(0,n3._)(this,ab,n)}};let LoopsPlugin=class LoopsPlugin{get attachmentMenuContribution(){if(nO.W.loopExecutionReferences){var e;return{attachmentType:"loop-execution",MenuItemComponent:ac,PanelComponent:(e=this.client,function(t){return(0,l.jsx)(ad,{...t,client:e})})}}}get previewComponents(){if(nO.W.loopExecutionReferences){var e;return{"loop-execution":(e=this.previewUrl,function({reference:t}){let n=(0,ag.Z)(),i=(0,u.b)();if("loop-execution"!==t.type)return null;let a=(0,D.JP)(t),s=async e=>{e.preventDefault(),await i.selectThread(null),n(a)};return(0,l.jsx)(iJ.Q,{previewUrl:e,availableModels:[],sendChatMessage:()=>{},children:(0,l.jsxs)("div",{className:ay.previewContainer,children:[(0,l.jsx)("div",{className:ay.buttonContainer,children:(0,l.jsx)(af.z,{href:a,leadingVisual:U.PencilIcon,onClick:s,children:"Edit this loop"})}),(0,l.jsx)("div",{className:ay.contentContainer,children:(0,l.jsx)(ah.U,{isRunning:!1,nodeValue:t.output[0]?.value})})]})})})}}}async overrideCreateMessageOptions(e){return{...e,mode:nF.lh}}constructor(e,t,n,i,a,s,r){(0,o._)(this,"id",nF.S$),(0,o._)(this,"displayName",nF.Os),(0,o._)(this,"service",void 0),(0,o._)(this,"client",void 0),(0,o._)(this,"previewUrl",void 0),(0,o._)(this,"markdownExtensions",[nZ]),(0,o._)(this,"skipSyncRouteToThread",!0),(0,o._)(this,"components",[{id:"loops-list",Component:i2,routes:[nF.qe]},{id:"loop-detail",Component:iA,routes:[nF.bW]}]),(0,o._)(this,"navigationItems",[{id:nF.S$,displayName:"Loops",href:nF.QK,icon:at.LP}]);let l=new nB.J(a);this.client=new LoopsClient(n,l),this.service=new n0.J(this.client,new GraphQLClient(t,l,this.client),new ChatCompletionsClient(e,l,r),new IFrameCodeExecutor(i)),this.previewUrl=s}};var a_=n(26607),aj=n(51625);let SparkPlugin=class SparkPlugin{constructor(){(0,o._)(this,"id",aj.eu),(0,o._)(this,"displayName",aj._x),(0,o._)(this,"navigationItems",[{id:aj.eu,displayName:"Spark",href:aj.cP,icon:U.SparkleIcon,label:(0,_.createElement)(a_.A,{variant:"success"},"Preview"),external:!0}]),(0,o._)(this,"slashCommand",{key:"spark",name:"Spark",description:"Transform ideas into full-stack intelligent apps",icon:U.SparkleIcon,execute:(e,t,n)=>(C.Jt.setSparkEntrypointMessage(e),n(aj.cP),!0),suggestions:["Make a web app to upload and analyze log files, showing error frequencies and trends.","Create an app to track team PTO and on-call schedules and visualize available team capacity by week.","Create a dashboard that visualizes uploaded CSV data as interactive charts and summary stats."]})}};function aw(e){let t,n,i,a=(0,r.c)(31),{payload:s,handleUserSubmitRef:o}=e;a[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,h.G7)("copilot_chat_agents_empty_state"),a[0]=t):t=a[0];let l=t;a[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,h.G7)("copilot_spark_empty_state"),a[1]=n):n=a[1];let c=n,d=(0,v.u)("copilot_swe_agent_progress_commands"),u=(0,v.u)("copilot_agent_task_list_v2");if(a[2]!==o||a[3]!==u||a[4]!==d||a[5]!==s.agentsEnabled||a[6]!==s.apiURL||a[7]!==s.dashboardModulesEnabled||a[8]!==s.graphqlApiUrl||a[9]!==s.loopsClientUrl||a[10]!==s.loopsEnabled||a[11]!==s.loopsExecutionUrl||a[12]!==s.previewUrl||a[13]!==s.realIp||a[14]!==s.sparkEnabled||a[15]!==s.ssoOrganizations){if(i=[],nO.W.loopsPlugin&&(s.loopsEnabled??!0)){let e,t=s.apiURL??"",n=s.graphqlApiUrl??"",r=s.loopsClientUrl??"",o=s.loopsExecutionUrl??"";a[17]!==s.previewUrl||a[18]!==s.realIp||a[19]!==s.ssoOrganizations||a[20]!==t||a[21]!==n||a[22]!==r||a[23]!==o?(e=new LoopsPlugin(t,n,r,o,s.ssoOrganizations?.map(aN)??[],s.previewUrl??"",s.realIp??""),a[17]=s.previewUrl,a[18]=s.realIp,a[19]=s.ssoOrganizations,a[20]=t,a[21]=n,a[22]=r,a[23]=o,a[24]=e):e=a[24],i.push(e)}if(s.sparkEnabled||c){let e;a[25]===Symbol.for("react.memo_cache_sentinel")?(e=new SparkPlugin,a[25]=e):e=a[25],i.push(e)}if(s.agentsEnabled||l){let e,t=void 0!==s.dashboardModulesEnabled?s.dashboardModulesEnabled:u&&d,n=s.agentsEnabled??!1;a[26]!==o||a[27]!==t||a[28]!==n?(e=new AgentsPlugin(t,o,n),a[26]=o,a[27]=t,a[28]=n,a[29]=e):e=a[29],i.push(e)}if(d){let e;a[30]===Symbol.for("react.memo_cache_sentinel")?(e=new TasksPlugin,a[30]=e):e=a[30],i.push(e)}a[2]=o,a[3]=u,a[4]=d,a[5]=s.agentsEnabled,a[6]=s.apiURL,a[7]=s.dashboardModulesEnabled,a[8]=s.graphqlApiUrl,a[9]=s.loopsClientUrl,a[10]=s.loopsEnabled,a[11]=s.loopsExecutionUrl,a[12]=s.previewUrl,a[13]=s.realIp,a[14]=s.sparkEnabled,a[15]=s.ssoOrganizations,a[16]=i}else i=a[16];return i}function aN(e){return e.id}},99519:(e,t,n)=>{n.d(t,{EY:()=>r,qT:()=>s});var i=n(96540);let a=(0,i.createContext)(null),s=a.Provider;function r(){let e=(0,i.useContext)(a);if(!e)throw Error("useLoopsService must be used inside a LoopsServiceProvider");return e}try{a.displayName||(a.displayName="LoopsServiceContext")}catch{}},99896:(e,t,n)=>{n.d(t,{xC:()=>N,B6:()=>I,ym:()=>L});var i=n(74848),a=n(21728),s=n(38621),r=n(87448),o=n(55255),l=n(10436),c=n(96540),d=n(34164),u=n(69726),m=n(15220),p=n(77430),h=n(57352),f=n(11196);let g={Box:"CheckRunItem-module__Box--LZ7kH",Box_1:"CheckRunItem-module__Box_1--uqwhY",Link:"CheckRunItem-module__Link--sKVjI",Text:"CheckRunItem-module__Text--yCiXY",Text_1:"CheckRunItem-module__Text_1--byPUg",Text_2:"CheckRunItem-module__Text_2--JMqoY",Link_1:"CheckRunItem-module__Link_1--i579_",Box_2:"CheckRunItem-module__Box_2--Ht42S"};function y(e){let t,n,r,o,l,c,d,u,m,y,v,x,b,_=(0,a.c)(37),{checkRun:j}=e;_[0]!==j.icon?(t=function(e){switch(e){case"check":return(0,i.jsx)(s.CheckIcon,{className:"fgColor-success my-0 mx-2 flex-self-center"});case"dot-fill":return(0,i.jsx)(s.DotFillIcon,{className:"fgColor-attention my-0 mx-2 flex-self-center"});case"stop":return(0,i.jsx)(s.StopIcon,{className:"fgColor-muted my-0 mx-2 flex-self-center"});case"issue-reopened":return(0,i.jsx)(s.IssueReopenedIcon,{className:"fgColor-muted my-0 mx-2 flex-self-center"});case"clock":return(0,i.jsx)(s.ClockIcon,{className:"fgColor-attention my-0 mx-2 flex-self-center"});case"square-fill":return(0,i.jsx)(s.SquareFillIcon,{className:"fgColor-default my-0 mx-2 flex-self-center"});case"skip":return(0,i.jsx)(s.SkipIcon,{className:"fgColor-muted my-0 mx-2 flex-self-center"});case"alert":return(0,i.jsx)(s.AlertIcon,{className:"fgColor-danger my-0 mx-2 flex-self-center"});default:return(0,i.jsx)(s.XIcon,{className:"fgColor-danger my-0 mx-2 flex-self-center"})}}(j.icon),_[0]=j.icon,_[1]=t):t=_[1];let w=t,N="in_progress"===j.state;return _[2]!==w||_[3]!==N?(n=N?(0,i.jsx)("div",{className:g.Box_2,children:(0,i.jsxs)("svg",{fill:"none",viewBox:"0 0 16 16",className:"anim-rotate","aria-hidden":"true",role:"img",children:[(0,i.jsx)("path",{opacity:".5",d:"M8 15A7 7 0 108 1a7 7 0 000 14v0z",stroke:"#dbab0a",strokeWidth:"2"}),(0,i.jsx)("path",{d:"M15 8a7 7 0 01-7 7",stroke:"#dbab0a",strokeWidth:"2"}),(0,i.jsx)("path",{d:"M8 12a4 4 0 100-8 4 4 0 000 8z",fill:"#dbab0a"})]})}):(0,i.jsx)(i.Fragment,{children:w}),_[2]=w,_[3]=N,_[4]=n):n=_[4],_[5]!==j.avatarBackgroundColor?(r={backgroundColor:j.avatarBackgroundColor},_[5]=j.avatarBackgroundColor,_[6]=r):r=_[6],_[7]!==j.avatarLogo||_[8]!==r?(o=(0,i.jsx)(p.r,{square:!0,src:j.avatarLogo,sx:r}),_[7]=j.avatarLogo,_[8]=r,_[9]=o):o=_[9],_[10]!==j.avatarUrl||_[11]!==o?(l=(0,i.jsx)(h.A,{href:j.avatarUrl,"aria-label":"Avatar",className:g.Link,children:o}),_[10]=j.avatarUrl,_[11]=o,_[12]=l):l=_[12],_[13]!==j.avatarDescription||_[14]!==l?(c=(0,i.jsx)(f.m,{text:j.avatarDescription,direction:"e",children:l}),_[13]=j.avatarDescription,_[14]=l,_[15]=c):c=_[15],_[16]!==n||_[17]!==c?(d=(0,i.jsxs)("div",{className:g.Box_1,children:[n,c]}),_[16]=n,_[17]=c,_[18]=d):d=_[18],_[19]!==j.name?(u=(0,i.jsxs)("span",{className:g.Text_1,children:[j.name," "]}),_[19]=j.name,_[20]=u):u=_[20],_[21]!==j.additionalContext||_[22]!==j.pending?(m=j.pending?(0,i.jsx)("span",{className:g.Text_2,children:j.additionalContext}):j.additionalContext,_[21]=j.additionalContext,_[22]=j.pending,_[23]=m):m=_[23],_[24]!==j.description||_[25]!==j.pending?(y=j.description&&(0,i.jsxs)("span",{children:[" ","- ",j.pending?(0,i.jsx)("span",{className:g.Text_2,children:j.description}):j.description]}),_[24]=j.description,_[25]=j.pending,_[26]=y):y=_[26],_[27]!==y||_[28]!==u||_[29]!==m?(v=(0,i.jsxs)("span",{className:g.Text,children:[u,m,y]}),_[27]=y,_[28]=u,_[29]=m,_[30]=v):v=_[30],_[31]!==j.targetUrl?(x=(0,i.jsx)(h.A,{href:j.targetUrl,className:g.Link_1,children:"Details"}),_[31]=j.targetUrl,_[32]=x):x=_[32],_[33]!==v||_[34]!==x||_[35]!==d?(b=(0,i.jsxs)("li",{"data-testid":"check-run-item",className:g.Box,children:[d,v,x]}),_[33]=v,_[34]=x,_[35]=d,_[36]=b):b=_[36],b}try{y.displayName||(y.displayName="CheckRunItem")}catch{}let v={Box:"ChecksStatusBadgeFooter-module__Box--A9a95"};function x(e){let t,n,s=(0,a.c)(4),{checkRuns:r}=e;return s[0]!==r?(t=r.map(b),s[0]=r,s[1]=t):t=s[1],s[2]!==t?(n=(0,i.jsx)("ul",{className:v.Box,children:t}),s[2]=t,s[3]=n):n=s[3],n}function b(e,t){return(0,i.jsx)(y,{checkRun:e},t)}try{x.displayName||(x.displayName="ChecksStatusBadgeFooter")}catch{}let _={Text:"ChecksStatusBadgeHeader-module__Text--mNbul",Text_1:"ChecksStatusBadgeHeader-module__Text_1--Ccfb0",Text_2:"ChecksStatusBadgeHeader-module__Text_2--d8Yn7"};function j(e){let t=(0,a.c)(4),{checksHeaderState:n}=e;switch(n){case"SUCCEEDED":{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("span",{className:_.Text,children:"All checks have passed"}),t[0]=e):e=t[0],e}case"FAILED":{let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("span",{className:_.Text_1,children:"All checks have failed"}),t[1]=e):e=t[1],e}case"PENDING":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("span",{className:_.Text_2,children:"Some checks haven\u2019t completed yet"}),t[2]=e):e=t[2],e}default:{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,i.jsx)("span",{className:_.Text_1,children:"Some checks were not successful"}),t[3]=e):e=t[3],e}}}try{j.displayName||(j.displayName="HeaderState")}catch{}let w={Dialog:"CheckStatusDialog-module__Dialog--k1EnR",Dialog_Body:"CheckStatusDialog-module__Dialog_Body--sRD_i",Box:"CheckStatusDialog-module__Box--uYuTX"};function N(e){let t,n,s=(0,a.c)(7),{combinedStatus:r,isOpen:o,onDismiss:l}=e;s[0]!==r?(t=r?(0,i.jsx)(j,{checksHeaderState:r.checksHeaderState}):"Loading...",s[0]=r,s[1]=t):t=s[1];let c=t;return s[2]!==r||s[3]!==o||s[4]!==l||s[5]!==c?(n=o?(0,i.jsx)(m.l,{onClose:l,title:c,subtitle:r?r.checksStatusSummary:void 0,width:"xlarge",renderBody:()=>(0,i.jsx)(m.l.Body,{className:w.Dialog_Body,children:r?(0,i.jsx)(x,{checkRuns:r.checkRuns}):(0,i.jsx)("div",{className:w.Box,children:(0,i.jsx)(u.A,{size:"medium"})})}),className:w.Dialog}):null,s[2]=r,s[3]=o,s[4]=l,s[5]=c,s[6]=n):n=s[6],n}try{N.displayName||(N.displayName="CheckStatusDialog")}catch{}let C={ChecksStatusBadgeButton:"ChecksStatusBadge-module__ChecksStatusBadgeButton--rZYKL",ChecksStatusBadgeIconButton:"ChecksStatusBadge-module__ChecksStatusBadgeIconButton--rpD4z"},k={success:{circled:s.CheckCircleIcon,filled:s.CheckCircleFillIcon,default:s.CheckIcon,color:"var(--bgColor-success-emphasis, var(--color-success-emphasis))"},pending:{circled:s.CircleIcon,filled:s.DotFillIcon,default:s.DotFillIcon,color:"var(--bgColor-attention-emphasis, var(--color-scale-yellow-4))"},failure:{circled:s.XCircleIcon,filled:s.XCircleFillIcon,default:s.XIcon,color:"var(--bgColor-danger-emphasis, var(--color-scale-red-4))"},error:{circled:s.QuestionIcon,filled:s.QuestionIcon,default:s.QuestionIcon,color:"var(--fgColor-muted, var(--color-canvas-subtle))"}};function S(e){let t,n,s,r,u,m=(0,a.c)(19),{className:p,descriptionText:h,icon:f,iconColor:g,tooltipText:y}=e,v=(0,c.useId)(),x=y?v:void 0,b=y?void 0:h||"See all checks";m[0]!==g?(t={color:g},m[0]=g,m[1]=t):t=m[1],m[2]!==f||m[3]!==x||m[4]!==b||m[5]!==t?(n=(0,i.jsx)(l.m4,{"aria-labelledby":x,icon:f,"aria-label":b,sx:t}),m[2]=f,m[3]=x,m[4]=b,m[5]=t,m[6]=n):n=m[6];let _=n;if(y){let e;m[7]!==_||m[8]!==v||m[9]!==y?(e=(0,i.jsx)(o.A,{id:v,"aria-label":y,direction:"e",children:_}),m[7]=_,m[8]=v,m[9]=y,m[10]=e):e=m[10],_=e}return m[11]!==p?(s=(0,d.$)(p,"d-flex flex-items-center gap-1"),m[11]=p,m[12]=s):s=m[12],m[13]!==h?(r=h&&(0,i.jsxs)("span",{children:[" ",h]}),m[13]=h,m[14]=r):r=m[14],m[15]!==_||m[16]!==s||m[17]!==r?(u=(0,i.jsxs)("span",{className:s,"data-testid":"checks-status-badge-icon-only",children:[_,r]}),m[15]=_,m[16]=s,m[17]=r,m[18]=u):u=m[18],u}function I(e){let t,n,s,o,l=(0,a.c)(27),{statusRollup:u,combinedStatus:m,variant:p,disablePopover:h,buttonClassName:f,buttonSx:g,size:y,descriptionText:v,onWillOpenPopup:x}=e,b=void 0===p?"default":p,_=void 0===y?"medium":y,j=void 0===v?"":v,[w,I]=(0,c.useState)(!1),T=(0,c.useRef)(null),E=k[u],L=E?.[b]||k.error[b],R=E?.color||k.error.color;l[0]!==L||l[1]!==R?(t={icon:L,iconColor:R},l[0]=L,l[1]=R,l[2]=t):t=l[2];let{icon:A,iconColor:D}=t;if("error"===u){let e,t=h?void 0:"p-1";return l[3]!==A||l[4]!==D||l[5]!==t?(e=(0,i.jsx)(S,{className:t,descriptionText:"?/?",icon:A,iconColor:D,tooltipText:"There was an error retrieving checks status"}),l[3]=A,l[4]=D,l[5]=t,l[6]=e):e=l[6],e}if(h){let e;return l[7]!==j||l[8]!==A||l[9]!==D?(e=(0,i.jsx)(S,{descriptionText:j,icon:A,iconColor:D}),l[7]=j,l[8]=A,l[9]=D,l[10]=e):e=l[10],e}return l[11]!==f||l[12]!==g||l[13]!==m?.checksStatusSummary||l[14]!==j||l[15]!==x||l[16]!==A||l[17]!==D||l[18]!==_||l[19]!==u?(n=j?(0,i.jsx)(r.$n,{"data-testid":"checks-status-badge-button",leadingVisual:A,variant:"invisible",size:_,"aria-label":m?.checksStatusSummary??`Status checks: ${u}`,sx:{svg:{color:D},...g},ref:T,onClick:()=>{x?.(),I(!0)},className:(0,d.$)(C.ChecksStatusBadgeButton,f),children:j}):(0,i.jsx)(r.K0,{"data-testid":"checks-status-badge-icon",tooltipDirection:"s",icon:A,variant:"invisible",size:_,"aria-label":m?.checksStatusSummary??u,sx:{svg:{color:D},...g},className:(0,d.$)(C.ChecksStatusBadgeIconButton,f),ref:T,onClick:()=>{x?.(),I(!0)}}),l[11]=f,l[12]=g,l[13]=m?.checksStatusSummary,l[14]=j,l[15]=x,l[16]=A,l[17]=D,l[18]=_,l[19]=u,l[20]=n):n=l[20],l[21]!==m||l[22]!==w?(s=w&&(0,i.jsx)(N,{combinedStatus:m,isOpen:w,onDismiss:()=>{I(!1),setTimeout(()=>{T.current?.focus()},0)}}),l[21]=m,l[22]=w,l[23]=s):s=l[23],l[24]!==n||l[25]!==s?(o=(0,i.jsxs)(i.Fragment,{children:[n,s]}),l[24]=n,l[25]=s,l[26]=o):o=l[26],o}try{S.displayName||(S.displayName="IconOnlyStatus")}catch{}try{I.displayName||(I.displayName="ChecksStatusBadge")}catch{}var T=n(25407),E=n(96379);function L(e,t){let n,i,s=(0,a.c)(7),[r,o]=(0,c.useState)(),[l,d]=(0,c.useState)();s[0]!==e||s[1]!==l||s[2]!==t?(n=async()=>{if(l!==e&&(d(e),o(void 0),e)){let n=(0,T.vki)(t,e),i=await (0,E.lS)(n);o(await i.json())}},s[0]=e,s[1]=l,s[2]=t,s[3]=n):n=s[3];let u=n;return s[4]!==r||s[5]!==u?(i=[r,u],s[4]=r,s[5]=u,s[6]=i):i=s[6],i}},99993:(e,t,n)=>{n.d(t,{M1:()=>m,_N:()=>h,c_:()=>p});var i=n(21728),a=n(97665),s=n(97286),r=n(88934),o=n(99519),l=n(78456),c=n(33026),d=n(50050),u=n(90756);let m="loop";function p(e,t){return[m,e,t]}function h(e,t){let n,h,y,v,x=(0,i.c)(15),{loopID:b}=(0,r.g)(),_=(0,o.EY)(),j=(0,a.jE)(),w=(0,d.Ud)(g),N=t||w||c.kj;x[0]!==b||x[1]!==N?(n=[m,b,N],x[0]=b,x[1]=N,x[2]=n):n=x[2];let C=n;x[3]!==b||x[4]!==j||x[5]!==_||x[6]!==N?(h=async()=>{if(!b)return null;let e=l.Io.find(e=>e.id===b)??null;if(e)return e;let t=await _.getLoop(b,N);if(!t||!t.success)throw new u.j(t?.error||"Failed to load loop",t?.httpStatus);return t.data.version&&t.data.version!==N&&j.setQueryData(p(t.data.id,t.data.version),t.data),t.data},x[3]=b,x[4]=j,x[5]=_,x[6]=N,x[7]=h):h=x[7];let k=!!b;return x[8]!==e?(y=e&&{select:e},x[8]=e,x[9]=y):y=x[9],x[10]!==C||x[11]!==h||x[12]!==k||x[13]!==y?(v={placeholderData:f,queryKey:C,queryFn:h,enabled:k,...y,staleTime:3e5},x[10]=C,x[11]=h,x[12]=k,x[13]=y,x[14]=v):v=x[14],(0,s.I)(v)}function f(e){return e}function g(e){return e?.version}}}]);
//# sourceMappingURL=packages_code-mirror_autocomplete_theme_ts-packages_code-mirror_extensions_help-panels_ts-pac-5c4426-9eee3302b62b.js.map